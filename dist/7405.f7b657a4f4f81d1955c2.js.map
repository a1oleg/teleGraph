{"version":3,"file":"7405.f7b657a4f4f81d1955c2.js","mappings":"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","sources":["webpack://telegram-t/./src/hooks/useImageLoader.ts","webpack://telegram-t/./src/components/common/PasswordMonkey.tsx","webpack://telegram-t/./src/hooks/schedulers/useTimeout.ts","webpack://telegram-t/./src/components/common/PasswordForm.tsx","webpack://telegram-t/./src/util/events/getPointerPosition.ts","webpack://telegram-t/./src/components/common/TrackingMonkey.tsx","webpack://telegram-t/./src/components/auth/AuthCode.tsx","webpack://telegram-t/./src/components/auth/AuthPassword.tsx","webpack://telegram-t/./src/components/auth/AuthRegister.tsx"],"sourcesContent":["import { useEffect, useRef } from '../lib/teact/teact';\n\nimport { preloadImage } from '../util/files';\nimport useAsync from './useAsync';\n\nexport type UseImageLoaderResult = {\n  image?: HTMLImageElement;\n};\n\nexport default function useImageLoader(file?: Blob): UseImageLoaderResult {\n  const urlRef = useRef<string | undefined>();\n\n  const { result: image } = useAsync(() => {\n    if (!file) {\n      return Promise.resolve(undefined);\n    }\n\n    if (urlRef.current) {\n      URL.revokeObjectURL(urlRef.current);\n    }\n\n    const url = URL.createObjectURL(file);\n    urlRef.current = url;\n\n    return preloadImage(url);\n  }, [file]);\n\n  useEffect(() => {\n    return () => {\n      if (urlRef.current) {\n        URL.revokeObjectURL(urlRef.current);\n        urlRef.current = undefined;\n      }\n    };\n  }, []);\n\n  return { image };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport { memo, useCallback } from '../../lib/teact/teact';\n\nimport { STICKER_SIZE_AUTH, STICKER_SIZE_AUTH_MOBILE, STICKER_SIZE_TWO_FA } from '../../config';\nimport { LOCAL_TGS_URLS } from './helpers/animatedAssets';\n\nimport useTimeout from '../../hooks/schedulers/useTimeout';\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useFlag from '../../hooks/useFlag';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nimport './PasswordMonkey.scss';\n\ntype OwnProps = {\n  isPasswordVisible: boolean;\n  isBig?: boolean;\n};\n\nconst PEEK_MONKEY_SHOW_DELAY = 2000;\nconst SEGMENT_COVER_EYES: [number, number] = [0, 50];\nconst SEGMENT_UNCOVER_EYE: [number, number] = [0, 20];\nconst SEGMENT_COVER_EYE: [number, number] = [20, 0];\n\nconst PasswordMonkey: FC<OwnProps> = ({ isPasswordVisible, isBig }) => {\n  const [isFirstMonkeyLoaded, markFirstMonkeyLoaded] = useFlag(false);\n  const [isPeekShown, markPeekShown] = useFlag(false);\n  const { isMobile } = useAppLayout();\n\n  const stikerSize = isMobile ? STICKER_SIZE_AUTH_MOBILE : STICKER_SIZE_AUTH;\n\n  useTimeout(markPeekShown, PEEK_MONKEY_SHOW_DELAY);\n  const handleFirstMonkeyLoad = useCallback(markFirstMonkeyLoaded, [markFirstMonkeyLoaded]);\n\n  return (\n    <div id=\"monkey\" className={isBig ? 'big' : ''}>\n      {!isFirstMonkeyLoaded && (\n        <div className=\"monkey-preview\" />\n      )}\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stikerSize}\n        className={isPeekShown ? 'hidden' : 'shown'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyClose}\n        playSegment={SEGMENT_COVER_EYES}\n        noLoop\n        onLoad={handleFirstMonkeyLoad}\n      />\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stikerSize}\n        className={isPeekShown ? 'shown' : 'hidden'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyPeek}\n        playSegment={isPasswordVisible ? SEGMENT_UNCOVER_EYE : SEGMENT_COVER_EYE}\n        noLoop\n      />\n    </div>\n  );\n};\n\nexport default memo(PasswordMonkey);\n","import { useEffect } from '../../lib/teact/teact';\n\nimport useLastCallback from '../useLastCallback';\n\nfunction useTimeout(callback: NoneToVoidFunction, delay?: number) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n\n    const id = setTimeout(() => savedCallback(), delay);\n    return () => clearTimeout(id);\n  }, [delay]);\n}\n\nexport default useTimeout;\n","import type { ChangeEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport type React from '../../lib/teact/teact';\nimport {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { MIN_PASSWORD_LENGTH } from '../../config';\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { IS_TAURI } from '../../util/browser/globalEnvironment';\nimport { IS_TOUCH_ENV } from '../../util/browser/windowEnvironment';\nimport buildClassName from '../../util/buildClassName';\nimport stopEvent from '../../util/stopEvent';\n\nimport useTimeout from '../../hooks/schedulers/useTimeout';\nimport useAppLayout from '../../hooks/useAppLayout';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Icon from './icons/Icon';\n\ntype OwnProps = {\n  submitLabel?: string;\n  error?: string;\n  hint?: string;\n  placeholder?: string;\n  description?: string;\n  isLoading?: boolean;\n  shouldDisablePasswordManager?: boolean;\n  shouldShowSubmit?: boolean;\n  shouldResetValue?: boolean;\n  isPasswordVisible?: boolean;\n  noRipple?: boolean;\n  onClearError: NoneToVoidFunction;\n  onChangePasswordVisibility: (state: boolean) => void;\n  onInputChange?: (password: string) => void;\n  onSubmit?: (password: string) => void;\n};\n\nconst PasswordForm: FC<OwnProps> = ({\n  isLoading = false,\n  isPasswordVisible,\n  error,\n  hint,\n  placeholder,\n  submitLabel,\n  description,\n  shouldShowSubmit,\n  shouldResetValue,\n  shouldDisablePasswordManager = false,\n  noRipple = false,\n  onClearError,\n  onChangePasswordVisibility,\n  onInputChange,\n  onSubmit,\n}) => {\n  const inputRef = useRef<HTMLInputElement>();\n\n  const lang = useLang();\n\n  const { isMobile } = useAppLayout();\n  const [password, setPassword] = useState('');\n  const [canSubmit, setCanSubmit] = useState(false);\n  const focusDelayTimeoutMs = isMobile ? 550 : 400;\n\n  useEffect(() => {\n    if (shouldResetValue) {\n      setPassword('');\n    }\n  }, [shouldResetValue]);\n\n  useTimeout(() => {\n    if (!IS_TOUCH_ENV) {\n      inputRef.current!.focus();\n    }\n  }, focusDelayTimeoutMs);\n\n  useEffect(() => {\n    if (error) {\n      requestMutation(() => {\n        inputRef.current!.focus();\n        inputRef.current!.select();\n      });\n    }\n  }, [error]);\n\n  function onPasswordChange(e: ChangeEvent<HTMLInputElement>) {\n    if (error) {\n      onClearError();\n    }\n\n    const { target } = e;\n    setPassword(target.value);\n    setCanSubmit(target.value.length >= MIN_PASSWORD_LENGTH);\n    if (onInputChange) {\n      onInputChange(target.value);\n    }\n  }\n\n  function togglePasswordVisibility() {\n    onChangePasswordVisibility(!isPasswordVisible);\n  }\n\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    if (isLoading) {\n      return;\n    }\n\n    if (canSubmit) {\n      onSubmit!(password);\n    }\n  }\n\n  function renderFakeInput() {\n    return (\n      <input\n        type=\"password\"\n        id=\"prevent_autofill\"\n        autoComplete=\"off\"\n        className=\"visually-hidden\"\n        tabIndex={-2}\n      />\n    );\n  }\n\n  return (\n    <form action=\"\" onSubmit={onSubmit ? handleSubmit : stopEvent} autoComplete=\"off\">\n      <div\n        className={buildClassName('input-group password-input', password && 'touched', error && 'error')}\n        dir={lang.isRtl ? 'rtl' : undefined}\n      >\n        {shouldDisablePasswordManager && renderFakeInput()}\n        <input\n          ref={inputRef}\n          className=\"form-control\"\n          type={isPasswordVisible ? 'text' : 'password'}\n          id=\"sign-in-password\"\n          value={password || ''}\n          autoComplete={shouldDisablePasswordManager ? 'one-time-code' : 'current-password'}\n          spellCheck={IS_TAURI ? false : undefined}\n          onChange={onPasswordChange}\n          maxLength={256}\n          dir=\"auto\"\n        />\n        <label>{error || hint || placeholder || lang('PasswordFormPlaceholder')}</label>\n        <div\n          className=\"div-button toggle-password\"\n          onClick={togglePasswordVisibility}\n          role=\"button\"\n          tabIndex={0}\n          title={lang('AriaPasswordToggle')}\n          aria-label={lang('AriaPasswordToggle')}\n        >\n          <Icon name={isPasswordVisible ? 'eye' : 'eye-crossed'} />\n        </div>\n      </div>\n      {description && <p className=\"description\">{description}</p>}\n      {onSubmit && (canSubmit || shouldShowSubmit) && (\n        <Button type=\"submit\" ripple={!noRipple} isLoading={isLoading} disabled={!canSubmit}>\n          {submitLabel || lang('PasswordFormSubmit')}\n        </Button>\n      )}\n    </form>\n  );\n};\n\nexport default memo(PasswordForm);\n","export default function getPointerPosition(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  if ('touches' in e) {\n    return {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n    };\n  }\n\n  return {\n    x: e.clientX,\n    y: e.clientY,\n  };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport { memo, useCallback, useState } from '../../lib/teact/teact';\n\nimport { STICKER_SIZE_AUTH, STICKER_SIZE_AUTH_MOBILE, STICKER_SIZE_TWO_FA } from '../../config';\nimport { LOCAL_TGS_URLS } from './helpers/animatedAssets';\n\nimport useAppLayout from '../../hooks/useAppLayout';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nimport './PasswordMonkey.scss';\n\ntype OwnProps = {\n  code: string;\n  codeLength: number;\n  trackingDirection: number;\n  isTracking: boolean;\n  isBig?: boolean;\n};\n\nconst TRACKING_START_FRAME = 15;\nconst TRACKING_END_FRAME = 180;\n\nconst TrackingMonkey: FC<OwnProps> = ({\n  code,\n  codeLength,\n  trackingDirection,\n  isTracking,\n  isBig,\n}) => {\n  const [isFirstMonkeyLoaded, setIsFirstMonkeyLoaded] = useState(false);\n  const { isMobile } = useAppLayout();\n  const trackningFramesPerSymbol = (TRACKING_END_FRAME - TRACKING_START_FRAME) / codeLength;\n  const stickerSize = isMobile ? STICKER_SIZE_AUTH_MOBILE : STICKER_SIZE_AUTH;\n\n  const handleFirstMonkeyLoad = useCallback(() => setIsFirstMonkeyLoaded(true), []);\n\n  function getTrackingFrames(): [number, number] {\n    const startFrame = (code && code.length > 1) || trackingDirection < 0\n      ? TRACKING_START_FRAME + trackningFramesPerSymbol * (code.length - 1)\n      : 0;\n    const endFrame = code.length === codeLength\n      ? TRACKING_END_FRAME\n      : TRACKING_START_FRAME + trackningFramesPerSymbol * code.length;\n\n    if (trackingDirection < 1) {\n      return [\n        endFrame,\n        startFrame,\n      ];\n    }\n\n    return [\n      startFrame,\n      endFrame,\n    ];\n  }\n\n  return (\n    <div id=\"monkey\" className={isBig ? 'big' : ''}>\n      {!isFirstMonkeyLoaded && (\n        <div className=\"monkey-preview\" />\n      )}\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stickerSize}\n        className={isTracking ? 'hidden' : undefined}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyIdle}\n        play={!isTracking}\n        onLoad={handleFirstMonkeyLoad}\n      />\n      <AnimatedSticker\n        size={isBig ? STICKER_SIZE_TWO_FA : stickerSize}\n        className={!isTracking ? 'hidden' : 'shown'}\n        tgsUrl={LOCAL_TGS_URLS.MonkeyTracking}\n        playSegment={isTracking ? getTrackingFrames() : undefined}\n        speed={2}\n        noLoop\n      />\n    </div>\n  );\n};\n\nexport default memo(TrackingMonkey);\n","import {\n  memo, useCallback, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { IS_TOUCH_ENV } from '../../util/browser/windowEnvironment';\nimport { pick } from '../../util/iteratees';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Icon from '../common/icons/Icon';\nimport TrackingMonkey from '../common/TrackingMonkey';\nimport InputText from '../ui/InputText';\nimport Loading from '../ui/Loading';\n\ntype StateProps = {\n  auth: GlobalState['auth'];\n};\n\nconst CODE_LENGTH = 5;\n\nconst AuthCode = ({\n  auth,\n}: StateProps) => {\n  const {\n    setAuthCode,\n    returnToAuthPhoneNumber,\n    clearAuthErrorKey,\n  } = getActions();\n\n  const { phoneNumber, isCodeViaApp, isLoading, errorKey } = auth;\n\n  const lang = useLang();\n  const inputRef = useRef<HTMLInputElement>();\n\n  const [code, setCode] = useState<string>('');\n  const [isTracking, setIsTracking] = useState(false);\n  const [trackingDirection, setTrackingDirection] = useState(1);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      inputRef.current!.focus();\n    }\n  }, []);\n\n  useHistoryBack({\n    isActive: true,\n    onBack: returnToAuthPhoneNumber,\n  });\n\n  const onCodeChange = useCallback((e: React.FormEvent<HTMLInputElement>) => {\n    if (errorKey) {\n      clearAuthErrorKey();\n    }\n\n    const { currentTarget: target } = e;\n    target.value = target.value.replace(/[^\\d]+/, '').substr(0, CODE_LENGTH);\n\n    if (target.value === code) {\n      return;\n    }\n\n    setCode(target.value);\n\n    if (!isTracking) {\n      setIsTracking(true);\n    } else if (!target.value.length) {\n      setIsTracking(false);\n    }\n\n    if (code && code.length > target.value.length) {\n      setTrackingDirection(-1);\n    } else {\n      setTrackingDirection(1);\n    }\n\n    if (target.value.length === CODE_LENGTH) {\n      setAuthCode({ code: target.value });\n    }\n  }, [errorKey, code, isTracking]);\n\n  function handleReturnToAuthPhoneNumber() {\n    returnToAuthPhoneNumber();\n  }\n\n  return (\n    <div id=\"auth-code-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <TrackingMonkey\n          code={code}\n          codeLength={CODE_LENGTH}\n          isTracking={isTracking}\n          trackingDirection={trackingDirection}\n        />\n        <h1>\n          {phoneNumber}\n          <div\n            className=\"auth-number-edit div-button\"\n            onClick={handleReturnToAuthPhoneNumber}\n            role=\"button\"\n            tabIndex={0}\n            title={lang('WrongNumber')}\n            aria-label={lang('WrongNumber')}\n          >\n            <Icon name=\"edit\" />\n          </div>\n        </h1>\n        <p className=\"note\">\n          {lang(isCodeViaApp ? 'SentAppCode' : 'LoginJustSentSms', undefined, {\n            withNodes: true,\n            withMarkdown: true,\n          })}\n        </p>\n        <InputText\n          ref={inputRef}\n          id=\"sign-in-code\"\n          label={lang('Code')}\n          onInput={onCodeChange}\n          value={code}\n          error={errorKey && lang.withRegular(errorKey)}\n          autoComplete=\"off\"\n          inputMode=\"numeric\"\n        />\n        {isLoading && <Loading />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): Complete<StateProps> => (\n    pick(global, ['auth'])\n  ),\n)(AuthCode));\n","import { memo, useCallback, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport useLang from '../../hooks/useLang';\n\nimport PasswordForm from '../common/PasswordForm';\nimport MonkeyPassword from '../common/PasswordMonkey';\n\ntype StateProps = {\n  auth: GlobalState['auth'];\n};\n\nconst AuthPassword = ({\n  auth,\n}: StateProps) => {\n  const { setAuthPassword, clearAuthErrorKey } = getActions();\n  const { isLoading, errorKey, hint } = auth;\n\n  const lang = useLang();\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleChangePasswordVisibility = useCallback((isVisible) => {\n    setShowPassword(isVisible);\n  }, []);\n\n  const handleSubmit = useCallback((password: string) => {\n    setAuthPassword({ password });\n  }, [setAuthPassword]);\n\n  return (\n    <div id=\"auth-password-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <MonkeyPassword isPasswordVisible={showPassword} />\n        <h1>{lang('LoginHeaderPassword')}</h1>\n        <p className=\"note\">{lang('LoginEnterPasswordDescription')}</p>\n        <PasswordForm\n          onClearError={clearAuthErrorKey}\n          error={errorKey && lang.withRegular(errorKey)}\n          hint={hint}\n          isLoading={isLoading}\n          isPasswordVisible={showPassword}\n          onChangePasswordVisibility={handleChangePasswordVisibility}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): Complete<StateProps> => (\n    pick(global, ['auth'])\n  ),\n)(AuthPassword));\n","import { memo, useCallback, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport useLang from '../../hooks/useLang';\n\nimport AvatarEditable from '../ui/AvatarEditable';\nimport Button from '../ui/Button';\nimport InputText from '../ui/InputText';\n\ntype StateProps = {\n  auth: GlobalState['auth'];\n};\n\nconst AuthRegister = ({\n  auth,\n}: StateProps) => {\n  const { signUp, clearAuthErrorKey, uploadProfilePhoto } = getActions();\n  const { isLoading, errorKey } = auth;\n\n  const lang = useLang();\n  const [isButtonShown, setIsButtonShown] = useState(false);\n  const [croppedFile, setCroppedFile] = useState<File | undefined>();\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n\n  const handleFirstNameChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    if (errorKey) {\n      clearAuthErrorKey();\n    }\n\n    const { target } = event;\n\n    setFirstName(target.value);\n    setIsButtonShown(target.value.length > 0);\n  }, [errorKey]);\n\n  const handleLastNameChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const { target } = event;\n\n    setLastName(target.value);\n  }, []);\n\n  function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    signUp({ firstName, lastName });\n\n    if (croppedFile) {\n      uploadProfilePhoto({ file: croppedFile });\n    }\n  }\n\n  return (\n    <div id=\"auth-registration-form\" className=\"custom-scroll\">\n      <div className=\"auth-form\">\n        <form action=\"\" method=\"post\" onSubmit={handleSubmit}>\n          <AvatarEditable onChange={setCroppedFile} />\n          <h2>{lang('YourName')}</h2>\n          <p className=\"note\">{lang('LoginRegisterDesc')}</p>\n          <InputText\n            id=\"registration-first-name\"\n            label={lang('LoginRegisterFirstNamePlaceholder')}\n            onChange={handleFirstNameChange}\n            value={firstName}\n            error={errorKey && lang.withRegular(errorKey)}\n            autoComplete=\"given-name\"\n          />\n          <InputText\n            id=\"registration-last-name\"\n            label={lang('LoginRegisterLastNamePlaceholder')}\n            onChange={handleLastNameChange}\n            value={lastName}\n            autoComplete=\"family-name\"\n          />\n          {isButtonShown && (\n            <Button type=\"submit\" ripple isLoading={isLoading}>{lang('Next')}</Button>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): Complete<StateProps> => (\n    pick(global, ['auth'])\n  ),\n)(AuthRegister));\n"],"names":["useImageLoader","file","urlRef","useRef","result","image","useAsync","Promise","resolve","undefined","current","URL","revokeObjectURL","url","createObjectURL","preloadImage","useEffect","SEGMENT_COVER_EYES","SEGMENT_UNCOVER_EYE","SEGMENT_COVER_EYE","memo","PasswordMonkey","isPasswordVisible","isBig","isFirstMonkeyLoaded","markFirstMonkeyLoaded","useFlag","isPeekShown","markPeekShown","isMobile","useAppLayout","stikerSize","STICKER_SIZE_AUTH_MOBILE","STICKER_SIZE_AUTH","useTimeout","handleFirstMonkeyLoad","useCallback","_jsxs","id","className","children","_jsx","AnimatedSticker","size","STICKER_SIZE_TWO_FA","tgsUrl","LOCAL_TGS_URLS","MonkeyClose","playSegment","noLoop","onLoad","MonkeyPeek","callback","delay","savedCallback","useLastCallback","setTimeout","clearTimeout","PasswordForm","isLoading","error","hint","placeholder","submitLabel","description","shouldShowSubmit","shouldResetValue","shouldDisablePasswordManager","noRipple","onClearError","onChangePasswordVisibility","onInputChange","onSubmit","inputRef","lang","useLang","password","setPassword","useState","canSubmit","setCanSubmit","focusDelayTimeoutMs","IS_TOUCH_ENV","focus","requestMutation","select","action","event","preventDefault","stopEvent","autoComplete","buildClassName","dir","isRtl","type","tabIndex","ref","value","spellCheck","IS_TAURI","onChange","e","target","length","MIN_PASSWORD_LENGTH","maxLength","onClick","role","title","Icon","name","Button","ripple","disabled","getPointerPosition","x","touches","clientX","y","clientY","TrackingMonkey","code","codeLength","trackingDirection","isTracking","setIsFirstMonkeyLoaded","trackningFramesPerSymbol","stickerSize","MonkeyIdle","play","MonkeyTracking","startFrame","endFrame","getTrackingFrames","speed","withGlobal","global","pick","AuthCode","auth","setAuthCode","returnToAuthPhoneNumber","clearAuthErrorKey","getActions","phoneNumber","isCodeViaApp","errorKey","setCode","setIsTracking","setTrackingDirection","useHistoryBack","isActive","onBack","onCodeChange","currentTarget","replace","substr","withNodes","withMarkdown","InputText","label","onInput","withRegular","inputMode","Loading","AuthPassword","setAuthPassword","showPassword","setShowPassword","handleChangePasswordVisibility","isVisible","handleSubmit","MonkeyPassword","AuthRegister","signUp","uploadProfilePhoto","isButtonShown","setIsButtonShown","croppedFile","setCroppedFile","firstName","setFirstName","lastName","setLastName","handleFirstNameChange","handleLastNameChange","method","AvatarEditable"],"ignoreList":[],"sourceRoot":""}