"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[6930],{8503(e,t,i){i.r(t),i.d(t,{AboutStarGiftModal:()=>Vi,ActiveGiftAuctionsModal:()=>mn,ChatRefundModal:()=>on,GiftAuctionAcquiredModal:()=>Ri,GiftAuctionBidModal:()=>Ti,GiftAuctionChangeRecipientModal:()=>Li,GiftAuctionInfoModal:()=>Pi,GiftAuctionModal:()=>wi,GiftDescriptionRemoveModal:()=>tn,GiftInfoModal:()=>Ai,GiftInfoValueModal:()=>bi,GiftLockedModal:()=>vi,GiftModal:()=>ti,GiftOfferAcceptModal:()=>rn,GiftRecipientPicker:()=>ni,GiftResalePriceComposerModal:()=>Gi,GiftStatusInfoModal:()=>Hi,GiftTransferConfirmModal:()=>en,GiftTransferModal:()=>Zi,GiftUpgradeModal:()=>yi,GiftWithdrawModal:()=>_i,PaidReactionModal:()=>ut,PriceConfirmModal:()=>ln,StarGiftPriceDecreaseInfoModal:()=>Ki,StarPaymentModal:()=>be,StarsBalanceModal:()=>fe,StarsGiftModal:()=>G,StarsGiftingPickerModal:()=>B,StarsSubscriptionModal:()=>Ve,StarsTransactionInfoModal:()=>Le});var n=i(84051),a=i(13439),r=i(70636),o=i(11597),s=i(87357),l=i(17142),c=i(4961),d=i(14),u=i(17712),m=i(59030),f=i(21849),p=i(84685),h=i(22337),A=i(1526);const g={modalDialog:"MFXAwnxJ",content:"Sl6xVf1R",main:"bTN9Jeph",headerInfo:"c6MiyJgW",logo:"StGLWvzb",logoBackground:"SyTXSfml",description:"kFe3mIZo",section:"BgfHkWd2",header:"zMtAGfXs",starHeaderText:"q3v8orGj",hiddenHeader:"bq3FnXT0",closeButton:"bDsDTkbe",avatar:"jK36xUj4",center:"v1PckUQn",secondaryInfo:"TDWSRfP9"},b=i.p+"GoldStar.fb6812e915ddfe27f504.svg",v=i.p+"stars-bg.dee4c4b73c7d21c2ec73.png";var N=i(20021);const G=(0,n.ph)((0,a.EK)((e,{modal:t})=>({user:t?.forUserId?(0,o.mBe)(e,t.forUserId):void 0}))(({modal:e,user:t})=>{const{closeStarsGiftModal:i,openInvoice:o,requestConfetti:G}=(0,a.ko)(),S=(0,n.li)(),C=Boolean(e?.isOpen),I=(0,d.A)(e),y=(0,m.A)(),[k,Y]=(0,n.J0)(),[B,w]=(0,n.J0)(!0);(0,n.vJ)(()=>{C||w(!0)},[C]);const D=(0,u.A)(()=>{const e=S.current;if(e&&C){const{top:t,left:i,width:n,height:a}=e.querySelector(".modal-content").getBoundingClientRect();G({top:t,left:i,width:n,height:a,withStars:!0})}});(0,n.vJ)(()=>{I?.isCompleted&&D()},[I,D]);const T=(0,u.A)(e=>{I&&(Y(e),o(t?{type:"starsgift",userId:t.id,stars:e.stars,currency:e.currency,amount:e.amount}:{type:"stars",stars:e.stars,currency:e.currency,amount:e.amount}))}),P=(0,u.A)(()=>{i()}),M=(0,n.Kr)(()=>{const e=y("lng_credits_summary_options_about").split("{link}");return[e[0],(0,N.Y)(p.A,{url:y("StarsTOSLink"),text:y("lng_credits_summary_options_about_link")}),e[1]]},[y]);return(0,N.Y)(h.A,{className:(0,s.A)(g.modalDialog),contentClassName:g.content,dialogRef:S,isSlim:!0,onClose:P,isOpen:C,hasAbsoluteCloseButton:!0,children:(0,N.FD)("div",{className:(0,s.A)(g.main,"custom-scroll"),onScroll:function(e){const{scrollTop:t}=e.currentTarget;w(t<=150)},children:[(0,N.Y)("div",{className:(0,s.A)(g.header,B&&g.hiddenHeader),children:(0,N.Y)("h2",{className:g.starHeaderText,children:y(t?"GiftStarsTitle":"Star.List.GetStars")})}),(0,N.Y)("div",{className:g.headerInfo,children:t?(0,N.FD)(N.FK,{children:[(0,N.Y)(f.A,{size:100,peer:t,className:g.avatar}),(0,N.Y)("img",{className:g.logoBackground,src:v,alt:"",draggable:!1})]}):(0,N.FD)(N.FK,{children:[(0,N.Y)("img",{className:g.logo,src:b,alt:"",draggable:!1}),(0,N.Y)("img",{className:g.logoBackground,src:v,alt:"",draggable:!1})]})}),(0,N.Y)("h2",{className:(0,s.A)(g.headerText,g.center),children:I?.isCompleted?t?(0,c.A)(y("Notification.StarsGift.SentYou",(0,l.Ad)(k.amount,k.currency,y.code)),["simple_markdown"]):(0,c.A)(y("StarsAcquiredInfo",k?.stars),["simple_markdown"]):y(t?"GiftStarsTitle":"Star.List.GetStars")}),(0,N.Y)("p",{className:g.description,children:t?(0,c.A)(y("ActionGiftStarsSubtitle",(0,r.F9)(y,t)),["simple_markdown"]):y("Stars.Purchase.GetStarsInfo")}),(0,N.FD)("div",{className:g.section,children:[(0,N.Y)(A.A,{options:I?.starsGiftOptions,onClick:T}),(0,N.Y)("div",{className:g.secondaryInfo,children:M})]})]})})}));var S=i(31481),C=i(90709),I=i(87894),y=i(79582),k=i(54960),Y=i(34642);const B=(0,n.ph)((0,a.EK)(e=>{const{chats:{listIds:t},currentUserId:i}=e;return{userIds:e.contactList?.userIds,activeListIds:t.active,archivedListIds:t.archived,currentUserId:i}})(({isOpen:e,currentUserId:t,activeListIds:i,archivedListIds:o,userIds:s})=>{const{closeStarsGiftingPickerModal:l,openStarsGiftModal:c}=(0,a.ko)(),d=(0,m.A)(),[f,p]=(0,n.J0)(""),h=(0,n.Kr)(()=>{const e=(0,a.mS)().users.byId,n=(0,I.Am)([...s||[],...i||[],...o||[]]),l=(0,r.PU)({ids:n,query:f,type:"user"});return(0,y.A)(l.filter(i=>{const n=e[i];return!(!n||n.isSupport||(0,C.tv)(n)||(0,C.PL)(n)||i===t||i===S.zv8)}))},[t,f,s,i,o]),A=(0,u.A)(e=>{e?.length&&(c({forUserId:e}),l())});return(0,N.Y)(Y.A,{className:"s3k01dTm",isOpen:e,onClose:l,title:d("GiftStarsTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,confirmButtonText:d("Continue"),onEnter:l,children:(0,N.Y)(k.A,{className:"cuI2eDIY",itemIds:h,filterValue:f,filterPlaceholder:d("Search"),onFilterChange:p,isSearchable:!0,withDefaultPadding:!0,withStatus:!0,onSelectedIdChange:A})})}));var w=i(30708),D=i(31460),T=i(76023),P=i(37661),M=i(39351),F=i(18276),U=i(64493),R=i(46222),x=i(24680),L=i(41036),K=i(526),O=i(86046),V=i(81949),E=i(9267);const q={root:"TtE8LQNJ",minimal:"nkV4JXHc",transition:"nXQS4E59",main:"JuWZY1ds",container:"mnhBs1uK",section:"lYkNd_gb",lastSection:"f749AI4g",sectionTitle:"FF8gm7MP",tos:"Vu6blJk9",hint:"Rs8WXoOz",topUpButton:"dc_DZoVF",tonBalanceContainer:"lorbW9II",tonBalance:"h2Fs3tOv",tonIconBalance:"Ut6GidJP",tonInUsd:"FdcdsB4l",tonIconLogo:"_hCjjyEv",description:"teXilLxe",header:"fnhXotO2",starHeaderText:"iUwego5s",botItem:"AhxcrKWn",hiddenHeader:"DZk6d6hF",noSeparator:"UwUaTrab",closeButton:"piD1PXHW",addStarsButton:"dqnGL2uh",addStarsIcon:"w9Db2eiK",balanceBlock:"Yk0OQBKC",balanceInfo:"p2dW9NOV",smallerText:"rUnPcfmE",balanceBottom:"F5BTkZ9G",modalBalance:"t8tMrx3y",starButton:"oOt4VBD2",paymentContent:"OReEUNTV",paymentImages:"oKorQYTC",paymentPhoto:"HGTrEtUF",avatarStar:"Wu10dXoa",paymentImageBackground:"os8jb_qv",paymentButton:"VzR5cibf",paymentButtonStar:"Uhg7yWxK",transactions:"Qvc0fTTH",subscriptions:"IX5BhCUF",tabs:"KZVEyKOX",pinned:"qRjh_2Wl",disclaimer:"bpVifdwH",amountBadge:"BPM7LKwo",loadMore:"TKmZjMyd",loadMoreIcon:"buepwtN1"},H=(0,n.ph)(({balance:e,className:t,withAddButton:i})=>{const n=(0,M.A)(),{openStarsBalanceModal:r}=(0,a.ko)();return(0,N.Y)("div",{className:(0,s.A)(q.balanceBlock,t),children:(0,N.FD)("div",{className:q.balanceInfo,children:[(0,N.Y)("span",{className:q.smallerText,children:n("StarsBalance")}),(0,N.Y)("div",{className:q.balanceBottom,children:e?.currency===S.ykW?(0,N.FD)(N.FK,{children:[(0,N.Y)(F.A,{name:"toncoin"}),void 0!==e?(0,l.UL)(e.amount,e.currency):"…"]}):(0,N.FD)(N.FK,{children:[(0,N.Y)(E.A,{type:"gold",size:"middle"}),void 0!==e&&e.currency===S.OUy?(0,O.ZF)(n,e):"…",i&&(0,N.Y)(V.A,{className:q.addStarsButton,onClick:()=>r({}),children:(0,N.Y)(F.A,{className:q.addStarsIcon,name:"add"})})]})})]})})});var z=i(17663),J=i(14242),W=i(63527);const j={root:"ZXnbeQxP",info:"zLaaDX3c",status:"HbF2qTB2",statusPricing:"AveGvpdV",amount:"_CBiOQcv",title:"k9ZIv5Pd",description:"FlRlxMx2",subtitle:"YN2J8dw6",statusPeriod:"MRrP7Oew",statusEnded:"pRHwfr8m",preview:"t6Syyhzd",subscriptionStar:"ftlbevPm"},_=(0,n.ph)(({subscription:e})=>{const{openStarsSubscriptionModal:t}=(0,a.ko)(),{peerId:i,pricing:n,until:s,isCancelled:l,title:d,photo:p}=e,h=(0,m.A)(),A=(0,W.Ay)(function(e){return t=>(0,o.PVB)(t,e)}(i)),g=(0,u.A)(()=>{t({subscription:e})});if(!A)return;const b=s<Date.now()/1e3,v=(0,z.A)(1e3*s,h.code,!0,"long");return(0,N.FD)("div",{className:j.root,onClick:g,children:[(0,N.FD)("div",{className:j.preview,children:[(0,N.Y)(f.A,{size:42,peer:A}),(0,N.Y)(E.A,{className:j.subscriptionStar,type:"gold",size:"small"})]}),(0,N.FD)("div",{className:j.info,children:[(0,N.Y)("h3",{className:j.title,children:(0,c.A)((0,r.F9)(h,A)||"")}),d&&(0,N.FD)("p",{className:j.subtitle,children:[p&&(0,N.Y)(f.A,{webPhoto:p,size:"micro"}),(0,c.A)(d)]}),(0,N.Y)("p",{className:j.description,children:h(b?"StarsSubscriptionExpired":l?"StarsSubscriptionExpires":"StarsSubscriptionRenews",v)})]}),(0,N.Y)("div",{className:j.status,children:l||b?(0,N.Y)("div",{className:j.statusEnded,children:h(b?"StarsSubscriptionStatusExpired":"StarsSubscriptionStatusCancelled")}):(0,N.FD)(N.FK,{children:[(0,N.FD)("div",{className:j.statusPricing,children:[(0,N.Y)(E.A,{className:j.star,type:"gold",size:"adaptive"}),(0,N.Y)("span",{className:j.amount,children:(0,J.Sm)(n.amount)})]}),(0,N.Y)("div",{className:j.statusPeriod,children:h("StarsParticipantSubscriptionPerMonth")})]})})]})});var Q=i(58968),X=i(66833);function $(e,t,i){if(i.paidMessages)return t("PaidMessageTransaction",{count:i.paidMessages},{withNodes:!0,pluralValue:i.paidMessages});if(i.isGiftResale)return Z(i.amount)?t("StarGiftSaleTransaction"):t("StarGiftPurchaseTransaction");if(i.isPostsSearch)return t("PostsSearchTransaction");if(i.isDropOriginalDetails)return t("DropOriginalDetailsTransaction");if(i.isPrepaidUpgrade)return t("GiftPrepaidUpgradeTransactionTitle");if(i.isStarGiftAuctionBid)return Z(i.amount)?t("StarGiftAuctionBidTransaction"):t("StarGiftAuctionBidRefundedTransaction");if(i.starRefCommision)return e("StarTransactionCommission",(0,J.l9)(i.starRefCommision));if(i.isGiftUpgrade)return e("Gift2TransactionUpgraded");if(i.extendedMedia)return e("StarMediaPurchase");if(i.subscriptionPeriod)return i.title||e("StarSubscriptionPurchase");if(i.isReaction)return e("StarsReactionsSent");if(i.giveawayPostId)return e("StarsGiveawayPrizeReceived");if(i.isMyGift)return e("StarsGiftSent");if(i.isGift)return i.amount.currency===S.ykW?t("TonGiftReceived"):e("StarsGiftReceived");if(i.starGift)return Z(i.amount)?e("Gift2TransactionSent"):e("Gift2ConvertedTitle");const n=i.peer&&(0,O.MA)(i)&&(0,O.Pc)(i)||void 0;return n?n.title||e(n.titleKey):i.title}function Z(e){return e.currency===S.OUy?e.amount?e.amount<0:e.nanos<0:e.amount<0}var ee=i(79577),te=i(40558),ie=i(62587),ne=i(27860);const ae={root:"jQkp75Gb",preview:"OYGSN3PF",count:"KX1yz2Jy",thumb:"EvinKr5k",noOutline:"KSAAsUDv",itemCount1:"GxDajfX_",itemCount2:"jXuZoxq8",itemCount3:"TPn3XGHJ",blurry:"hWZuxLS8",full:"w56QPFhl",fadeIn:"ds43W8Wq"};function re({boughtMedia:e,index:t,className:i}){const n=e.video||e.photo,a=(0,C.VO)(n,"pictogram"),r=(0,C.VD)(n),o=(0,ie.A)(a);return(0,N.FD)("div",{className:(0,s.A)(ae.thumb,void 0!==t&&`stars-transaction-media-${t}`,i),children:[r&&(0,N.Y)("img",{className:ae.blurry,src:r,alt:""}),o&&(0,N.Y)("img",{className:ae.full,src:o,alt:""})]})}const oe=(0,n.ph)(({media:e,className:t,isTransactionPreview:i,onClick:n})=>{const a=Math.min(e.length,i?2:3),r="mediaType"in e[0];return(0,N.FD)("div",{className:(0,s.A)(ae.root,ae[`itemCount${a}`],i&&ae.preview,t),dir:"rtl",onClick:n,children:[e.slice(0,a).reverse().map((e,t,n)=>{const a=n.length-t-1;return"mediaType"in e?(0,N.Y)(ne.A,{className:ae.thumb,isVisible:!0,width:e.width,height:e.height,thumbDataUri:e.thumbnail?.dataUri}):(0,N.Y)(re,{className:(0,s.A)(i&&a>0&&ae.noOutline),boughtMedia:e,index:a})}),r&&(0,N.FD)("div",{className:ae.count,children:[(0,N.Y)(F.A,{name:"stars-lock"}),e.length>1?e.length:""]})]})}),se={root:"aHAxv_Jg",info:"oyYrn3II",stars:"K5lc75ku",amount:"QLQPuLAr",title:"e0pK8CJ_",description:"xbERdDMQ",date:"l6CwQ0Ev",positive:"P_42_ZWR",negative:"TGjnLJfH",preview:"cnjGihOT",subscriptionStar:"z43YvnDX",uniqueGiftBackground:"eNvzMw2p",giftSticker:"U3dqmnM4"},le=(0,n.ph)(({transaction:e,className:t})=>{const{openStarsTransactionModal:i}=(0,a.ko)(),{date:l,amount:d,photo:p,peer:h,extendedMedia:A,subscriptionPeriod:g}=e,b=(0,M.A)(),v=(0,m.A)(),G="peer"===h.type?h.id:void 0,C=(0,n.hb)(e=>G?(0,o.PVB)(e,G):void 0,[G]),I=(0,W.Ay)(C),y=e.starGift,k="starGiftUnique"===y?.type,Y=y&&(0,X.yQ)(y),B=(0,n.Kr)(()=>{let t,i,n,a=$(v,b,e);if((0,O.MA)(e)){const i=(0,O.Pc)(e);a=i.title||v(i.titleKey),t=v(i.subtitleKey),n=i}else t=I&&(0,r.F9)(v,I),n=I||Q.lw;return(e.isGiftUpgrade||e.isDropOriginalDetails)&&"starGiftUnique"===e.starGift?.type&&(t=b("GiftUnique",{title:e.starGift.title,number:e.starGift.number})),e.isGiftResale&&"starGiftUnique"===e.starGift?.type&&(t=b("GiftUnique",{title:e.starGift.title,number:e.starGift.number})),e.isPostsSearch&&(a=$(v,b,e),t=void 0),e.photo&&(n=void 0),e.isRefund&&(i=v("StarsRefunded")),e.hasFailed&&(i=v("StarsFailed")),e.isPending&&(i=v("StarsPending")),{title:a,description:t,avatarPeer:n,status:i}},[v,b,I,e]),w=(0,n.Kr)(()=>{if(k){const{backdrop:e}=(0,X.uc)(y),t=[e.centerColor,e.edgeColor];return(0,N.FD)(N.FK,{children:[(0,N.Y)(te.A,{className:se.uniqueGiftBackground,backgroundColors:t}),(0,N.Y)(ee.A,{className:se.giftSticker,sticker:Y,size:36,play:!1})]})}return Y?(0,N.Y)(ee.A,{className:se.giftSticker,sticker:Y,size:36,play:!1}):A?(0,N.Y)(oe,{media:A,isTransactionPreview:!0}):(0,N.FD)(N.FK,{children:[(0,N.Y)(f.A,{size:42,webPhoto:p,peer:B.avatarPeer}),Boolean(g)&&(0,N.Y)(E.A,{className:se.subscriptionStar,type:"gold",size:"small"})]})},[k,A,p,B.avatarPeer,g,y,Y]),D=(0,u.A)(()=>{i({transaction:e})}),T=Z(d)?se.negative:se.positive;return(0,N.FD)("div",{className:(0,s.A)(se.root,t),onClick:D,children:[(0,N.Y)("div",{className:se.preview,children:w}),(0,N.FD)("div",{className:se.info,children:[(0,N.Y)("h3",{className:se.title,children:B.title}),B.description&&(0,N.Y)("p",{className:se.description,children:(0,c.A)(B.description)}),(0,N.FD)("p",{className:se.date,children:[(0,z.L2)(1e3*l,v.code,!0),B.status&&` — (${B.status})`]})]}),(0,N.FD)("div",{className:se.stars,children:[(0,N.Y)("span",{className:(0,s.A)(se.amount,T),children:(0,O.hk)(b,d)}),d.currency===S.OUy&&(0,N.Y)(E.A,{className:se.star,type:"gold",size:"adaptive"}),d.currency===S.ykW&&(0,N.Y)(F.A,{name:"toncoin",className:T})]})]})}),ce=3.5*T.$,de=["all","inbound","outbound"],ue=["StarsTransactionsAll","StarsTransactionsIncoming","StarsTransactionsOutgoing"],me="StarsTransactionItem",fe=(0,n.ph)((0,a.EK)((e,{modal:t})=>({shouldForceHeight:t?.currency===S.ykW?Boolean(e.ton?.history?.all?.transactions.length):Boolean(e.stars?.history?.all?.transactions.length),starsBalanceState:e.stars,tonBalanceState:e.ton,canBuyPremium:!(0,o.n_C)(e),tonUsdRate:e.appConfig.tonUsdRate,tonTopupUrl:e.appConfig.tonTopupUrl,animationLevel:(0,w.lS)(e).animationLevel}))(({modal:e,starsBalanceState:t,tonBalanceState:i,canBuyPremium:d,shouldForceHeight:f,tonUsdRate:g,tonTopupUrl:b,animationLevel:v})=>{const{closeStarsBalanceModal:G,loadStarsTransactions:I,loadStarsSubscriptions:y,openStarsGiftingPickerModal:k,openInvoice:Y,openUrl:B}=(0,a.ko)(),w=e?.currency||S.OUy,T=w===S.ykW?i:t,{balance:O,history:V}=T||{},{subscriptions:E}=w===S.OUy&&t||{},z=(0,m.A)(),J=(0,M.A)(),[W,j]=(0,n.J0)(!0),[Q,X,$]=(0,P.A)(!1),[Z,ee]=(0,n.J0)(0),[te,ie,ne]=(0,P.A)(),ae=(0,n.li)(),re=Boolean(e&&(t||i)),{originStarsPayment:oe,originReaction:se,originGift:fe,topup:pe}=e||{},he=oe||se||fe||pe,Ae=oe?.form?.invoice?.totalAmount||oe?.subscriptionInfo?.subscriptionPricing?.amount||se?.amount||fe?.gift.stars||pe?.balanceNeeded,ge=Ae?Ae-(O?.amount||0):void 0,be=(0,n.Kr)(()=>{const e=(0,a.mS)();if(se){const t=(0,o.hds)(e,se.chatId);if(!t)return;return z("StarsNeededTextReactions",(0,C.Js)(z,t))}if(oe){const t=oe.form?.botId?(0,o.mBe)(e,oe.form.botId):void 0;if(!t)return;return z("StarsNeededText",(0,C.Yg)(t))}if(fe){const t=(0,o.mBe)(e,fe.peerId);if(!t)return;return z("StarsNeededTextGift",(0,r.F9)(J,t))}return"subs"===pe?.purpose?z("StarsNeededTextLink"):pe?.purpose===S.D3m?J("StarsNeededTextSendPaidMessages",void 0,{withMarkdown:!0,withNodes:!0}):void 0},[se,oe,fe,pe?.purpose,J,z]),ve=Boolean(V?.all?.transactions.length&&!he),Ne=!he,Ge=(0,n.Kr)(()=>{const e=V?.all?.transactions.length||0;return 1===e?"35.5rem":2===e?"39.25rem":3===e?"43rem":"45rem"},[V?.all?.transactions.length]),Se=(0,n.Kr)(()=>ue.map(e=>({title:J(e)})),[J]);(0,n.vJ)(()=>{re||(j(!0),ee(0),ne(),$())},[re]),(0,n.vJ)(()=>{he?ie():ne()},[he]);const Ce=(0,n.Kr)(()=>{if(!re)return;const e=z("lng_credits_summary_options_about").split("{link}");return[e[0],(0,N.Y)(p.A,{url:z("StarsTOSLink"),text:z("lng_credits_summary_options_about_link")}),e[1]]},[re,z]),Ie=(0,u.A)(()=>{I({type:de[Z],isTon:w===S.ykW})}),ye=(0,u.A)(()=>{y()}),ke=(0,u.A)(()=>{k({})}),Ye=(0,u.A)(e=>{const t=oe?.inputInvoice;let i;switch(t?.type){case"message":i=t.chatId;break;case"slug":{const e=oe?.form;i=e?.botId;break}}se&&(i=se.chatId),Y({type:"stars",stars:e.stars,currency:e.currency,amount:e.amount,spendPurposePeerId:i})}),Be=(0,u.A)(()=>{B({url:b})});return(0,N.Y)(h.A,{className:(0,s.A)(q.root,!f&&!te&&q.minimal),isOpen:re,onClose:G,dialogStyle:`--modal-height: ${Ge}`,hasAbsoluteCloseButton:!0,children:(0,N.FD)("div",{className:(0,s.A)(q.main,"custom-scroll"),onScroll:function(e){const{scrollTop:t}=e.currentTarget;if(j(t<=150),ae.current){const{top:t}=ae.current.getBoundingClientRect(),{top:i}=e.currentTarget.getBoundingClientRect();t-i<=ce?X():$()}},children:[w!==S.ykW&&(0,N.Y)(H,{balance:O,className:q.modalBalance}),(0,N.Y)("div",{className:(0,s.A)(q.header,W&&q.hiddenHeader,Q&&q.noSeparator),children:(0,N.Y)("h2",{className:q.starHeaderText,children:z("TelegramStars")})}),(0,N.Y)("div",{className:q.section,children:w===S.ykW?(()=>{const e=(0,l.UL)(O?.amount||0,S.ykW);return(0,N.FD)(N.FK,{children:[(0,N.Y)(K.A,{model:"speeding-diamond",color:"blue",title:J("CurrencyTon"),description:J("DescriptionAboutTon"),isDisabled:!re}),(0,N.FD)("div",{className:q.tonBalanceContainer,children:[(0,N.FD)("div",{className:q.tonBalance,children:[(0,N.Y)(F.A,{name:"toncoin",className:q.tonIconBalance}),e]}),Boolean(g)&&(0,N.Y)("span",{className:q.tonInUsd,children:`≈ ${(0,l.Ad)((0,l.C)(O?.amount||0,g,!0),"USD",J.code)}`})]}),(0,N.Y)(U.A,{className:q.topUpButton,onClick:Be,fluid:!0,children:J("ButtonTopUpViaFragment")}),w===S.ykW&&(0,N.Y)("div",{className:q.hint,children:J("TonModalHint")})]})})():(0,N.FD)(N.FK,{children:[(0,N.Y)(K.A,{model:"swaying-star",color:"gold",title:ge?z("StarsNeededTitle",Ae):z("TelegramStars"),description:(0,c.A)(be||z("TelegramStarsInfo"),["simple_markdown","emoji"]),isDisabled:!re}),d&&!te&&(0,N.Y)(U.A,{className:q.starButton,onClick:ie,fluid:!0,children:z("Star.List.BuyMoreStars")}),d&&!te&&Ne&&(0,N.Y)(U.A,{isText:!0,noForcedUpperCase:!0,className:q.starButton,fluid:!0,onClick:ke,children:z("TelegramStarsGift")}),te&&t?.topupOptions&&(0,N.Y)(A.A,{starsNeeded:ge,options:t.topupOptions,onClick:Ye})]})}),te&&(0,N.Y)("div",{className:q.tos,children:Ce}),ve&&Boolean(E?.list.length)&&(0,N.FD)("div",{className:q.section,children:[(0,N.Y)("h3",{className:q.sectionTitle,children:z("StarMySubscriptions")}),(0,N.FD)("div",{className:q.subscriptions,children:[E?.list.map(e=>(0,N.Y)(_,{subscription:e},e.id)),E?.nextOffset&&(0,N.FD)(U.A,{isText:!0,disabled:E.isLoading,size:"smaller",noForcedUpperCase:!0,className:q.loadMore,onClick:ye,children:[(0,N.Y)(F.A,{name:"down",className:q.loadMoreIcon}),z("StarMySubscriptionsExpand")]})]})]}),ve&&(0,N.FD)("div",{className:q.container,children:[(0,N.Y)("div",{className:q.lastSection,children:(0,N.Y)(L.Ay,{name:(0,D.P)("slideOptimized",v,void 0,J.isRtl),activeKey:Z,renderCount:ue.length,shouldRestoreHeight:!0,className:q.transition,children:(0,N.Y)(R.A,{onLoadMore:Ie,items:V?.[de[Z]]?.transactions,scrollContainerClosest:`.${q.main}`,itemSelector:`.${me}`,className:q.transactions,noFastList:!0,noScrollRestoreOnTop:!0,children:V?.[de[Z]]?.transactions.map(e=>(0,N.Y)(le,{transaction:e,className:me},`${e.id}-${e.isRefund}`))})})}),(0,N.Y)(x.A,{ref:ae,className:(0,s.A)(q.tabs,Q&&q.pinned),tabClassName:q.tab,activeTab:Z,tabs:Se,onSwitchTab:ee})]})]})})}));var pe=i(48775),he=i(29886),Ae=i(84991),ge=i(10187);const be=(0,n.ph)((0,a.EK)((e,{modal:t})=>{const i=t?.form?.botId?(0,o.mBe)(e,t.form.botId):void 0,n="message"===t?.inputInvoice?.type?t.inputInvoice:void 0,a=n?(0,o.O5q)(e,n.chatId,n.messageId):void 0,r=n?(0,o.hds)(e,n.chatId):void 0,s=a?.content.paidMedia;return{bot:i,starsBalanceState:e.stars,paidMediaMessage:s?a:void 0,paidMediaChat:s?r:void 0}})(({modal:e,bot:t,starsBalanceState:i,paidMediaMessage:r,paidMediaChat:o})=>{const{closeStarsPaymentModal:l,openStarsBalanceModal:d,sendStarPaymentForm:A}=(0,a.ko)(),[g,b,G]=(0,P.A)(),S=Boolean(e?.inputInvoice&&i),I=(0,he.A)(e),y=e||I,{form:k,subscriptionInfo:Y}=y||{},B=k?.invoice?.totalAmount||Y?.subscriptionPricing?.amount,w=Boolean(k?.invoice.subscriptionPeriod),D=!Y?.subscriptionPricing,T=k?.photo,F=(0,m.A)(),R=(0,M.A)();(0,n.vJ)(()=>{S||G()},[S]);const x=(0,n.Kr)(()=>{if(!y?.inputInvoice)return"";const e=(0,C.Yg)(t),i=F("Stars.Intro.PurchasedText.Stars",B);if(r){const e=r.content.paidMedia.extendedMedia,t=e.every(e=>!e.duration),n=e.every(e=>Boolean(e.duration)),a=F(t?"Stars.Transfer.Photos":n?"Stars.Transfer.Videos":"Media",e.length),s=(0,C.Js)(F,o);return F("Stars.Transfer.UnlockInfo",[a,s,i])}return Y?R("StarsSubscribeText",{chat:Y.title,amount:B},{withNodes:!0,withMarkdown:!0,pluralValue:B}):w?R("StarsSubscribeBotText",{name:k.title,amount:B,bot:e},{pluralValue:B}):F("Stars.Transfer.Info",[k.title,e,i])},[y?.inputInvoice,t,F,B,r,Y,w,k,o,R]),L=(0,n.Kr)(()=>{if(Y)return R("StarsSubscribeInfo",{link:(0,N.Y)(p.A,{url:R("StarsSubscribeInfoLink"),text:R("StarsSubscribeInfoLinkText")})},{withNodes:!0})},[Y,R]),K=(0,n.Kr)(()=>{if(Y)return(0,C.nr)(Y)},[Y]),O=(0,u.A)(()=>{const t=i?.balance;void 0!==B&&void 0!==t&&(B>t.amount?d({originStarsPayment:e}):(A({}),b()))});return(0,N.FD)(h.A,{contentClassName:q.paymentContent,isOpen:S,hasAbsoluteCloseButton:!0,isSlim:!0,onClose:l,children:[(0,N.Y)(H,{balance:i?.balance,className:q.modalBalance}),(0,N.FD)("div",{className:q.paymentImages,dir:R.isRtl?"ltr":"rtl",children:[r?(0,N.Y)(oe,{media:r.content.paidMedia.extendedMedia}):K?(0,N.FD)(N.FK,{children:[(0,N.Y)(f.A,{className:q.paymentPhoto,peer:K,size:"giant"}),(0,N.Y)(E.A,{type:"gold",size:"adaptive",className:q.avatarStar})]}):(0,N.Y)(Ae.A,{peer:T?void 0:t,avatarWebPhoto:T,avatarSize:"giant",badgeIcon:"star",badgeText:(0,J.Sm)(B),badgeClassName:q.amountBadge,className:q.paymentPhoto}),(0,N.Y)("img",{className:q.paymentImageBackground,src:v,alt:"",draggable:!1})]}),(0,N.Y)("h2",{className:q.headerText,children:F(K?"StarsSubscribeTitle":"StarsConfirmPurchaseTitle")}),D&&(0,N.Y)(ge.A,{className:q.botItem,peerId:k?.botId}),(0,N.Y)("div",{className:q.description,children:(0,c.A)(x,["simple_markdown","emoji"])}),(0,N.Y)(U.A,{className:q.paymentButton,onClick:O,isLoading:g,children:R(w?"StarsSubscribeBotButtonMonth":"StarsPay",{amount:(0,pe.U2)(R,B,{asFont:!0,className:q.paymentButtonStar})},{withNodes:!0})}),Boolean(L)&&(0,N.Y)("div",{className:(0,s.A)(q.disclaimer,q.smallerText),children:L})]})}));var ve=i(89925),Ne=i(85982),Ge=i(97040),Se=i(70046),Ce=i(96454),Ie=i(95807),ye=i(537),ke=i(43874),Ye=i(80140);const Be="biAUzmLA",we="hsDNs5hG",De="APNjRx1K",Te=(0,n.ph)((0,a.EK)(e=>{const{currentUserId:t}=e,i=t?(0,o.mBe)(e,t):void 0,n=i?.emojiStatus,a=e.collectibleEmojiStatuses?.statuses;return{currentUserEmojiStatus:n,collectibleEmojiStatuses:a}})(({savedGift:e,currentUserEmojiStatus:t,collectibleEmojiStatuses:i})=>{const{openGiftTransferModal:r,openGiftResalePriceComposerModal:s,openGiftStatusInfoModal:l,setEmojiStatus:c,updateStarGiftPrice:d,showNotification:f,closeGiftInfoModal:p}=(0,a.ko)(),h=(0,M.A)(),A=(0,m.A)(),g=e?.gift,b="starGiftUnique"===g?.type?g.resellPrice:void 0,v=(0,a.mS)(),G=(0,o.nTw)(v).giftInfoModal,C=G?.peerId,I="starGiftUnique"===g?.type?g.slug:void 0,y=(0,n.Kr)(()=>{if(I)return i?.find(e=>"collectible"===e.type&&e.slug===I)},[I,i]),k="collectible"===t?.type?t.slug:void 0,Y=void 0!==I&&k===I,B=Boolean(y)&&!Y,w=(0,u.A)(()=>{e&&"starGiftUnique"===e?.gift.type&&(e.canTransferAt&&e.canTransferAt>(0,Ye.Fm)()?f({message:{key:"NotificationGiftCanTransferAt",variables:{date:(0,z.U)(A,1e3*e.canTransferAt)}}}):r({gift:e}))}),D=(0,u.A)(()=>{Y?c({emojiStatus:{type:"regular",documentId:S.zNY}}):y&&l({emojiStatus:y})}),T=(0,u.A)(()=>{e&&C&&(e.canResellAt&&e.canResellAt>(0,Ye.Fm)()?f({message:{key:"NotificationGiftCanResellAt",variables:{date:(0,z.U)(A,1e3*e.canResellAt)}}}):s({peerId:C,gift:e}))}),P=(0,u.A)(()=>{e&&"starGiftUnique"===e.gift.type&&e.inputGift&&(p(),d({gift:e.inputGift,price:{currency:S.OUy,amount:0,nanos:0}}),f({icon:"unlist-outline",message:{key:"NotificationGiftIsUnlist",variables:{gift:h("GiftUnique",{title:e.gift.title,number:e.gift.number})}}}))});return(0,N.FD)("div",{className:"feHNN0j8",children:[(0,N.Y)(U.A,{color:"transparentBlured",iconName:"gift-transfer-inline",iconAlignment:"top",iconClassName:De,onClick:w,ariaLabel:h("GiftInfoTransfer"),noForcedUpperCase:!0,fluid:!0,className:Be,children:(0,N.Y)("span",{className:we,children:h("GiftInfoTransfer")})}),(B||!Y)&&(0,N.Y)(U.A,{color:"transparentBlured",iconName:Y?"crown-take-off":"crown-wear",iconAlignment:"top",iconClassName:De,onClick:B||Y?D:void 0,disabled:!B&&!Y,ariaLabel:h(Y?"GiftInfoTakeOff":"GiftInfoWear"),noForcedUpperCase:!0,fluid:!0,className:Be,children:(0,N.Y)("span",{className:we,children:h(Y?"GiftInfoTakeOff":"GiftInfoWear")})}),!b&&(0,N.Y)(U.A,{color:"transparentBlured",iconName:"sell",iconAlignment:"top",iconClassName:De,onClick:T,ariaLabel:h("Sell"),noForcedUpperCase:!0,fluid:!0,className:Be,children:(0,N.Y)("span",{className:we,children:h("Sell")})}),Boolean(b)&&(0,N.Y)(U.A,{color:"transparentBlured",iconName:"unlist",iconAlignment:"top",iconClassName:De,onClick:P,ariaLabel:h("GiftInfoUnlist"),noForcedUpperCase:!0,fluid:!0,className:Be,children:(0,N.Y)("span",{className:we,children:h("GiftInfoUnlist")})})]})})),Pe={root:"irv1C8bo",withManageButtons:"QcTw5OSp",sticker:"a1ASgPwu",withBadge:"OFWOLtAH",subtitleBadge:"V7kDVPLm",badge:"PAmbIL6y",radialPattern:"UvhsGZLf",amount:"zTVWZg63",transition:"Tu6_OHoq",transitionSlide:"iUTKLzTN",title:"ECTvfOda",subtitle:"S6JwvHWD"},Me=(0,n.ph)(({modelAttribute:e,backdropAttribute:t,patternAttribute:i,title:r,badge:o,subtitle:l,subtitlePeer:c,className:d,resellPrice:u,showManageButtons:m,savedGift:f})=>{const{openChat:p}=(0,a.ko)(),{isMobile:h}=(0,ke.Ay)(),A=(0,M.A)(),[g,b,v]=(0,P.A)(!1),G=(0,ye.A)([e,t,i]),S=t?.textColor,C=(0,n.Kr)(()=>{const e=[t.centerColor,t.edgeColor];return(0,N.Y)(te.A,{className:Pe.radialPattern,canvasClassName:Pe.radialPatternCanvas,backgroundColors:e,patternIcon:i.sticker,yPosition:7.5*T.$,maxRadius:.26,patternSize:h?14:16,ovalFactor:1.2})},[t,i,h]);return(0,N.FD)("div",{className:(0,s.A)(Pe.root,"interactive-gift",m&&Pe.withManageButtons,o&&Pe.withBadge,d),children:[(0,N.FD)(L.Ay,{className:Pe.transition,slideClassName:(0,s.A)(Pe.transitionSlide),activeKey:G,direction:1,name:"zoomBounceSemiFade",children:[C,(0,N.Y)(ee.A,{className:Pe.sticker,sticker:e.sticker,size:120,noLoop:!g,onMouseEnter:Ce.TF?void 0:b,onMouseLeave:Ce.TF?void 0:v})]}),Boolean(o)&&(0,N.Y)("div",{className:Pe.badge,children:o}),Boolean(r)&&(0,N.Y)("h1",{className:Pe.title,children:r}),Boolean(l)&&(0,N.Y)("div",{className:(0,s.A)(Pe.subtitle,c&&Pe.subtitleBadge),style:(0,Ie.A)(S&&`color: ${S}`),onClick:()=>{c&&p({id:c.id})},children:l}),f&&m&&(0,N.Y)(Te,{savedGift:f}),u&&(0,N.FD)("p",{className:Pe.amount,children:[(0,N.Y)("span",{children:(0,O.hk)(A,u)}),"XTR"===u.currency&&(0,N.Y)(E.A,{type:"gold",size:"middle"}),"TON"===u.currency&&(0,N.Y)(F.A,{name:"toncoin"})]})]})}),Fe="qBOIq6Jn",Ue="sso9uZM6",Re="NuWOY7ED",xe=[0,-50],Le=(0,n.ph)((0,a.EK)((e,{modal:t})=>{const i="peer"===t?.transaction?.peer?.type&&t.transaction.peer.id,n=i?(0,o.PVB)(e,i):void 0,a=e.appConfig.starsPaidMessageCommissionPermille,r=t?.transaction.amount,s=t?.transaction.isGift?r?.currency===S.OUy?(0,o.WLj)(e,r?.amount):(0,o.OD9)(e,r?.amount):void 0;return{peer:n,canPlayAnimatedEmojis:(0,o.BWX)(e),topSticker:s,paidMessageCommission:a}})(({modal:e,peer:t,canPlayAnimatedEmojis:i,topSticker:r,paidMessageCommission:o})=>{const{showNotification:l,openMediaViewer:c,closeStarsTransactionModal:d}=(0,a.ko)(),h=(0,M.A)(),A=(0,m.A)(),{transaction:g}=e||{},b=(0,n.li)(),v=(0,u.A)(()=>{const e=g?.extendedMedia;e&&c({origin:ve.TQ.StarsTransaction,standaloneMedia:e.flatMap(e=>Object.values(e))})}),G=(0,u.A)(()=>{b.current?.()}),I=(0,u.A)(e=>{b.current=e}),y=(0,n.Kr)(()=>{if(!g)return;const{giveawayPostId:e,photo:n,amount:a,isGiftUpgrade:c,isDropOriginalDetails:d,starGift:u,isGiftResale:m,starRefCommision:b}=g,y=g?.starGift,k="starGiftUnique"===y?.type,Y=g?.starGift?(0,X.yQ)(g.starGift):r,B=k?(0,X.uc)(y):void 0,w=g.peer&&(0,O.MA)(g)&&(0,O.Pc)(g)||void 0,D="peer"===g.peer?.type?g.peer.id:void 0,T=g.peer&&A(function(e){switch(e.type){case"appStore":return"AppStore";case"playMarket":return"PlayMarket";case"fragment":return"Fragment";case"premiumBot":return"StarsTransactionBot";case"ads":return"StarsTransactionAds";case"api":return"Stars.Intro.Transaction.TelegramBotApi.Subtitle";default:return"Stars.Transaction.Unsupported.Title"}}(g.peer)),P=$(A,h,g),M=t&&g.messageId&&!c&&!d?(0,C.yt)(t,void 0,g.messageId):void 0,U=t&&e?(0,C.yt)(t,void 0,e):void 0,R=g.extendedMedia,x=R?.length||0,L=R?.every(e=>!e.video),K=R?.every(e=>!e.photo),V=A(L?"Stars.Transfer.Photos":K?"Stars.Transfer.Videos":"Media",x),q=g.description||((c||d)&&"starGiftUnique"===u?.type?u.title:void 0)||(R?V:void 0),H=!R&&!Y&&!g.isPostsSearch,W=n?void 0:!(0,O.MA)(g)&&t||w,j=k&&(0,N.Y)("div",{className:(0,s.A)(Fe,"ApoQz22o"),children:(0,N.Y)(Me,{backdropAttribute:B.backdrop,patternAttribute:B.pattern,modelAttribute:B.model,title:y.title,subtitle:h("GiftInfoCollectible",{number:y.number}),resellPrice:g.amount})}),_=Z(a)?"xDyq9cc0":"jvBZSrpd",Q=(0,N.FD)("div",{className:Fe,children:[R&&(0,N.Y)(oe,{className:(0,s.A)("C5r59yiV","transaction-media-preview"),media:R,onClick:v}),!R&&Y&&(0,N.Y)(ee.A,{sticker:Y,play:i,noLoop:!0},g.id),H&&(0,N.Y)(f.A,{className:"hcrszlpT",peer:W,webPhoto:n,size:"giant",onMouseMove:G}),!Y&&!g.isPostsSearch&&(0,N.Y)(Ge.A,{className:(0,s.A)("nML8IQqX"),color:"gold",onRequestAnimation:I,centerShift:xe}),Boolean(P)&&(0,N.Y)("h1",{className:"ZZAj3hj7",children:P}),(0,N.Y)("p",{className:Re,children:q}),(0,N.FD)("p",{className:Ue,children:[(0,N.Y)("span",{className:(0,s.A)(Ue,_),children:(0,O.hk)(h,a)}),a.currency===S.OUy&&(0,N.Y)(E.A,{type:"gold",size:"middle"}),"TON"===a.currency&&(0,N.Y)(F.A,{name:"toncoin",className:_}),g.isRefund&&(0,N.Y)("p",{className:"sxWAwxTd",children:h("Refunded")})]}),Boolean(g.paidMessages&&g.starRefCommision&&o)&&(0,N.Y)("p",{className:Re,children:h("PaidMessageTransactionDescription",{percent:(0,J.l9)(o/10)},{withNodes:!0,withMarkdown:!0})})]}),te=[];let ie;g&&b&&!g.paidMessages&&!m&&te.push([A("StarsTransaction.StarRefReason.Title"),A("StarsTransaction.StarRefReason.Program")]),c&&te.push([A("StarGiftReason"),A("StarGiftReasonUpgrade")]),d&&te.push([A("StarGiftReason"),h("StarGiftReasonDropOriginalDetails")]),m&&te.push([A("StarGiftReason"),Z(g.amount)?h("StarGiftSaleTransaction"):h("StarGiftPurchaseTransaction")]),ie=c?A("Stars.Transaction.GiftFrom"):Z(a)||g.isMyGift?A("Stars.Transaction.To"):!g.starRefCommision||g.paidMessages||m?A(D?"Star.Transaction.From":"Stars.Transaction.Via"):A("StarsTransaction.StarRefReason.Miniapp"),g.isPostsSearch||d||g.isStarGiftAuctionBid||te.push([ie,D?{chatId:D}:T||""]),g.starRefCommision&&g.paidMessages&&te.push([h("PaidMessageTransactionTotal"),(0,pe.U2)(h,g.amount.amount/((100-g.starRefCommision)/100),{asFont:!1,className:"cU5QlvwL",containerClassName:"Z2YALGgl"})]),M&&te.push([A("Stars.Transaction.Reaction.Post"),(0,N.Y)(p.A,{url:M,text:M})]),U&&g.amount.currency===S.OUy&&(te.push([A("BoostReason"),(0,N.Y)(p.A,{url:U,text:A("Giveaway")})]),te.push([A("Gift"),A("Stars",g.amount,"i")])),g.id&&te.push([A("Stars.Transaction.Id"),(0,N.FD)(N.FK,{children:[(0,N.Y)("div",{className:"tMF8VIOM",onClick:()=>{(0,Ne.eM)(g.id),l({message:A("StarsTransactionIDCopied")})},children:g.id}),(0,N.Y)(F.A,{className:"voCttFzS",name:"copy"})]})]),te.push([A("Stars.Transaction.Date"),(0,z.L2)(1e3*g.date,A.code,!0)]),g.isStarGiftAuctionBid&&"starGift"===y?.type&&y.availabilityTotal&&te.push([h("GiftInfoAvailability"),h("GiftInfoAvailabilityValue",{count:y.availabilityRemains||0,total:y.availabilityTotal},{pluralValue:y.availabilityRemains||0})]);const ne=A("lng_credits_box_out_about").split("{link}");return{header:k?j:Q,tableData:te,footer:(0,N.FD)("span",{className:"KgzPpgS6",children:[ne[0],(0,N.Y)(p.A,{url:A("StarsTOSLink"),text:A("lng_credits_summary_options_about_link")}),ne[1]]})}},[g,A,h,t,i,r,o,I]),k=(0,he.A)(y)||y;return(0,N.Y)(Se.A,{isOpen:Boolean(g),className:"IzhfRIWu",hasBackdrop:"starGiftUnique"===g?.starGift?.type,header:k?.header,tableData:k?.tableData,footer:k?.footer,buttonText:A("OK"),onClose:d})})),Ke="oBLHWBtJ",Oe=[0,-50],Ve=(0,n.ph)((0,a.EK)((e,{modal:t})=>{const i=t?.subscription.peerId;return{peer:i?(0,o.PVB)(e,i):void 0}})(({modal:e,peer:t})=>{const{closeStarsSubscriptionModal:i,fulfillStarsSubscription:o,changeStarsSubscription:l,checkChatInvite:c,loadStarStatus:d,openInvoice:h}=(0,a.ko)(),A=(0,m.A)(),g=(0,M.A)(),{subscription:b}=e||{},v=(0,n.li)(),G=(0,u.A)(()=>{v.current?.()}),C=(0,u.A)(e=>{v.current=e}),I=(0,n.Kr)(()=>{if(!b)return"hidden";if(b.canRefulfill)return"refulfill";const e=b.until>Date.now()/1e3;if(e&&!b.isCancelled)return"cancel";if(e&&b.isCancelled)return"renew";const t=b.chatInviteHash||b.invoiceSlug;return!e&&t?"restart":"ok"},[b]),y=(0,u.A)(()=>{if(b){switch(I){case"refulfill":o({id:b.id});break;case"restart":b.chatInviteHash?c({hash:b.chatInviteHash}):b.invoiceSlug&&h({type:"slug",slug:b.invoiceSlug}),d();break;case"renew":l({id:b.id,isCancelled:!1});break;case"cancel":l({id:b.id,isCancelled:!0})}i()}}),k=(0,n.Kr)(()=>{if(!b||!t)return;const{pricing:e,until:i,isCancelled:n,canRefulfill:a,photo:o,title:l,hasBotCancelled:c}=b,d=(0,r.mO)(t),u=(0,N.FD)("div",{className:"E3R22yAI",children:[(0,N.FD)("div",{className:"wuTMXDP9",children:[(0,N.Y)(f.A,{peer:o?void 0:t,webPhoto:o,size:"giant",onMouseMove:G}),(0,N.Y)(E.A,{className:"enRetSny",type:"gold",size:"adaptive"})]}),(0,N.Y)(Ge.A,{className:(0,s.A)("zGCayu45"),color:"gold",onRequestAnimation:C,centerShift:Oe}),(0,N.Y)("h1",{className:"qdydQHgc",children:l||A("StarsSubscriptionTitle")}),(0,N.Y)("p",{className:"FI6rEJlK",children:g("StarsPerMonth",{amount:e.amount},{withNodes:!0,specialReplacement:{[S.Cyx]:(0,N.Y)(E.A,{className:"J8HIcN6k",size:"adaptive",type:"gold"})}})})]}),m=[];m.push([A(d?"StarsSubscriptionBot":"StarsSubscriptionChannel"),{chatId:t.id}]),l&&m.push([A("StarsSubscriptionBotProduct"),l]);const h=i<Date.now()/1e3;m.push([A(h?"StarsSubscriptionUntilExpired":n?"StarsSubscriptionUntilExpires":"StarsSubscriptionUntilRenews"),(0,z.L2)(1e3*i,A.code,!0)]);const v=g("StarsTransactionTOS",{link:(0,N.Y)(p.A,{url:g("StarsTransactionTOSLink"),text:g("StarsTransactionTOSLinkText")})},{withNodes:!0});return{header:u,tableData:m,footer:(0,N.FD)("span",{className:"GMWMuWCr",children:[(0,N.Y)("p",{className:Ke,children:v}),n&&(0,N.Y)("p",{className:"nkwiG25Q",children:A(c?"StarsSubscriptionBotCancelledText":"StarsSubscriptionCancelledText")}),a&&(0,N.Y)("p",{className:Ke,children:A("StarsSubscriptionRefulfillInfo",(0,z.L2)(1e3*i,A.code,!0))}),!n&&!a&&h&&(0,N.Y)("p",{className:Ke,children:A("StarsSubscriptionExpiredInfo",(0,z.L2)(1e3*i,A.code,!0))}),!n&&!a&&!h&&(0,N.Y)("p",{className:Ke,children:A("StarsSubscriptionCancelInfo",(0,z.L2)(1e3*i,A.code,!0))}),"hidden"!==I&&(0,N.Y)(U.A,{color:"cancel"===I?"danger":"primary",isText:"cancel"===I,onClick:y,children:A("cancel"===I?"StarsSubscriptionCancel":"refulfill"===I?"StarsSubscriptionRefulfill":"restart"===I?"StarsSubscriptionAgain":"renew"===I?"StarsSubscriptionRenew":"OK")})]})}},[I,g,A,t,b]),Y=(0,he.A)(k)||k;return(0,N.Y)(Se.A,{isOpen:Boolean(b),className:"eR_RZfGB",header:Y?.header,tableData:Y?.tableData,footer:Y?.footer,onClose:i})}));var Ee=i(34431),qe=i(19806),He=i(22699),ze=i(24433),Je=i(32581),We=i(93545),je=i(68292),_e=i(85118);const Qe={root:"CuBAw2yg",dragging:"LbDNXOOQ",progress:"kwK0cNPX",floatingBadgeWrapper:"uvlMoXj0",floatingBadgeText:"qqQan8uF",floatingBadgeTriangle:"mIdJOmsB",slider:"euOOAbZi",sparkles:"_L1YQTIP",dynamicColor:"uIYIwZpx",floatingBadge:"BGSDWAYc",clickable:"JwkM7nwU",noTransition:"cG6CiHRL",floatingBadgeSparkles:"JCciTRtu",floatingBadgeContent:"f1UPSN27",withDescription:"WsptdVHe",floatingBadgeTitle:"HkY6dR8D",floatingBadgeDescription:"mR3ddE5s",floatingBadgeTrianglePath:"IW9YhMAx",customValueIcon:"Td8Tc1MH"},Xe=[50,100,500,1e3,2e3,5e3,1e4],$e=1e4,Ze=1.875*T.$,et=2*T.$,tt=1.5*T.$,it=.125*T.$;let nt;const at=["#955CDB","#955CDB","#46A3EB","#40A920","#E29A09","#ED771E","#E14741","#5B6676"];function rt(e,t){const i=[];for(let n=0;n<Xe.length;n++)if(!(Xe[n]<=e)&&(Xe[n]<t&&i.push(Xe[n]),Xe[n]>=t))return i.push(t),i;const n=Xe[Xe.length-1],a=Math.ceil((e-n)/$e);let r=n+Math.max(1,a)*$e;for(;r<t;)i.push(r),r+=$e;return i.push(t),i}function ot(e,t,i){const n=e.findIndex(e=>t<=e),a=e[n-1]||i,r=e[n]||e[e.length-1];return r===a?n:n+(t-a)/(r-a)}function st(e,t,i){const n=Math.floor(t),a=e[n-1]||i,r=a+((e[n]||e[e.length-1])-a)*(t-n);return Math.round(r)}const lt=(0,n.ph)(({maxValue:e,defaultValue:t,minValue:i,minAllowedValue:a,minAllowedProgress:r,className:o,floatingBadgeDescription:l,shouldUseDynamicColor:c,shouldAllowCustomValue:d,onChange:m,onBadgeClick:f,onCustomValueClick:p})=>{const h=(0,n.li)(),A=(0,n.li)(),g=(0,M.A)(),b=i??1,v=(0,n.Kr)(()=>{if(!r||!a||a<=b)return b;let t=b,i=a;for(;t<i;){const n=Math.floor((t+i)/2),o=rt(n,e);ot(o,a,n)/o.length<r?i=n:t=n+1}return Math.max(b,t)},[b,a,r,e]),G=(0,n.Kr)(()=>rt(v,e),[e,v]),[S,C]=(0,n.J0)(0),[I,y]=(0,n.J0)(0),[k,Y]=(0,n.J0)(0),[B,w]=(0,n.J0)(!1),D=(0,n.li)(),P=(0,he.A)(k),U=g.number(st(G,S,v)),R=void 0!==a?ot(G,a,v):0;(0,n.vJ)(()=>{C(ot(G,t,v))},[t,G,v]),(0,n.vJ)(()=>{if(!A.current)return;const e=A.current.querySelector(`.${Qe.floatingBadgeTitle}`);if(!e)return;const t=getComputedStyle(e),i=`${t.fontWeight} ${t.fontSize} ${t.fontFamily}`,n=function(e,t){nt||(nt=document.createElement("canvas"));const i=nt.getContext("2d");return i.font=t,i.measureText(e).width}(U,i),a=tt+it+n,r=A.current.querySelector(`.${Qe.floatingBadgeDescription}`),o=r?.scrollWidth||0,s=Math.max(a,o)+et;Y(e=>Math.abs(s-e)<6?e:s)},[U,l]);const x=(0,u.A)(e=>{y(e.contentRect.width)});(0,We.A)(h,x);const L=S/G.length,{minBadgeX:K,maxBadgeX:O,beakOffset:V,beakTipOffset:E,beakWidth:q}=(0,n.Kr)(()=>function(e,t,i){const n=t/2,a=n-22,r=e-Ze,o=i*r,s=r-o,l=o<s,c=l?o:s,d=l?-1:1;let u=0,m=0,f=52;const p=n-Ze/2;if(c<p)if(c>10)u=d*((p-c)/(p-10))*a;else if(c>0){u=d*a;const e=(10-c)/10;f=52-8*(1-(1-e)*(1-e)*(1-e)),m=d*e*(f/2)}else u=d*a,f=44,m=d*(f/2);const h=f/2-2-1;return{minBadgeX:n,maxBadgeX:e-n,beakOffset:u,beakTipOffset:Math.max(-h,Math.min(h,m)),beakWidth:f}}(I,k,L),[I,k,L]),H=(0,n.Kr)(()=>function(e,t){const i=e/2+t;return`M 0 0 L ${e} 0 L ${i+2} 30 Q ${i} 32 ${i-2} 30 Z`}(q,E),[q,E]),z=(0,u.A)(e=>{const t=Number(e.currentTarget.value),i=Math.max(t,R);C(i);const n=st(G,i,v);m(n)}),J=(0,u.A)(e=>{D.current=e.clientX,w(!1)}),W=(0,u.A)(e=>{void 0!==D.current&&Math.abs(e.clientX-D.current)>=5&&w(!0)}),j=(0,u.A)(e=>{if(D.current=void 0,!B&&p&&h.current){const t=h.current.getBoundingClientRect(),i=1.875*T.$;e.clientX>=t.right-i&&e.clientX<=t.right&&p()}w(!1)}),_=c?function(e){const t=Math.floor(e*at.length);return at[Math.min(t,at.length-1)]}(L):void 0,Q=(0,Ie.A)(Boolean(k)&&`width: ${k}px`),X=(0,Ie.A)(`--progress: ${L}`,`--min-badge-x: ${K}px`,`--max-badge-x: ${O}px`,_&&`--dynamic-color: ${_}`);return(0,N.FD)("div",{ref:h,className:(0,s.A)(Qe.root,B&&Qe.dragging,o),style:X,children:[(0,N.Y)("div",{className:Qe.floatingBadgeWrapper,children:(0,N.FD)("div",{className:(0,s.A)(Qe.floatingBadge,f&&Qe.clickable),onClick:f,children:[(0,N.FD)("div",{className:(0,s.A)(Qe.floatingBadgeText,c&&Qe.dynamicColor,(!P||0===P)&&Qe.noTransition),style:Q,children:[(0,N.Y)(_e.A,{preset:"button",className:Qe.floatingBadgeSparkles}),(0,N.FD)("div",{ref:A,className:(0,s.A)(Qe.floatingBadgeContent,l&&Qe.withDescription),children:[(0,N.FD)("div",{className:Qe.floatingBadgeTitle,children:[(0,N.Y)(F.A,{name:"star",className:Qe.floatingBadgeIcon}),(0,N.Y)(je.A,{text:U})]}),(0,N.Y)("div",{className:Qe.floatingBadgeDescription,children:l})]})]}),(0,N.FD)("svg",{className:Qe.floatingBadgeTriangle,width:q,height:32,viewBox:`0 0 ${q} 32`,fill:"none","aria-hidden":"true",role:"presentation",style:`transform: translate(calc(-50% + ${V}px), 33%)`,children:[!c&&(0,N.Y)("defs",{children:(0,N.FD)("linearGradient",{id:"StarBadgeTriangle",x1:"0",x2:"1",y1:"0",y2:"0",children:[(0,N.Y)("stop",{offset:"-50%","stop-color":"#FFAA00"}),(0,N.Y)("stop",{offset:"150%","stop-color":"#FFCD3A"})]})}),(0,N.Y)("path",{className:Qe.floatingBadgeTrianglePath,d:H,fill:_||"url(#StarBadgeTriangle)"})]})]})}),(0,N.Y)("div",{className:(0,s.A)(Qe.progress,c&&Qe.dynamicColor),children:(0,N.Y)(_e.A,{preset:"progress",className:Qe.sparkles})}),(0,N.Y)("input",{className:Qe.slider,type:"range",min:0,max:G.length,defaultValue:ot(G,t,v),step:"any",onChange:z,onPointerDown:J,onPointerMove:W,onPointerUp:j}),d&&(0,N.Y)(F.A,{name:"add",className:Qe.customValueIcon})]})}),ct={content:"RdhRpsCn",title:"yzbjj73U",slider:"xePPMXOI",description:"BlpfdOtK",itemInfo:"nS9V516D",itemTitle:"sH5Nukjy",itemSubtitle:"dHlNODTI",itemIcon:"H_iHihXU",sendAsPeerButtonAvatar:"_mjvLELm",sendAsPeerMenuButton:"zxsRaWYV",buttonDownIcon:"zrwUUELS",sendAsPeerMenuBubble:"X1PB6mhQ",sendAsPeerMenu:"Px1MDij9",sendAsPeersMenuContainer:"Al1nfhHJ",headerControlPanel:"vu90kSL_",separator:"uhQLUjmo",checkBox:"Mc3bVeF0",topLabel:"bnou4CpV",top:"QludQDKR",topBadge:"JBF9pTUK",buttonStar:"NJJFuym9",topPeer:"Ty4Ud_Rd",disclaimer:"KRvkHeo1"},dt={avatarIcon:"author-hidden",customPeerAvatarColor:"#9eaab5",isCustomPeer:!0,titleKey:"StarsReactionAnonymous"},ut=(0,n.ph)((0,a.EK)((e,{modal:t})=>{const i=t&&(0,o.hds)(e,t.chatId),n=t&&(0,o.O5q)(e,t.chatId,t.messageId),a=e.stars?.balance,r=e.appConfig.paidReactionMaxAmount||2500,s=e.settings.paidReactionPrivacy,l=i?.sendPaidReactionsAsPeerIds,c=e.currentUserId;return{chat:i,message:n,starBalance:a,maxAmount:r,defaultPrivacy:s,sendPaidReactionsAsPeerIds:l,currentUserId:c,currentUser:(0,o.mBe)(e,c)}})(({modal:e,chat:t,message:i,maxAmount:l,starBalance:d,defaultPrivacy:A,sendPaidReactionsAsPeerIds:g,currentUserId:b,currentUser:v})=>{const{closePaidReactionModal:G,addLocalPaidReaction:C,loadSendPaidReactionsAs:I}=(0,a.ko)(),[y,k]=(0,n.J0)(50),[Y,B,w]=(0,P.A)(),[D,T]=(0,n.J0)(!0),[R,x]=(0,n.J0)(b),L=t?.id,K=R?(0,o.PVB)((0,a.mS)(),R):v,O=(0,m.A)(),{isMobile:V}=(0,ke.Ay)(),E=(0,M.A)(),q=(0,u.A)(e=>{T(!e.target.checked)}),z=(0,u.A)(e=>{k(e),B()});(0,n.vJ)(()=>{L&&!g&&I({chatId:L})},[L,g]);const W=(0,n.Kr)(()=>{const e=g?.map(e=>e.id).filter(e=>e!==L);return e?.unshift(b),e},[g,L,b]),j=W&&W.length>1;(0,n.vJ)(()=>{e||w()},[e]),(0,n.vJ)(()=>{const e=i?.reactions?.topReactors?.find(e=>e.isMy);if(e)return T(Boolean(e.isAnonymous)),void(e.peerId&&x(e.peerId));T("anonymous"===A?.type||!1),"peer"===A?.type&&W?.includes(A.peerId)?x(A.peerId):x(b)},[A,i?.reactions?.topReactors,W,b]);const _=(0,u.A)(()=>{e&&(C({chatId:e.chatId,messageId:e.messageId,count:y,isPrivate:D,peerId:D||R===b?void 0:R,shouldIgnoreDefaultPrivacy:!0}),G())}),Q=(0,u.A)(e=>{T(!1),x(e)}),X=(0,u.A)(e=>{const t=(0,o.PVB)((0,a.mS)(),e),i=R===e&&!D;if(t)return(0,N.FD)(ze.A,{onClick:()=>Q(e),children:[(0,N.Y)(f.A,{size:"small",peer:t}),(0,N.FD)("div",{className:(0,s.A)(ct.itemInfo),children:[(0,N.Y)(Ee.A,{className:ct.itemTitle,peer:t,noFake:!0,noVerified:!0}),(0,N.Y)("span",{className:ct.itemSubtitle,children:(0,r.mO)(t)?E("PeerPersonalAccount"):E("PeerChannel")})]}),(0,N.Y)(F.A,{className:ct.itemIcon,name:i?"check":"placeholder"})]})}),$=(0,n.Kr)(()=>({onTrigger:e,isOpen:t})=>(0,N.FD)(U.A,{ripple:!V,size:"smaller",color:"translucent",className:(0,s.A)(ct.sendAsPeerMenuButton,t?"active":""),onClick:e,ariaLabel:E("AriaLabelOpenMenu"),children:[(0,N.Y)(f.A,{className:ct.sendAsPeerButtonAvatar,size:"mini",peer:D?dt:K}),(0,N.Y)(F.A,{name:"down",className:ct.buttonDownIcon})]}),[V,E,K,D]),Z=(0,n.Kr)(()=>{if(j)return(0,N.Y)(He.A,{className:(0,s.A)(ct.sendAsPeerMenu,"with-menu-transitions"),bubbleClassName:ct.sendAsPeerMenuBubble,trigger:$,positionX:"right",autoClose:!0,children:W.map(e=>X(e))})},[$,W,j]),ee=(0,n.Kr)(()=>{const e=(0,a.mS)(),t=i?.reactions?.topReactors;if(!t)return;const n=[];let r=!1,s=0;if(t.forEach(t=>{const i=t.peerId?(0,o.PVB)(e,t.peerId):void 0;if(!i&&!t.isAnonymous&&!t.isMy)return;if(t.isMy&&(s=t.count),t.isMy&&(t.peerId!==R||t.isAnonymous&&!D))return;const a=R===t.peerId||D&&t.isAnonymous;a&&(r=!0),n.push({amount:t.count,localAmount:a&&Y?y:0,isMy:t.isMy,isAnonymous:t.isAnonymous,user:i})}),!r){const t=(0,o.PVB)(e,R);n.push({amount:s,localAmount:Y?y:0,isMy:!0,user:t})}return n.sort((e,t)=>t.amount+t.localAmount-(e.amount+e.localAmount)),n.slice(0,3)},[Y,i?.reactions?.topReactors,y,R,D]),te=t&&(0,r.F9)(O,t);return(0,N.FD)(h.A,{isOpen:Boolean(e),onClose:G,isSlim:!0,hasAbsoluteCloseButton:!0,contentClassName:ct.content,isLowStackPriority:!0,children:[(0,N.Y)("div",{className:ct.sendAsPeersMenuContainer,children:Z}),(0,N.Y)("div",{className:ct.headerControlPanel,children:(0,N.Y)(H,{balance:d,className:ct.modalBalance,withAddButton:!0})}),(0,N.Y)(lt,{className:ct.slider,defaultValue:50,maxValue:l,onChange:z}),(0,N.Y)("h3",{className:ct.title,children:O("StarsReactionTitle")}),(0,N.Y)("div",{className:ct.description,children:(0,c.A)(O("StarsReactionText",te),["simple_markdown","emoji"])}),(0,N.Y)(Je.A,{children:ee&&(0,N.Y)("div",{className:ct.topLabel,children:O("StarsReactionTopSenders")})}),ee&&(0,N.Y)("div",{className:ct.top,children:ee.map(e=>{const t=(0,J.Sm)(e.amount+e.localAmount),i=e.isAnonymous||!e.user||e.isMy&&D?dt:e.user,n="isCustomPeer"in i?O(i.titleKey):i&&(0,r.F9)(O,i);return(0,N.Y)(Ae.A,{className:ct.topPeer,peer:i,badgeText:t,badgeIcon:"star",badgeClassName:ct.topBadge,text:n},`${e.user?.id||"anonymous"}-${t}`)})}),ee&&(0,N.Y)(Je.A,{className:ct.separator}),(0,N.Y)(qe.A,{className:(0,s.A)(ct.checkBox,"dialog-checkbox"),checked:!D,onChange:q,label:O("StarsReactionShowMeInTopSenders")}),(0,N.Y)(U.A,{onClick:_,children:E("SendPaidReaction",{amount:y},{withNodes:!0,specialReplacement:{[S.Cyx]:(0,N.Y)(F.A,{className:ct.buttonStar,name:"star"})}})}),(0,N.Y)("p",{className:ct.disclaimer,children:E("StarsReactionTerms",{link:(0,N.Y)(p.A,{text:E("StarsReactionLinkText"),url:E("StarsReactionLink")})},{withNodes:!0})})]})}));var mt=i(37836),ft=i(5912),pt=i(23174),ht=i(21309),At=i(65632),gt=i(20333),bt=i(59118),vt=i(96530),Nt=i(22720),Gt=i(63152),St=i(94079),Ct=i(61361);const It="zZUpGRSI",yt="zAee80Dv",kt="nTPAv1ci",Yt=48*ht.dp,Bt=(0,n.ph)((0,a.EK)((e,{peerId:t,gift:i})=>{const n=(0,o.SJA)(e),{stars:a}=e,{isBlurred:r,patternColor:s,background:l,backgroundColor:c}=(0,o.Gyz)(e,n)||{},d=(0,o.PVB)(e,t),u=(0,o.WA9)(e,t),m=(0,o.vGo)(e,t),f=e.currentUserId===t,p=!f&&m?.disallowedGifts?.shouldDisallowUniqueStarGifts,h=!f&&m?.disallowedGifts?.shouldDisallowLimitedStarGifts,A=(0,o.nTw)(e),g="id"in i&&"starGift"===i.type&&i.isAuction?i.id:void 0,b=g?e.giftAuctionByGiftId?.[g]:void 0;return{starBalance:a?.balance,peer:d,theme:n,isBackgroundBlurred:r,patternColor:s,customBackground:l,backgroundColor:c,captionLimit:e.appConfig.starGiftMaxMessageLength,currentUserId:e.currentUserId,isPaymentFormLoading:A.isPaymentFormLoading,paidMessagesStars:u,areUniqueStarGiftsDisallowed:p,shouldDisallowLimitedStarGifts:h,giftAuction:b}})(function({gift:e,giftByStars:t,peerId:i,peer:o,captionLimit:c,theme:d,isBackgroundBlurred:m,patternColor:f,backgroundColor:p,customBackground:h,currentUserId:A,isPaymentFormLoading:g,starBalance:b,paidMessagesStars:v,areUniqueStarGiftsDisallowed:G,shouldDisallowLimitedStarGifts:S,giftAuction:C}){const{sendStarGift:I,sendPremiumGiftByStars:y,openInvoice:k,openGiftUpgradeModal:Y,openStarsBalanceModal:B,openGiftAuctionBidModal:w,openGiftAuctionInfoModal:D,openGiftAuctionChangeRecipientModal:T}=(0,a.ko)(),P=(0,M.A)(),[F,R]=(0,n.J0)(""),[x,L]=(0,n.J0)(!1),[K,O]=(0,n.J0)(!1),[V,E]=(0,n.J0)(!1),q=(0,At.A)(d,h);(0,n.vJ)(()=>{S&&O(!0)},[S,K]);const H="id"in e&&"starGift"===e.type,J="months"in e,W=t&&"amount"in t,j=o&&(0,r.mO)(o),_=i===A,Q=(0,n.Kr)(()=>{if(J){const i=V&&W?t:e;return{id:-1,chatId:"0",isOutgoing:!1,senderId:A,date:Math.floor(Date.now()/1e3),content:{action:{mediaType:"action",type:"giftPremium",amount:i.amount,currency:i.currency,days:30*e.months,message:F?{text:F}:void 0}}}}if(H)return{id:-1,chatId:"0",isOutgoing:!1,senderId:A,date:Math.floor(Date.now()/1e3),content:{action:{mediaType:"action",type:"starGift",message:F?.length?{text:F}:void 0,isNameHidden:x||void 0,starsToConvert:e.starsToConvert,canUpgrade:K||void 0,alreadyPaidUpgradeStars:K?e.upgradeStars:void 0,gift:e,peerId:i,fromId:A}}}},[A,e,F,H,x,K,i,V,W,t,J]),X=(0,u.A)(e=>{R(e.target.value)}),$=(0,u.A)(()=>{L(!x)}),Z=(0,u.A)(()=>{O(!K)}),ee=(0,u.A)(()=>{W&&E(!V)}),te=(0,u.A)(()=>{H&&Y({giftId:e.id,peerId:i})}),ie=(0,u.A)(()=>{B({})}),ne=(0,u.A)(()=>{C&&D({auctionGiftId:C.gift.id})}),ae=(0,u.A)(()=>{if(C){const e=C.userState.bidPeerId;return e&&e!==i?void T({auctionGiftId:C.gift.id,oldPeerId:e,newPeerId:i,message:F||void 0,shouldHideName:x||void 0}):void w({auctionGiftId:C.gift.id,peerId:i,message:F||void 0,shouldHideName:x||void 0})}H?I({peerId:i,shouldHideName:x,gift:e,message:F?{text:F}:void 0,shouldUpgrade:K}):V&&W?y({userId:i,months:t.months,amount:t.amount,message:F?{text:F}:void 0}):J&&k({type:"giftcode",userIds:[i],currency:e.currency,amount:e.amount,option:e,message:F?{text:F}:void 0})}),re=W&&b&&b.amount>t.amount,oe=(0,s.A)("ZORVRSG3","soDpW2YR",h&&"Eny_G3JI",p&&"TkJZPU2u",h&&m&&"M6k91TdM");if((H||J)&&Q)return(0,N.FD)("div",{className:(0,s.A)("jKOG0It6","custom-scroll"),children:[(0,N.FD)("div",{className:(0,s.A)("CB1mxsgp","MessageList"),inert:!0,style:(0,Ie.A)(`--pattern-color: ${f}`,p&&`--theme-background-color: ${p}`),children:[(0,N.Y)("div",{className:oe,style:q?`--custom-background: ${q}`:void 0}),(0,N.Y)(bt.A,{message:Q,threadId:pt.l3,appearanceOrder:0},H?e.id:J?e.months:void 0)]}),function(){const i=c?c-F.length:void 0,n=(0,r.F9)(P,o);return(0,N.FD)("div",{className:"Y68CEIKn",children:[!v&&(0,N.Y)(St.A,{className:"o5r2IPoA",onChange:X,value:F,label:P("GiftMessagePlaceholder"),maxLength:c,maxLengthIndicator:i&&i<50?i.toString():void 0}),re&&(0,N.FD)(Nt.A,{className:It,narrow:!0,ripple:!0,onClick:ee,children:[(0,N.Y)("span",{children:P("GiftPremiumPayWithStars",{stars:(0,pe.U2)(P,t.amount,{className:yt})},{withNodes:!0})}),(0,N.Y)(Gt.A,{checked:V,onChange:ee,label:P("GiftPremiumPayWithStarsAcc")})]}),W&&b&&(0,N.Y)("div",{className:kt,children:P("GiftPremiumDescriptionYourBalance",{stars:(0,pe.U2)(P,b.amount,{className:yt}),link:(0,N.Y)(vt.A,{isPrimary:!0,onClick:ie,children:P("GetMoreStarsLinkText",void 0,{withNodes:!0,specialReplacement:(0,pe.dE)()})})},{withNodes:!0,withMarkdown:!0})}),H&&Boolean(e.upgradeStars)&&!G&&(0,N.FD)(Nt.A,{className:It,narrow:!0,ripple:!0,onClick:Z,disabled:S,children:[(0,N.Y)("span",{children:P("GiftMakeUnique",{stars:(0,pe.U2)(P,e.upgradeStars,{className:yt})},{withNodes:!0})}),(0,N.Y)(Gt.A,{checked:K,onChange:Z,label:P("GiftMakeUniqueAcc")})]}),H&&Boolean(e.upgradeStars)&&!G&&(0,N.Y)("div",{className:kt,children:j?P("GiftMakeUniqueDescription",{user:n,link:(0,N.Y)(vt.A,{isPrimary:!0,onClick:te,children:P("GiftMakeUniqueLink",void 0,{withNodes:!0,specialReplacement:(0,pe.dE)()})})},{withNodes:!0}):P("GiftMakeUniqueDescriptionChannel",{peer:n,link:(0,N.Y)(vt.A,{isPrimary:!0,onClick:te,children:P("GiftMakeUniqueLink",void 0,{withNodes:!0,specialReplacement:(0,pe.dE)()})})},{withNodes:!0})}),H&&(0,N.FD)(Nt.A,{className:It,narrow:!0,ripple:!0,onClick:$,children:[(0,N.Y)("span",{children:P("GiftHideMyName")}),(0,N.Y)(Gt.A,{checked:x,onChange:$,label:P("GiftHideMyName")})]}),H&&(0,N.Y)("div",{className:kt,children:_?P("GiftHideNameDescriptionSelf"):j?P("GiftHideNameDescription",{receiver:n}):P("GiftHideNameDescriptionChannel")})]})}(),(0,N.Y)("div",{className:"ATowWJ60"}),function(){const i=V&&W?(0,pe.U2)(P,t.amount,{asFont:!0}):H?(0,pe.U2)(P,e.stars+(K?e.upgradeStars:0),{asFont:!0}):J?(0,l.vv)(P,e.amount,e.currency):void 0,n=C?.gift.giftsPerRound,a=C?.state.endDate,r=a?a-(0,Ye.Fm)():void 0,o=void 0!==r&&r>0&&r<Yt;return(0,N.FD)("div",{className:"jxWZSvet",children:[H&&Boolean(e.availabilityRemains)&&(0,N.Y)(gt.A,{isPrimary:!0,progress:e.availabilityRemains/e.availabilityTotal,rightText:P("GiftSoldCount",{count:e.availabilityTotal-e.availabilityRemains}),leftText:P("GiftLeftCount",{count:e.availabilityRemains}),className:"mWzLu0c0"}),C&&Boolean(n)&&(0,N.Y)("div",{className:"j4s8T1dQ",children:P("GiftAuctionDescription",{count:n,link:(0,N.Y)(vt.A,{isPrimary:!0,onClick:ne,children:P("GiftAuctionLearnMore")})},{pluralValue:n,withNodes:!0})}),(0,N.Y)(U.A,{className:"IDuhjrne",size:r?void 0:"smaller",onClick:ae,isLoading:g,noForcedUpperCase:!0,children:C?(0,N.FD)("div",{children:[(0,N.Y)("div",{children:P("GiftAuctionPlaceBid")}),void 0!==r&&r>0&&(0,N.Y)("div",{className:"pB6hqcvA",children:P("GiftAuctionTimeLeft",{time:o?(0,N.Y)(Ct.A,{endsAt:a}):(0,z.zt)(P,r)},{withNodes:!0})})]}):P("GiftSend",{amount:i},{withNodes:!0})})]})}()]})}));var wt=i(87049);const Dt="G1mBmzxs",Tt="a8no5WH0",Pt="DvJLTVFU",Mt=(0,n.ph)((0,a.EK)((e,{option:t})=>({sticker:(0,o.t0O)(e,t.months),canPlayAnimatedEmojis:(0,o.BWX)(e)}))(function({sticker:e,canPlayAnimatedEmojis:t,baseMonthAmount:i,option:n,optionByStars:a,onClick:r}){const{months:o,amount:s,currency:c}=n,d=(0,M.A)(),m=(0,u.A)(()=>{r(n)}),f=Math.floor(s/o),p=i&&i>f?Math.ceil(100-f/(i/100)):void 0;return(0,N.FD)("div",{className:Dt,tabIndex:0,role:"button",onClick:m,children:[(0,N.Y)(ee.A,{sticker:e,play:t,noLoop:!0,nonInteractive:!0,size:86}),function(){const e=12===o?d("Years",{count:1},{pluralValue:1}):d("Months",{count:o},{pluralValue:o});return(0,N.Y)("div",{className:"rn9aWFNA",children:e})}(),(0,N.Y)("div",{className:"q4_ydkAx",children:d("PremiumGiftDescription")}),(0,N.Y)(U.A,{className:Tt,color:"adaptive",nonInteractive:!0,size:"tiny",pill:!0,fluid:!0,children:(0,l.Ad)(s,c)}),a&&(0,N.Y)("div",{className:"QB5SI7ta",children:d("GiftPremiumStarsPrice",{stars:(0,pe.U2)(d,a.amount,{className:"jgnEfoeM"})},{withNodes:!0,withMarkdown:!0})}),Boolean(p)&&(0,N.Y)(wt.A,{color:"purple",text:d("GiftDiscount",{percent:p})})]})}));var Ft=i(82855);const Ut=(0,n.ph)((0,a.EK)(e=>({isCurrentUserPremium:(0,o.g29)(e)}))(function({gift:e,isResale:t,isCurrentUserPremium:i,withTransferBadge:r,hideBadge:o,noClickable:l,observeIntersection:c,onClick:d}){const{openGiftInfoModal:m,openPremiumModal:f,showNotification:p,checkCanSendGift:h,openGiftAuctionModal:A}=(0,a.ko)(),g=(0,n.li)(),b=(0,n.li)(),v=(0,M.A)(),[G,C]=(0,n.J0)(!1),[I,y,k]=(0,P.A)(),Y=(0,X.yQ)(e),B="starGiftUnique"===e.type,w=B?e:void 0,D=B?void 0:e,T=B?function(t){if(!t)return{amount:0,currency:S.OUy};if("starGiftUnique"===e.type&&e.resaleTonOnly){const e=t.find(e=>e.currency===S.ykW);if(e)return e}return t.find(e=>e.currency===S.OUy)}(w?.resellPrice):{amount:D?.stars||0,currency:S.OUy},R=T?.currency||S.OUy,x=D?.resellMinStars,L=!B&&t&&x?v.number(x)+"+":T?.amount||0,K=!B&&Boolean(D?.isLimited),O=!B&&Boolean(D?.isSoldOut),V=!B&&!t&&Boolean(D?.isAuction),E=Boolean(e?.requirePremium),q=Boolean(D?.limitedPerUser&&!D?.perUserRemains),H=D?.perUserTotal,z=(0,u.A)(()=>{V?A({gift:e}):!O||t?q?p({message:{key:"NotificationGiftsLimit2",variables:{count:H},options:{pluralValue:H,withMarkdown:!0,withNodes:!0}}}):!E||i?j?h({gift:e,onSuccess:()=>d?.(e,t?"resell":"original")}):d?.(e,t?"resell":"original"):f({gift:e}):m({gift:e})}),J=(0,n.Kr)(()=>{const{backdrop:t,pattern:i}=(0,X.uc)(e)||{};if(!t||!i)return;const n=[t.centerColor,t.edgeColor];return(0,N.Y)(te.A,{className:"Nkotr8Q4",backgroundColors:n,patternIcon:i.sticker,ringsCount:1,ovalFactor:1})},[e]),W=B?e.number:0,j=Boolean("starGift"===e.type&&e.lockedUntilDate),_=(0,n.Kr)(()=>{if(B){const{backdrop:t}=(0,X.uc)(e)||{};if(!t)return;return(0,N.Y)(wt.A,{color:[t.centerColor,t.edgeColor],text:v("GiftSavedNumber",{number:W})})}return t?(0,N.Y)(wt.A,{color:"green",text:v("GiftRibbonResale")}):O?(0,N.Y)(wt.A,{color:"red",text:v("GiftSoldOut")}):V?(0,N.Y)(wt.A,{color:"orange",text:v("GiftRibbonAuction")}):E?(0,N.Y)(wt.A,{color:"orange",text:v("GiftRibbonPremium")}):K?(0,N.Y)(wt.A,{color:"blue",text:v("GiftLimited")}):void 0},[B,t,e,O,K,v,W,E,V]);(0,ft.mv)(g,c,e=>{const t=e.isIntersecting;C(t)});const Q=(0,n.Kr)(()=>r?v("GiftTransferTitle"):V?v("GiftAuctionJoin"):R===S.ykW?(0,pe.Ms)(v,L||0,{shouldConvertFromNanos:!0,className:Pt}):(0,pe.U2)(v,L||0,{asFont:!0,className:Pt}),[r,R,L,V,v]);return(0,N.FD)("div",{ref:g,className:(0,s.A)("interactive-gift",Dt,"f5ArEO1S","starGiftItem",E&&"NBYIITte",V&&"WqBCC4Ce",l&&"pcLi3lcD"),tabIndex:l?void 0:0,role:l?void 0:"button",onClick:l?void 0:z,onMouseEnter:Ce.TF||l?void 0:y,onMouseLeave:Ce.TF||l?void 0:k,children:[J,(0,N.Y)("div",{ref:b,className:"rUSoeQXb",style:"width: 90px; height: 90px",children:Y&&(0,N.Y)(Ft.A,{observeIntersectionForPlaying:c,observeIntersectionForLoading:c,containerRef:b,sticker:Y,size:90,shouldLoop:I,shouldPreloadPreview:!0})}),!o&&(0,N.Y)(U.A,{className:(0,s.A)(Tt,r&&"nqN62arv"),nonInteractive:!0,size:"tiny",color:B?"bluredStarsBadge":"stars",withSparkleEffect:G&&!r,pill:!0,fluid:!0,children:Q}),_,j&&(0,N.Y)(F.A,{name:"lock-badge",className:"kwuipwV7"})]})}));var Rt=i(13235),xt=i(36175),Lt=i(96374),Kt=i(64489);const Ot={root:"tJK1W0pJ",transition:"pP8TxefR",content:"o3V1HqbL",resaleScreenRoot:"Vce_TsJO",main:"cVXqeu9P",giftSection:"v4eKefwN",section:"EqfarEYb",resaleStarGiftsContainer:"RSFcSNGL",starGiftsContainer:"OQX3GZl5",premiumGiftsGallery:"n40m3BK2",header:"iqqoyRgW",noBorder:"cuvdjW2y",resaleHeader:"cJRBgg9B",resaleHeaderContentContainer:"OXYQmfGK",headerSlide:"BTWhJUQB",headerText:"lLRmbpIu",hiddenHeader:"XgGzn1cQ",resaleHeaderText:"bp_KPx8I",commonHeaderText:"ybZo03if",resaleHeaderTextBlock:"QncldYUt",resaleHeaderDescription:"XefHUFm1",closeButton:"r_Y5uG1T",balance:"soqAknia",avatars:"N_7tYJKr",avatar:"_3hY4vIep",logoBackground:"ieK4TzSb",center:"Ey5gX40t",description:"ZioU5h_k",starGiftsDescription:"gFgzS8pV",boostIcon:"Qi2YR6Dz",optionBottom:"RTbClMKE",secondaryInfo:"g0R9GSNq",footer:"J3Gju3bv",starGiftsTransition:"kB6IyXqS",notFoundGiftsRoot:"UqnRlJ1n",notFoundGiftsDescription:"g0VbwIG_",notFoundGiftsLink:"j2zPEQr8"},Vt=(0,n.ph)((0,a.EK)(e=>{const{starGifts:t}=e,{resaleGifts:i}=(0,o.nTw)(e),n=i?.giftId?t?.byId[i.giftId]:void 0,a=i.filter,r=i.isAllLoaded,s=i.isLoading,l=i.updateIteration;return{resellGifts:i.gifts,gift:n,filter:a,areGiftsAllLoaded:r,areGiftsLoading:s,updateIteration:l}})(({resellGifts:e,gift:t,filter:i,areGiftsAllLoaded:r,areGiftsLoading:o,updateIteration:l,onGiftClick:c})=>{const{loadResaleGifts:d,updateResaleGiftsFilter:m}=(0,a.ko)(),f=(0,n.li)(),p=(0,M.A)(),h=(0,n.Kr)(()=>e?.map(e=>e.id),[e]),A=Boolean(i?.modelAttributes?.length||i?.patternAttributes?.length||i?.backdropAttributes?.length),g=(0,u.A)(()=>{if(t){const e="regularGiftId"in t?t.regularGiftId:t.id;d({giftId:e})}}),b=Boolean(!e||0===e.length),[v,G]=(0,Lt.A)(g,h,!t,Rt.bc),{observe:S}=(0,ft.BL)({rootRef:f,throttleMs:200}),C=(0,u.A)(()=>{m({filter:{...i,modelAttributes:[],backdropAttributes:[],patternAttributes:[]}})});return(0,N.Y)("div",{ref:f,className:(0,s.A)(Ot.resaleScreenRoot,"custom-scroll"),children:(0,N.FD)(L.Ay,{name:"zoomFade",activeKey:l,children:[b&&r&&(0,N.FD)("div",{className:Ot.notFoundGiftsRoot,children:[(0,N.Y)(Kt.A,{size:160,tgsUrl:xt.w.SearchingDuck,nonInteractive:!0,noLoop:!0}),(0,N.Y)("div",{className:Ot.notFoundGiftsDescription,children:p("ResellGiftsNoFound")}),A&&(0,N.Y)(vt.A,{className:Ot.notFoundGiftsLink,onClick:C,children:p("ResellGiftsClearFilters")})]}),(0,N.Y)(R.A,{className:(0,s.A)(Ot.resaleStarGiftsContainer),items:v,onLoadMore:G,itemSelector:".starGiftItem",noFastList:!0,preloadBackwards:Rt.bc,scrollContainerClosest:`.${Ot.resaleScreenRoot}`,children:e?.map(e=>(0,N.Y)(Ut,{gift:e,observeIntersection:S,isResale:!0,onClick:c},e.id))})]})})}));var Et=i(10722),qt=i(71429),Ht=i(36393),zt=i(87094);const Jt=1.5*T.$,Wt=(0,n.ph)((0,a.EK)(e=>({theme:(0,o.SJA)(e)}))(({className:e,type:t,sticker:i,observeIntersectionForLoading:a,observeIntersectionForPlaying:r,theme:o})=>{const l=(0,n.li)(),c=(0,zt.A)(l,void 0,"pattern"!==t);return(0,N.Y)("div",{ref:l,className:(0,s.A)("KLFLR9ji",e),style:`width: ${Jt}px; height: ${Jt}px`,children:(0,N.Y)(Ft.A,{containerRef:l,sticker:i,size:Jt,shouldPreloadPreview:!0,observeIntersectionForLoading:a,observeIntersectionForPlaying:r,thumbClassName:"fCL5rY2D",customColor:c})})})),jt={root:"_VgmQnUg",buttonsContainer:"IDlp6U6g",dropdownArrows:"actLObgu",arrowLine:"f0JLMwNk",topLeft:"aEPsBBms",topRight:"xepslnAN",bottomLeft:"I3xj_cdQ",bottomRight:"xKwB_2uZ",open:"bGP5el27",sticker:"VT562JS0",backdropAttributeMenuItemText:"D50wFfRL",menuItemStickerText:"THcGWXSA",menuItemText:"L6EVE2Ux",menuItemCount:"O_ulK4qp",backdrop:"A29QNxKb",menuItemIcon:"GL4rVsev",itemIcon:"yuctLnuR",item:"qiYcBOYc",menuContentContainer:"EDsBn29z",menu:"ISaNdBwd",left:"e4Kkh_MR",right:"Kz_nCGC3"},_t=(0,n.ph)((0,a.EK)(e=>{const{resaleGifts:t}=(0,o.nTw)(e);return{attributes:t.attributes,counters:t.counters,filter:t.filter}})(({attributes:e,counters:t,filter:i,dialogRef:r})=>{const o=(0,M.A)(),{updateResaleGiftsFilter:l}=(0,a.ko)(),[c,d]=(0,n.J0)(""),[m,f]=(0,n.J0)(""),[p,h]=(0,n.J0)(""),A=(0,n.Kr)(()=>{const i={model:[],pattern:[],backdrop:[]};for(const n of t??[]){const{attribute:t}=n;if(!n.count)continue;const a=e?.find(e=>"backdrop"===e.type&&"backdrop"===t.type?e.backdropId===t.backdropId:("model"===e.type&&"model"===t.type||"pattern"===e.type&&"pattern"===t.type)&&e.sticker.id===t.documentId);"backdrop"===a?.type&&i.backdrop.push(a),"model"===a?.type&&i.model.push(a),"pattern"===a?.type&&i.pattern.push(a)}return i},[e,t]),g=(0,n.Kr)(()=>{const e=(e,t)=>t.trim()?e.filter(e=>Boolean(e.name?.toLowerCase().includes(t.toLowerCase()))):e;return{model:e(A.model,c),pattern:e(A.pattern,p),backdrop:e(A.backdrop,m)}},[A,c,m,p]),b=(0,n.Kr)(()=>{const e={model:new Map,pattern:new Map,backdrop:new Map};for(const i of t??[]){const{attribute:t,count:n}=i;"model"===t.type?e.model.set(t.documentId,n):"pattern"===t.type?e.pattern.set(t.documentId,n):"backdrop"===t.type&&e.backdrop.set(t.backdropId,n)}return e},[t]),v=(0,n.li)(),{isContextMenuOpen:G,contextMenuAnchor:S,handleContextMenu:C,handleContextMenuClose:I,handleContextMenuHide:y}=(0,Et.A)(r),k=(0,u.A)(()=>v.current),Y=(0,n.li)(),{isContextMenuOpen:B,contextMenuAnchor:w,handleContextMenu:D,handleContextMenuClose:T,handleContextMenuHide:P}=(0,Et.A)(r),U=(0,u.A)(()=>Y.current),R=(0,n.li)(),{isContextMenuOpen:x,contextMenuAnchor:L,handleContextMenu:K,handleContextMenuClose:O,handleContextMenuHide:V}=(0,Et.A)(r),E=(0,u.A)(()=>R.current),q=(0,n.li)(),{isContextMenuOpen:H,contextMenuAnchor:z,handleContextMenu:J,handleContextMenuClose:W,handleContextMenuHide:j}=(0,Et.A)(r),_=(0,u.A)(()=>q.current),Q=(0,n.Kr)(()=>{const e=i.sortType,t="byDate"===e?"sort-by-date":"byNumber"===e?"sort-by-number":"sort-by-price";return({onTrigger:i,isOpen:n})=>(0,N.FD)("div",{className:jt.item,onClick:i,children:[(0,N.Y)(F.A,{name:t,className:jt.itemIcon}),"byDate"===e&&o("ValueGiftSortByDate"),"byNumber"===e&&o("ValueGiftSortByNumber"),"byPrice"===e&&o("ValueGiftSortByPrice")]})},[o,i]),X=(0,n.Kr)(()=>{const e=i?.modelAttributes?.length||0;return({onTrigger:t,isOpen:i})=>(0,N.FD)("div",{className:jt.item,onClick:t,children:[0===e&&o("GiftAttributeModel"),e>0&&o("GiftAttributeModelPlural",{count:e},{pluralValue:e}),le(i)]})},[o,i]),$=(0,n.Kr)(()=>{const e=i?.backdropAttributes?.length||0;return({onTrigger:t,isOpen:i})=>(0,N.FD)("div",{className:jt.item,onClick:t,children:[0===e&&o("GiftAttributeBackdrop"),e>0&&o("GiftAttributeBackdropPlural",{count:e},{pluralValue:e}),le(i)]})},[o,i]),Z=(0,n.Kr)(()=>{const e=i?.patternAttributes?.length||0;return({onTrigger:t,isOpen:i})=>(0,N.FD)("div",{className:jt.item,onClick:t,children:[0===e&&o("GiftAttributeSymbol"),e>0&&o("GiftAttributeSymbolPlural",{count:e},{pluralValue:e}),le(i)]})},[o,i]),ee=(0,u.A)(e=>{l({filter:{...i,sortType:e}})}),ie=(0,u.A)(()=>{l({filter:{...i,modelAttributes:[]}})}),ne=(0,u.A)(()=>{l({filter:{...i,patternAttributes:[]}})}),ae=(0,u.A)(()=>{l({filter:{...i,backdropAttributes:[]}})}),re=(0,u.A)(e=>{if(!t)return;const n=i.modelAttributes||[],a=t.find(t=>"model"===t.attribute.type&&t.attribute.documentId===e.sticker.id)?.attribute;if(!a)return;const r=n.some(e=>e.documentId===a.documentId)?n.filter(e=>e.documentId!==a.documentId):[...n,a];l({filter:{...i,modelAttributes:r}})}),oe=(0,u.A)(e=>{if(!t)return;const n=i.patternAttributes||[],a=t.find(t=>"pattern"===t.attribute.type&&t.attribute.documentId===e.sticker.id)?.attribute;if(!a)return;const r=n.some(e=>e.documentId===a.documentId)?n.filter(e=>e.documentId!==a.documentId):[...n,a];l({filter:{...i,patternAttributes:r}})}),se=(0,u.A)(e=>{if(!t)return;const n=i.backdropAttributes||[],a=t.find(t=>"backdrop"===t.attribute.type&&t.attribute.backdropId===e.backdropId)?.attribute;if(!a)return;const r=n.some(e=>e.backdropId===a.backdropId)?n.filter(e=>e.backdropId!==a.backdropId):[...n,a];l({filter:{...i,backdropAttributes:r}})});function le(e){return(0,N.FD)("div",{className:jt.dropdownArrows,children:[(0,N.Y)("div",{className:(0,s.A)(jt.arrowLine,jt.topLeft,e&&jt.open)}),(0,N.Y)("div",{className:(0,s.A)(jt.arrowLine,jt.topRight,e&&jt.open)}),(0,N.Y)("div",{className:(0,s.A)(jt.arrowLine,jt.bottomLeft,e&&jt.open)}),(0,N.Y)("div",{className:(0,s.A)(jt.arrowLine,jt.bottomRight,e&&jt.open)})]})}const ce=(0,n.hb)(()=>{d("")},[]),de=(0,n.hb)(()=>{f("")},[]),ue=(0,n.hb)(()=>{h("")},[]),me=(0,u.A)(e=>{e.stopPropagation(),e.preventDefault()}),fe=(0,n.li)(),{observe:pe}=(0,ft.BL)({rootRef:fe,isDisabled:!w});return(0,N.FD)("div",{className:jt.root,children:[Boolean(S)&&(0,N.Y)(qt.A,{isOpen:G,anchor:S,ref:v,className:(0,s.A)(jt.menu,jt.left,"with-menu-transitions"),getMenuElement:k,autoClose:!0,onClose:I,onCloseAnimationEnd:y,positionX:"left",children:(0,N.FD)(N.FK,{children:[(0,N.FD)(ze.A,{icon:"sort-by-price",onClick:()=>{ee("byPrice")},children:[(0,N.Y)("div",{className:jt.menuItemText,children:o("GiftSortByPrice")}),(0,N.Y)(F.A,{className:jt.menuItemIcon,name:"byPrice"===i?.sortType?"check":"placeholder"})]}),(0,N.FD)(ze.A,{icon:"sort-by-date",onClick:()=>{ee("byDate")},children:[(0,N.Y)("div",{className:jt.menuItemText,children:o("GiftSortByDate")}),(0,N.Y)(F.A,{className:jt.menuItemIcon,name:"byDate"===i?.sortType?"check":"placeholder"})]}),(0,N.FD)(ze.A,{icon:"sort-by-number",onClick:()=>{ee("byNumber")},children:[(0,N.Y)("div",{className:jt.menuItemText,children:o("GiftSortByNumber")}),(0,N.Y)(F.A,{className:jt.menuItemIcon,name:"byNumber"===i?.sortType?"check":"placeholder"})]})]})}),Boolean(w)&&(0,N.Y)(qt.A,{isOpen:B,anchor:w,ref:Y,className:(0,s.A)(jt.menu,jt.left,"with-menu-transitions"),getMenuElement:U,autoClose:!0,onClose:T,onCloseAnimationEnd:P,children:function(){const e=g.model,t=i.modelAttributes??[],n=0===t.length;return(0,N.FD)("div",{className:jt.menuContentContainer,ref:fe,children:[(0,N.Y)(Ht.A,{onClick:me,className:jt.search,value:c,onChange:d,onReset:ce,placeholder:o("Search")}),(0,N.Y)(ze.A,{icon:"select",onClick:ie,children:o("ContextMenuItemSelectAll")}),e.map(e=>{const i=n||t.some(t=>t.documentId===e.sticker.id);return(0,N.FD)(ze.A,{onClick:()=>{re(e)},children:[(0,N.Y)(Wt,{className:jt.sticker,sticker:e.sticker,type:"model",observeIntersectionForLoading:pe,observeIntersectionForPlaying:pe}),(0,N.FD)("div",{className:jt.menuItemStickerText,children:[e.name,(0,N.Y)("span",{className:jt.menuItemCount,children:o.number(b.model.get(e.sticker.id)||0)})]}),(0,N.Y)(F.A,{className:jt.menuItemIcon,name:i?"check":"placeholder"})]},e.name)})]})}()}),Boolean(L)&&(0,N.Y)(qt.A,{isOpen:x,anchor:L,ref:R,className:(0,s.A)(jt.menu,jt.right,"with-menu-transitions"),getMenuElement:E,autoClose:!0,onClose:O,onCloseAnimationEnd:V,positionX:"right",children:function(){const e=g.backdrop,t=i.backdropAttributes??[],n=0===t.length;return(0,N.FD)("div",{className:jt.menuContentContainer,children:[(0,N.Y)(Ht.A,{onClick:me,className:jt.search,value:m,onChange:f,onReset:de,placeholder:o("Search")}),(0,N.Y)(ze.A,{icon:"select",onClick:ae,children:o("ContextMenuItemSelectAll")}),e.map(e=>{const i=n||t.some(t=>t.backdropId===e.backdropId);return(0,N.FD)(ze.A,{onClick:()=>{se(e)},children:[(0,N.Y)(te.A,{className:jt.backdrop,backgroundColors:[e.centerColor,e.edgeColor]}),(0,N.FD)("div",{className:jt.backdropAttributeMenuItemText,children:[e.name,(0,N.Y)("span",{className:jt.menuItemCount,children:o.number(b.backdrop.get(e.backdropId)||0)})]}),(0,N.Y)(F.A,{className:jt.menuItemIcon,name:i?"check":"placeholder"})]},e.name)})]})}()}),Boolean(z)&&(0,N.Y)(qt.A,{isOpen:H,anchor:z,ref:q,className:(0,s.A)(jt.menu,jt.right,"with-menu-transitions"),getMenuElement:_,autoClose:!0,onClose:W,onCloseAnimationEnd:j,children:function(){const e=g.pattern,t=i.patternAttributes??[],n=0===t.length;return(0,N.FD)("div",{className:jt.menuContentContainer,children:[(0,N.Y)(Ht.A,{onClick:me,className:jt.search,value:p,onChange:h,onReset:ue,placeholder:o("Search")}),(0,N.Y)(ze.A,{icon:"select",onClick:ne,children:o("ContextMenuItemSelectAll")}),e.map(e=>{const i=n||t.some(t=>t.documentId===e.sticker.id);return(0,N.FD)(ze.A,{onClick:()=>{oe(e)},children:[(0,N.Y)(Wt,{className:jt.sticker,sticker:e.sticker,type:"pattern"}),(0,N.FD)("div",{className:jt.menuItemStickerText,children:[e.name,(0,N.Y)("span",{className:jt.menuItemCount,children:o.number(b.pattern.get(e.sticker.id)||0)})]}),(0,N.Y)(F.A,{className:jt.menuItemIcon,name:i?"check":"placeholder"})]},e.name)})]})}()}),(0,N.FD)("div",{className:jt.buttonsContainer,children:[(0,N.Y)(Q,{onTrigger:C,isOpen:G}),(0,N.Y)(X,{onTrigger:D,isOpen:B}),(0,N.Y)($,{onTrigger:K,isOpen:x}),(0,N.Y)(Z,{onTrigger:J,isOpen:H})]})]})}));var Qt=i(36838);const Xt=(0,n.ph)((0,a.EK)(e=>{const{starGifts:t}=e;return{idsByCategory:t?.idsByCategory}})(({ref:e,idsByCategory:t,onCategoryChanged:i,areUniqueStarGiftsDisallowed:a,areLimitedStarGiftsDisallowed:r,isSelf:o,hasMyUnique:l,isPinned:c})=>{let d=(0,n.li)();e&&(d=e);const u=(0,M.A)(),m=Boolean(t?.collectible?.length),[f,p]=(0,n.J0)("all");function h(e){return"all"===e?u("AllGiftsCategory"):"myUnique"===e?u("GiftCategoryMyGifts"):"collectible"===e?u("GiftCategoryCollectibles"):e}function A(e){return(0,N.Y)("div",{className:(0,s.A)("dO7FKYY4",f===e&&"B2lEJk1v"),onClick:()=>function(e){p(e),i(e)}(e),children:h(e)})}return(0,Qt.A)(d,void 0,!0),(0,N.FD)("div",{ref:d,className:(0,s.A)("cUjwvN00",c&&"NhJABU3M","no-scrollbar"),children:[A("all"),!a&&!o&&l&&A("myUnique"),(!a||!r)&&m&&A("collectible")]})})),$t=[0,-50],Zt=3.5*T.$,ei=(0,mt.nF)(e=>e(),200,!0),ti=(0,n.ph)((0,a.EK)((e,{modal:t})=>{const{starGifts:i,stars:n,currentUserId:a}=e,r=t?.forPeerId?(0,o.PVB)(e,t.forPeerId):void 0,s=r?(0,o.vGo)(e,r?.id):void 0,{resaleGifts:l}=(0,o.nTw)(e),c=l.count,d=!1!==l.isLoading,u=t?.selectedResaleGift;return{boostPerSentGift:e.appConfig.boostsPerSentGift,starGiftsById:i?.byId,starGiftIdsByCategory:i?.idsByCategory,myUniqueGiftsById:e.myUniqueGifts?.byId,myUniqueGiftIds:e.myUniqueGifts?.ids,starBalance:n?.balance,peer:r,currentUserId:a,disallowedGifts:s?.disallowedGifts,resaleGiftsCount:c,areResaleGiftsLoading:d,selectedResaleGift:u,tabId:(0,o.nTw)(e).id}})(({modal:e,starGiftsById:t,starGiftIdsByCategory:i,myUniqueGiftsById:o,myUniqueGiftIds:l,starBalance:c,peer:A,currentUserId:g,disallowedGifts:b,resaleGiftsCount:v,areResaleGiftsLoading:G,selectedResaleGift:I,tabId:y})=>{const{closeGiftModal:k,openGiftInfoModal:Y,resetResaleGifts:B,loadResaleGifts:w,openGiftInMarket:D,closeResaleGiftsMarket:T,loadMyUniqueGifts:F,openGiftTransferConfirmModal:x,setGiftModalSelectedGift:K}=(0,a.ko)(),O=(0,n.li)(),V=(0,n.li)(),E=(0,n.li)(),q=(0,n.li)(),H=(0,n.li)(),z=Boolean(e),J=(0,d.A)(e),W=(0,d.A)(A),j=W&&(0,r.mO)(W)?W:void 0,_=W&&(0,r.vj)(W)?W:void 0,Q=Boolean(g&&J?.forPeerId===g),X=J?.selectedGift,[$,Z]=(0,n.J0)(!1),[ee,te]=(0,n.J0)(!1),[ie,ne]=(0,n.J0)(!1),[ae,re]=(0,n.J0)("all"),[oe,se,le]=(0,P.A)(!1),ce=(0,n.li)(),de=(0,n.Kr)(()=>{if(!b)return;const{shouldDisallowPremiumGifts:e,...t}=b;return!Q&&Object.values(t).every(Boolean)},[Q,b]),ue=!Q&&b?.shouldDisallowUnlimitedStarGifts,me=!Q&&b?.shouldDisallowLimitedStarGifts,fe=!Q&&b?.shouldDisallowUniqueStarGifts,he=(0,m.A)(),Ae=(0,M.A)(),ge=J?.gifts,be=(0,n.Kr)(()=>ge?.sort((e,t)=>e.months-t.months).filter(e=>1===e.users&&e.currency!==S.OUy),[ge]),ve=(0,n.Kr)(()=>{const e=new Map;return be?(be.forEach(t=>{const i=ge?.find(e=>e.currency===S.OUy&&e.months===t.months);i&&e.set(t,i)}),e):e},[ge,be]),Ne=(0,n.Kr)(()=>be?.reduce((e,t)=>e.amount<t.amount?e:t),[be]),{observe:Se}=(0,ft.BL)({rootRef:H,throttleMs:200,isDisabled:!z}),Ce=Boolean(I)&&!X,Ie=Boolean(X),ye=Ce||Ie||$,ke=Ie?ie:ee;(0,n.vJ)(()=>{if(I){const e="regularGiftId"in I?I.regularGiftId:I.id;w({giftId:e})}},[I]),(0,n.vJ)(()=>{z||(Z(!1),K({gift:void 0}),re("all"))},[z]),(0,n.vJ)(()=>{ne(Boolean(X&&"id"in X))},[X]);const Ye=(0,u.A)(e=>{if(Ie)return;const t=e.currentTarget;ei(()=>{const{scrollTop:e}=t;if(Z(e>150),V.current&&E.current){const{top:e}=E.current.getBoundingClientRect(),{top:t}=V.current.getBoundingClientRect();te(e-t<=0)}if(q.current&&H.current){const{top:e}=q.current.getBoundingClientRect(),{top:t}=H.current.getBoundingClientRect();e-t<=Zt?se():le()}})}),Be=Ae("GiftPremiumDescription",{user:(0,C.Yg)(j),link:(0,N.Y)(p.A,{text:Ae("GiftPremiumDescriptionLinkCaption"),url:Ae("GiftPremiumDescriptionLink"),children:Ae("GiftPremiumDescriptionLinkCaption",void 0,{withNodes:!0,specialReplacement:(0,pe.dE)()})})},{withNodes:!0}),we=(0,n.Kr)(()=>_?Ae("StarGiftDescriptionChannel",{peer:(0,r.F9)(Ae,_)},{withNodes:!0,withMarkdown:!0}):Q?Ae("StarGiftDescriptionSelf",void 0,{withNodes:!0,renderTextFilters:["br"]}):"collectible"===ae?Ae("StarGiftDescriptionCollectibles"):Ae("StarGiftDescription",{user:(0,C.Yg)(j)},{withNodes:!0,withMarkdown:!0}),[_,Q,ae,j,Ae]),De=(0,u.A)((e,t)=>{if("resell"===t){if(!("id"in e))return;return Ce?void Y({gift:e,recipientId:J?.forPeerId}):void D({gift:e,tabId:y})}K({gift:e})}),Te=(0,u.A)(e=>{if("starGift"===e.type||!o||!A?.id)return;const t=o[e.id];x({gift:t,recipientId:A.id})}),Pe=(0,u.A)(()=>{"myUnique"===ae&&F()});const Me=(0,u.A)(e=>{re(e)}),Fe=(0,u.A)(()=>{K({gift:void 0}),B(),k()}),Ue=(0,u.A)(()=>{Ce?T({tabId:y}):Ie?K({gift:void 0}):Fe()}),Re=(0,u.A)(()=>{ce.current?.()}),xe=(0,u.A)(e=>{ce.current=e}),Le=Ie||Ce,Ke=(0,s.A)("animated-close-icon",Le&&"state-back");return(0,N.FD)(h.A,{dialogRef:O,onClose:Fe,isOpen:z,isSlim:!0,contentClassName:Ot.content,className:(0,s.A)(Ot.modalDialog,Ot.root),isLowStackPriority:!0,withBalanceBar:!0,children:[(0,N.Y)(U.A,{className:Ot.closeButton,round:!0,color:"translucent",size:"tiny",onClick:Ue,ariaLabel:he(Le?"Common.Back":"Common.Close"),children:(0,N.Y)("div",{className:Ke})}),(0,N.Y)("div",{className:(0,s.A)(Ot.header,Ce&&Ot.resaleHeader,!ye&&Ot.hiddenHeader,oe&&!Ce&&Ot.noBorder),children:(0,N.Y)(L.Ay,{name:"slideVerticalFade",activeKey:ye?Ce?1:ke?2:3:0,slideClassName:Ot.headerSlide,children:function(){if(ye){if(Ce){const e=G&&!v;return(0,N.FD)("div",{className:Ot.resaleHeaderContentContainer,children:[(0,N.FD)("div",{className:Ot.resaleHeaderTextBlock,children:[(0,N.Y)("h2",{className:Ot.resaleHeaderText,children:I.title}),e&&(0,N.Y)("div",{className:Ot.resaleHeaderDescription,children:Ae("Loading")}),!e&&void 0!==v&&(0,N.Y)("div",{className:Ot.resaleHeaderDescription,children:Ae("HeaderDescriptionResaleGifts",{count:v},{withNodes:!0,withMarkdown:!0,pluralValue:v})})]}),(0,N.Y)(_t,{dialogRef:O})]})}return(0,N.Y)("h2",{className:Ot.commonHeaderText,children:Ae(ke?Q?"StarsGiftHeaderSelf":"StarsGiftHeader":"GiftPremiumHeader")})}}()})}),(0,N.FD)(L.Ay,{ref:V,className:Ot.transition,name:"pushSlide",activeKey:Ie?1:Ce?2:0,children:[!Ie&&!Ce&&(0,N.FD)("div",{ref:H,className:(0,s.A)(Ot.main,"custom-scroll"),onScroll:Ye,children:[(0,N.FD)("div",{className:Ot.avatars,children:[(0,N.Y)(f.A,{className:Ot.avatar,size:100,peer:W,onMouseMove:Re}),(0,N.Y)(Ge.A,{className:Ot.logoBackground,color:"gold",centerShift:$t,onRequestAnimation:xe})]}),!Q&&!_&&!b?.shouldDisallowPremiumGifts&&(0,N.FD)(N.FK,{children:[(0,N.Y)("h2",{className:(0,s.A)(Ot.headerText,Ot.center),children:Ae("GiftPremiumHeader")}),(0,N.Y)("p",{className:(0,s.A)(Ot.description,Ot.center),children:Be}),(0,N.Y)("div",{className:Ot.premiumGiftsGallery,children:be?.map(e=>(0,N.Y)(Mt,{option:e,optionByStars:ve.get(e),baseMonthAmount:Ne?Math.floor(Ne.amount/Ne.months):void 0,onClick:De}))})]}),!de&&(0,N.FD)(N.FK,{children:[(0,N.Y)("h2",{ref:E,className:(0,s.A)(Ot.headerText,Ot.center),children:Ae(Q?"StarsGiftHeaderSelf":"StarsGiftHeader")}),(0,N.Y)("p",{className:(0,s.A)(Ot.description,Ot.starGiftsDescription,Ot.center),children:we}),(0,N.Y)(Xt,{ref:q,areUniqueStarGiftsDisallowed:fe,areLimitedStarGiftsDisallowed:me,isSelf:Q,hasMyUnique:Boolean(l?.length),isPinned:oe,onCategoryChanged:Me}),(0,N.Y)(L.Ay,{name:"zoomFade",activeKey:(Oe=ae,"all"===Oe?0:"myUnique"===Oe?1:2),className:Ot.starGiftsTransition,children:function(){if("myUnique"===ae)return(0,N.Y)(R.A,{className:Ot.starGiftsContainer,items:l,onLoadMore:Pe,scrollContainerClosest:`.${Ot.main}`,itemSelector:".starGiftItem",children:o&&l?.map(e=>{const t=o[e];if(t)return(0,N.Y)(Ut,{gift:t.gift,observeIntersection:Se,onClick:Te,withTransferBadge:!0},e)})});const e=i?.[ae]?.filter(e=>{const i=t?.[e];if(!i)return!1;const{isLimited:n,availabilityResale:a}=i;return me&&n?!fe&&a:!(ue&&!n)});return(0,N.Y)("div",{className:Ot.starGiftsContainer,children:t&&e?.flatMap(e=>{const i=t[e],n=Boolean(i.availabilityResale)&&!fe,a=n&&!i.isSoldOut&&!me,r=[(0,N.Y)(Ut,{gift:i,observeIntersection:Se,isResale:n&&!a,onClick:De},e)];return a&&r.push((0,N.Y)(Ut,{isResale:!0,gift:i,observeIntersection:Se,onClick:De},`resale_${e}`)),r})})}()})]})]}),Ce&&I&&(0,N.Y)(Vt,{onGiftClick:De}),Ie&&J?.forPeerId&&(0,N.Y)(Bt,{gift:X,giftByStars:ve.get(X),peerId:J.forPeerId})]})]});var Oe}));const ii={root:"W3JMs1YE"},ni=(0,n.ph)((0,a.EK)(e=>{const{currentUserId:t}=e;return{currentUserId:t,userIds:e.contactList?.userIds}})(({modal:e,currentUserId:t,userIds:i})=>{const{closeGiftRecipientPicker:s,openGiftModal:l}=(0,a.ko)(),c=(0,m.A)(),d=e,[f,p]=(0,n.J0)(""),h=(0,n.Kr)(()=>{const e=(0,a.mS)(),n=i?i.concat(t):void 0,s=n?(0,r.PU)({ids:n,query:f}):[];return(0,y.A)((0,I.Am)(s).filter(t=>(0,o.X2D)(e,t)),void 0,[t])},[t,f,i]),A=(0,u.A)(e=>{l({forUserId:e}),s()});return(0,N.Y)(Y.A,{className:ii.root,isOpen:d,onClose:s,title:c("GiftTelegramPremiumOrStarsTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,children:(0,N.Y)(k.A,{className:ii.picker,itemIds:h,filterValue:f,filterPlaceholder:c("Search"),onSelectedIdChange:A,onFilterChange:p,isSearchable:!0,withDefaultPadding:!0,withStatus:!0,forceShowSelf:!0})})}));var ai=i(79089),ri=i(18501);function oi({originalDetails:e,recipient:t,sender:i,onOpenChat:n,lang:a}){const{recipientId:o,senderId:s,date:l,message:c}=e,d=(0,z.L2)(1e3*l,a.code,!0),u=(0,N.Y)(vt.A,{onClick:()=>n(o),isPrimary:!0,children:(0,r.F9)(a,t)});if(!i||s===o)return c?a("GiftInfoPeerOriginalInfoText",{peer:u,text:(0,ri.fd)(c),date:d},{withNodes:!0}):a("GiftInfoPeerOriginalInfo",{peer:u,date:d},{withNodes:!0});const m=(0,N.Y)(vt.A,{onClick:()=>n(i.id),isPrimary:!0,children:(0,r.F9)(a,i)});return c?a("GiftInfoPeerOriginalInfoTextSender",{peer:u,sender:m,text:(0,ri.fd)(c),date:d},{withNodes:!0}):a("GiftInfoPeerOriginalInfoSender",{peer:u,date:d,sender:m},{withNodes:!0})}var si=i(25404);const li={root:"Ef0cKSqQ",giftPreview:"IvuNzslN",backdrop:"dNukis4X",arrow:"oufsMLLF"},ci=4*T.$,di=3*T.$,ui=(0,n.ph)(({peer:e,gift:t})=>{const i=(0,n.Kr)(()=>(0,X.uc)(t),[t]);if(i)return(0,N.FD)("div",{className:li.root,children:[(0,N.FD)("div",{className:li.giftPreview,children:[(0,N.Y)(te.A,{className:li.backdrop,backgroundColors:[i.backdrop.centerColor,i.backdrop.edgeColor],patternIcon:i.pattern?.sticker,ringsCount:1,ovalFactor:1,patternSize:12}),(0,N.Y)(ee.A,{className:li.sticker,size:di,sticker:i.model?.sticker})]}),(0,N.Y)(F.A,{name:"next",className:li.arrow}),(0,N.Y)(f.A,{peer:e,size:ci,className:li.avatar})]})}),mi={root:"cXxisAOv",uncommon:"ijxb6cY4",rare:"ILZMGKzU",epic:"yV7QxSSZ",legendary:"mfLnm_Bt"},fi=(0,n.ph)(({rarity:e})=>{const t=(0,M.A)();return(0,N.Y)(V.A,{className:(0,s.A)(mi.root,"regular"!==e.type&&mi[e.type]),children:(0,X.IT)(t,e)})});var pi=i(94189);const hi={modal:"nnublcCk",uniqueTitleNumber:"nGQgapzK",small:"lmRjx4L1",regular:"WnPo9akz",checkBox:"fjE0wGvw",checkBoxDescription:"tepUTe4z",upgradeIcon:"lgyInH5K",descriptionConfirm:"BJh2Tufh",titleConfirm:"gA102W1G",header:"p7FTs7_p",title:"pIbzzTir",description:"CCPfr26t",warningDescription:"eEsRJVa1",modalContent:"o9rFZ6By",moreMenuButton:"EMwExRMy",closeButton:"jQv0ZSEW",giftResalePriceContainer:"BN8gf5y6",starAmountIcon:"_5guecUe",giftResalePriceStar:"H_q8o2vY",headerButton:"WA0INleU",left:"aOhTHZlf",right:"rJOB1u5Q",footer:"bho0GTYt",footerDescription:"VUylTszM",footerHint:"mxS8kDnA",buyButton:"i1MmnrPG",unknown:"zDauXmpS",giftValue:"w_E4LkUj",uniqueValue:"uAjIRJva",uniqueAttribute:"OJQnkf17",attributeName:"dq7wCHJb",uniqueGift:"I6o_pGAm",modalHeader:"ie9tImaj",modalCloseButton:"p38RBGdC",ownerAddress:"DavMRg4Q",copyIcon:"SLX5tX8C",messageContainer:"oW5T3mkV",removeMessageButton:"TrW2LVm5"},Ai=(0,n.ph)((0,a.EK)((e,{modal:t})=>{const i=t?.gift,n=i&&"gift"in i,a=e.currentUserId,s=n&&i.fromId,l=s?(0,o.PVB)(e,s):void 0,c=t?.peerId?(0,o.PVB)(e,t.peerId):void 0,d=c&&(0,r.vj)(c)?c:void 0,u=d&&(0,C.ub)(d,"postMessages"),m=(0,o.mBe)(e,a),f=t?.recipientId&&a!==t.recipientId?(0,o.PVB)(e,t.recipientId):void 0,p=m?.emojiStatus,h=e.collectibleEmojiStatuses?.statuses,A=n?i.gift:i,g="starGiftUnique"===A?.type&&A.releasedByPeerId;return{fromPeer:l,targetPeer:c,releasedByPeer:g?(0,o.PVB)(e,g):void 0,currentUserId:a,starGiftMaxConvertPeriod:e.appConfig.starGiftMaxConvertPeriod,tonExplorerUrl:e.appConfig.tonExplorerUrl,hasAdminRights:u,currentUserEmojiStatus:p,collectibleEmojiStatuses:h,currentUser:m,recipientPeer:f}})(({modal:e,fromPeer:t,targetPeer:i,releasedByPeer:c,currentUserId:h,starGiftMaxConvertPeriod:A,hasAdminRights:g,currentUserEmojiStatus:b,collectibleEmojiStatuses:v,tonExplorerUrl:G,currentUser:C,recipientPeer:I})=>{const{closeGiftInfoModal:y,changeGiftVisibility:k,convertGiftToStars:Y,openChatWithInfo:B,focusMessage:w,openGiftUpgradeModal:D,showNotification:T,buyStarGift:R,closeGiftModal:x,openGiftInfoValueModal:L,updateResaleGiftsFilter:K,openGiftInMarket:O,openGiftDescriptionRemoveModal:E}=(0,a.ko)(),[q,H,J]=(0,P.A)(),W=(0,M.A)(),j=(0,m.A)(),[_,$]=(0,n.J0)(!1),[Z,te]=(0,n.J0)(!1),ie=(0,n.li)(),ne=(0,u.A)(()=>{be&&_e?.pattern&&(O({gift:be}),K({filter:{sortType:"byDate",modelAttributes:[],backdropAttributes:[],patternAttributes:[{type:"pattern",documentId:_e.pattern.sticker.id}]}}))}),ae=(0,u.A)(()=>{be&&_e?.backdrop&&(O({gift:be}),K({filter:{sortType:"byDate",modelAttributes:[],backdropAttributes:[{type:"backdrop",backdropId:_e.backdrop.backdropId}],patternAttributes:[]}}))}),re=(0,u.A)(()=>{be&&_e?.model&&(O({gift:be}),K({filter:{sortType:"byDate",modelAttributes:[{type:"model",documentId:_e.model.sticker.id}],backdropAttributes:[],patternAttributes:[]}}))}),oe=Boolean(e),se=(0,d.A)(e),le=(0,d.A)(t),ce=(0,d.A)(i),de=ce&&(0,r.vj)(ce),{gift:ue}=se||{},me=ue&&"gift"in ue,fe=me?ue:void 0,he=fe?.fromId===h,Ae=fe&&A&&fe.date+A-(0,Ye.Fm)()||0,ge=Math.ceil(Ae/60/60/24),be=me?ue.gift:ue,ve=be&&(0,X.yQ)(be),Ge=Ae>0&&Boolean(fe?.starsToConvert),Ce=be&&"starGiftUnique"===be.type,Ie=Ce?be:void 0,ye="starGiftUnique"===be?.type?be.slug:void 0,ke=(0,n.Kr)(()=>{if(ye)return v?.find(e=>"collectible"===e.type&&e.slug===ye)},[ye,v]),Be=Boolean(ke),we=Boolean(fe?.upgradeMsgId),De=!we&&fe?.inputGift&&(de?g:"starGift"===be?.type?ce?.id===h:be?.ownerId===h||Be);function Te(e){if(!Ce)return;const t=be.resellPrice;return t?be?.resaleTonOnly||e?t.find(e=>e.currency===S.ykW):t.find(e=>e.currency===S.OUy):void 0}const Pe=Te(),Fe=Te(Z),Ue=Pe?.currency===S.ykW&&Ce?be.resellPrice?.find(e=>e.currency===S.OUy):void 0,Re=!Be&&"starGiftUnique"===be?.type&&be.ownerId!==h&&Boolean(Pe),xe=(()=>{if(!Ce)return;const{ownerName:e,ownerId:t}=be,i=(0,a.mS)(),n=t?(0,o.PVB)(i,t):void 0;return n?(0,r.F9)(W,n):e})(),Le=(0,u.A)(()=>{y()}),Ke=(0,u.A)(()=>{const e=he?ce:le;if(!fe?.upgradeMsgId||!e)return;const{upgradeMsgId:t}=fe;w({chatId:e.id,messageId:t}),Le()}),Oe=(0,u.A)(()=>{const{inputGift:e,isUnsaved:t}=fe;k({gift:e,shouldUnsave:!t}),Le()}),Ve=(0,u.A)(()=>{const{inputGift:e}=fe;Y({gift:e}),J(),Le()}),Ee=(0,u.A)(()=>{if(!(fe?.inputGift&&fe.dropOriginalDetailsStars&&be&&_e))return;const{originalDetails:e}=_e;e&&E({gift:fe,price:fe.dropOriginalDetailsStars,details:e})}),He=(0,u.A)(()=>{if(!fe)return;const e=ce?.id;D({giftId:fe.gift.id,gift:fe,peerId:e})}),ze=(0,u.A)(()=>{"starGiftUnique"===be?.type&&Te()&&$(!0)}),Je=(0,u.A)(()=>{$(!1)}),We=(0,u.A)(()=>{const e=I||C,t=Te(Z);e&&t&&"starGiftUnique"===be?.type&&(Je(),x(),R({peerId:e.id,slug:be.slug,price:t}))}),je=(0,u.A)(()=>{be&&"starGiftUnique"===be.type&&L({gift:be})}),_e=(0,n.Kr)(()=>be&&(0,X.uc)(be),[be]),Qe=(0,n.Kr)(()=>{if(!be||"starGiftUnique"!==be.type||!_e?.backdrop)return;const e=_e.backdrop.textColor,t=String(be.number).length>=6?hi.small:hi.regular,i=(0,N.Y)("span",{className:(0,s.A)(hi.uniqueTitleNumber,t),style:`color: ${e}`,children:W("GiftSavedNumber",{number:be.number})});return W("GiftInfoUniqueTitle",{name:be.title,number:i},{withNodes:!0})},[be,_e,W]),Xe=(0,n.Kr)(()=>{if(!be||"starGiftUnique"!==be.type)return;if(c){const e=`@${(0,ai.Kl)(c)}`||(0,r.F9)(W,c),t=(0,r.mO)(c)?W("ActionFallbackUser"):W("ActionFallbackChannel");return e||t}const e=_e?.model?.name;return e},[be,_e,c,W]),$e=(0,u.A)(()=>Re?(0,N.FD)(U.A,{className:hi.buyButton,onClick:ze,children:[(0,N.Y)("div",{children:W("ButtonBuyGift",{stars:Pe?.currency===S.ykW?(0,pe.Ms)(W,Pe.amount,{shouldConvertFromNanos:!0}):(0,pe.U2)(W,Pe?.amount,{asFont:!0})},{withNodes:!0})}),Pe?.currency===S.ykW&&Boolean(Ue)&&(0,N.Y)("div",{className:hi.footerHint,children:W("GiftBuyEqualsTo",{stars:(0,pe.U2)(W,Ue.amount,{asFont:!0})},{withNodes:!0})})]}):we?(0,N.Y)(U.A,{onClick:Ke,children:W("GiftInfoViewUpgraded")}):De&&fe?.alreadyPaidUpgradeStars&&!fe.upgradeMsgId?(0,N.Y)(U.A,{isShiny:!0,onClick:He,iconName:"arrow-down-circle",iconClassName:hi.upgradeIcon,iconAlignment:"end",children:W("GiftInfoUpgradeForFree")}):De&&fe?.canUpgrade&&!fe.upgradeMsgId?(0,N.Y)(U.A,{isShiny:!0,onClick:He,iconName:"arrow-down-circle",iconClassName:hi.upgradeIcon,iconAlignment:"end",children:W("GiftInfoUpgrade")}):fe?.prepaidUpgradeHash?(0,N.Y)(U.A,{isShiny:!0,onClick:He,iconName:"arrow-down-circle",iconClassName:hi.upgradeIcon,iconAlignment:"end",children:W("GiftAnUpgradeButton")}):(0,N.Y)(U.A,{onClick:Le,children:W("OK")})),Ze=(0,n.Kr)(()=>{if(!be)return;let e="";return"starGift"===be.type&&(be.firstSaleDate&&(e+=`${W("GiftInfoFirstSale")} ${(0,z.L2)(1e3*be.firstSaleDate,W.code,!0)}`),be.lastSaleDate&&(e+="\n",e+=`${W("GiftInfoLastSale")} ${(0,z.L2)(1e3*be.lastSaleDate,W.code,!0)}`)),e},[be,W]),et=(0,n.Kr)(()=>{if(!ue||!be)return;const{fromId:e,isNameHidden:t,starsToConvert:i,isUnsaved:n,isConverted:d,upgradeMsgId:u}=fe||{},m=Ge&&Boolean(i),h=t&&ce,A=fe?.isRefunded||!fe&&"starGift"===be?.type,g=(()=>{if(!fe)return W("GiftInfoSoldOutDescription");if(!de){if(fe.isRefunded)return W("GiftInfoDescriptionRefunded");if(fe.upgradeMsgId)return W("GiftInfoDescriptionUpgraded");if(De&&fe.canUpgrade&&fe.alreadyPaidUpgradeStars&&!fe.upgradeMsgId)return W("GiftInfoDescriptionUpgrade2");if(fe.canUpgrade&&De)return De?W("GiftInfoDescriptionFreeUpgrade"):W("GiftInfoPeerDescriptionFreeUpgradeOut",{peer:(0,r.F9)(W,ce)});if(De||he)return d&&m?De?W("GiftInfoDescriptionConverted",{amount:i},{pluralValue:i,withNodes:!0,withMarkdown:!0}):W("GiftInfoPeerDescriptionOutConverted",{amount:i,peer:(0,r.F9)(W,ce)},{pluralValue:i,withNodes:!0,withMarkdown:!0}):fe.canUpgrade&&De?m?W("GiftInfoDescriptionUpgrade",{amount:i},{pluralValue:i,withNodes:!0,withMarkdown:!0}):W("GiftInfoDescriptionUpgradeRegular"):De?m?W("GiftInfoDescription",{amount:i},{withNodes:!0,withMarkdown:!0,pluralValue:i}):W("GiftInfoDescriptionRegular"):m?W("GiftInfoPeerDescriptionOut",{amount:i,peer:(0,r.F9)(W,ce)},{withNodes:!0,withMarkdown:!0,pluralValue:i}):W("GiftInfoPeerDescriptionOutRegular",{peer:(0,r.F9)(W,ce)})}})(),b=(0,N.FD)("div",{className:hi.modalHeader,children:[(0,N.Y)(U.A,{className:hi.closeButton,round:!0,color:"translucent-white",size:"tiny",iconName:"close",ariaLabel:W("Close"),onClick:Le}),Boolean(Pe?.amount)&&(0,N.Y)("div",{className:hi.giftResalePriceContainer,children:Pe.currency===S.ykW?(0,pe.Ms)(W,Pe.amount,{className:hi.giftResalePriceStar,shouldConvertFromNanos:!0}):(0,pe.U2)(W,Pe.amount,{asFont:!0,className:hi.giftResalePriceStar})})]}),v=Ce&&(0,N.Y)("div",{ref:ie,className:(0,s.A)(hi.header,hi.uniqueGift),children:(0,N.Y)(Me,{backdropAttribute:_e.backdrop,patternAttribute:_e.pattern,modelAttribute:_e.model,title:Qe,subtitle:Xe,subtitlePeer:c,showManageButtons:De,savedGift:fe})}),C=(0,N.FD)("div",{className:hi.header,children:[(0,N.Y)(ee.A,{className:hi.giftSticker,sticker:ve,size:120}),(0,N.Y)("h1",{className:hi.title,children:Ce?be.title:W(fe?De?"GiftInfoReceived":"GiftInfoTitle":"GiftInfoSoldOutTitle")}),Boolean(g)&&(0,N.Y)("p",{className:(0,s.A)(hi.description,A&&hi.warningDescription),children:g})]}),I=[];if("starGift"===be.type){(e||t)&&I.push([W("GiftInfoFrom"),e?{chatId:e}:(0,N.FD)(N.FK,{children:[(0,N.Y)(f.A,{size:"small",peer:Q.I5}),(0,N.Y)("span",{className:hi.unknown,children:j(Q.I5.titleKey)})]})]),fe?.date&&I.push([W("GiftInfoDate"),(0,N.Y)("span",{title:Ze,children:(0,z.L2)(1e3*fe.date,W.code,!0)})]),be.firstSaleDate&&!fe&&I.push([W("GiftInfoFirstSale"),(0,z.L2)(1e3*be.firstSaleDate,W.code,!0)]),be.lastSaleDate&&!fe&&I.push([W("GiftInfoLastSale"),(0,z.L2)(1e3*be.lastSaleDate,W.code,!0)]);const n=be.stars+(fe?.alreadyPaidUpgradeStars||0);I.push([W("GiftInfoValue"),(0,N.FD)("div",{className:hi.giftValue,children:[(0,pe.U2)(W,n,{className:hi.starAmountIcon}),De&&Ge&&Boolean(i)&&(0,N.Y)(V.A,{onClick:H,children:W("GiftInfoConvert",{amount:i},{pluralValue:i})})]})]),be.availabilityTotal&&I.push([W("GiftInfoAvailability"),W("GiftInfoAvailabilityValue",{count:be.availabilityRemains||0,total:be.availabilityTotal},{pluralValue:be.availabilityRemains||0})]),be.upgradeStars&&!u&&I.push([W("GiftInfoStatus"),(0,N.Y)("div",{className:hi.giftValue,children:W("GiftInfoStatusNonUnique")})]),fe?.message&&I.push([void 0,(0,ri.fd)(fe.message)])}if(Ce){const{ownerName:e,ownerAddress:t,ownerId:i}=be,n=i?(0,o.PVB)((0,a.mS)(),i):void 0,{model:r,backdrop:s,pattern:c,originalDetails:d}=_e||{};if(t?I.push([W("GiftInfoOwner"),(0,N.FD)("span",{className:hi.ownerAddress,onClick:()=>{(0,Ne.eM)(t),T({message:{key:"WalletAddressCopied"},icon:"copy"})},children:[t,(0,N.Y)(F.A,{className:hi.copyIcon,name:"copy"})]})]):(n||e)&&I.push([W("GiftInfoOwner"),i?{chatId:i,withEmojiStatus:!0}:e||""]),r&&I.push([W("GiftAttributeModel"),(0,N.FD)("span",{className:hi.uniqueAttribute,children:[(0,N.Y)("span",{className:hi.attributeName,onClick:re,children:r.name}),(0,N.Y)(fi,{rarity:r.rarity})]})]),s&&I.push([W("GiftAttributeBackdrop"),(0,N.FD)("span",{className:hi.uniqueAttribute,children:[(0,N.Y)("span",{className:hi.attributeName,onClick:ae,children:s.name}),(0,N.Y)(V.A,{children:(0,X.IT)(W,s.rarity)})]})]),c&&I.push([W("GiftAttributeSymbol"),(0,N.FD)("span",{className:hi.uniqueAttribute,children:[(0,N.Y)("span",{className:hi.attributeName,onClick:ne,children:c.name}),(0,N.Y)(V.A,{children:(0,X.IT)(W,c.rarity)})]})]),I.push([W("GiftInfoAvailability"),W("GiftInfoIssued",{issued:be.issuedCount,total:be.totalCount})]),be.valueAmount&&be.valueCurrency){const e=(0,l.Ad)(be.valueAmount,be.valueCurrency,W.code);I.push([W("GiftInfoValue"),(0,N.FD)("span",{className:hi.uniqueValue,children:[W("GiftInfoValueAmount",{amount:e}),(0,N.Y)(V.A,{onClick:je,children:W("GiftInfoValueLinkMore")})]})])}if(d){const{recipientId:e,senderId:t}=d,i=(0,a.mS)(),n=e=>{B({id:e}),y()},r=oi({originalDetails:d,recipient:(0,o.PVB)(i,e),sender:t?(0,o.PVB)(i,t):void 0,onOpenChat:n,lang:W});I.push([void 0,(0,N.FD)("div",{className:hi.messageContainer,children:[(0,N.Y)("div",{children:r}),Boolean(fe?.dropOriginalDetailsStars)&&(0,N.Y)(U.A,{round:!0,className:hi.removeMessageButton,size:"smaller",color:"translucent",ariaLabel:"Delete original details",onClick:Ee,iconName:"delete"})]})])}}const k=G&&Ce&&be.giftAddress&&`${G}${be.giftAddress}`,Y=(0,N.FD)("div",{className:hi.footer,children:[(De||k||Re)&&(0,N.FD)("div",{className:hi.footerDescription,children:[k&&(0,N.Y)("div",{children:W("GiftInfoTonText",{link:(0,N.Y)(p.A,{url:k,shouldSkipModal:!0,text:W("GiftInfoTonLinkText"),children:W("GiftInfoTonLinkText",void 0,{withNodes:!0,specialReplacement:(0,pe.dE)()})})},{withNodes:!0})}),De&&(0,N.Y)("div",{children:W(`GiftInfo${de?"Channel":""}${n?"Hidden":"Saved"}`,{link:(0,N.Y)(vt.A,{isPrimary:!0,onClick:Oe,children:W("GiftInfoSaved"+(n?"Show":"Hide"),void 0,{withNodes:!0,specialReplacement:(0,pe.dE)()})})},{withNodes:!0})}),!Re&&h&&(0,N.Y)("div",{children:W("GiftInfoSenderHidden")}),Re&&xe&&(0,N.Y)("div",{children:W("GiftInfoBuyGift",{user:xe},{withNodes:!0})})]}),$e()]});return{modalHeader:Ce?b:void 0,header:Ce?v:C,tableData:I,footer:Y}},[ue,fe,ce,ve,W,De,Ge,he,j,G,be,_e,$e,de,Ce,Ze,Re,xe,Pe,Qe,Xe,c,ne,ae,re]),tt=ue&&(0,N.Y)(si.A,{peerId:se.peerId,gift:ue,canManage:De,collectibleEmojiStatuses:v,currentUserEmojiStatus:b});return(0,N.FD)(N.FK,{children:[(0,N.Y)(Se.A,{isOpen:oe,modalHeader:et?.modalHeader,header:et?.header,hasBackdrop:Ce,tableData:et?.tableData,footer:et?.footer,className:hi.modal,contentClassName:hi.modalContent,closeButtonColor:Ce?"translucent-white":void 0,moreMenuItems:tt,onClose:Le,withBalanceBar:Boolean(Re),currencyInBalanceBar:Fe?.currency,isLowStackPriority:!0}),Ie&&C&&Boolean(Fe)&&(0,N.FD)(pi.A,{isOpen:_,noDefaultTitle:!0,onClose:Je,confirmLabel:W("ButtonBuyGift",{stars:Fe?.currency===S.ykW?(0,pe.Ms)(W,Fe.amount,{shouldConvertFromNanos:!0}):(0,pe.U2)(W,Fe.amount,{asFont:!0})},{withNodes:!0}),confirmHandler:We,children:[Ie.resaleTonOnly&&(0,N.Y)("div",{className:hi.descriptionConfirm,children:W("ConfirmBuyGiftForTonDescription")}),(0,N.Y)(ui,{peer:I||C,gift:Ie}),(0,N.Y)("div",{className:hi.titleConfirm,children:W("TitleConfirmPayment")}),!I&&(0,N.Y)("p",{children:W("GiftBuyConfirmDescription",{gift:W("GiftUnique",{title:Ie.title,number:Ie.number}),stars:Fe?.currency===S.ykW?(0,pe.QH)(W,Fe.amount,!0):(0,pe.Kk)(W,Fe.amount)},{withNodes:!0,withMarkdown:!0})}),I&&(0,N.Y)("p",{children:W("GiftBuyForPeerConfirmDescription",{gift:W("GiftUnique",{title:Ie.title,number:Ie.number}),stars:Fe?.currency===S.ykW?(0,pe.QH)(W,Fe.amount,!0):(0,pe.Kk)(W,Fe.amount),peer:(0,r.F9)(W,I)},{withNodes:!0,withMarkdown:!0})}),!Ie.resaleTonOnly&&(0,N.FD)(N.FK,{children:[(0,N.Y)(qe.A,{className:hi.checkBox,label:W("LabelPayInTON"),checked:Z,onCheck:te}),(0,N.Y)("div",{className:hi.checkBoxDescription,children:W("DescriptionPayInTON")})]})]}),fe&&(0,N.FD)(pi.A,{isOpen:q,onClose:J,confirmHandler:Ve,title:W("GiftInfoConvertTitle"),children:[(0,N.Y)("div",{children:W("GiftInfoPeerConvertDescription",{amount:(0,pe.Kk)(W,fe.starsToConvert),peer:(0,r.F9)(W,le)},{withNodes:!0,withMarkdown:!0})}),Ge&&(0,N.Y)("div",{children:W("GiftInfoConvertDescriptionPeriod",{count:ge},{withNodes:!0,withMarkdown:!0,pluralValue:ge})}),(0,N.Y)("div",{children:W("GiftInfoConvertDescription2")})]})]})})),gi="hspYTy7V",bi=(0,n.ph)(({modal:e})=>{const{closeGiftInfoValueModal:t,openUrl:i,openGiftInMarket:r}=(0,a.ko)(),o=(0,M.A)(),s=Boolean(e),c=(0,d.A)(e),m=(0,u.A)(()=>{e?.valueInfo.fragmentListedUrl&&i({url:e.valueInfo.fragmentListedUrl})}),f=(0,u.A)(()=>{e?.gift&&r({gift:e.gift})}),p=(0,n.Kr)(()=>{if(!c)return;const{gift:e,valueInfo:t}=c,i=(0,X.uc)(e);if(!i)return;const n=(0,N.FD)("div",{className:"v4GJBsdC",children:[(0,N.Y)(ee.A,{className:"lJodRD0R",sticker:i.model.sticker,size:120}),(0,N.Y)(U.A,{pill:!0,size:"tiny",fluid:!0,nonInteractive:!0,children:(0,l.Ad)(t.value,t.currency,o.code)}),(0,N.Y)("div",{className:"VjWaO8un",children:o("GiftValueDescription",{giftName:e.title},{withMarkdown:!0,withNodes:!0})})]}),a=[];a.push([o("GiftValueTitleInitialSale"),(0,z.A)(1e3*t.initialSaleDate,o.code)]),a.push([o("GiftValueTitleInitialPrice"),(0,N.FD)("span",{className:"K7zsAhVt",children:[(0,pe.U2)(o,t.initialSaleStars,{className:"Xw91xwpe"})," (~ ",(0,l.Ad)(t.initialSalePrice,t.currency,o.code),")"]})]),t.lastSaleDate&&a.push([o("GiftValueTitleLastSale"),(0,z.A)(1e3*t.lastSaleDate,o.code)]),t.lastSalePrice&&a.push([o("GiftValueTitleLastPrice"),(0,l.Ad)(t.lastSalePrice,t.currency,o.code)]),t.floorPrice&&a.push([o("GiftValueTitleMinimumPrice"),(0,l.Ad)(t.floorPrice,t.currency,o.code)]),t.averagePrice&&a.push([o("GiftValueTitleAveragePrice"),(0,l.Ad)(t.averagePrice,t.currency,o.code)]);const r=Boolean(t.fragmentListedUrl&&t.fragmentListedCount),s=Boolean(t.listedCount&&t.listedCount);return{header:n,tableData:a,footer:(r||s)&&(0,N.FD)("div",{className:"OJDo2xUd",children:[r&&(0,N.FD)(U.A,{isText:!0,onClick:m,noForcedUpperCase:!0,size:"tiny",children:[o.number(t.fragmentListedCount),(0,N.Y)(ee.A,{className:gi,sticker:i.model.sticker,size:24}),o("GiftValueForSaleOnFragment")]}),s&&(0,N.FD)(U.A,{isText:!0,noForcedUpperCase:!0,size:"tiny",onClick:f,children:[o.number(t.listedCount),(0,N.Y)(ee.A,{className:gi,sticker:i.model.sticker,size:24}),o("GiftValueForSaleOnTelegram")]})]})}},[o,c,m,f]);if(p)return(0,N.Y)(Se.A,{isOpen:s,onClose:t,header:p.header,tableData:p.tableData,footer:p.footer})}),vi=(0,n.ph)(({modal:e})=>{const{closeLockedGiftModal:t}=(0,a.ko)(),i=(0,M.A)(),r=(0,u.A)(()=>{t()}),o=(0,n.hb)(()=>{if(!e)return"";if(e.untilDate){const t=e.untilDate?e.untilDate-(0,Ye.Fm)():0;return i("GiftLockedMessage",{relativeDate:(0,z.A$)(i,t)},{withNodes:!0,withMarkdown:!0})}return e.reason?(0,ri.fd)(e.reason):i("TitleGiftLocked")},[e,i]);return(0,N.FD)(h.A,{isOpen:Boolean(e),className:"narrow",onClose:r,title:i("TitleGiftLocked"),headerClassName:"AqB1qB8W",children:[(0,N.Y)("p",{className:"pA8Bz4TW",children:o()}),(0,N.Y)(U.A,{onClick:r,children:i("OK")})]})});var Ni=i(40664);const Gi=(0,n.ph)((0,a.EK)(e=>{const t=(0,o.h9Q)(e),i=e.appConfig.starsStargiftResaleAmountMin||0,n=e.appConfig.starsStargiftResaleAmountMax,a=e.appConfig.starsUsdWithdrawRateX1000,r=a?a/1e3:1,s=(0,o.Bde)(e),c=(0,l.wD)(e.appConfig.tonStargiftResaleAmountMin||0),d=e.appConfig.tonStargiftResaleAmountMax;return{starsCommission:t,starsResaleAmountMin:i,starsResaleAmountMax:n,starsUsdWithdrawRate:r,tonCommission:s,tonResaleAmountMin:c,tonResaleAmountMax:d?(0,l.wD)(d):void 0,tonUsdRate:e.appConfig.tonUsdRate}})(({modal:e,starsCommission:t,starsResaleAmountMin:i,starsResaleAmountMax:r,starsUsdWithdrawRate:o,tonCommission:s,tonResaleAmountMin:c,tonResaleAmountMax:m,tonUsdRate:f})=>{const{closeGiftResalePriceComposerModal:p,closeGiftInfoModal:A,updateStarGiftPrice:g,showNotification:b}=(0,a.ko)(),v=Boolean(e),[G,S]=(0,n.J0)(void 0),[C,I]=(0,n.J0)(!1),y=(0,d.A)(e),{gift:k}=y||{},Y=k&&"gift"in k?k:void 0,B=Boolean(G),w=(0,M.A)(),D=(0,u.A)(e=>{const t=e.target.value,i=parseFloat(t),n=C?m:r,a=""===t||Number.isNaN(i)?void 0:n?Math.min(i,n):i;S(a)}),T=(0,u.A)(()=>{p()}),P=(0,u.A)(()=>{Y&&"starGiftUnique"===Y.gift.type&&Y.inputGift&&G&&(p(),A(),g({gift:Y.inputGift,price:{currency:C?"TON":"XTR",amount:C?(0,l.tT)(G):G,nanos:0}}),b({icon:"sell-outline",message:{key:"NotificationGiftIsSale",variables:{gift:w("GiftUnique",{title:Y.gift.title,number:Y.gift.number})}}}))}),F=C?s:t,R=C?c:i,x=B&&G>=R;return(0,N.FD)(h.A,{isOpen:v,title:w(C?"PriceInTON":"PriceInStars"),hasCloseButton:!0,isSlim:!0,onClose:T,children:[(0,N.Y)("div",{className:"ElDo1Bru",children:(0,N.Y)(Ni.A,{label:w(C?"EnterPriceInTon":"EnterPriceInStars"),onChange:D,value:G?.toString(),inputMode:"numeric",tabIndex:0,teactExperimentControlled:!C})}),(0,N.FD)("div",{className:"SGFmA4kL",children:[(0,N.FD)("span",{children:[!x&&Boolean(F)&&w("DescriptionComposerGiftMinimumPrice",{stars:C?(0,pe.QH)(w,R):(0,pe.Kk)(w,R)},{withMarkdown:!0,withNodes:!0}),x&&(()=>{const e=F?Number((G*F).toFixed()):G;return w("DescriptionComposerGiftResalePrice",{stars:C?(0,pe.QH)(w,e):(0,pe.Kk)(w,e)},{withMarkdown:!0,withNodes:!0})})()]}),x&&Boolean(C?f:o)&&(0,N.Y)("span",{className:"r9R0VR_w",children:`≈ ${(0,l.Ad)(C?(0,l.C)(G,f):G*o,"USD",w.code)}`})]}),(0,N.Y)(qe.A,{className:"yt_nODdj",label:w("OnlyAcceptTON"),checked:C,onCheck:I}),(0,N.Y)("div",{className:"pWjQiY4m",children:w("OnlyAcceptTONDescription")}),(0,N.FD)(U.A,{noForcedUpperCase:!0,disabled:!x,onClick:P,children:[x&&w("ButtonSellGift",{stars:C?(0,pe.Ms)(w,G):(0,pe.U2)(w,G,{asFont:!0})},{withNodes:!0}),!x&&w("Sell")]})]})}));var Si=i(32625),Ci=i(5463);const Ii={footer:"EWaVCxY4",footerButton:"_Dt6RSQV",link:"Xu0TqkRj",priceDecreaseTimer:"ryB8xKvy"},yi=(0,n.ph)((0,a.EK)((e,{modal:t})=>{const i=t?.recipientId;return{recipient:i?(0,o.PVB)(e,i):void 0}})(({modal:e,recipient:t})=>{const{closeGiftUpgradeModal:i,closeGiftInfoModal:o,upgradeGift:s,upgradePrepaidGift:l,openStarGiftPriceDecreaseInfoModal:c,shiftGiftUpgradeNextPrice:m}=(0,a.ko)(),f=Boolean(e),p=(0,d.A)(e),h=(0,d.A)(t),[A,g]=(0,n.J0)(!1),b=Boolean(p?.gift?.prepaidUpgradeHash),[v,G]=(0,n.J0)(),S=(0,M.A)(),C=(0,u.A)(()=>i()),I=(0,u.A)(()=>{m()}),y=p?.nextPrices?.[0],k=y?.date,Y=p?.currentUpgradeStars,B=(0,u.A)(()=>{const e=p?.gift;if(e){if(b&&e.prepaidUpgradeHash&&h){if(!Y)return;return l({peerId:h.id,hash:e.prepaidUpgradeHash,stars:Y}),C(),void o()}e?.inputGift&&(s({gift:e.inputGift,shouldKeepOriginalDetails:A,upgradeStars:e.alreadyPaidUpgradeStars?void 0:Y}),C())}}),w=(0,u.A)(()=>{p?.sampleAttributes&&G((0,X.HM)(p.sampleAttributes,v))}),D=(0,u.A)(()=>{p?.prices&&c({prices:p.prices,currentPrice:Y||0,minPrice:p.minPrice||0,maxPrice:p.maxPrice||0})});(0,Si.A)(w,f?3e3:void 0,!0),(0,n.vJ)(()=>{f&&p?.sampleAttributes&&w()},[f,p?.sampleAttributes]),(0,n.vJ)(()=>{const e=p?.sampleAttributes;e&&(0,X.y8)(e)},[p?.sampleAttributes]);const T=(0,n.Kr)(()=>Y?(0,N.FD)("span",{children:[(0,N.Y)(F.A,{name:"star",className:"star-amount-icon"}),(0,N.Y)(je.A,{text:S.number(Y)})]}):void 0,[S,Y]),P=(0,n.Kr)(()=>{if(!v||!f)return;const e=p?.gift,t=h?(0,r.F9)(S,h):S("ActionFallbackUser"),i=h?[["diamond",S("GiftUpgradeUniqueTitle"),S("GiftPeerUpgradeUniqueDescription",{user:t})],["trade",S("GiftUpgradeTransferableTitle"),S("GiftPeerUpgradeTransferableDescription",{user:t})],["auction",S("GiftUpgradeTradeableTitle"),S("GiftPeerUpgradeTradeableDescription",{user:t})]]:[["diamond",S("GiftUpgradeUniqueTitle"),S("GiftUpgradeUniqueDescription")],["trade",S("GiftUpgradeTransferableTitle"),S("GiftUpgradeTransferableDescription")],["auction",S("GiftUpgradeTradeableTitle"),S("GiftUpgradeTradeableDescription")]],n=h?S("GiftPeerUpgradeText",{peer:(0,r.F9)(S,h)}):S("GiftUpgradeTextOwn"),a=Boolean(k)&&Boolean(p?.prices?.length)&&!e?.alreadyPaidUpgradeStars;return{listItemData:i,header:(0,N.Y)(Me,{modelAttribute:v.model,backdropAttribute:v.backdrop,patternAttribute:v.pattern,title:S("GiftUpgradeTitle"),subtitle:n}),footer:(0,N.FD)("div",{className:Ii.footer,children:[!e&&(0,N.Y)(U.A,{className:Ii.footerButton,onClick:C,children:S("OK")}),e&&(0,N.FD)(N.FK,{children:[!b&&(0,N.Y)(qe.A,{label:S("GiftUpgradeKeepDetails"),onCheck:g,checked:A}),(0,N.Y)(U.A,{className:Ii.footerButton,isShiny:!0,onClick:B,children:(0,N.FD)("div",{className:Ii.buttonContent,children:[(0,N.Y)("div",{children:e.alreadyPaidUpgradeStars?S("GeneralConfirm"):S(b?"GiftPayForUpgradeButton":"GiftUpgradeButton",{amount:T},{withNodes:!0})}),a&&(0,N.Y)("div",{className:Ii.priceDecreaseTimer,children:S("StarGiftPriceDecreaseTimer",{timer:(0,N.Y)(Ct.A,{endsAt:k,onEnd:I})},{withNodes:!0})})]})}),a&&(0,N.Y)(vt.A,{className:Ii.link,isPrimary:!0,onClick:D,children:S("StarGiftPriceDecreaseInfoLink",void 0,{withNodes:!0,specialReplacement:(0,pe.dE)()})})]})]})}},[v,f,S,h,p?.gift,A,b,p?.prices?.length,k,T]);return(0,N.Y)(Ci.A,{isOpen:f,header:P?.header,footer:P?.footer,listItemData:P?.listItemData,hasBackdrop:!0,onClose:C})})),ki="GwhTY_Uw",Yi="H4JSQGvw",Bi=48*ht.dp,wi=(0,n.ph)((0,a.EK)(e=>{const{giftAuctionModal:t}=(0,o.nTw)(e),i=t?.auctionGiftId;return{auctionState:i?e.giftAuctionByGiftId?.[i]:void 0}})(({modal:e,auctionState:t})=>{const{closeGiftAuctionModal:i,setGiftModalSelectedGift:r,openGiftAuctionInfoModal:o,openGiftAuctionAcquiredModal:s,openAboutStarGiftModal:l,showNotification:c,openChatWithDraft:m,openUrl:f,openGiftInMarket:p}=(0,a.ko)(),h=Boolean(e),A=(0,d.A)(e),g=(0,d.A)(t),b=g?.gift,v=g?.state,G=g?.userState,C="finished"===v?.type,[I,y]=(0,n.J0)(),k=Boolean(b&&v&&I),Y=(0,n.li)(),B=(0,M.A)(),w=(0,u.A)(()=>{A?.sampleAttributes&&y((0,X.HM)(A.sampleAttributes,I))});(0,Si.A)(w,h?3e3:void 0,!0),(0,n.vJ)(()=>{h&&(A?.sampleAttributes?w():y(void 0))},[h,A?.sampleAttributes]),(0,n.vJ)(()=>{const e=A?.sampleAttributes;e&&(0,X.y8)(e)},[A?.sampleAttributes]);const D=(0,u.A)(()=>i()),T=(0,u.A)(()=>{b&&o({auctionGiftId:b.id})}),P=(0,u.A)(()=>{l({})}),F=(0,u.A)(()=>{if(!b)return;const e=(0,X.yQ)(b);s({giftId:b.id,giftTitle:b.title,giftSticker:e})}),R=(0,u.A)(()=>{b&&(i({shouldKeepAuction:!0}),r({gift:b}))}),x=(0,n.Kr)(()=>{if(b?.auctionSlug)return`${S.jsp}auction/${b.auctionSlug}`},[b]),L=(0,u.A)(()=>{x&&((0,Ne.eM)(x),c({message:B("LinkCopied")}))}),K=(0,u.A)(()=>{x&&m({text:{text:x}})}),O=(0,u.A)(()=>{"finished"===v?.type&&v.fragmentListedUrl&&f({url:v.fragmentListedUrl})}),V=(0,u.A)(()=>{b&&(D(),p({gift:b}))}),E=(0,n.Kr)(()=>{if(!k)return;const e=b.title||B("StarGift"),t=B(C?"GiftAuctionEnded":"GiftAuctionInfoTitle"),i=(0,N.Y)(vt.A,{className:"xv_0WTej",isPrimary:!0,onClick:P,children:B("GiftAuctionLearnMoreAboutGifts")});return(0,N.Y)("div",{ref:Y,children:(0,N.Y)(Me,{modelAttribute:I.model,backdropAttribute:I.backdrop,patternAttribute:I.pattern,title:e,badge:t,subtitle:i})})},[k,b,C,B,I,P]),q=(0,n.Kr)(()=>{if(!b||!v||k)return;const e=b.title||B("StarGift"),t=b.giftsPerRound||0;return(0,N.FD)("div",{className:"lTDjKYuV",children:[(0,N.Y)(Ut,{gift:b,hideBadge:!0,noClickable:!0}),(0,N.Y)("h1",{className:"_tvAimMQ",children:e}),C?(0,N.Y)("span",{className:"pC_V4Juh",children:B("GiftAuctionEnded")}):(0,N.Y)("p",{className:"X88e7g62",children:B("GiftAuctionTopBidders",{count:t,gift:(0,N.Y)("span",{className:"AwBqE6Vc",children:e}),link:(0,N.Y)(vt.A,{isPrimary:!0,onClick:T,children:B("GiftAuctionLearnMore",void 0,{withNodes:!0})})},{pluralValue:t,withNodes:!0,withMarkdown:!0})})]})},[b,v,k,C,B,T]),H=E||q,J=(0,n.Kr)(()=>{if(!b||!v||!G)return;const e=[];e.push([B("GiftAuctionStarted"),(0,z.L2)(1e3*v.startDate,B.code,!0)]),e.push([B("GiftAuctionEnds"),(0,z.L2)(1e3*v.endDate,B.code,!0)]),b.availabilityTotal&&e.push([B("GiftInfoAvailability"),B("GiftInfoAvailabilityValue",{count:b.availabilityRemains||0,total:B.number(b.availabilityTotal)},{pluralValue:b.availabilityRemains||0})]),"active"===v.type&&e.push([B("GiftAuctionCurrentRound"),B("GiftAuctionRoundValue",{current:B.number(v.currentRound),total:B.number(v.totalRounds)})]),C&&e.push([B("GiftAuctionAveragePrice"),(0,pe.U2)(B,v.averagePrice,{className:"Ui25Ac3P"})]);const t=G.acquiredCount,i=(0,X.yQ)(b),n=v.endDate-(0,Ye.Fm)(),a=n>0&&n<Bi,r="finished"===v.type&&Boolean(v.fragmentListedUrl&&v.fragmentListedCount),o="finished"===v.type&&Boolean(v.listedCount);return{tableData:e,footer:(0,N.FD)("div",{className:"kVyu9ZRp",children:[t>0&&(0,N.Y)(vt.A,{className:ki,isPrimary:!0,onClick:F,children:B("GiftAuctionItemsBought",{count:t,gift:i&&(0,N.Y)(ee.A,{className:Yi,sticker:i,size:20,play:!1})},{pluralValue:t,withNodes:!0})}),r&&(0,N.Y)(vt.A,{className:ki,isPrimary:!0,onClick:O,children:B("GiftAuctionForSaleOnFragment",{count:i?(0,N.FD)(N.FK,{children:[B.number(v.fragmentListedCount),(0,N.Y)(ee.A,{className:Yi,sticker:i,size:20,play:!1})]}):B.number(v.fragmentListedCount)},{withNodes:!0})}),o&&(0,N.Y)(vt.A,{className:ki,isPrimary:!0,onClick:V,children:B("GiftAuctionForSaleOnTelegram",{count:i?(0,N.FD)(N.FK,{children:[B.number(v.listedCount),(0,N.Y)(ee.A,{className:Yi,sticker:i,size:20,play:!1})]}):B.number(v.listedCount)},{withNodes:!0})}),(0,N.Y)(U.A,{noForcedUpperCase:!0,className:"QgTA5Tm_",onClick:C?D:R,children:C?B("OK"):(0,N.FD)("div",{children:[(0,N.Y)("div",{children:B("GiftAuctionJoin")}),n>0&&(0,N.Y)("div",{className:"XV66UlTa",children:B("GiftAuctionTimeLeft",{time:a?(0,N.Y)(Ct.A,{endsAt:v.endDate}):(0,z.zt)(B,n)},{withNodes:!0})})]})})]})}},[b,v,G,C,B,R,F,D,O,V]),W=(0,n.Kr)(()=>{if(k)return(0,N.FD)(N.FK,{children:[(0,N.Y)(ze.A,{icon:"info",onClick:T,children:B("GiftAuctionLearnMoreMenuItem")}),(0,N.Y)(ze.A,{icon:"link-badge",onClick:L,children:B("CopyLink")}),(0,N.Y)(ze.A,{icon:"forward",onClick:K,children:B("Share")})]})},[k,B,T,L,K]);return(0,N.Y)(Se.A,{isOpen:h,header:H,footer:J?.footer,tableData:J?.tableData,className:"rCVinZx6",contentClassName:"MAEILhFp",closeButtonColor:k?"translucent-white":void 0,moreMenuItems:W,onClose:D})})),Di={content:"FbamIaWM",headerControlPanel:"oKcR_Gxv",slider:"lpcp8Oip",title:"jNHNh7KT",subtitle:"HlVun4XF",infoCards:"K9fWcZP0",infoCard:"QBcr61z8",infoCardValue:"S9vK5Tny",infoCardLabel:"UzCztm_V",separator:"eCFcDThE",winningStatus:"IENM5upL",bidderInfoSlide:"VvFvniw8",winningText:"mHlgX1Lm",winningBadge:"yWQ_64QE",section:"VfdOWkWu",sectionTitle:"aJxJv1Tj",sectionTitleTransition:"I344VxP8",bidderRow:"_6493YZ5",bidderPosition:"bjYqFB3Y",bidderInfo:"MSwHwQYX",bidderName:"StE9kpcQ",topBidderRow:"Q0o2Mlnj",topBidderPosition:"mQa4yF_w",bidderAmount:"jTHhbapk",buttonStar:"eY_4yHis",giftSticker:"ETmmzDXX",customBidInput:"KRqfUs0J",customBidInputIcon:"m1O8A6wT"},Ti=(0,n.ph)((0,a.EK)(e=>{const{stars:t,currentUserId:i}=e,{giftAuctionBidModal:n}=(0,o.nTw)(e),a=n?.auctionGiftId,r=a?e.giftAuctionByGiftId?.[a]:void 0,s=i?(0,o.PVB)(e,i):void 0,l="active"===r?.state.type?r.state.topBidders:void 0;return{auctionState:r,starBalance:t?.balance,currentUserPeer:s,topBidderIds:l}})(({modal:e,auctionState:t,starBalance:i,currentUserPeer:r,topBidderIds:s})=>{const{closeGiftAuctionBidModal:l,sendStarGiftAuctionBid:m,loadGiftAuction:p}=(0,a.ko)(),A=Boolean(e),g=(0,d.A)(t),b=(0,d.A)(s),v=(0,n.Kr)(()=>{if(!b)return;const e=(0,a.mS)();return b.map(t=>(0,o.PVB)(e,t)).filter(Boolean)},[b]),[G,S,C]=v||[],I=(0,ye.A)([G?.id||"0"]),y=(0,ye.A)([S?.id||"0"]),k=(0,ye.A)([C?.id||"0"]),Y=g?.gift.giftsPerRound||0,B=(0,M.A)(),w="active"===g?.state.type?g.state:void 0,D=g?.userState,[T,F]=(0,n.J0)(50),[R,x,K]=(0,P.A)(),[O,V]=(0,n.J0)(""),q=w?.minBidAmount||50,z=D?.minBidAmount||q,J=1e4*Math.ceil(z/1e4)+5e4;(0,n.vJ)(()=>{F(z)},[z]);const W=w?.nextRoundAt,j=D?.bidAmount?T-D.bidAmount:0,_=T>=J,Q=(0,n.Kr)(()=>_?B("GiftAuctionTapToBidMore"):j<=0?void 0:(0,N.FD)(N.FK,{children:["+",(0,N.Y)(je.A,{text:B.number(j)})]}),[j,_,B]),$=(0,u.A)(e=>{F(e)}),Z=(0,u.A)(()=>{e?.auctionGiftId&&A&&p({giftId:e.auctionGiftId})}),te=(0,u.A)(()=>{x()}),ie=(0,u.A)(()=>{_&&te()}),ne=(0,u.A)(e=>{const t=e.target.value.replace(/\D/g,"");Number(t)>1e9||V(t)}),ae=(0,u.A)(()=>{if(!g?.gift.id||!e)return;const t=Number(O);if(t<z)return;F(t),K(),V("");const{peerId:i,message:n,shouldHideName:a}=e,r=Boolean(D?.bidAmount);m({giftId:g.gift.id,bidAmount:t,peerId:i,message:n?{text:n}:void 0,shouldHideName:a,isUpdateBid:r})}),re=(0,u.A)(()=>{if(!g?.gift.id||!e)return;const{peerId:t,message:i,shouldHideName:n}=e,a=Boolean(D?.bidAmount);m({giftId:g.gift.id,bidAmount:T,peerId:t,message:i?{text:i}:void 0,shouldHideName:n,isUpdateBid:a})}),oe=(0,n.Kr)(()=>{if(!T||!w?.bidLevels?.length)return;const{bidLevels:e}=w,t=D?.bidDate||Number.MAX_SAFE_INTEGER;return(0,X.e0)(T,t,e)},[T,w,D?.bidDate]),se=Boolean(D?.bidAmount&&oe&&oe<=Y);function le(e,t,i,n,a){return(0,N.FD)("div",{className:Di.topBidderRow,children:[(0,N.Y)("div",{className:Di.topBidderPosition,children:(0,c.A)(t,["emoji"])}),(0,N.Y)(L.Ay,{name:"fade",activeKey:a,className:Di.bidderInfo,slideClassName:Di.bidderInfoSlide,children:i&&(0,N.FD)(N.FK,{children:[(0,N.Y)(f.A,{peer:i,size:"small"}),(0,N.Y)(Ee.A,{peer:i,className:Di.bidderName})]})}),void 0!==n&&(0,N.FD)("div",{className:Di.bidderAmount,children:[(0,N.Y)(E.A,{type:"gold",size:"adaptive"}),B.number(n)]})]},e)}return(0,N.FD)(h.A,{isOpen:A,hasAbsoluteCloseButton:!0,isSlim:!0,contentClassName:Di.content,onClose:l,isLowStackPriority:!0,children:[(0,N.Y)("div",{className:Di.headerControlPanel,children:(0,N.Y)(H,{balance:i,className:Di.modalBalance,withAddButton:!0})}),(0,N.Y)(lt,{className:Di.slider,defaultValue:z,minValue:q,minAllowedValue:z,minAllowedProgress:.25,maxValue:J,floatingBadgeDescription:Q,onChange:$,onBadgeClick:ie,onCustomValueClick:te,shouldUseDynamicColor:!0,shouldAllowCustomValue:!0}),(0,N.Y)("h3",{className:Di.title,children:B("GiftAuctionPlaceBid")}),(0,N.FD)("div",{className:Di.infoCards,children:[(0,N.FD)("div",{className:Di.infoCard,children:[(0,N.FD)("div",{className:Di.infoCardValue,children:[(0,N.Y)(E.A,{type:"gold",size:"adaptive"}),B.number(z)]}),(0,N.Y)("div",{className:Di.infoCardLabel,children:B("GiftAuctionMinimumBid")})]}),(0,N.FD)("div",{className:Di.infoCard,children:[(0,N.Y)("div",{className:Di.infoCardValue,children:(0,N.Y)(Ct.A,{endsAt:W||0,shouldShowZeroOnEnd:!0,onEnd:Z})}),(0,N.Y)("div",{className:Di.infoCardLabel,children:B("GiftAuctionUntilNextRound")})]}),(0,N.FD)("div",{className:Di.infoCard,children:[(0,N.FD)("div",{className:Di.infoCardValue,children:[(0,N.Y)(ee.A,{noLoop:!1,className:Di.giftSticker,sticker:g?.gift.sticker,size:24}),B.number(w?.giftsLeft||0)]}),(0,N.Y)("div",{className:Di.infoCardLabel,children:B("GiftAuctionLeft")})]})]}),(0,N.FD)("div",{className:Di.section,children:[function(){const e=g?.gift.title||B("StarGift"),t=oe&&oe<=100?(w?.lastGiftNum||0)+oe:void 0;return(0,N.Y)(L.Ay,{name:"fade",activeKey:se?0:1,className:Di.sectionTitleTransition,slideClassName:Di.bidderInfoSlide,children:se?(0,N.FD)("div",{className:Di.winningStatus,children:[(0,N.Y)("span",{className:Di.winningText,children:B("GiftAuctionYoureWinning")}),(0,N.Y)("span",{className:Di.winningBadge,children:B("GiftUnique",{title:e,number:t?B.number(t):void 0})})]}):(0,N.Y)("div",{className:Di.sectionTitle,children:B("GiftAuctionYourBidWillBe")})})}(),(0,N.FD)("div",{className:Di.bidderRow,children:[(0,N.Y)("div",{className:Di.bidderPosition,children:oe&&oe>100?`${oe}+`:oe||1}),(0,N.FD)("div",{className:Di.bidderInfo,children:[r&&(0,N.Y)(f.A,{peer:r,size:"small"}),r&&(0,N.Y)(Ee.A,{peer:r,className:Di.bidderName})]}),(0,N.FD)("div",{className:Di.bidderAmount,children:[(0,N.Y)(E.A,{type:"gold",size:"adaptive"}),B.number(T)]})]})]}),function(){const e=w?.bidLevels;return(0,N.FD)("div",{className:Di.section,children:[(0,N.Y)("div",{className:Di.sectionTitle,children:B("GiftAuctionTopWinners",{count:3},{pluralValue:3})}),le(0,"🥇",G,e?.[0]?.amount,I),le(1,"🥈",S,e?.[1]?.amount,y),le(2,"🥉",C,e?.[2]?.amount,k)]})}(),(0,N.Y)(U.A,{noForcedUpperCase:!0,onClick:re,children:B(D?.bidAmount?"GiftAuctionAddToBid":"GiftAuctionPlaceBidButton",{amount:(0,pe.U2)(B,D?.bidAmount?T-D.bidAmount:T,{asFont:!0,className:Di.buttonStar})},{withNodes:!0})}),(0,N.FD)(pi.A,{isOpen:R,title:B("GiftAuctionCustomBidTitle"),confirmLabel:B("GiftAuctionCustomBidButton"),isConfirmDisabled:!O||Number(O)<z,confirmHandler:ae,onClose:K,children:[(0,N.Y)("p",{children:B("GiftAuctionCustomBidDescription",{count:g?.gift.giftsPerRound})}),(0,N.FD)("div",{className:Di.customBidInput,children:[(0,N.Y)(E.A,{type:"gold",size:"adaptive",className:Di.customBidInputIcon}),(0,N.Y)(Ni.A,{value:O,onChange:ne,placeholder:B("GiftAuctionCustomBidPlaceholder"),inputMode:"numeric",teactExperimentControlled:!0})]})]})]})})),Pi=(0,n.ph)((0,a.EK)(e=>{const{giftAuctionInfoModal:t}=(0,o.nTw)(e),i=t?.auctionGiftId;return{giftAuction:i?e.giftAuctionByGiftId?.[i]:void 0}})(({modal:e,giftAuction:t})=>{const{closeGiftAuctionInfoModal:i}=(0,a.ko)(),r=(0,M.A)(),o=Boolean(e&&t),s=(0,u.A)(()=>{i()}),l=(0,n.Kr)(()=>(0,N.FD)("div",{className:"BYvGxmfu",children:[(0,N.Y)("div",{className:"X5HEn2ho",children:(0,N.Y)(F.A,{name:"auction-filled",className:"aiSlk9Zw"})}),(0,N.Y)("div",{className:"obG607lY",children:r("GiftAuctionInfoTitle")}),(0,N.Y)("div",{className:"wKo4cuID",children:r("GiftAuctionInfoSubtitle")})]}),[r]),c=(0,n.Kr)(()=>{if(o)return(0,N.Y)("div",{className:"M_SnCV2j",children:(0,N.Y)(U.A,{iconName:"understood",iconClassName:"OQCwJP3j",onClick:s,children:r("ButtonUnderstood")})})},[r,o,s]),d=(0,n.Kr)(()=>{const e=t?.gift.giftsPerRound||0;return[["auction-drop",r("GiftAuctionInfoTopBiddersTitle",{count:e},{pluralValue:e}),r("GiftAuctionInfoTopBiddersSubtitle",{count:e},{pluralValue:e})],["auction-next-round",r("GiftAuctionInfoBidCarryoverTitle"),r("GiftAuctionInfoBidCarryoverSubtitle",{count:e})],["stars-refund",r("GiftAuctionInfoMissedBiddersTitle"),r("GiftAuctionInfoMissedBiddersSubtitle")]]},[r,t]);return(0,N.Y)(Ci.A,{isOpen:o,header:l,listItemData:d,footer:c,onClose:s})}));var Mi=i(60406),Fi=i(96802);const Ui={modal:"Pz3wJVwI",content:"vBYqMeRD",giftsListContainer:"Ly9mKtg2",giftsList:"lla9jO09",giftHeader:"TuVkgxwZ",bidValue:"zdUvUfOO",badge:"btuWuz25",starIcon:"GRggVFef",okButton:"kIsP2W0m"},Ri=(0,n.ph)((0,a.EK)(e=>{const{giftAuctionAcquiredModal:t}=(0,o.nTw)(e);return{acquiredGifts:t?.acquiredGifts,giftTitle:t?.giftTitle,giftSticker:t?.giftSticker}})(({modal:e,acquiredGifts:t,giftTitle:i,giftSticker:r})=>{const{closeGiftAuctionAcquiredModal:o}=(0,a.ko)(),s=(0,n.li)(),l=(0,M.A)(),c=Boolean(e?.giftId),m=(0,d.A)(t),f=(0,d.A)(i),p=(0,d.A)(r),A=(0,u.A)(()=>{o()}),g=(0,n.Kr)(()=>{if(m?.length)return m.map(e=>{const t=l("GiftAuctionBoughtGiftHeader",{gift:f||l("StarGift"),giftNumber:e.giftNumber?l.number(e.giftNumber):"",round:l.number(e.round)});return{tableData:[[void 0,(0,N.FD)("span",{className:Ui.giftHeader,children:[p&&(0,N.Y)(ee.A,{className:Ui.giftSticker,sticker:p,size:20,play:!1}),(0,N.Y)("span",{children:t})]})],[l("GiftAuctionRecipient"),{chatId:e.peerId}],[l("GiftAuctionDate"),(0,z.L2)(1e3*e.date,l.code,!0)],[l("GiftAuctionAcceptedBid"),(0,N.FD)("span",{className:Ui.bidValue,children:[(0,pe.U2)(l,e.bidAmount,{className:Ui.starIcon}),(0,N.Y)(V.A,{className:Ui.badge,children:l("GiftAuctionTopPosition",{position:e.position})})]})]],key:`${e.round}-${e.giftNumber}`}})},[m,f,p,l]),b=m?.length||0;return(0,Mi.A)({containerRef:s,selector:`.${Ui.giftsList}`,isBottomNotch:!0},[g]),(0,N.FD)(h.A,{isOpen:c,hasCloseButton:!0,title:l("GiftAuctionBoughtGiftsTitle",{count:b},{pluralValue:b}),className:Ui.modal,contentClassName:Ui.content,onClose:A,isCondensedHeader:!0,isSlim:!0,children:[(0,N.Y)("div",{className:Ui.giftsListContainer,ref:s,children:(0,N.Y)("div",{className:Ui.giftsList,children:g?.map(e=>(0,N.Y)(Fi.A,{tableData:e.tableData},e.key))})}),(0,N.Y)(U.A,{className:Ui.okButton,onClick:A,children:l("OK")})]})}));var xi=i(69881);const Li=(0,n.ph)((0,a.EK)((e,{modal:t})=>({oldPeer:t?.oldPeerId?(0,o.PVB)(e,t.oldPeerId):void 0,newPeer:t?.newPeerId?(0,o.PVB)(e,t.newPeerId):void 0}))(({modal:e,oldPeer:t,newPeer:i})=>{const{closeGiftAuctionChangeRecipientModal:n,openGiftAuctionBidModal:o}=(0,a.ko)(),s=(0,M.A)(),l=Boolean(e),c=(0,d.A)(t),m=(0,d.A)(i),f=(0,d.A)(e),p=(0,u.A)(()=>{f?.auctionGiftId&&(n(),o({auctionGiftId:f.auctionGiftId,peerId:f.newPeerId,message:f.message,shouldHideName:f.shouldHideName}))});if(c&&m)return(0,N.FD)(pi.A,{isOpen:l,title:s("GiftAuctionChangeRecipientTitle"),onClose:n,confirmLabel:s("Continue"),confirmHandler:p,children:[(0,N.Y)(xi.A,{fromPeer:c,toPeer:m}),(0,N.Y)("p",{children:s("GiftAuctionChangeRecipientDescription",{oldPeer:(0,r.F9)(s,c),newPeer:(0,r.F9)(s,m)},{withNodes:!0,withMarkdown:!0})})]})})),Ki=(0,n.ph)(({modal:e})=>{const{closeStarGiftPriceDecreaseInfoModal:t}=(0,a.ko)(),i=(0,M.A)(),r=Boolean(e),o=(0,d.A)(e),l=(0,u.A)(()=>{t()}),c=(0,n.Kr)(()=>{if(!o)return;const{prices:e}=o;return e.map(e=>[(0,z.L2)(1e3*e.date,i.code,!0,void 0,!0),(0,pe.U2)(i,e.upgradeStars,{containerClassName:"NEElQBO6"})])},[i,o]),m=(0,n.Kr)(()=>{if(r)return(0,N.FD)("div",{className:"OXLUuiYb",children:[(0,N.Y)("p",{className:"TWuxZcHO",children:i("UpgradeCostDrops")}),(0,N.Y)(U.A,{onClick:l,iconName:"understood",iconClassName:"QJryEH9W",children:i("ButtonUnderstood")})]})},[i,r,l]);if(!c||!o)return;const{currentPrice:f,minPrice:p,maxPrice:h}=o,A=h!==p?(f-p)/(h-p):0,g=(0,N.FD)("div",{className:"ETFjTQkC",children:[(0,N.Y)(gt.A,{leftText:(0,pe.Kk)(i,h),rightText:(0,pe.Kk)(i,p),floatingBadgeText:(0,pe.Kk)(i,f),floatingBadgeIcon:"star",progress:A,isInverted:!0,shouldSkipGradient:!0,className:"DJPf4ekd"}),(0,N.Y)("p",{className:"JKYZ8cFl",children:i("StarGiftUpgradeCostModalTitle")}),(0,N.Y)("p",{className:"wHxufgix",children:i("StarGiftUpgradeCostHint")})]});return(0,N.Y)(Se.A,{isOpen:r,onClose:l,header:g,tableData:c,tableClassName:(0,s.A)("WuL_UIYd","custom-scroll"),footer:m})});var Oi=i(83240);const Vi=(0,n.ph)(({modal:e})=>{const{closeAboutStarGiftModal:t}=(0,a.ko)(),i=(0,M.A)(),r=Boolean(e),o=(0,d.A)(e),s=(0,u.A)(()=>{t()}),l=(0,n.Kr)(()=>(0,N.FD)("div",{className:"kSwGxZvD",children:[(0,N.FD)("div",{className:"e4SGnYtk",children:[(0,N.Y)(_e.A,{preset:"progress",className:"wYp9XwdI"}),(0,N.Y)(Oi.A,{videoId:o?.videoId,videoThumbnail:o?.videoThumbnail,isActive:r,isDown:!0})]}),(0,N.Y)("div",{className:"CMt0et4C",children:i("StarGiftInfoTitle")}),(0,N.Y)("div",{className:"exd4nt_X",children:i("StarGiftInfoSubtitle")})]}),[i,o,r]),c=(0,n.Kr)(()=>{if(r)return(0,N.Y)("div",{className:"hx2wl4Ar",children:(0,N.Y)(U.A,{iconName:"understood",iconClassName:"qegJKhEH",onClick:s,children:i("ButtonUnderstood")})})},[i,r,s]),m=(0,n.Kr)(()=>[["diamond",i("StarGiftInfoUniqueTitle"),i("StarGiftInfoUniqueSubtitle")],["auction",i("StarGiftInfoTradableTitle"),i("StarGiftInfoTradableSubtitle")],["crown-wear-outline",i("StarGiftInfoWearableTitle"),i("StarGiftInfoWearableSubtitle")]],[i]);return(0,N.Y)(Ci.A,{isOpen:r,contentClassName:"rGPBNoZR",header:l,listItemData:m,footer:c,hasBackdrop:Boolean(o?.videoId),absoluteCloseButtonColor:"translucent-white",onClose:s})});var Ei=i(45294);const qi=7*T.$,Hi=(0,n.ph)((0,a.EK)(e=>({currentUser:(0,o.mBe)(e,e.currentUserId),isCurrentUserPremium:(0,o.g29)(e)}))(({modal:e,currentUser:t,isCurrentUserPremium:i})=>{const{closeGiftStatusInfoModal:r,setEmojiStatus:o}=(0,a.ko)(),l=(0,M.A)(),{isMobile:c}=(0,ke.Ay)(),m=Boolean(e),p=(0,d.A)(e),{emojiStatus:h}=p||{},A=h?.textColor,g=(0,Ei.A)(h?.patternDocumentId),b=(0,u.A)(()=>{r()}),v=(0,u.A)(()=>{h&&o({emojiStatus:h}),r()}),G=(0,n.Kr)(()=>{if(!h||!m)return;const e=[h.centerColor,h.edgeColor];return(0,N.Y)(te.A,{className:"_1RfhkfB",backgroundColors:e,patternIcon:g.customEmoji,yPosition:6.875*T.$,maxRadius:.31,patternSize:c?13:15,ovalFactor:1})},[h,m,c,g]),S=(0,n.Kr)(()=>({...t,emojiStatus:h}),[t,h]),C=(0,n.Kr)(()=>(0,N.FD)("div",{className:"qL0cHbwS",children:[(0,N.FD)("div",{className:(0,s.A)("t18QCmAb"),style:(0,Ie.A)(A&&`color: ${A}`),children:[G,(0,N.Y)(f.A,{peer:S,size:qi,className:"JK2zOWA7"}),(0,N.Y)(Ee.A,{peer:S,className:"lxxbgNCl",withEmojiStatus:!0,noFake:!0,noVerified:!0}),(0,N.Y)("p",{className:"MLMdxkUg",style:(0,Ie.A)(A&&`color: ${A}`),children:l("Online")})]}),(0,N.Y)("div",{className:"wxg_5ou_",children:l("UniqueStatusWearTitle",{gift:S?.emojiStatus?.title})}),(0,N.Y)("div",{className:"KSCLIMZm",children:l("UniqueStatusBenefitsDescription")})]}),[A,G,S,l]),I=[["radial-badge",l("UniqueStatusBadgeBenefitTitle"),l("UniqueStatusBadgeDescription")],["unique-profile",l("UniqueStatusProfileDesignBenefitTitle"),l("UniqueStatusProfileDesignDescription")],["proof-of-ownership",l("UniqueStatusProofOfOwnershipBenefitTitle"),l("UniqueStatusProofOfOwnershipDescription")]],y=(0,n.Kr)(()=>{if(m)return(0,N.Y)("div",{className:"VDrvalBo",children:(0,N.FD)(U.A,{onClick:v,children:[l("UniqueStatusWearButton"),!i&&(0,N.Y)(F.A,{name:"lock-badge",className:"jiPObOWv"})]})})},[l,i,m]);return(0,N.Y)(Ci.A,{isOpen:m,header:C,listItemData:I,footer:y,hasBackdrop:!0,onClose:b})}));var zi=i(15535);const Ji={header:"LQgz8Nlx",giftPreview:"hgs0ts_O",backdrop:"OnBhMaBw",description:"HBxB4QPY",arrow:"kXTOUpfb",noPassword:"BnqLhoKr"},Wi={isCustomPeer:!0,avatarIcon:"fragment",title:"",customPeerAvatarColor:"#000000"},ji=4.5*T.$,_i=(0,n.ph)((0,a.EK)(e=>{const{settings:{byKey:{hasPassword:t}},twoFaSettings:{hint:i}}=e;return{hasPassword:t,passwordHint:i}})(({modal:e,hasPassword:t,passwordHint:i})=>{const{closeGiftWithdrawModal:r,clearGiftWithdrawError:o,closeGiftInfoModal:s,processStarGiftWithdrawal:l,openSettingsScreen:c}=(0,a.ko)(),m=Boolean(e),[p,A]=(0,n.J0)(!1),g=(0,M.A)(),b=(0,d.A)(e),v=b?.gift?.gift,G=v&&(0,X.uc)(v),S=b?.gift?.canExportAt?Math.max(b.gift.canExportAt-(0,Ye.Fm)(),0):void 0,C=(0,u.A)(()=>{r()}),I=(0,u.A)(e=>{l({gift:b.gift.inputGift,password:e})}),y=(0,u.A)(()=>{c({screen:ve.VS.TwoFaDisabled}),r(),s()});return(0,N.FD)(h.A,{isOpen:m,title:g("GiftWithdrawTitle"),isCondensedHeader:!0,hasCloseButton:!0,isSlim:!0,onClose:C,children:[G&&(0,N.FD)(N.FK,{children:[(0,N.FD)("div",{className:Ji.header,children:[(0,N.FD)("div",{className:Ji.giftPreview,children:[(0,N.Y)(te.A,{className:Ji.backdrop,backgroundColors:[G.backdrop.centerColor,G.backdrop.edgeColor],patternIcon:G.pattern?.sticker,ringsCount:1,ovalFactor:1,patternSize:12}),(0,N.Y)(ee.A,{className:Ji.sticker,size:ji,sticker:G.model?.sticker})]}),(0,N.Y)(F.A,{name:"next",className:Ji.arrow}),(0,N.Y)(f.A,{peer:Wi,size:"giant",className:Ji.avatar})]}),(0,N.Y)("p",{className:Ji.description,children:g("GiftWithdrawDescription",{gift:`${v.title} #${v.number}`},{withNodes:!0,withMarkdown:!0,renderTextFilters:["br"]})})]}),Boolean(S)&&(0,N.Y)("p",{className:Ji.exportHint,children:g("GiftWithdrawWait",{days:(0,ht._k)(S)},{pluralValue:(0,ht._k)(S)})}),!t&&(0,N.FD)(N.FK,{children:[(0,N.Y)("span",{className:Ji.noPassword,children:g("ErrorPasswordMissing")}),(0,N.Y)(U.A,{className:"mt-2",onClick:y,children:g("SetUp2FA")})]}),t&&!S&&(0,N.Y)(zi.A,{shouldShowSubmit:!0,placeholder:g("CheckPasswordPlaceholder"),error:b?.errorKey&&g.withRegular(b?.errorKey),description:g("CheckPasswordDescription"),onClearError:o,isLoading:b?.isLoading,hint:i,isPasswordVisible:p,shouldResetValue:m,onChangePasswordVisibility:A,submitLabel:g("GiftWithdrawSubmit"),onSubmit:I})]})}));var Qi=i(79824),Xi=i(74984),$i=i(87306);const Zi=(0,n.ph)((0,a.EK)(e=>{const{contactList:t,currentUserId:i}=e;return{contactIds:t?.userIds,currentUserId:i}})(({modal:e,contactIds:t,currentUserId:i})=>{const{closeGiftTransferModal:r,openGiftWithdrawModal:s,openGiftTransferConfirmModal:l}=(0,a.ko)(),c=Boolean(e),m=(0,M.A)(),[f,p]=(0,n.J0)(""),h=(0,d.A)(e),A=(0,Xi.Rh)(S.DSF),g=(0,n.Kr)(()=>(0,I.Am)([...t||[],...A||[]]),[t,A]),{result:b,currentResultsQuery:v}=(0,$i.Ay)({query:f,defaultValue:g}),G=v!==f,C=(0,n.Kr)(()=>v?Qi.p:[{type:"withdraw",isCustomPeer:!0,avatarIcon:"toncoin",peerColorId:5,title:m("GiftTransferTON")}],[m,v]),B=(0,u.A)(e=>{"withdraw"===e&&(s({gift:h.gift}),r())}),w=(0,n.Kr)(()=>{if(G)return Qi.p;const e=(0,a.mS)();return(0,y.A)((b||[]).filter(t=>t!==i&&(0,o.X2D)(e,t)),!1)},[G,b,i]),D=(0,u.A)(e=>{h?.gift&&l({gift:h.gift,recipientId:e})});return(0,N.Y)(Y.A,{isOpen:c,onClose:r,title:m("GiftTransferTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,children:(0,N.Y)(k.A,{itemIds:w,categories:C,onSelectedCategoryChange:B,withDefaultPadding:!0,withPeerUsernames:!0,isSearchable:!0,noScrollRestore:!0,isLoading:G,filterValue:f,filterPlaceholder:m("Search"),onFilterChange:p,onSelectedIdChange:D})})})),en=(0,n.ph)((0,a.EK)((e,{modal:t})=>({selectedPeer:t?.recipientId?(0,o.PVB)(e,t.recipientId):void 0}))(({modal:e,selectedPeer:t})=>{const{closeGiftTransferConfirmModal:i,transferGift:n,openChat:o,closeGiftModal:s,closeGiftTransferModal:l}=(0,a.ko)(),c=(0,M.A)(),m=Boolean(e),f=(0,d.A)(e),p=(0,d.A)(t),h=(0,u.A)(()=>{f?.gift.inputGift&&f.recipientId&&(n({gift:f.gift.inputGift,recipientId:f.recipientId,transferStars:f.gift.transferStars}),i(),o({id:f.recipientId}),s(),l())});if(!f)return;const{gift:A}=f,g="starGiftUnique"===A.gift.type?A.gift:void 0;return g?(0,N.FD)(pi.A,{isOpen:m,noDefaultTitle:!0,onClose:i,confirmLabel:A.transferStars?c("GiftTransferConfirmButton",{amount:(0,pe.U2)(c,A.transferStars,{asFont:!0})},{withNodes:!0}):c("GiftTransferConfirmButtonFree"),confirmHandler:h,children:[p&&(0,N.Y)(ui,{peer:p,gift:g}),(0,N.Y)("p",{children:A.transferStars?c("GiftTransferConfirmDescription",{gift:c("GiftUnique",{title:g.title,number:g.number}),amount:(0,pe.Kk)(c,A.transferStars),peer:(0,r.F9)(c,p)},{withNodes:!0,withMarkdown:!0}):c("GiftTransferConfirmDescriptionFree",{gift:c("GiftUnique",{title:g.title,number:g.number}),peer:(0,r.F9)(c,p)},{withNodes:!0,withMarkdown:!0})})]}):void 0})),tn=(0,n.ph)((0,a.EK)((e,{modal:t})=>({senderPeer:t?.details.senderId?(0,o.PVB)(e,t.details.senderId):void 0,recipientPeer:t?.details.recipientId?(0,o.PVB)(e,t.details.recipientId):void 0}))(({modal:e,senderPeer:t,recipientPeer:i})=>{const{closeGiftDescriptionRemoveModal:n,removeGiftDescription:r,openChat:o}=(0,a.ko)(),s=(0,M.A)(),l=Boolean(e),c=(0,d.A)(e),m=(0,d.A)(t),f=(0,d.A)(i),p=(0,u.A)(e=>{n(),o({id:e})}),h=(0,u.A)(()=>{c?.gift.inputGift&&c.price&&r({gift:c.gift.inputGift,price:c.price})});if(!c||!f)return;const{price:A,details:g}=c,b=oi({originalDetails:g,recipient:f,sender:m,onOpenChat:p,lang:s});return(0,N.FD)(pi.A,{isOpen:l,title:s("RemoveGiftDescriptionTitle"),onClose:n,confirmLabel:s("RemoveGiftDescriptionButton",{amount:(0,pe.U2)(s,A,{asFont:!0})},{withNodes:!0}),confirmHandler:h,children:[(0,N.Y)("div",{className:"LVOpBXUW",children:s("RemoveGiftDescriptionConfirmText")}),Boolean(b)&&(0,N.Y)("div",{className:"FA1_yVBY",children:b})]})}));var nn=i(43336);const an="fqgphS0b",rn=(0,n.ph)((0,a.EK)((e,{modal:t})=>{const i=t?.peerId?(0,o.PVB)(e,t.peerId):void 0,n=(0,o.h9Q)(e),a=(0,o.Bde)(e),r=e.appConfig?.starsUsdSellRateX1000,s=r?r/1e3:void 0,l=e.appConfig?.tonUsdRate;return{recipientPeer:i,starsCommission:n,tonCommission:a,starsUsdRate:s,tonUsdRate:l}})(({modal:e,recipientPeer:t,starsCommission:i,tonCommission:o,starsUsdRate:s,tonUsdRate:c})=>{const{closeGiftOfferAcceptModal:m,acceptStarGiftOffer:f}=(0,a.ko)(),p=(0,M.A)(),h=Boolean(e),A=(0,d.A)(e),g=(0,d.A)(t),b=(0,u.A)(()=>{A&&(f({messageId:A.messageId}),m())}),v=(0,n.Kr)(()=>A?.gift&&(0,X.uc)(A.gift),[A?.gift]),G=A?.price.currency===S.ykW,C=G?o:i,I=A?.price.amount||0,y=C?(0,nn.LI)(I*C,G?2:0):I,k=(0,n.Kr)(()=>{if(!v)return[];const{model:e,backdrop:t,pattern:i}=v,n=[];e&&n.push([p("GiftAttributeModel"),(0,N.FD)("span",{className:an,children:[(0,N.Y)("span",{children:e.name}),(0,N.Y)(V.A,{children:(0,X.IT)(p,e.rarity)})]})]),t&&n.push([p("GiftAttributeBackdrop"),(0,N.FD)("span",{className:an,children:[(0,N.Y)("span",{children:t.name}),(0,N.Y)(V.A,{children:(0,X.IT)(p,t.rarity)})]})]),i&&n.push([p("GiftAttributeSymbol"),(0,N.FD)("span",{className:an,children:[(0,N.Y)("span",{children:i.name}),(0,N.Y)(V.A,{children:(0,X.IT)(p,i.rarity)})]})]);const a=A?.gift;if(a?.valueAmount&&a.valueCurrency){const e=(0,l.Ad)(a.valueAmount,a.valueCurrency,p.code);n.push([p("GiftInfoValue"),p("GiftInfoValueAmount",{amount:e})])}return n},[v,p,A?.gift]),Y=(0,n.Kr)(()=>{if(!A)return;const{gift:e}=A,{valueUsdAmount:t}=e;if(!t||t<=0||y<=0)return;const i=t/100;let n;if(G){if(!c)return;n=(0,l.C)(y,c,!0)/100}else{if(!s)return;n=y*s/100}const a=i>=n,r=a?100*(1-n/i):100*(n/i-1);return r<=10?void 0:{percent:r,isLow:a}},[A,y,G,c,s]);if(!A||!g)return;const{gift:B,price:w}=A,D=p("GiftUnique",{title:B.title,number:B.number}),T=(0,r.F9)(p,g),P=(0,pe.Qi)(p,w),F=G?(0,pe.QH)(p,y,!0):(0,pe.Kk)(p,y),U=G?(0,pe.Ms)(p,y,{shouldConvertFromNanos:!0}):(0,pe.U2)(p,y,{asFont:!0});return(0,N.FD)(pi.A,{isOpen:h,title:p("GiftOfferAcceptTitle"),onClose:m,confirmLabel:p("GiftOfferAcceptButton",{amount:U},{withNodes:!0}),confirmHandler:b,children:[(0,N.Y)(ui,{peer:g,gift:B}),(0,N.Y)("p",{className:"IHwFZk68",children:p("GiftOfferAcceptText",{gift:D,user:T,price:P},{withNodes:!0,withMarkdown:!0})}),(0,N.Y)("p",{className:"lh9lMCxr",children:p("GiftOfferAcceptReceive",{amount:F},{withNodes:!0,withMarkdown:!0})}),Boolean(k.length)&&(0,N.Y)(Fi.A,{tableData:k,className:"wGrc4H5s"}),Y&&(0,N.Y)("p",{className:Y.isLow?"YnTd0N6i":"UitlqwUx",children:p(Y.isLow?"GiftOfferPriceLow":"GiftOfferPriceHigh",{percent:(0,J.l9)(Y.percent,0),gift:B.title},{withNodes:!0,withMarkdown:!0})})]})})),on=(0,n.ph)((0,a.EK)((e,{modal:t})=>({user:t?.userId?(0,o.mBe)(e,t.userId):void 0}))(({modal:e,user:t})=>{const{closeChatRefundModal:i,toggleNoPaidMessagesException:o}=(0,a.ko)(),[s,l]=(0,n.J0)(!1),c=(0,d.A)(e),m=(0,d.A)(t),{starsToRefund:f,userId:p}=c||{},h=(0,M.A)(),A=Boolean(e),g=(0,u.A)(()=>{i(),p&&o({userId:p,shouldRefundCharged:s})});return(0,N.FD)(pi.A,{isOpen:A,onClose:i,title:h("RemoveFeeTitle"),confirmLabel:h("ConfirmRemoveMessageFee"),confirmHandler:g,children:[h("ConfirmDialogMessageRemoveFee",{peer:m&&(0,r.F9)(h,m)},{withMarkdown:!0,withNodes:!0}),Boolean(f)&&(0,N.Y)(qe.A,{className:"dialog-checkbox",label:h("ConfirmDialogRemoveFeeRefundStars",{amount:(0,pe.Kk)(h,f)},{withMarkdown:!0,withNodes:!0}),checked:s,onCheck:l})]})}));var sn=i(14487);const ln=(0,n.ph)((0,a.EK)(e=>{const t=e.stars?.balance,i=e.ton?.balance?.amount;return{starBalance:t,tonBalance:i}})(({modal:e,starBalance:t,tonBalance:i})=>{const r=(0,a.ko)(),o=(0,M.A)(),s=(0,n.hb)(()=>{if(!e?.directInfo)return void r.closePriceConfirmModal();const{currency:n,newAmount:a}=e,o="TON"===n,s=o?i:t?.amount;if(void 0!==s){if(s<a)return r.openStarsBalanceModal({currency:o?"TON":"XTR",tabId:(0,sn.g0)()}),void r.closePriceConfirmModal();r.sendStarPaymentForm({directInfo:e.directInfo,tabId:(0,sn.g0)()}),r.closePriceConfirmModal()}else r.closePriceConfirmModal()},[e,t,i,r]),c=(0,n.hb)(()=>{r.closePriceConfirmModal()},[r]);if(!e)return;const{originalAmount:d,newAmount:u,currency:m}=e;let f,p;return"TON"===m?(f=(0,pe.QH)(o,(0,l.wD)(d)),p=(0,pe.QH)(o,(0,l.wD)(u))):(f=(0,pe.Kk)(o,d),p=(0,pe.Kk)(o,u)),(0,N.Y)(pi.A,{isOpen:Boolean(e),onClose:c,title:o("PriceChanged"),confirmHandler:s,confirmLabel:o("PayNewPrice"),children:(0,N.Y)("p",{children:o("PriceChangedText",{originalAmount:f,newAmount:p},{withMarkdown:!0,withNodes:!0})})})}));var cn=i(87412);const dn=2*T.$;function un({auction:e}){const t=(0,M.A)(),{openGiftAuctionBidModal:i,closeActiveGiftAuctionsModal:r}=(0,a.ko)(),{userState:o,gift:s}=e,l=e.state,c=(0,n.Kr)(()=>(0,X.e0)(o.bidAmount,o.bidDate,l.bidLevels),[o,l.bidLevels]),d=(0,u.A)(()=>{i({auctionGiftId:s.id}),r()});return(0,N.FD)(Nt.A,{leftElement:(0,N.Y)(cn.A,{className:"KSVFHEn0",sticker:s.sticker,size:dn,loopLimit:1}),rightElement:(0,N.FD)(U.A,{size:"tiny",pill:!0,fluid:!0,iconName:"auction-filled",onClick:d,children:[t("GiftAuctionListRaiseBid"),(0,N.Y)(Ct.A,{className:"fJGfJQgw",endsAt:l.nextRoundAt,shouldShowZeroOnEnd:!0})]}),multiline:!0,onClick:d,children:[(0,N.Y)("div",{className:"title",children:t("GiftAuctionListRound",{current:t.number(l.currentRound),total:t.number(l.totalRounds)})}),(0,N.Y)("div",{className:"subtitle",children:t("GiftAuctionBidPosition",{amount:(0,pe.U2)(t,o.bidAmount,{noStyles:!0}),position:t.number(c)},{withNodes:!0})})]})}const mn=(0,n.ph)((0,a.EK)(e=>{const{activeGiftAuctionIds:t,giftAuctionByGiftId:i}=e;return{activeGiftAuctionIds:t,giftAuctionByGiftId:i}})(({modal:e,activeGiftAuctionIds:t,giftAuctionByGiftId:i})=>{const{closeActiveGiftAuctionsModal:r}=(0,a.ko)(),o=(0,M.A)(),s=(0,n.Kr)(()=>t?.map(e=>i?.[e]).filter(e=>"active"===e?.state.type&&Boolean(e.userState.bidAmount)),[t,i]);return(0,N.Y)(h.A,{isOpen:Boolean(e),onClose:r,hasCloseButton:!0,isCondensedHeader:!0,title:o("GiftAuctionActiveTitle"),dialogClassName:"wrFlN_O8",contentClassName:"DNfpDFqJ",children:s?.length?s.map(e=>(0,N.Y)(un,{auction:e},e.gift.id)):(0,N.Y)("div",{className:"gx0hMACm",children:o("GiftAuctionNoActive")})})}))},25404(e,t,i){i.d(t,{A:()=>p});var n=i(84051),a=i(13439),r=i(31481),o=i(85982),s=i(17663),l=i(80140),c=i(39351),d=i(17712),u=i(59030),m=i(24433),f=i(20021);const p=(0,n.ph)(({peerId:e,canManage:t,gift:i,currentUserEmojiStatus:p,collectibleEmojiStatuses:h})=>{const{showNotification:A,openChatWithDraft:g,openGiftTransferModal:b,openGiftResalePriceComposerModal:v,openGiftStatusInfoModal:N,setEmojiStatus:G,toggleSavedGiftPinned:S,changeGiftVisibility:C,updateStarGiftPrice:I,closeGiftInfoModal:y}=(0,a.ko)(),k=(0,c.A)(),Y=(0,u.A)(),B=i&&"gift"in i,w=B?i:void 0,D=B?i.gift:i,T="starGiftUnique"===D?.type?D.slug:void 0,P=(0,n.Kr)(()=>{if(T)return`${r.jsp}nft/${T}`},[T]),M=(0,n.Kr)(()=>{if(T)return h?.find(e=>"collectible"===e.type&&e.slug===T)},[T,h]),F="collectible"===p?.type?p.slug:void 0,U=D&&"starGiftUnique"===D.type,R=U&&F===D.slug,x=M&&!R,L=U?D.resellPrice:void 0,K=t&&w&&!w.isUnsaved&&U,O=(0,d.A)(()=>{const{inputGift:e,isUnsaved:t}=w;C({gift:e,shouldUnsave:!t})}),V=(0,d.A)(()=>{P&&((0,o.eM)(P),A({message:k("LinkCopied")}))}),E=(0,d.A)(()=>{P&&g({text:{text:P}})}),q=(0,d.A)(()=>{w&&"starGiftUnique"===w?.gift.type&&(w.canTransferAt&&w.canTransferAt>(0,l.Fm)()?A({message:{key:"NotificationGiftCanTransferAt",variables:{date:(0,s.U)(Y,1e3*w.canTransferAt)}}}):b({gift:w}))}),H=(0,d.A)(()=>{w&&(w.canResellAt&&w.canResellAt>(0,l.Fm)()?A({message:{key:"NotificationGiftCanResellAt",variables:{date:(0,s.U)(Y,1e3*w.canResellAt)}}}):v({peerId:e,gift:w}))}),z=(0,d.A)(()=>{w&&"starGiftUnique"===w.gift.type&&w.inputGift&&(y(),I({gift:w.inputGift,price:{currency:r.OUy,amount:0,nanos:0}}),A({icon:"unlist-outline",message:{key:"NotificationGiftIsUnlist",variables:{gift:k("GiftUnique",{title:w.gift.title,number:w.gift.number})}}}))}),J=(0,d.A)(()=>{"starGiftUnique"===D?.type&&M&&N({emojiStatus:M})}),W=(0,d.A)(()=>{R&&G({emojiStatus:{type:"regular",documentId:r.zNY}})}),j=(0,d.A)(()=>{S({peerId:e,gift:w})});return(0,f.FD)(f.FK,{children:[K&&(0,f.Y)(m.A,{icon:w.isPinned?"unpin":"pin",onClick:j,children:k(w.isPinned?"ChatListUnpinFromTop":"ChatListPinToTop")}),(0,f.Y)(m.A,{icon:"link-badge",onClick:V,children:k("CopyLink")}),(0,f.Y)(m.A,{icon:"forward",onClick:E,children:k("Share")}),t&&U&&(0,f.Y)(m.A,{icon:"diamond",onClick:q,children:k("GiftInfoTransfer")}),t&&U&&!L&&(0,f.Y)(m.A,{icon:"sell-outline",onClick:H,children:k("Sell")}),t&&U&&Boolean(L)&&(0,f.Y)(m.A,{icon:"unlist-outline",onClick:z,children:k("GiftInfoUnlist")}),t&&w&&(0,f.Y)(m.A,{icon:w.isUnsaved?"eye-outline":"eye-crossed-outline",onClick:O,children:k(w.isUnsaved?"GiftActionShow":"GiftActionHide")}),x&&(0,f.Y)(m.A,{icon:"crown-wear-outline",onClick:J,children:k("GiftInfoWear")}),R&&(0,f.Y)(m.A,{icon:"crown-take-off-outline",onClick:W,children:k("GiftInfoTakeOff")})]})})}}]);
//# sourceMappingURL=6930.ae159ceca4f62a6d4957.js.map