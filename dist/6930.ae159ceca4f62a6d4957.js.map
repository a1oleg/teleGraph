{"version":3,"file":"6930.ae159ceca4f62a6d4957.js","mappings":"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","sources":["webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftManageButtons.module.scss?f41d","webpack://telegram-t/./src/components/modals/gift/UniqueGiftManageButtons.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/GiftModalResaleScreen.tsx","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.module.scss?8276","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.tsx","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.module.scss?c5a8","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/common/helpers/giftOriginalInfo.tsx","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.module.scss?0f0d","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.tsx","webpack://telegram-t/./src/components/common/GiftRarityBadge.module.scss?53f5","webpack://telegram-t/./src/components/common/GiftRarityBadge.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/value/GiftInfoValueModal.module.scss?3884","webpack://telegram-t/./src/components/modals/gift/value/GiftInfoValueModal.tsx","webpack://telegram-t/./src/components/modals/gift/locked/GiftLockedModal.tsx","webpack://telegram-t/./src/components/modals/gift/locked/GiftLockedModal.module.scss?1055","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.module.scss?6666","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.tsx","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionModal.module.scss?eeff","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionBidModal.module.scss?4508","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionBidModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionInfoModal.module.scss?8779","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionAcquiredModal.module.scss?de69","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionAcquiredModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionChangeRecipientModal.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftPriceDecreaseInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftPriceDecreaseInfoModal.module.scss?c67d","webpack://telegram-t/./src/components/modals/gift/AboutStarGiftModal.module.scss?fd32","webpack://telegram-t/./src/components/modals/gift/AboutStarGiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.module.scss?3366","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.module.scss?287b","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferConfirmModal.tsx","webpack://telegram-t/./src/components/modals/gift/message/GiftDescriptionRemoveModal.tsx","webpack://telegram-t/./src/components/modals/gift/message/GiftDescriptionRemoveModal.module.scss?7493","webpack://telegram-t/./src/components/modals/gift/offer/GiftOfferAcceptModal.module.scss?5c52","webpack://telegram-t/./src/components/modals/gift/offer/GiftOfferAcceptModal.tsx","webpack://telegram-t/./src/components/modals/stars/chatRefund/ChatRefundModal.tsx","webpack://telegram-t/./src/components/modals/priceConfirm/PriceConfirmModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/ActiveGiftAuctionsModal.module.scss?ff13","webpack://telegram-t/./src/components/modals/gift/auction/ActiveGiftAuctionsModal.tsx","webpack://telegram-t/./src/components/common/gift/GiftMenuItems.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"MFXAwnxJ\",\"content\":\"Sl6xVf1R\",\"main\":\"bTN9Jeph\",\"headerInfo\":\"c6MiyJgW\",\"logo\":\"StGLWvzb\",\"logoBackground\":\"SyTXSfml\",\"description\":\"kFe3mIZo\",\"section\":\"BgfHkWd2\",\"header\":\"zMtAGfXs\",\"starHeaderText\":\"q3v8orGj\",\"hiddenHeader\":\"bq3FnXT0\",\"closeButton\":\"bDsDTkbe\",\"avatar\":\"jK36xUj4\",\"center\":\"v1PckUQn\",\"secondaryInfo\":\"TDWSRfP9\"};","import type { FC } from '../../../../lib/teact/teact';\nimport type React from '../../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport SafeLink from '../../../common/SafeLink';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/GoldStar.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const user = modal?.forUserId ? selectUser(global, modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"s3k01dTm\",\"transition\":\"BNA0_b5j\",\"main\":\"Oadi16vt\",\"filter\":\"z84KbvhX\",\"title\":\"Jnsrau29\",\"buttons\":\"NnVyYB32\",\"picker\":\"cuI2eDIY\",\"avatars\":\"ILtw_aNL\",\"center\":\"eIfMzHv5\",\"description\":\"FlNJWZ5P\",\"premiumFeatures\":\"xIv0Yaur\",\"options\":\"eNJRXn6P\",\"button\":\"KDNKXBp5\"};","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { filterPeersByQuery } from '../../../global/helpers/peers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = unique([\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ]);\n\n    const filteredUserIds = filterPeersByQuery({\n      ids: combinedIds, query: searchQuery, type: 'user',\n    });\n\n    return sortChatIds(filteredUserIds.filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TtE8LQNJ\",\"minimal\":\"nkV4JXHc\",\"transition\":\"nXQS4E59\",\"main\":\"JuWZY1ds\",\"container\":\"mnhBs1uK\",\"section\":\"lYkNd_gb\",\"lastSection\":\"f749AI4g\",\"sectionTitle\":\"FF8gm7MP\",\"tos\":\"Vu6blJk9\",\"hint\":\"Rs8WXoOz\",\"topUpButton\":\"dc_DZoVF\",\"tonBalanceContainer\":\"lorbW9II\",\"tonBalance\":\"h2Fs3tOv\",\"tonIconBalance\":\"Ut6GidJP\",\"tonInUsd\":\"FdcdsB4l\",\"tonIconLogo\":\"_hCjjyEv\",\"description\":\"teXilLxe\",\"header\":\"fnhXotO2\",\"starHeaderText\":\"iUwego5s\",\"botItem\":\"AhxcrKWn\",\"hiddenHeader\":\"DZk6d6hF\",\"noSeparator\":\"UwUaTrab\",\"closeButton\":\"piD1PXHW\",\"addStarsButton\":\"dqnGL2uh\",\"addStarsIcon\":\"w9Db2eiK\",\"balanceBlock\":\"Yk0OQBKC\",\"balanceInfo\":\"p2dW9NOV\",\"smallerText\":\"rUnPcfmE\",\"balanceBottom\":\"F5BTkZ9G\",\"modalBalance\":\"t8tMrx3y\",\"starButton\":\"oOt4VBD2\",\"paymentContent\":\"OReEUNTV\",\"paymentImages\":\"oKorQYTC\",\"paymentPhoto\":\"HGTrEtUF\",\"avatarStar\":\"Wu10dXoa\",\"paymentImageBackground\":\"os8jb_qv\",\"paymentButton\":\"VzR5cibf\",\"paymentButtonStar\":\"Uhg7yWxK\",\"transactions\":\"Qvc0fTTH\",\"subscriptions\":\"IX5BhCUF\",\"tabs\":\"KZVEyKOX\",\"pinned\":\"qRjh_2Wl\",\"disclaimer\":\"bpVifdwH\",\"amountBadge\":\"BPM7LKwo\",\"loadMore\":\"TKmZjMyd\",\"loadMoreIcon\":\"buepwtN1\"};","import { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit } from '../../../util/formatCurrency';\n\nimport useLang from '../../../hooks/useLang';\n\nimport BadgeButton from '../../common/BadgeButton';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiTypeCurrencyAmount;\n  withAddButton?: boolean;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className, withAddButton }: OwnProps) => {\n  const lang = useLang();\n\n  const {\n    openStarsBalanceModal,\n  } = getActions();\n\n  const renderStarsAmount = () => {\n    return (\n      <>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {balance !== undefined && balance.currency === STARS_CURRENCY_CODE\n          ? formatStarsAmount(lang, balance) : ''}\n        {withAddButton && (\n          <BadgeButton\n            className={styles.addStarsButton}\n            onClick={() => openStarsBalanceModal({})}\n          >\n            <Icon\n              className={styles.addStarsIcon}\n              name=\"add\"\n            />\n          </BadgeButton>\n        )}\n      </>\n    );\n  };\n\n  const renderTonAmount = () => {\n    return (\n      <>\n        <Icon name=\"toncoin\" />\n        {balance !== undefined ? convertCurrencyFromBaseUnit(balance.amount, balance.currency) : ''}\n      </>\n    );\n  };\n\n  return (\n    <div className={buildClassName(styles.balanceBlock, className)}>\n      <div className={styles.balanceInfo}>\n        <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n        <div className={styles.balanceBottom}>\n          {balance?.currency === TON_CURRENCY_CODE ? renderTonAmount() : renderStarsAmount()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ZXnbeQxP\",\"info\":\"zLaaDX3c\",\"status\":\"HbF2qTB2\",\"statusPricing\":\"AveGvpdV\",\"amount\":\"_CBiOQcv\",\"title\":\"k9ZIv5Pd\",\"description\":\"FlRlxMx2\",\"subtitle\":\"YN2J8dw6\",\"statusPeriod\":\"MRrP7Oew\",\"statusEnded\":\"pRHwfr8m\",\"preview\":\"t6Syyhzd\",\"subscriptionStar\":\"ftlbevPm\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\nconst AVATAR_SIZE = 42;\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size={AVATAR_SIZE} peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","import type { ApiStarsTransaction, ApiTypeCurrencyAmount } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer, shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport {\n  type LangFn,\n} from '../../../../util/localization';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(oldLang: OldLangFn, lang: LangFn, transaction: ApiStarsTransaction) {\n  if (transaction.paidMessages) {\n    return lang(\n      'PaidMessageTransaction',\n      { count: transaction.paidMessages },\n      {\n        withNodes: true,\n        pluralValue: transaction.paidMessages,\n      },\n    );\n  }\n\n  if (transaction.isGiftResale) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftSaleTransaction')\n      : lang('StarGiftPurchaseTransaction');\n  }\n  if (transaction.isPostsSearch) {\n    return lang('PostsSearchTransaction');\n  }\n\n  if (transaction.isDropOriginalDetails) {\n    return lang('DropOriginalDetailsTransaction');\n  }\n\n  if (transaction.isPrepaidUpgrade) {\n    return lang('GiftPrepaidUpgradeTransactionTitle');\n  }\n\n  if (transaction.isStarGiftAuctionBid) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftAuctionBidTransaction')\n      : lang('StarGiftAuctionBidRefundedTransaction');\n  }\n\n  if (transaction.starRefCommision) {\n    return oldLang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return oldLang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return oldLang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || oldLang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return oldLang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return oldLang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return oldLang('StarsGiftSent');\n  if (transaction.isGift) {\n    if (transaction.amount.currency === TON_CURRENCY_CODE) {\n      return lang('TonGiftReceived');\n    }\n    return oldLang('StarsGiftReceived');\n  }\n  if (transaction.starGift) {\n    return isNegativeAmount(transaction.amount) ? oldLang('Gift2TransactionSent') : oldLang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n    && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n  if (customPeer) return customPeer.title || oldLang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeAmount(currencyAmount: ApiTypeCurrencyAmount) {\n  if (currencyAmount.currency === STARS_CURRENCY_CODE) {\n    if (currencyAmount.amount) return currencyAmount.amount < 0;\n    return currencyAmount.nanos < 0;\n  }\n  return currencyAmount.amount < 0;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jQkp75Gb\",\"preview\":\"OYGSN3PF\",\"count\":\"KX1yz2Jy\",\"thumb\":\"EvinKr5k\",\"noOutline\":\"KSAAsUDv\",\"itemCount1\":\"GxDajfX_\",\"itemCount2\":\"jXuZoxq8\",\"itemCount3\":\"TPn3XGHJ\",\"blurry\":\"hWZuxLS8\",\"full\":\"w56QPFhl\",\"fadeIn\":\"ds43W8Wq\"};","import { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aHAxv_Jg\",\"info\":\"oyYrn3II\",\"stars\":\"K5lc75ku\",\"amount\":\"QLQPuLAr\",\"title\":\"e0pK8CJ_\",\"description\":\"xbERdDMQ\",\"date\":\"l6CwQ0Ev\",\"positive\":\"P_42_ZWR\",\"negative\":\"TGjnLJfH\",\"preview\":\"cnjGihOT\",\"subscriptionStar\":\"z43YvnDX\",\"uniqueGiftBackground\":\"eNvzMw2p\",\"giftSticker\":\"U3dqmnM4\"};","import { memo, useCallback, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst GIFT_STICKER_SIZE = 36;\nconst AVATAR_SIZE = 42;\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    amount,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n\n  const peerSelector = useCallback((global: GlobalState) => {\n    return peerId ? selectPeer(global, peerId) : undefined;\n  }, [peerId]);\n  const peer = useSelector(peerSelector);\n  const starGift = transaction.starGift;\n  const isUniqueGift = starGift?.type === 'starGiftUnique';\n  const giftSticker = starGift && getStickerFromGift(starGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, lang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (!shouldUseCustomPeer(transaction)) {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if ((transaction.isGiftUpgrade || transaction.isDropOriginalDetails)\n      && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isGiftResale && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isPostsSearch) {\n      title = getTransactionTitle(oldLang, lang, transaction);\n      description = undefined;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, lang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (isUniqueGift) {\n      const { backdrop } = getGiftAttributes(starGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.giftSticker}\n            sticker={giftSticker}\n            size={GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (giftSticker) {\n      return (\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={GIFT_STICKER_SIZE}\n          play={false}\n        />\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size={AVATAR_SIZE} webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [isUniqueGift, extendedMedia, photo, data.avatarPeer, subscriptionPeriod, starGift, giftSticker]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && `  (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, amountColorClass)}\n        >\n          {formatStarsTransactionAmount(lang, amount)}\n        </span>\n        {amount.currency === STARS_CURRENCY_CODE && <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />}\n        {amount.currency === TON_CURRENCY_CODE && <Icon name=\"toncoin\" className={amountColorClass} />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","import { memo, useEffect, useMemo, useRef, useState } from '@teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { AnimationLevel } from '../../../types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport {\n  PAID_MESSAGES_PURPOSE,\n  STARS_CURRENCY_CODE,\n  TON_CURRENCY_CODE,\n} from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport { selectSharedSettings } from '../../../global/selectors/sharedState.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit, convertTonToUsd, formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { resolveTransitionName } from '../../../util/resolveTransitionName.ts';\nimport { REM } from '../../common/helpers/mediaDimensions';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport ParticlesHeader from '../common/ParticlesHeader.tsx';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nconst HEADER_HEIGHT = 3.5 * REM;\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  tonBalanceState?: GlobalState['ton'];\n  canBuyPremium?: boolean;\n  shouldForceHeight?: boolean;\n  tonUsdRate?: number;\n  tonTopupUrl: string;\n  animationLevel: AnimationLevel;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, tonBalanceState, canBuyPremium, shouldForceHeight, tonUsdRate, tonTopupUrl, animationLevel,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n    openUrl,\n  } = getActions();\n\n  const currency = modal?.currency || STARS_CURRENCY_CODE;\n  const currentState = currency === TON_CURRENCY_CODE ? tonBalanceState : starsBalanceState;\n  const { balance, history } = currentState || {};\n  const { subscriptions } = (currency === STARS_CURRENCY_CODE && starsBalanceState) || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [areTabsPinned, pinTabs, unpinTabs] = useFlag(false);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const tabsRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal && (starsBalanceState || tonBalanceState));\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    if (topup?.purpose === PAID_MESSAGES_PURPOSE) {\n      return lang('StarsNeededTextSendPaidMessages', undefined, {\n        withMarkdown: true,\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const modalHeight = useMemo(() => {\n    const transactionCount = history?.all?.transactions.length || 0;\n    if (transactionCount === 1) {\n      return '35.5rem';\n    }\n    if (transactionCount === 2) {\n      return '39.25rem';\n    }\n    if (transactionCount === 3) {\n      return '43rem';\n    }\n    return '45rem';\n  }, [history?.all?.transactions.length]);\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n      unpinTabs();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  const renderStarsHeaderSection = () => {\n    return (\n      <>\n        <ParticlesHeader\n          model=\"swaying-star\"\n          color=\"gold\"\n          title={starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          description={renderText(\n            starsNeededText || oldLang('TelegramStarsInfo'),\n            ['simple_markdown', 'emoji'],\n          )}\n          isDisabled={!isOpen}\n        />\n        {canBuyPremium && !areBuyOptionsShown && (\n          <Button\n            className={styles.starButton}\n            onClick={showBuyOptions}\n            fluid\n          >\n            {oldLang('Star.List.BuyMoreStars')}\n          </Button>\n        )}\n        {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n          <Button\n            isText\n            noForcedUpperCase\n            className={styles.starButton}\n            fluid\n            onClick={openStarsGiftingPickerModalHandler}\n          >\n            {oldLang('TelegramStarsGift')}\n          </Button>\n        )}\n        {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n          <StarTopupOptionList\n            starsNeeded={starsNeeded}\n            options={starsBalanceState.topupOptions}\n            onClick={handleBuyStars}\n          />\n        )}\n      </>\n    );\n  };\n\n  const renderTonHeaderSection = () => {\n    const tonAmount = convertCurrencyFromBaseUnit(balance?.amount || 0, TON_CURRENCY_CODE);\n    return (\n      <>\n        <ParticlesHeader\n          model=\"speeding-diamond\"\n          color=\"blue\"\n          title={lang('CurrencyTon')}\n          description={lang('DescriptionAboutTon')}\n          isDisabled={!isOpen}\n        />\n        <div className={styles.tonBalanceContainer}>\n          <div className={styles.tonBalance}>\n            <Icon name=\"toncoin\" className={styles.tonIconBalance} />\n            {tonAmount}\n          </div>\n          {Boolean(tonUsdRate) && (\n            <span className={styles.tonInUsd}>\n              {` ${formatCurrencyAsString(\n                convertTonToUsd(balance?.amount || 0, tonUsdRate, true),\n                'USD',\n                lang.code,\n              )}`}\n            </span>\n          )}\n        </div>\n        <Button\n          className={styles.topUpButton}\n          onClick={handleTonTopUp}\n          fluid\n        >\n          {lang('ButtonTopUpViaFragment')}\n        </Button>\n\n        {currency === TON_CURRENCY_CODE && (\n          <div className={styles.hint}>\n            {lang('TonModalHint')}\n          </div>\n        )}\n      </>\n    );\n  };\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n\n    if (tabsRef.current) {\n      const { top: tabsTop } = tabsRef.current.getBoundingClientRect();\n      const { top: scrollerTop } = e.currentTarget.getBoundingClientRect();\n      const isPinned = tabsTop - scrollerTop <= HEADER_HEIGHT;\n      if (isPinned) {\n        pinTabs();\n      } else {\n        unpinTabs();\n      }\n    }\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n      isTon: currency === TON_CURRENCY_CODE,\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    const originPaymentInputInvoice = originStarsPayment?.inputInvoice;\n\n    let spendPurposePeerId: string | undefined;\n\n    switch (originPaymentInputInvoice?.type) {\n      case 'message': {\n        spendPurposePeerId = originPaymentInputInvoice.chatId;\n        break;\n      }\n\n      case 'slug': {\n        const form = originStarsPayment?.form;\n        spendPurposePeerId = form?.botId;\n        break;\n      }\n    }\n\n    if (originReaction) {\n      spendPurposePeerId = originReaction.chatId;\n    }\n\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n      spendPurposePeerId,\n    });\n  });\n\n  const handleTonTopUp = useLastCallback(() => {\n    openUrl({ url: tonTopupUrl });\n  });\n\n  return (\n    <Modal\n      className={buildClassName(styles.root, !shouldForceHeight && !areBuyOptionsShown && styles.minimal)}\n      isOpen={isOpen}\n      onClose={closeStarsBalanceModal}\n      dialogStyle={`--modal-height: ${modalHeight}`}\n      hasAbsoluteCloseButton\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        {currency !== TON_CURRENCY_CODE && <BalanceBlock balance={balance} className={styles.modalBalance} />}\n        <div\n          className={buildClassName(\n            styles.header, isHeaderHidden && styles.hiddenHeader, areTabsPinned && styles.noSeparator,\n          )}\n        >\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          {currency === TON_CURRENCY_CODE ? renderTonHeaderSection() : renderStarsHeaderSection()}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.lastSection}>\n              <Transition\n                name={resolveTransitionName('slideOptimized', animationLevel, undefined, lang.isRtl)}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                  noScrollRestoreOnTop\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              ref={tabsRef}\n              className={buildClassName(styles.tabs, areTabsPinned && styles.pinned)}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const shouldForceHeight = modal?.currency === TON_CURRENCY_CODE\n      ? Boolean(global.ton?.history?.all?.transactions.length)\n      : Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      shouldForceHeight,\n      starsBalanceState: global.stars,\n      tonBalanceState: global.ton,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n      tonUsdRate: global.appConfig.tonUsdRate,\n      tonTopupUrl: global.appConfig.tonTopupUrl,\n      animationLevel: selectSharedSettings(global).animationLevel,\n    };\n  },\n)(StarsBalanceModal));\n","import { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => Boolean(media.duration));\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={lang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true, className: styles.paymentButtonStar }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {Boolean(disclaimerText) && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"manageButtons\":\"feHNN0j8\",\"manageButton\":\"biAUzmLA\",\"text\":\"hsDNs5hG\",\"icon\":\"APNjRx1K\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible,\n  ApiEmojiStatusType,\n  ApiSavedStarGift,\n} from '../../../api/types';\n\nimport { DEFAULT_STATUS_ICON_ID } from '../../../config';\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { selectTabState, selectUser } from '../../../global/selectors';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\n\nimport styles from './UniqueGiftManageButtons.module.scss';\n\ntype OwnProps = {\n  savedGift?: ApiSavedStarGift;\n};\n\ntype StateProps = {\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst UniqueGiftManageButtons = ({\n  savedGift,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps & StateProps) => {\n  const {\n    openGiftTransferModal,\n    openGiftResalePriceComposerModal,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    updateStarGiftPrice,\n    showNotification,\n    closeGiftInfoModal,\n  } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const gift = savedGift?.gift;\n  const isGiftUnique = gift?.type === 'starGiftUnique';\n  const giftResalePrice = isGiftUnique ? gift.resellPrice : undefined;\n\n  const global = getGlobal();\n  const modal = selectTabState(global).giftInfoModal;\n  const peerId = modal?.peerId;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((status) =>\n      status.type === 'collectible' && status.slug === starGiftUniqueSlug,\n    ) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const currentUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n  const canTakeOff = starGiftUniqueSlug !== undefined && currentUniqueEmojiStatusSlug === starGiftUniqueSlug;\n  const canWear = Boolean(userCollectibleStatus) && !canTakeOff;\n\n  const handleTransfer = useLastCallback(() => {\n    if (!savedGift || savedGift?.gift.type !== 'starGiftUnique') return;\n\n    if (savedGift.canTransferAt && savedGift.canTransferAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanTransferAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canTransferAt * 1000) },\n        },\n      });\n      return;\n    }\n\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    } else if (userCollectibleStatus) {\n      openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n    }\n  });\n\n  const handleSell = useLastCallback(() => {\n    if (!savedGift || !peerId) return;\n    if (savedGift.canResellAt && savedGift.canResellAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanResellAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canResellAt * 1000) },\n        },\n      });\n      return;\n    }\n    openGiftResalePriceComposerModal({ peerId, gift: savedGift });\n  });\n\n  const handleUnlist = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift) return;\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price: {\n      currency: STARS_CURRENCY_CODE, amount: 0, nanos: 0,\n    } });\n    showNotification({\n      icon: 'unlist-outline',\n      message: {\n        key: 'NotificationGiftIsUnlist',\n        variables: { gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }) },\n      },\n    });\n  });\n\n  return (\n    <div className={styles.manageButtons}>\n      <Button\n        color=\"transparentBlured\"\n        iconName=\"gift-transfer-inline\"\n        iconAlignment=\"top\"\n        iconClassName={styles.icon}\n        onClick={handleTransfer}\n        ariaLabel={lang('GiftInfoTransfer')}\n        noForcedUpperCase\n        fluid\n        className={styles.manageButton}\n      >\n        <span className={styles.text}>\n          {lang('GiftInfoTransfer')}\n        </span>\n      </Button>\n      {(canWear || !canTakeOff) && (\n        <Button\n          color=\"transparentBlured\"\n          iconName={canTakeOff ? 'crown-take-off' : 'crown-wear'}\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={canWear || canTakeOff ? handleWear : undefined}\n          disabled={!canWear && !canTakeOff}\n          ariaLabel={lang(canTakeOff ? 'GiftInfoTakeOff' : 'GiftInfoWear')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang(canTakeOff ? 'GiftInfoTakeOff' : 'GiftInfoWear')}\n          </span>\n        </Button>\n      )}\n      {!giftResalePrice && (\n        <Button\n          color=\"transparentBlured\"\n          iconName=\"sell\"\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={handleSell}\n          ariaLabel={lang('Sell')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang('Sell')}\n          </span>\n        </Button>\n      )}\n      {Boolean(giftResalePrice) && (\n        <Button\n          color=\"transparentBlured\"\n          iconName=\"unlist\"\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={handleUnlist}\n          ariaLabel={lang('GiftInfoUnlist')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang('GiftInfoUnlist')}\n          </span>\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { currentUserId } = global;\n    const currentUser = currentUserId ? selectUser(global, currentUserId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    return {\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n    };\n  },\n)(UniqueGiftManageButtons));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"irv1C8bo\",\"withManageButtons\":\"QcTw5OSp\",\"sticker\":\"a1ASgPwu\",\"withBadge\":\"OFWOLtAH\",\"subtitleBadge\":\"V7kDVPLm\",\"badge\":\"PAmbIL6y\",\"radialPattern\":\"UvhsGZLf\",\"amount\":\"zTVWZg63\",\"transition\":\"Tu6_OHoq\",\"transitionSlide\":\"iUTKLzTN\",\"title\":\"ECTvfOda\",\"subtitle\":\"S6JwvHWD\"};","import type { TeactNode } from '@teact';\nimport { memo, useMemo } from '@teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiSavedStarGift,\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n  ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport {\n  formatStarsTransactionAmount,\n} from '../../../global/helpers/payments';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { REM } from '../../common/helpers/mediaDimensions.ts';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\nimport UniqueGiftManageButtons from './UniqueGiftManageButtons';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: TeactNode;\n  badge?: TeactNode;\n  subtitle?: TeactNode;\n  subtitlePeer?: ApiPeer;\n  className?: string;\n  resellPrice?: ApiTypeCurrencyAmount;\n  showManageButtons?: boolean;\n  savedGift?: ApiSavedStarGift;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  badge,\n  subtitle,\n  subtitlePeer,\n  className,\n  resellPrice,\n  showManageButtons,\n  savedGift,\n}: OwnProps) => {\n  const {\n    openChat,\n  } = getActions();\n\n  const { isMobile } = useAppLayout();\n\n  const lang = useLang();\n  const [isGiftHover, markGiftHover, unmarkGiftHover] = useFlag(false);\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        canvasClassName={styles.radialPatternCanvas}\n        backgroundColors={backdropColors}\n        patternIcon={patternAttribute.sticker}\n        yPosition={7.5 * REM}\n        maxRadius={0.26}\n        patternSize={isMobile ? 14 : 16}\n        ovalFactor={1.2}\n      />\n    );\n  }, [backdropAttribute, patternAttribute, isMobile]);\n\n  return (\n    <div className={buildClassName(styles.root,\n      'interactive-gift',\n      showManageButtons && styles.withManageButtons,\n      badge && styles.withBadge,\n      className)}\n    >\n      <Transition\n        className={styles.transition}\n        slideClassName={buildClassName(styles.transitionSlide)}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n          noLoop={!isGiftHover}\n          onMouseEnter={!IS_TOUCH_ENV ? markGiftHover : undefined}\n          onMouseLeave={!IS_TOUCH_ENV ? unmarkGiftHover : undefined}\n        />\n      </Transition>\n      {Boolean(badge) && (\n        <div className={styles.badge}>{badge}</div>\n      )}\n      {Boolean(title) && <h1 className={styles.title}>{title}</h1>}\n      {Boolean(subtitle) && (\n        <div\n          className={buildClassName(styles.subtitle, subtitlePeer && styles.subtitleBadge)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n          onClick={() => {\n            if (subtitlePeer) {\n              openChat({ id: subtitlePeer.id });\n            }\n          }}\n        >\n          {subtitle}\n        </div>\n      )}\n      {savedGift && showManageButtons && (\n        <UniqueGiftManageButtons\n          savedGift={savedGift}\n        />\n      )}\n      {resellPrice && (\n        <p className={styles.amount}>\n          <span>\n            {formatStarsTransactionAmount(lang, resellPrice)}\n          </span>\n          {resellPrice.currency === 'XTR' && <StarIcon type=\"gold\" size=\"middle\" />}\n          {resellPrice.currency === 'TON' && <Icon name=\"toncoin\" />}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"IzhfRIWu\",\"positive\":\"jvBZSrpd\",\"negative\":\"xDyq9cc0\",\"header\":\"qBOIq6Jn\",\"uniqueGift\":\"ApoQz22o\",\"amount\":\"sso9uZM6\",\"title\":\"ZZAj3hj7\",\"description\":\"NuWOY7ED\",\"tid\":\"tMF8VIOM\",\"refunded\":\"sxWAwxTd\",\"totalStars\":\"Z2YALGgl\",\"starIcon\":\"cU5QlvwL\",\"footer\":\"KgzPpgS6\",\"starsBackground\":\"nML8IQqX\",\"copyIcon\":\"voCttFzS\",\"mediaPreview\":\"C5r59yiV\",\"subtitle\":\"mFYcIYMJ\",\"starGiftSticker\":\"j3akHdtm\",\"avatar\":\"hcrszlpT\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../../config';\nimport { getMessageLink } from '../../../../global/helpers';\nimport {\n  buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer,\n} from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectGiftStickerForTon,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n  paidMessageCommission?: number;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal,\n  peer,\n  canPlayAnimatedEmojis,\n  topSticker,\n  paidMessageCommission,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, amount, isGiftUpgrade, isDropOriginalDetails, starGift, isGiftResale,\n      starRefCommision,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n      && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, lang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade && !isDropOriginalDetails\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId ? getMessageLink(peer, undefined, giveawayPostId) : undefined;\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || ((isGiftUpgrade || isDropOriginalDetails) && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker && !transaction.isPostsSearch;\n    const avatarPeer = !photo ? ((!shouldUseCustomPeer(transaction) && peer) || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n          resellPrice={transaction.amount}\n        />\n      </div>\n    );\n\n    const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar\n            className={styles.avatar}\n            peer={avatarPeer}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n        )}\n        {!sticker && !transaction.isPostsSearch && (\n          <InteractiveSparkles\n            className={buildClassName(styles.starsBackground)}\n            color=\"gold\"\n            onRequestAnimation={handleRequestAnimation}\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n          />\n        )}\n        {Boolean(title) && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, amountColorClass)}\n          >\n            {formatStarsTransactionAmount(lang, amount)}\n          </span>\n          {amount.currency === STARS_CURRENCY_CODE && <StarIcon type=\"gold\" size=\"middle\" />}\n          {amount.currency === 'TON' && <Icon name=\"toncoin\" className={amountColorClass} />}\n          {transaction.isRefund && (\n            <p className={styles.refunded}>{lang('Refunded')}</p>\n          )}\n        </p>\n        {Boolean(transaction.paidMessages && transaction.starRefCommision && paidMessageCommission) && (\n          <p className={styles.description}>\n            {lang(\n              'PaidMessageTransactionDescription',\n              { percent: formatPercent(paidMessageCommission! / 10) },\n              {\n                withNodes: true,\n                withMarkdown: true,\n              },\n            )}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction && starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    if (isDropOriginalDetails) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        lang('StarGiftReasonDropOriginalDetails'),\n      ]);\n    }\n\n    if (isGiftResale) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        isNegativeAmount(transaction.amount)\n          ? lang('StarGiftSaleTransaction')\n          : lang('StarGiftPurchaseTransaction'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeAmount(amount) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    if (!transaction.isPostsSearch && !isDropOriginalDetails && !transaction.isStarGiftAuctionBid) {\n      tableData.push([\n        peerLabel,\n        peerId ? { chatId: peerId } : toName || '',\n      ]);\n    }\n\n    if (transaction.starRefCommision && transaction.paidMessages) {\n      tableData.push([\n        lang('PaidMessageTransactionTotal'),\n        formatStarsAsIcon(lang,\n          transaction.amount.amount / ((100 - transaction.starRefCommision) / 100),\n          { asFont: false, className: styles.starIcon, containerClassName: styles.totalStars }),\n      ]);\n    }\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink && transaction.amount.currency === STARS_CURRENCY_CODE) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.amount, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    if (transaction.isStarGiftAuctionBid && gift?.type === 'starGift' && gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: gift.availabilityTotal,\n        }, {\n          pluralValue: gift.availabilityRemains || 0,\n        }),\n      ]);\n    }\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker,\n    paidMessageCommission, handleRequestAnimation]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n    const paidMessageCommission = global.appConfig.starsPaidMessageCommissionPermille;\n\n    const currencyAmount = modal?.transaction.amount;\n    const starsGiftSticker = modal?.transaction.isGift\n      ? (currencyAmount?.currency === STARS_CURRENCY_CODE ? selectGiftStickerForStars(global, currencyAmount?.amount)\n        : selectGiftStickerForTon(global, currencyAmount?.amount)) : undefined;\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n      paidMessageCommission,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"eR_RZfGB\",\"header\":\"E3R22yAI\",\"title\":\"qdydQHgc\",\"amount\":\"FI6rEJlK\",\"footer\":\"GMWMuWCr\",\"starsBackground\":\"zGCayu45\",\"subscriptionStar\":\"enRetSny\",\"amountStar\":\"J8HIcN6k\",\"secondary\":\"oBLHWBtJ\",\"danger\":\"nkwiG25Q\",\"avatarWrapper\":\"wuTMXDP9\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar\n            peer={!photo ? peer : undefined}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <InteractiveSparkles\n          className={buildClassName(styles.starsBackground)}\n          color=\"gold\"\n          onRequestAnimation={handleRequestAnimation}\n          centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"CuBAw2yg\",\"dragging\":\"LbDNXOOQ\",\"progress\":\"kwK0cNPX\",\"floatingBadgeWrapper\":\"uvlMoXj0\",\"floatingBadgeText\":\"qqQan8uF\",\"floatingBadgeTriangle\":\"mIdJOmsB\",\"slider\":\"euOOAbZi\",\"sparkles\":\"_L1YQTIP\",\"dynamicColor\":\"uIYIwZpx\",\"floatingBadge\":\"BGSDWAYc\",\"clickable\":\"JwkM7nwU\",\"noTransition\":\"cG6CiHRL\",\"floatingBadgeSparkles\":\"JCciTRtu\",\"floatingBadgeContent\":\"f1UPSN27\",\"withDescription\":\"WsptdVHe\",\"floatingBadgeTitle\":\"HkY6dR8D\",\"floatingBadgeDescription\":\"mR3ddE5s\",\"floatingBadgeTrianglePath\":\"IW9YhMAx\",\"customValueIcon\":\"Td8Tc1MH\"};","import type { TeactNode } from '../../../lib/teact/teact';\nimport {\n  memo, useEffect,\n  useMemo, useRef, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  minValue?: number;\n  minAllowedValue?: number;\n  minAllowedProgress?: number;\n  className?: string;\n  floatingBadgeDescription?: TeactNode;\n  shouldUseDynamicColor?: boolean;\n  shouldAllowCustomValue?: boolean;\n  onChange: (value: number) => void;\n  onBadgeClick?: NoneToVoidFunction;\n  onCustomValueClick?: NoneToVoidFunction;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\nconst LARGE_STEP = 10000;\nconst THUMB_SIZE = 1.875 * REM;\nconst CORNER_BEAK_WIDTH = 44;\nconst DEFAULT_BEAK_WIDTH = 52;\nconst BEAK_HEIGHT = 32;\n\nconst BEAK_OFFSET_END = 10;\nconst TIP_OFFSET_END = 0;\nconst BEAK_TIP_PADDING = 1;\n\nconst BADGE_HORIZONTAL_PADDING = 2 * REM;\nconst BADGE_ICON_SIZE = 1.5 * REM;\nconst BADGE_TITLE_GAP = 0.125 * REM;\nconst DRAG_DISTANCE_THRESHOLD = 5;\nconst BADGE_WIDTH_DELTA = 6;\n\nlet textMeasureCanvas: HTMLCanvasElement | undefined;\n\nfunction getTextWidth(text: string, font: string): number {\n  if (!textMeasureCanvas) {\n    textMeasureCanvas = document.createElement('canvas');\n  }\n  const ctx = textMeasureCanvas.getContext('2d')!;\n  ctx.font = font;\n  return ctx.measureText(text).width;\n}\n\nconst SLIDER_COLORS = [\n  '#955CDB', // Purple\n  '#955CDB', // Purple\n  '#46A3EB', // Blue\n  '#40A920', // Green\n  '#E29A09', // Yellow\n  '#ED771E', // Orange\n  '#E14741', // Red\n  '#5B6676', // Silver\n];\n\nfunction getColorForProgress(progress: number): string {\n  const index = Math.floor(progress * SLIDER_COLORS.length);\n  return SLIDER_COLORS[Math.min(index, SLIDER_COLORS.length - 1)];\n}\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  minValue: minValueProp,\n  minAllowedValue,\n  minAllowedProgress,\n  className,\n  floatingBadgeDescription,\n  shouldUseDynamicColor,\n  shouldAllowCustomValue,\n  onChange,\n  onBadgeClick,\n  onCustomValueClick,\n}: OwnProps) => {\n  const containerRef = useRef<HTMLDivElement>();\n  const floatingBadgeContentRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const baseMinValue = minValueProp ?? 1;\n\n  // Uses binary search - O(log n)\n  const actualMinValue = useMemo(() => {\n    if (!minAllowedProgress || !minAllowedValue || minAllowedValue <= baseMinValue) {\n      return baseMinValue;\n    }\n\n    let low = baseMinValue;\n    let high = minAllowedValue;\n\n    while (low < high) {\n      const mid = Math.floor((low + high) / 2);\n      const testPoints = buildPoints(mid, maxValue);\n      const testProgress = getProgress(testPoints, minAllowedValue, mid);\n      const normalizedProgress = testProgress / testPoints.length;\n\n      if (normalizedProgress < minAllowedProgress) {\n        high = mid;\n      } else {\n        low = mid + 1;\n      }\n    }\n\n    return Math.max(baseMinValue, low);\n  }, [baseMinValue, minAllowedValue, minAllowedProgress, maxValue]);\n\n  const points = useMemo(() => {\n    return buildPoints(actualMinValue, maxValue);\n  }, [maxValue, actualMinValue]);\n\n  const [value, setValue] = useState(0);\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [badgeWidth, setBadgeWidth] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const startXRef = useRef<number | undefined>();\n  const prevBadgeWidth = usePrevious(badgeWidth);\n\n  const badgeText = lang.number(getValue(points, value, actualMinValue));\n\n  const minSliderProgress = minAllowedValue !== undefined\n    ? getProgress(points, minAllowedValue, actualMinValue) : 0;\n\n  useEffect(() => {\n    setValue(getProgress(points, defaultValue, actualMinValue));\n  }, [defaultValue, points, actualMinValue]);\n\n  useEffect(() => {\n    if (!floatingBadgeContentRef.current) return;\n\n    const titleEl = floatingBadgeContentRef.current.querySelector(`.${styles.floatingBadgeTitle}`);\n    if (!titleEl) return;\n\n    const computedStyle = getComputedStyle(titleEl);\n    const font = `${computedStyle.fontWeight} ${computedStyle.fontSize} ${computedStyle.fontFamily}`;\n\n    const textWidth = getTextWidth(badgeText, font);\n    const titleWidth = BADGE_ICON_SIZE + BADGE_TITLE_GAP + textWidth;\n\n    const descriptionEl = floatingBadgeContentRef.current.querySelector(`.${styles.floatingBadgeDescription}`);\n    const descriptionWidth = descriptionEl?.scrollWidth || 0;\n\n    const contentWidth = Math.max(titleWidth, descriptionWidth);\n    const newBadgeWidth = contentWidth + BADGE_HORIZONTAL_PADDING;\n\n    setBadgeWidth((currentWidth) => {\n      if (Math.abs(newBadgeWidth - currentWidth) < BADGE_WIDTH_DELTA) {\n        return currentWidth;\n      }\n      return newBadgeWidth;\n    });\n  }, [badgeText, floatingBadgeDescription]);\n\n  const handleContainerResize = useLastCallback((entry: ResizeObserverEntry) => {\n    setContainerWidth(entry.contentRect.width);\n  });\n\n  useResizeObserver(containerRef, handleContainerResize);\n\n  const progress = value / points.length;\n  const {\n    minBadgeX, maxBadgeX, beakOffset, beakTipOffset, beakWidth: currentBeakWidth,\n  } = useMemo(() => {\n    return calcBadgePosition(containerWidth, badgeWidth, progress);\n  }, [containerWidth, badgeWidth, progress]);\n\n  const beakPath = useMemo(() => {\n    return generateBeakPath(currentBeakWidth, beakTipOffset);\n  }, [currentBeakWidth, beakTipOffset]);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const rawValue = Number(event.currentTarget.value);\n    const clampedValue = Math.max(rawValue, minSliderProgress);\n    setValue(clampedValue);\n\n    const resultValue = getValue(points, clampedValue, actualMinValue);\n    onChange(resultValue);\n  });\n\n  const handlePointerDown = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    startXRef.current = e.clientX;\n    setIsDragging(false);\n  });\n\n  const handlePointerMove = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    if (startXRef.current === undefined) return;\n    const distance = Math.abs(e.clientX - startXRef.current);\n    if (distance >= DRAG_DISTANCE_THRESHOLD) {\n      setIsDragging(true);\n    }\n  });\n\n  const handlePointerUp = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    startXRef.current = undefined;\n\n    if (!isDragging && onCustomValueClick && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      const clickZoneWidth = 1.875 * REM;\n\n      const isInIconArea = e.clientX >= rect.right - clickZoneWidth && e.clientX <= rect.right;\n\n      if (isInIconArea) {\n        onCustomValueClick();\n      }\n    }\n\n    setIsDragging(false);\n  });\n\n  const dynamicColor = shouldUseDynamicColor ? getColorForProgress(progress) : undefined;\n\n  const badgeStyle = buildStyle(\n    Boolean(badgeWidth) && `width: ${badgeWidth}px`,\n  );\n\n  const rootStyle = buildStyle(\n    `--progress: ${progress}`,\n    `--min-badge-x: ${minBadgeX}px`,\n    `--max-badge-x: ${maxBadgeX}px`,\n    dynamicColor && `--dynamic-color: ${dynamicColor}`,\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(styles.root, isDragging && styles.dragging, className)}\n      style={rootStyle}\n    >\n      <div className={styles.floatingBadgeWrapper}>\n        <div\n          className={buildClassName(styles.floatingBadge, onBadgeClick && styles.clickable)}\n          onClick={onBadgeClick}\n        >\n          <div\n            className={buildClassName(\n              styles.floatingBadgeText,\n              shouldUseDynamicColor && styles.dynamicColor,\n              (!prevBadgeWidth || prevBadgeWidth === 0) && styles.noTransition,\n            )}\n            style={badgeStyle}\n          >\n            <Sparkles preset=\"button\" className={styles.floatingBadgeSparkles} />\n            <div\n              ref={floatingBadgeContentRef}\n              className={buildClassName(\n                styles.floatingBadgeContent,\n                floatingBadgeDescription && styles.withDescription,\n              )}\n            >\n              <div className={styles.floatingBadgeTitle}>\n                <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n                <AnimatedCounter text={badgeText} />\n              </div>\n              <div className={styles.floatingBadgeDescription}>\n                {floatingBadgeDescription}\n              </div>\n            </div>\n          </div>\n          <svg\n            className={styles.floatingBadgeTriangle}\n            width={currentBeakWidth}\n            height={BEAK_HEIGHT}\n            viewBox={`0 0 ${currentBeakWidth} ${BEAK_HEIGHT}`}\n            fill=\"none\"\n            aria-hidden=\"true\"\n            role=\"presentation\"\n            style={`transform: translate(calc(-50% + ${beakOffset}px), 33%)`}\n          >\n            {!shouldUseDynamicColor && (\n              <defs>\n                <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                  <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                  <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n                </linearGradient>\n              </defs>\n            )}\n            <path\n              className={styles.floatingBadgeTrianglePath}\n              d={beakPath}\n              fill={dynamicColor || 'url(#StarBadgeTriangle)'}\n            />\n          </svg>\n        </div>\n      </div>\n      <div className={buildClassName(styles.progress, shouldUseDynamicColor && styles.dynamicColor)}>\n        <Sparkles preset=\"progress\" className={styles.sparkles} />\n      </div>\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue, actualMinValue)}\n        step=\"any\"\n        onChange={handleChange}\n        onPointerDown={handlePointerDown}\n        onPointerMove={handlePointerMove}\n        onPointerUp={handlePointerUp}\n      />\n      {shouldAllowCustomValue && (\n        <Icon name=\"add\" className={styles.customValueIcon} />\n      )}\n    </div>\n  );\n};\n\nfunction buildPoints(minValue: number, maxValue: number): number[] {\n  const result = [];\n\n  for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n    if (DEFAULT_POINTS[i] <= minValue) continue;\n\n    if (DEFAULT_POINTS[i] < maxValue) {\n      result.push(DEFAULT_POINTS[i]);\n    }\n\n    if (DEFAULT_POINTS[i] >= maxValue) {\n      result.push(maxValue);\n      return result;\n    }\n  }\n\n  const lastPoint = DEFAULT_POINTS[DEFAULT_POINTS.length - 1];\n  const stepsNeeded = Math.ceil((minValue - lastPoint) / LARGE_STEP);\n  let nextPoint = lastPoint + Math.max(1, stepsNeeded) * LARGE_STEP;\n\n  while (nextPoint < maxValue) {\n    result.push(nextPoint);\n    nextPoint += LARGE_STEP;\n  }\n  result.push(maxValue);\n\n  return result;\n}\n\nfunction getProgress(points: number[], value: number, minValue: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || minValue;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  if (nextPoint === prevPoint) return pointIndex;\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number, minValue: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || minValue;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nfunction calcBadgePosition(\n  containerWidth: number,\n  badgeWidth: number,\n  progress: number,\n) {\n  const halfBadgeWidth = badgeWidth / 2;\n  const cornerBeakHalfWidth = CORNER_BEAK_WIDTH / 2;\n  const maxBeakOffset = halfBadgeWidth - cornerBeakHalfWidth;\n\n  const minBadgeX = halfBadgeWidth;\n  const maxBadgeX = containerWidth - halfBadgeWidth;\n\n  const thumbHalf = THUMB_SIZE / 2;\n  const trackLength = containerWidth - THUMB_SIZE;\n  const distanceFromLeft = progress * trackLength;\n  const distanceFromRight = trackLength - distanceFromLeft;\n\n  const isLeftSide = distanceFromLeft < distanceFromRight;\n  const distanceToEdge = isLeftSide ? distanceFromLeft : distanceFromRight;\n  const direction = isLeftSide ? -1 : 1;\n\n  let beakOffset = 0;\n  let beakTipOffset = 0;\n  let beakWidth = DEFAULT_BEAK_WIDTH;\n\n  const beakOffsetStart = halfBadgeWidth - thumbHalf;\n\n  if (distanceToEdge < beakOffsetStart) {\n    if (distanceToEdge > BEAK_OFFSET_END) {\n      const t = (beakOffsetStart - distanceToEdge) / (beakOffsetStart - BEAK_OFFSET_END);\n      beakOffset = direction * t * maxBeakOffset;\n    } else if (distanceToEdge > TIP_OFFSET_END) {\n      beakOffset = direction * maxBeakOffset;\n      const t = (BEAK_OFFSET_END - distanceToEdge) / (BEAK_OFFSET_END - TIP_OFFSET_END);\n      const tExp = 1 - (1 - t) * (1 - t) * (1 - t);\n      beakWidth = DEFAULT_BEAK_WIDTH - tExp * (DEFAULT_BEAK_WIDTH - CORNER_BEAK_WIDTH);\n      beakTipOffset = direction * t * (beakWidth / 2);\n    } else {\n      beakOffset = direction * maxBeakOffset;\n      beakWidth = CORNER_BEAK_WIDTH;\n      beakTipOffset = direction * (beakWidth / 2);\n    }\n  }\n\n  const maxTipOffset = beakWidth / 2 - TIP_RADIUS - BEAK_TIP_PADDING;\n  const clampedTipOffset = Math.max(-maxTipOffset, Math.min(maxTipOffset, beakTipOffset));\n\n  return {\n    minBadgeX,\n    maxBadgeX,\n    beakOffset,\n    beakTipOffset: clampedTipOffset,\n    beakWidth,\n  };\n}\n\nconst TIP_RADIUS = 2;\n\nfunction generateBeakPath(beakWidth: number, tipOffset: number): string {\n  const tipX = beakWidth / 2 + tipOffset;\n  const r = TIP_RADIUS;\n  const y = BEAK_HEIGHT - r;\n\n  return `M 0 0 L ${beakWidth} 0 L ${tipX + r} ${y} Q ${tipX} ${BEAK_HEIGHT} ${tipX - r} ${y} Z`;\n}\n\nexport default memo(StarSlider);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"RdhRpsCn\",\"title\":\"yzbjj73U\",\"slider\":\"xePPMXOI\",\"description\":\"BlpfdOtK\",\"itemInfo\":\"nS9V516D\",\"itemTitle\":\"sH5Nukjy\",\"itemSubtitle\":\"dHlNODTI\",\"itemIcon\":\"H_iHihXU\",\"sendAsPeerButtonAvatar\":\"_mjvLELm\",\"sendAsPeerMenuButton\":\"zxsRaWYV\",\"buttonDownIcon\":\"zrwUUELS\",\"sendAsPeerMenuBubble\":\"X1PB6mhQ\",\"sendAsPeerMenu\":\"Px1MDij9\",\"sendAsPeersMenuContainer\":\"Al1nfhHJ\",\"headerControlPanel\":\"vu90kSL_\",\"separator\":\"uhQLUjmo\",\"checkBox\":\"Mc3bVeF0\",\"topLabel\":\"bnou4CpV\",\"top\":\"QludQDKR\",\"topBadge\":\"JBF9pTUK\",\"buttonStar\":\"NJJFuym9\",\"topPeer\":\"Ty4Ud_Rd\",\"disclaimer\":\"KRvkHeo1\"};","import type { FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiPaidReactionPrivacyType,\n  ApiPeer,\n  ApiSendAsPeerId,\n  ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectChat, selectChatMessage, selectPeer, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: ApiPaidReactionPrivacyType;\n  sendPaidReactionsAsPeerIds?: ApiSendAsPeerId[];\n  currentUserId: string;\n  currentUser: ApiUser;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMy?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiPeer;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n  sendPaidReactionsAsPeerIds,\n  currentUserId,\n  currentUser,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction, loadSendPaidReactionsAs } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldSendAsAnonymous, setShouldSendAsAnonymous] = useState(true);\n  const [sendAsPeerId, setSendAsPeerId] = useState(currentUserId);\n\n  const chatId = chat?.id;\n\n  const senderPeer = sendAsPeerId ? (selectPeer(getGlobal(), sendAsPeerId)) : currentUser;\n\n  const oldLang = useOldLang();\n  const { isMobile } = useAppLayout();\n  const lang = useLang();\n\n  const handleShowInTopSendersChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldSendAsAnonymous(!e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (chatId && !sendPaidReactionsAsPeerIds) {\n      loadSendPaidReactionsAs({ chatId });\n    }\n  }, [chatId, sendPaidReactionsAsPeerIds]);\n\n  const filteredMyReactorIds = useMemo(() => {\n    const result = sendPaidReactionsAsPeerIds?.map((peer) => peer.id)\n      .filter((id) => id !== chatId);\n    result?.unshift(currentUserId);\n    return result;\n  }, [sendPaidReactionsAsPeerIds, chatId, currentUserId]);\n\n  const canChangeSendAsPeer = filteredMyReactorIds && filteredMyReactorIds.length > 1;\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMy);\n    if (currentReactor) {\n      setShouldSendAsAnonymous(Boolean(currentReactor.isAnonymous));\n      if (currentReactor.peerId) {\n        setSendAsPeerId(currentReactor.peerId);\n      }\n      return;\n    }\n\n    setShouldSendAsAnonymous(defaultPrivacy?.type === 'anonymous' || false);\n    if (defaultPrivacy?.type === 'peer' && filteredMyReactorIds?.includes(defaultPrivacy.peerId)) {\n      setSendAsPeerId(defaultPrivacy.peerId);\n      return;\n    }\n\n    setSendAsPeerId(currentUserId);\n  }, [defaultPrivacy, message?.reactions?.topReactors, filteredMyReactorIds, currentUserId]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: shouldSendAsAnonymous,\n      peerId: shouldSendAsAnonymous || sendAsPeerId === currentUserId ? undefined : sendAsPeerId,\n      shouldIgnoreDefaultPrivacy: true,\n    });\n    closePaidReactionModal();\n  });\n\n  const handleSendAsPeerChange = useLastCallback((peerId: string) => {\n    setShouldSendAsAnonymous(false);\n    setSendAsPeerId(peerId);\n  });\n\n  const renderMenuItem = useLastCallback((peerId: string) => {\n    const peer = selectPeer(getGlobal(), peerId);\n    const isSelected = sendAsPeerId === peerId && !shouldSendAsAnonymous;\n    if (!peer) return undefined;\n\n    return (\n      <MenuItem\n\n        onClick={() => handleSendAsPeerChange(peerId)}\n      >\n        <Avatar\n          size=\"small\"\n          peer={peer}\n        />\n        <div className={buildClassName(styles.itemInfo)}>\n          <FullNameTitle className={styles.itemTitle} peer={peer} noFake noVerified />\n          <span className={styles.itemSubtitle}>\n            {isApiPeerUser(peer) ? lang('PeerPersonalAccount') : lang('PeerChannel')}\n          </span>\n        </div>\n        <Icon\n          className={styles.itemIcon}\n          name={isSelected ? 'check' : 'placeholder'}\n        />\n      </MenuItem>\n    );\n  });\n\n  const SendAsPeerMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={buildClassName(styles.sendAsPeerMenuButton, isOpen ? 'active' : '')}\n        onClick={onTrigger}\n        ariaLabel={lang('AriaLabelOpenMenu')}\n      >\n        <Avatar\n          className={styles.sendAsPeerButtonAvatar}\n          size=\"mini\"\n          peer={shouldSendAsAnonymous ? ANONYMOUS_PEER : senderPeer}\n        />\n        <Icon\n          name=\"down\"\n          className={styles.buttonDownIcon}\n        />\n      </Button>\n    );\n  }, [isMobile, lang, senderPeer, shouldSendAsAnonymous]);\n\n  const sendAsPeersMenu = useMemo(() => {\n    if (!canChangeSendAsPeer) return undefined;\n    return (\n      <DropdownMenu\n        className={buildClassName(styles.sendAsPeerMenu, 'with-menu-transitions')}\n        bubbleClassName={styles.sendAsPeerMenuBubble}\n        trigger={SendAsPeerMenuButton}\n        positionX=\"right\"\n        autoClose\n      >\n        {filteredMyReactorIds.map((id) => (\n          renderMenuItem(id)\n        ))}\n      </DropdownMenu>\n    );\n  }, [SendAsPeerMenuButton, filteredMyReactorIds, canChangeSendAsPeer]);\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasCurrentSender = false;\n    let myReactorAmount = 0;\n\n    all.forEach((reactor) => {\n      const peer = reactor.peerId ? selectPeer(global, reactor.peerId) : undefined;\n      if (!peer && !reactor.isAnonymous && !reactor.isMy) return;\n      if (reactor.isMy) {\n        myReactorAmount = reactor.count;\n      }\n\n      if (reactor.isMy && (reactor.peerId !== sendAsPeerId || (reactor.isAnonymous && !shouldSendAsAnonymous))) return;\n\n      const isCurrentReactor = sendAsPeerId === reactor.peerId || (shouldSendAsAnonymous && reactor.isAnonymous);\n\n      if (isCurrentReactor) {\n        hasCurrentSender = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: isCurrentReactor && isTouched ? starsAmount : 0,\n        isMy: reactor.isMy,\n        isAnonymous: reactor.isAnonymous,\n        user: peer,\n      });\n    });\n\n    if (!hasCurrentSender) {\n      const sender = selectPeer(global, sendAsPeerId);\n      result.push({\n        amount: myReactorAmount,\n        localAmount: isTouched ? starsAmount : 0,\n        isMy: true,\n        user: sender,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount, sendAsPeerId, shouldSendAsAnonymous]);\n\n  const chatTitle = chat && getPeerTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n      isLowStackPriority\n    >\n      <div className={styles.sendAsPeersMenuContainer}>\n        {sendAsPeersMenu}\n      </div>\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMy && shouldSendAsAnonymous))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey)\n              : peer && getPeerTitle(oldLang, peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      {topReactors && (<Separator className={styles.separator} />)}\n      <Checkbox\n        className={buildClassName(styles.checkBox, 'dialog-checkbox')}\n        checked={!shouldSendAsAnonymous}\n        onChange={handleShowInTopSendersChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n    const sendPaidReactionsAsPeerIds = chat?.sendPaidReactionsAsPeerIds;\n    const currentUserId = global.currentUserId!;\n    const currentUser = selectUser(global, currentUserId)!;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n      sendPaidReactionsAsPeerIds,\n      currentUserId,\n      currentUser,\n    };\n  },\n)(PaidReactionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"jKOG0It6\",\"header\":\"A_fX4EXY\",\"spacer\":\"ATowWJ60\",\"title\":\"gDNtv9oz\",\"balance-container\":\"eAKZVhOT\",\"balanceContainer\":\"eAKZVhOT\",\"balance-caption\":\"vbwprYel\",\"balanceCaption\":\"vbwprYel\",\"star-balance\":\"lXuIlbVK\",\"starBalance\":\"lXuIlbVK\",\"balance\":\"dIEx_Iqi\",\"optionsSection\":\"Y68CEIKn\",\"checkboxTitle\":\"H4taXei_\",\"actionMessageView\":\"CB1mxsgp\",\"messageInput\":\"o5r2IPoA\",\"limited\":\"mWzLu0c0\",\"footer\":\"jxWZSvet\",\"switcher\":\"zZUpGRSI\",\"switcherStarIcon\":\"zAee80Dv\",\"bottomDescription\":\"j4s8T1dQ\",\"description\":\"nTPAv1ci\",\"main-button\":\"IDuhjrne\",\"mainButton\":\"IDuhjrne\",\"buttonSubtitle\":\"pB6hqcvA\",\"star\":\"Q4NlMT0o\",\"background\":\"ZORVRSG3\",\"customBgImage\":\"Eny_G3JI\",\"customBgColor\":\"TkJZPU2u\",\"withTransition\":\"soDpW2YR\",\"blurred\":\"M6k91TdM\",\"withRightColumn\":\"FBcNO8hj\"};","import type { ChangeEvent } from 'react';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\nimport {\n  type ApiMessage, type ApiPeer, type ApiStarGiftAuctionState, type ApiStarsAmount, MAIN_THREAD_ID,\n} from '../../../api/types';\n\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectPeer, selectPeerPaidMessagesStars, selectTabState, selectTheme, selectThemeValues, selectUserFullInfo,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCountdown } from '../../../util/dates/dateFormat';\nimport { HOUR } from '../../../util/dates/units';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon, getNextArrowReplacement } from '../../../util/localization/format';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/message/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\nimport TextTimer from '../../ui/TextTimer';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  giftByStars?: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n  starBalance?: ApiStarsAmount;\n  paidMessagesStars?: number;\n  areUniqueStarGiftsDisallowed?: boolean;\n  shouldDisallowLimitedStarGifts?: boolean;\n  giftAuction?: ApiStarGiftAuctionState;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\nconst TEXT_TIMER_THRESHOLD = 48 * HOUR;\n\nfunction GiftComposer({\n  gift,\n  giftByStars,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n  starBalance,\n  paidMessagesStars,\n  areUniqueStarGiftsDisallowed,\n  shouldDisallowLimitedStarGifts,\n  giftAuction,\n}: OwnProps & StateProps) {\n  const {\n    sendStarGift, sendPremiumGiftByStars, openInvoice, openGiftUpgradeModal, openStarsBalanceModal,\n    openGiftAuctionBidModal, openGiftAuctionInfoModal, openGiftAuctionChangeRecipientModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n  const [shouldPayByStars, setShouldPayByStars] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  useEffect(() => {\n    if (shouldDisallowLimitedStarGifts) {\n      setShouldPayForUpgrade(true);\n    }\n  }, [shouldDisallowLimitedStarGifts, shouldPayForUpgrade]);\n\n  const isStarGift = 'id' in gift && gift.type === 'starGift';\n  const isPremiumGift = 'months' in gift;\n  const hasPremiumByStars = giftByStars && 'amount' in giftByStars;\n  const isPeerUser = peer && isApiPeerUser(peer);\n  const isSelf = peerId === currentUserId;\n\n  const localMessage = useMemo(() => {\n    if (isPremiumGift) {\n      const currentGift = shouldPayByStars && hasPremiumByStars ? giftByStars : gift;\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'giftPremium',\n            amount: currentGift.amount,\n            currency: currentGift.currency,\n            days: gift.months * 30,\n            message: giftMessage ? { text: giftMessage } : undefined,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    if (isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'starGift',\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName || undefined,\n            starsToConvert: gift.starsToConvert,\n            canUpgrade: shouldPayForUpgrade || undefined,\n            alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n            gift,\n            peerId,\n            fromId: currentUserId,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n    return undefined;\n  }, [currentUserId, gift, giftMessage, isStarGift,\n    shouldHideName, shouldPayForUpgrade, peerId,\n    shouldPayByStars, hasPremiumByStars, giftByStars, isPremiumGift]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const toggleShouldPayByStars = useLastCallback(() => {\n    if (hasPremiumByStars) setShouldPayByStars(!shouldPayByStars);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleGetMoreStars = useLastCallback(() => {\n    openStarsBalanceModal({});\n  });\n\n  const handleLearnMoreClick = useLastCallback(() => {\n    if (!giftAuction) return;\n    openGiftAuctionInfoModal({ auctionGiftId: giftAuction.gift.id });\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (giftAuction) {\n      const existingBidPeerId = giftAuction.userState.bidPeerId;\n      if (existingBidPeerId && existingBidPeerId !== peerId) {\n        openGiftAuctionChangeRecipientModal({\n          auctionGiftId: giftAuction.gift.id,\n          oldPeerId: existingBidPeerId,\n          newPeerId: peerId,\n          message: giftMessage || undefined,\n          shouldHideName: shouldHideName || undefined,\n        });\n        return;\n      }\n\n      openGiftAuctionBidModal({\n        auctionGiftId: giftAuction.gift.id,\n        peerId,\n        message: giftMessage || undefined,\n        shouldHideName: shouldHideName || undefined,\n      });\n      return;\n    }\n\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    if (shouldPayByStars && hasPremiumByStars) {\n      sendPremiumGiftByStars({\n        userId: peerId,\n        months: giftByStars.months,\n        amount: giftByStars.amount,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n      return;\n    }\n\n    if (isPremiumGift) {\n      openInvoice({\n        type: 'giftcode',\n        userIds: [peerId],\n        currency: gift.currency,\n        amount: gift.amount,\n        option: gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n    }\n  });\n\n  const canUseStarsPayment = hasPremiumByStars && starBalance && (starBalance.amount > giftByStars.amount);\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n\n        {!paidMessagesStars && (\n          <TextArea\n            className={styles.messageInput}\n            onChange={handleGiftMessageChange}\n            value={giftMessage}\n            label={lang('GiftMessagePlaceholder')}\n            maxLength={captionLimit}\n            maxLengthIndicator={\n              symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined\n            }\n          />\n        )}\n\n        {canUseStarsPayment && (\n          <ListItem className={styles.switcher} narrow ripple onClick={toggleShouldPayByStars}>\n            <span>\n              {lang('GiftPremiumPayWithStars', {\n                stars: formatStarsAsIcon(lang, giftByStars.amount, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayByStars}\n              onChange={toggleShouldPayByStars}\n              label={lang('GiftPremiumPayWithStarsAcc')}\n            />\n          </ListItem>\n        )}\n\n        {hasPremiumByStars && starBalance && (\n          <div className={styles.description}>\n            {lang('GiftPremiumDescriptionYourBalance', {\n              stars: formatStarsAsIcon(lang, starBalance.amount, { className: styles.switcherStarIcon }),\n              link: (\n                <Link isPrimary onClick={handleGetMoreStars}>\n                  {lang('GetMoreStarsLinkText', undefined, {\n                    withNodes: true,\n                    specialReplacement: getNextArrowReplacement(),\n                  })}\n                </Link>\n              ),\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n        )}\n\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <ListItem\n            className={styles.switcher}\n            narrow\n            ripple\n            onClick={handleShouldPayForUpgradeChange}\n            disabled={shouldDisallowLimitedStarGifts}\n          >\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: (\n                  <Link isPrimary onClick={handleOpenUpgradePreview}>\n                    {lang('GiftMakeUniqueLink', undefined, { withNodes: true,\n                      specialReplacement: getNextArrowReplacement() })}\n                  </Link>\n                ),\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: (\n                  <Link isPrimary onClick={handleOpenUpgradePreview}>\n                    {lang('GiftMakeUniqueLink', undefined, {\n                      withNodes: true,\n                      specialReplacement: getNextArrowReplacement() })}\n                  </Link>\n                ),\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isSelf ? lang('GiftHideNameDescriptionSelf')\n              : isPeerUser ? lang('GiftHideNameDescription', { receiver: title })\n                : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = shouldPayByStars && hasPremiumByStars\n      ? formatStarsAsIcon(lang, giftByStars.amount, { asFont: true })\n      : isStarGift\n        ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n        : isPremiumGift ? formatCurrency(lang, gift.amount, gift.currency) : undefined;\n\n    const giftsPerRound = giftAuction?.gift.giftsPerRound;\n    const auctionEndDate = giftAuction?.state.endDate;\n    const auctionTimeLeft = auctionEndDate ? auctionEndDate - getServerTime() : undefined;\n    const shouldUseTextTimer = auctionTimeLeft !== undefined && auctionTimeLeft > 0\n      && auctionTimeLeft < TEXT_TIMER_THRESHOLD;\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && Boolean(gift.availabilityRemains) && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        {giftAuction && Boolean(giftsPerRound) && (\n          <div className={styles.bottomDescription}>\n            {lang('GiftAuctionDescription', {\n              count: giftsPerRound,\n              link: <Link isPrimary onClick={handleLearnMoreClick}>{lang('GiftAuctionLearnMore')}</Link>,\n            }, { pluralValue: giftsPerRound, withNodes: true })}\n          </div>\n        )}\n        <Button\n          className={styles.mainButton}\n          size={auctionTimeLeft ? undefined : 'smaller'}\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n          noForcedUpperCase\n        >\n          {giftAuction ? (\n            <div>\n              <div>\n                {lang('GiftAuctionPlaceBid')}\n              </div>\n              {auctionTimeLeft !== undefined && auctionTimeLeft > 0 && (\n                <div className={styles.buttonSubtitle}>\n                  {lang('GiftAuctionTimeLeft', {\n                    time: shouldUseTextTimer\n                      ? <TextTimer endsAt={auctionEndDate!} />\n                      : formatCountdown(lang, auctionTimeLeft),\n                  }, { withNodes: true })}\n                </div>\n              )}\n            </div>\n          ) : lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  if ((!isStarGift && !isPremiumGift) || !localMessage) return;\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage\n          key={isStarGift ? gift.id : isPremiumGift ? gift.months : undefined}\n          message={localMessage}\n          threadId={MAIN_THREAD_ID}\n          appearanceOrder={0}\n        />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId, gift }): Complete<StateProps> => {\n    const theme = selectTheme(global);\n    const {\n      stars,\n    } = global;\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = selectThemeValues(global, theme) || {};\n    const peer = selectPeer(global, peerId);\n    const paidMessagesStars = selectPeerPaidMessagesStars(global, peerId);\n    const userFullInfo = selectUserFullInfo(global, peerId);\n    const currentUserId = global.currentUserId;\n    const isGiftForSelf = currentUserId === peerId;\n    const areUniqueStarGiftsDisallowed = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowUniqueStarGifts;\n    const shouldDisallowLimitedStarGifts = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n    const tabState = selectTabState(global);\n    const auctionGiftId = 'id' in gift && gift.type === 'starGift' && gift.isAuction ? gift.id : undefined;\n    const giftAuction = auctionGiftId\n      ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined;\n\n    return {\n      starBalance: stars?.balance,\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n      paidMessagesStars,\n      areUniqueStarGiftsDisallowed,\n      shouldDisallowLimitedStarGifts,\n      giftAuction,\n    };\n  },\n)(GiftComposer));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"G1mBmzxs\",\"noClickable\":\"pcLi3lcD\",\"starGift\":\"f5ArEO1S\",\"monthsDescription\":\"rn9aWFNA\",\"description\":\"q4_ydkAx\",\"buy\":\"a8no5WH0\",\"transferBadge\":\"nqN62arv\",\"star\":\"DvJLTVFU\",\"auction\":\"WqBCC4Ce\",\"premiumRequired\":\"NBYIITte\",\"amount\":\"sbo2dMcH\",\"starsPriceBlock\":\"QB5SI7ta\",\"starsPriceIcon\":\"jgnEfoeM\",\"radialPattern\":\"Nkotr8Q4\",\"stickerWrapper\":\"rUSoeQXb\",\"lockIcon\":\"kwuipwV7\"};","import { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  optionByStars?: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, optionByStars, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} color=\"adaptive\" nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {optionByStars && (\n        <div className={styles.starsPriceBlock}>\n          {lang('GiftPremiumStarsPrice', {\n            stars: (formatStarsAsIcon(lang, optionByStars.amount, { className: styles.starsPriceIcon })),\n          }, { withNodes: true, withMarkdown: true })}\n        </div>\n      )}\n      {Boolean(discount) && (\n        <GiftRibbon color=\"purple\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): Complete<StateProps> => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import { memo, useMemo, useRef, useState } from '@teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarGift, ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { selectIsCurrentUserPremium } from '../../../global/selectors';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon, formatTonAsIcon } from '../../../util/localization/format';\n\nimport Icon from '../../common/icons/Icon'; ;\nimport { getGiftAttributes, getStickerFromGift } from '../../common/helpers/gifts';\n\nimport useFlag from '../../../hooks/useFlag.ts';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport StickerView from '../../common/StickerView';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGift;\n  isResale?: boolean;\n  withTransferBadge?: boolean;\n  hideBadge?: boolean;\n  noClickable?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (gift: ApiStarGift, target: 'original' | 'resell') => void;\n};\n\ntype StateProps = {\n  isCurrentUserPremium?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({\n  gift, isResale, isCurrentUserPremium, withTransferBadge, hideBadge, noClickable, observeIntersection, onClick,\n}: OwnProps & StateProps) {\n  const {\n    openGiftInfoModal, openPremiumModal, showNotification, checkCanSendGift, openGiftAuctionModal,\n  } = getActions();\n\n  const ref = useRef<HTMLDivElement>();\n  const stickerRef = useRef<HTMLDivElement>();\n\n  function getPriceAmount(amounts?: ApiTypeCurrencyAmount[]) {\n    if (!amounts) return { amount: 0, currency: STARS_CURRENCY_CODE };\n\n    if (gift.type === 'starGiftUnique' && gift.resaleTonOnly) {\n      const tonAmount = amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n      if (tonAmount) return tonAmount;\n    }\n\n    const starsAmount = amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n    return starsAmount;\n  }\n\n  const lang = useLang();\n\n  const [isVisible, setIsVisible] = useState(false);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  const sticker = getStickerFromGift(gift);\n  const isGiftUnique = gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n  const regularGift = !isGiftUnique ? gift : undefined;\n\n  const priceInfo = !isGiftUnique\n    ? { amount: regularGift?.stars || 0, currency: STARS_CURRENCY_CODE }\n    : getPriceAmount(uniqueGift?.resellPrice);\n  const priceCurrency = priceInfo?.currency || STARS_CURRENCY_CODE;\n  const resellMinStars = regularGift?.resellMinStars;\n  const formattedPrice = !isGiftUnique && isResale && resellMinStars\n    ? lang.number(resellMinStars) + '+' : priceInfo?.amount || 0;\n  const isLimited = !isGiftUnique && Boolean(regularGift?.isLimited);\n  const isSoldOut = !isGiftUnique && Boolean(regularGift?.isSoldOut);\n  const isAuction = !isGiftUnique && !isResale && Boolean(regularGift?.isAuction);\n  const isPremiumRequired = Boolean(gift?.requirePremium);\n  const isUserLimitReached = Boolean(regularGift?.limitedPerUser && !regularGift?.perUserRemains);\n  const perUserTotal = regularGift?.perUserTotal;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isAuction) {\n      openGiftAuctionModal({ gift });\n      return;\n    }\n\n    if (isSoldOut && !isResale) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    if (isUserLimitReached) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftsLimit2',\n          variables: {\n            count: perUserTotal,\n          },\n          options: {\n            pluralValue: perUserTotal!,\n            withMarkdown: true,\n            withNodes: true,\n          },\n        },\n      });\n      return;\n    }\n\n    if (isPremiumRequired && !isCurrentUserPremium) {\n      openPremiumModal({\n        gift,\n      });\n      return;\n    }\n\n    if (isLocked) {\n      checkCanSendGift({\n        gift,\n        onSuccess: () => onClick?.(gift, isResale ? 'resell' : 'original'),\n      });\n      return;\n    }\n\n    onClick?.(gift, isResale ? 'resell' : 'original');\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    const { backdrop, pattern } = getGiftAttributes(gift) || {};\n\n    if (!backdrop || !pattern) {\n      return undefined;\n    }\n\n    const backdropColors = [backdrop.centerColor, backdrop.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternIcon={pattern.sticker}\n        ringsCount={1}\n        ovalFactor={1}\n      />\n    );\n  }, [gift]);\n\n  const giftNumber = isGiftUnique ? gift.number : 0;\n  const isLocked = Boolean(gift.type === 'starGift' && gift.lockedUntilDate);\n\n  const giftRibbon = useMemo(() => {\n    if (isGiftUnique) {\n      const { backdrop } = getGiftAttributes(gift) || {};\n      if (!backdrop) {\n        return undefined;\n      }\n      return (\n        <GiftRibbon\n          color={[backdrop.centerColor, backdrop.edgeColor]}\n          text={\n            lang('GiftSavedNumber', { number: giftNumber })\n          }\n        />\n      );\n    }\n    if (isResale) {\n      return <GiftRibbon color=\"green\" text={lang('GiftRibbonResale')} />;\n    }\n    if (isSoldOut) {\n      return <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />;\n    }\n    if (isAuction) {\n      return <GiftRibbon color=\"orange\" text={lang('GiftRibbonAuction')} />;\n    }\n    if (isPremiumRequired) {\n      return <GiftRibbon color=\"orange\" text={lang('GiftRibbonPremium')} />;\n    }\n    if (isLimited) {\n      return <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />;\n    }\n    return undefined;\n  }, [isGiftUnique, isResale, gift, isSoldOut,\n    isLimited, lang, giftNumber, isPremiumRequired, isAuction]);\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    const visible = entry.isIntersecting;\n    setIsVisible(visible);\n  });\n\n  const badgeContent = useMemo(() => {\n    if (withTransferBadge) {\n      return lang('GiftTransferTitle');\n    }\n\n    if (isAuction) {\n      return lang('GiftAuctionJoin');\n    }\n\n    if (priceCurrency === TON_CURRENCY_CODE) {\n      return formatTonAsIcon(lang, formattedPrice || 0, {\n        shouldConvertFromNanos: true,\n        className: styles.star,\n      });\n    }\n\n    return formatStarsAsIcon(lang, formattedPrice || 0, {\n      asFont: true,\n      className: styles.star,\n    });\n  }, [withTransferBadge, priceCurrency, formattedPrice, isAuction, lang]);\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        'interactive-gift',\n        styles.container,\n        styles.starGift,\n        'starGiftItem',\n        isPremiumRequired && styles.premiumRequired,\n        isAuction && styles.auction,\n        noClickable && styles.noClickable,\n      )}\n      tabIndex={noClickable ? undefined : 0}\n      role={noClickable ? undefined : 'button'}\n      onClick={noClickable ? undefined : handleGiftClick}\n      onMouseEnter={!IS_TOUCH_ENV && !noClickable ? markHover : undefined}\n      onMouseLeave={!IS_TOUCH_ENV && !noClickable ? unmarkHover : undefined}\n    >\n      {radialPatternBackdrop}\n\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${GIFT_STICKER_SIZE}px; height: ${GIFT_STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            observeIntersectionForPlaying={observeIntersection}\n            observeIntersectionForLoading={observeIntersection}\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={GIFT_STICKER_SIZE}\n            shouldLoop={isHover}\n            shouldPreloadPreview\n          />\n        )}\n\n      </div>\n      {!hideBadge && (\n        <Button\n          className={buildClassName(\n            styles.buy,\n            withTransferBadge && styles.transferBadge,\n          )}\n          nonInteractive\n          size=\"tiny\"\n          color={isGiftUnique ? 'bluredStarsBadge' : 'stars'}\n          withSparkleEffect={isVisible && !withTransferBadge}\n          pill\n          fluid\n        >\n          {badgeContent}\n        </Button>\n      )}\n      {giftRibbon}\n      {isLocked && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): Complete<StateProps> => {\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      isCurrentUserPremium,\n    };\n  })(GiftItemStar),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"tJK1W0pJ\",\"transition\":\"pP8TxefR\",\"content\":\"o3V1HqbL\",\"resaleScreenRoot\":\"Vce_TsJO\",\"main\":\"cVXqeu9P\",\"giftSection\":\"v4eKefwN\",\"section\":\"EqfarEYb\",\"resaleStarGiftsContainer\":\"RSFcSNGL\",\"starGiftsContainer\":\"OQX3GZl5\",\"premiumGiftsGallery\":\"n40m3BK2\",\"header\":\"iqqoyRgW\",\"noBorder\":\"cuvdjW2y\",\"resaleHeader\":\"cJRBgg9B\",\"resaleHeaderContentContainer\":\"OXYQmfGK\",\"headerSlide\":\"BTWhJUQB\",\"headerText\":\"lLRmbpIu\",\"hiddenHeader\":\"XgGzn1cQ\",\"resaleHeaderText\":\"bp_KPx8I\",\"commonHeaderText\":\"ybZo03if\",\"resaleHeaderTextBlock\":\"QncldYUt\",\"resaleHeaderDescription\":\"XefHUFm1\",\"closeButton\":\"r_Y5uG1T\",\"balance\":\"soqAknia\",\"avatars\":\"N_7tYJKr\",\"avatar\":\"_3hY4vIep\",\"logoBackground\":\"ieK4TzSb\",\"center\":\"Ey5gX40t\",\"description\":\"ZioU5h_k\",\"starGiftsDescription\":\"gFgzS8pV\",\"boostIcon\":\"Qi2YR6Dz\",\"optionBottom\":\"RTbClMKE\",\"secondaryInfo\":\"g0R9GSNq\",\"footer\":\"J3Gju3bv\",\"starGiftsTransition\":\"kB6IyXqS\",\"notFoundGiftsRoot\":\"UqnRlJ1n\",\"notFoundGiftsDescription\":\"g0VbwIG_\",\"notFoundGiftsLink\":\"j2zPEQr8\"};","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo,\n  useMemo,\n  useRef } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGift,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { RESALE_GIFTS_LIMIT } from '../../../limits';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useInfiniteScroll from '../../../hooks/useInfiniteScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../common/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Link from '../../ui/Link';\nimport Transition from '../../ui/Transition';\nimport GiftItemStar from './GiftItemStar';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  onGiftClick: (gift: ApiStarGift) => void;\n};\n\ntype StateProps = {\n  gift?: ApiStarGift;\n  resellGifts?: ApiStarGift[];\n  filter: ResaleGiftsFilterOptions;\n  areGiftsAllLoaded?: boolean;\n  areGiftsLoading?: boolean;\n  updateIteration: number;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst GiftModalResaleScreen: FC<OwnProps & StateProps> = ({\n  resellGifts,\n  gift,\n  filter,\n  areGiftsAllLoaded,\n  areGiftsLoading,\n  updateIteration,\n  onGiftClick,\n}) => {\n  const {\n    loadResaleGifts,\n    updateResaleGiftsFilter,\n  } = getActions();\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const resellGiftsIds = useMemo(() => {\n    return resellGifts?.map((g) => g.id);\n  }, [resellGifts]);\n\n  const hasFilter = Boolean(filter?.modelAttributes?.length\n    || filter?.patternAttributes?.length || filter?.backdropAttributes?.length);\n\n  const handleLoadMoreResellGifts = useLastCallback(() => {\n    if (gift) {\n      const giftId = 'regularGiftId' in gift\n        ? gift.regularGiftId\n        : gift.id;\n      loadResaleGifts({ giftId });\n    }\n  });\n\n  const isGiftsEmpty = Boolean(!resellGifts || resellGifts.length === 0);\n\n  const [viewportIds, onLoadMore] = useInfiniteScroll(\n    handleLoadMoreResellGifts,\n    resellGiftsIds,\n    !gift,\n    RESALE_GIFTS_LIMIT,\n  );\n\n  const { observe } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE });\n\n  const handleResetGiftsFilter = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n      backdropAttributes: [],\n      patternAttributes: [],\n    } });\n  });\n\n  function renderNothingFoundGiftsWithFilter() {\n    return (\n      <div className={styles.notFoundGiftsRoot}>\n        <AnimatedIconWithPreview\n          size={160}\n          tgsUrl={LOCAL_TGS_URLS.SearchingDuck}\n          nonInteractive\n          noLoop\n        />\n        <div className={styles.notFoundGiftsDescription}>\n          {lang('ResellGiftsNoFound')}\n        </div>\n        {hasFilter && (\n          <Link\n            className={styles.notFoundGiftsLink}\n            onClick={handleResetGiftsFilter}\n          >\n            {lang('ResellGiftsClearFilters')}\n          </Link>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div ref={scrollerRef} className={buildClassName(styles.resaleScreenRoot, 'custom-scroll')}>\n      <Transition\n        name=\"zoomFade\"\n        activeKey={updateIteration}\n      >\n        {isGiftsEmpty && areGiftsAllLoaded && renderNothingFoundGiftsWithFilter()}\n        <InfiniteScroll\n          className={buildClassName(styles.resaleStarGiftsContainer)}\n          items={viewportIds}\n          onLoadMore={onLoadMore}\n          itemSelector=\".starGiftItem\"\n          noFastList\n          preloadBackwards={RESALE_GIFTS_LIMIT}\n          scrollContainerClosest={`.${styles.resaleScreenRoot}`}\n        >\n          {resellGifts?.map((g) => (\n            <GiftItemStar\n              key={g.id}\n              gift={g}\n              observeIntersection={observe}\n              isResale\n              onClick={onGiftClick}\n            />\n          ))}\n        </InfiniteScroll>\n      </Transition>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const {\n    starGifts,\n  } = global;\n\n  const { resaleGifts } = selectTabState(global);\n  const gift = resaleGifts?.giftId ? starGifts?.byId[resaleGifts.giftId] : undefined;\n  const filter = resaleGifts.filter;\n  const areGiftsAllLoaded = resaleGifts.isAllLoaded;\n  const areGiftsLoading = resaleGifts.isLoading;\n  const updateIteration = resaleGifts.updateIteration;\n\n  return {\n    resellGifts: resaleGifts.gifts,\n    gift,\n    filter,\n    areGiftsAllLoaded,\n    areGiftsLoading,\n    updateIteration,\n  };\n})(GiftModalResaleScreen));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"KLFLR9ji\",\"thumb\":\"fCL5rY2D\"};","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useRef } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\n\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useDynamicColorListener from '../../../hooks/stickers/useDynamicColorListener';\nimport { type ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport StickerView from '../../common/StickerView';\n\nimport styles from './ResaleGiftMenuAttributeSticker.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  type: 'model' | 'pattern';\n  sticker: ApiSticker;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n};\n\ntype StateProps = {\n  theme: ThemeKey;\n};\n\nconst ATTRIBUTE_STICKER_SIZE = 1.5 * REM;\n\nconst ResaleGiftMenuAttributeSticker: FC<StateProps & OwnProps> = ({\n  className,\n  type,\n  sticker,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  theme,\n}) => {\n  const stickerRef = useRef<HTMLDivElement>();\n\n  const customColor = useDynamicColorListener(stickerRef, undefined, type !== 'pattern');\n\n  return (\n    <div\n      ref={stickerRef}\n      className={buildClassName(styles.root, className)}\n      style={`width: ${ATTRIBUTE_STICKER_SIZE}px; height: ${ATTRIBUTE_STICKER_SIZE}px`}\n    >\n      <StickerView\n        containerRef={stickerRef}\n        sticker={sticker}\n        size={ATTRIBUTE_STICKER_SIZE}\n        shouldPreloadPreview\n        observeIntersectionForLoading={observeIntersectionForLoading}\n        observeIntersectionForPlaying={observeIntersectionForPlaying}\n        thumbClassName={styles.thumb}\n        customColor={customColor}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  return {\n    theme: selectTheme(global),\n  };\n})(ResaleGiftMenuAttributeSticker));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_VgmQnUg\",\"buttonsContainer\":\"IDlp6U6g\",\"dropdownArrows\":\"actLObgu\",\"arrowLine\":\"f0JLMwNk\",\"topLeft\":\"aEPsBBms\",\"topRight\":\"xepslnAN\",\"bottomLeft\":\"I3xj_cdQ\",\"bottomRight\":\"xKwB_2uZ\",\"open\":\"bGP5el27\",\"sticker\":\"VT562JS0\",\"backdropAttributeMenuItemText\":\"D50wFfRL\",\"menuItemStickerText\":\"THcGWXSA\",\"menuItemText\":\"L6EVE2Ux\",\"menuItemCount\":\"O_ulK4qp\",\"backdrop\":\"A29QNxKb\",\"menuItemIcon\":\"GL4rVsev\",\"itemIcon\":\"yuctLnuR\",\"item\":\"qiYcBOYc\",\"menuContentContainer\":\"EDsBn29z\",\"menu\":\"ISaNdBwd\",\"left\":\"e4Kkh_MR\",\"right\":\"Kz_nCGC3\"};","import { type MouseEvent as ReactMouseEvent } from 'react';\nimport type { ElementRef, FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo,\n  useCallback,\n  useMemo,\n  useRef,\n  useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeCounter,\n  ApiStarGiftAttributeIdBackdrop,\n  ApiStarGiftAttributeIdPattern,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  StarGiftAttributeIdModel,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions, ResaleGiftsSortType } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useContextMenuHandlers from '../../../hooks/useContextMenuHandlers';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Icon from '../../common/icons/Icon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Menu from '../../ui/Menu';\nimport MenuItem from '../../ui/MenuItem';\nimport SearchInput from '../../ui/SearchInput';\nimport ResaleGiftMenuAttributeSticker from './ResaleGiftMenuAttributeSticker';\n\nimport styles from './GiftResaleFilters.module.scss';\n\ntype OwnProps = {\n  dialogRef: ElementRef<HTMLDivElement>;\n};\ntype StateProps = {\n  filter: ResaleGiftsFilterOptions;\n  attributes?: ApiStarGiftAttribute[];\n  counters?: ApiStarGiftAttributeCounter[];\n};\n\nconst GiftResaleFilters: FC<StateProps & OwnProps> = ({\n  attributes,\n  counters,\n  filter,\n  dialogRef,\n}) => {\n  const lang = useLang();\n  const {\n    updateResaleGiftsFilter,\n  } = getActions();\n\n  const [searchModelQuery, setSearchModelQuery] = useState('');\n  const [searchBackdropQuery, setSearchBackdropQuery] = useState('');\n  const [searchPatternQuery, setSearchPatternQuery] = useState('');\n  const filteredAttributes = useMemo(() => {\n    const map: {\n      model: ApiStarGiftAttributeModel[];\n      pattern: ApiStarGiftAttributePattern[];\n      backdrop: ApiStarGiftAttributeBackdrop[];\n    } = {\n      model: [],\n      pattern: [],\n      backdrop: [],\n    };\n\n    for (const counter of counters ?? []) {\n      const { attribute } = counter;\n\n      if (!counter.count) {\n        continue;\n      }\n\n      const found = attributes?.find((attr) => {\n        if (attr.type === 'backdrop' && attribute.type === 'backdrop') {\n          return attr.backdropId === attribute.backdropId;\n        }\n\n        if (attr.type === 'model' && attribute.type === 'model') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        if (attr.type === 'pattern' && attribute.type === 'pattern') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        return false;\n      });\n\n      if (found?.type === 'backdrop') {\n        map.backdrop.push(found);\n      }\n      if (found?.type === 'model') {\n        map.model.push(found);\n      }\n      if (found?.type === 'pattern') {\n        map.pattern.push(found);\n      }\n    }\n\n    return map;\n  }, [attributes, counters]);\n\n  const filteredAndSearchedAttributes = useMemo(() => {\n    const filterBySearch = <T extends { name?: string }>(items: T[], query: string): T[] => {\n      if (!query.trim()) return items;\n\n      return items.filter(\n        (item): item is T => Boolean(item.name?.toLowerCase().includes(query.toLowerCase())),\n      );\n    };\n\n    return {\n      model: filterBySearch(filteredAttributes.model, searchModelQuery),\n      pattern: filterBySearch(filteredAttributes.pattern, searchPatternQuery),\n      backdrop: filterBySearch(filteredAttributes.backdrop, searchBackdropQuery),\n    };\n  }, [filteredAttributes, searchModelQuery, searchBackdropQuery, searchPatternQuery]);\n\n  const countersMap = useMemo(() => {\n    const map = {\n      model: new Map<string, number>(),\n      pattern: new Map<string, number>(),\n      backdrop: new Map<number, number>(),\n    };\n\n    for (const counter of counters ?? []) {\n      const { attribute, count } = counter;\n      if (attribute.type === 'model') {\n        map.model.set(attribute.documentId, count);\n      } else if (attribute.type === 'pattern') {\n        map.pattern.set(attribute.documentId, count);\n      } else if (attribute.type === 'backdrop') {\n        map.backdrop.set(attribute.backdropId, count);\n      }\n    }\n\n    return map;\n  }, [counters]);\n\n  // Sort Menu\n  const sortMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isSortContextMenuOpen,\n    contextMenuAnchor: sortContextMenuAnchor,\n    handleContextMenu: handleSortContextMenu,\n    handleContextMenuClose: handleSortContextMenuClose,\n    handleContextMenuHide: handleSortContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getSortMenuElement = useLastCallback(() => sortMenuRef.current!);\n\n  // Model Menu\n  const modelMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isModelContextMenuOpen,\n    contextMenuAnchor: modelContextMenuAnchor,\n    handleContextMenu: handleModelContextMenu,\n    handleContextMenuClose: handleModelContextMenuClose,\n    handleContextMenuHide: handleModelContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getModelMenuElement = useLastCallback(\n    () => modelMenuRef.current!,\n  );\n\n  // Backdrop Menu\n  const backdropMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isBackdropContextMenuOpen,\n    contextMenuAnchor: backdropContextMenuAnchor,\n    handleContextMenu: handleBackdropContextMenu,\n    handleContextMenuClose: handleBackdropContextMenuClose,\n    handleContextMenuHide: handleBackdropContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getBackdropMenuElement = useLastCallback(() => backdropMenuRef.current!);\n\n  // Pattern Menu\n  const patternMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isPatternContextMenuOpen,\n    contextMenuAnchor: patternContextMenuAnchor,\n    handleContextMenu: handlePatternContextMenu,\n    handleContextMenuClose: handlePatternContextMenuClose,\n    handleContextMenuHide: handlePatternContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getPatternMenuElement = useLastCallback(() => patternMenuRef.current!);\n\n  const SortMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const sortType = filter.sortType;\n      const iconName = sortType === 'byDate' ? 'sort-by-date'\n        : sortType === 'byNumber' ? 'sort-by-number'\n          : 'sort-by-price';\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          <Icon\n            name={iconName}\n            className={styles.itemIcon}\n          />\n          {sortType === 'byDate' && lang('ValueGiftSortByDate')}\n          {sortType === 'byNumber' && lang('ValueGiftSortByNumber')}\n          {sortType === 'byPrice' && lang('ValueGiftSortByPrice')}\n        </div>\n      );\n    }, [lang, filter]);\n\n  const ModelMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.modelAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeModel')}\n          {attributesCount > 0\n            && lang('GiftAttributeModelPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          {renderDropdownArrows(isMenuOpen)}\n        </div>\n      );\n    }, [lang, filter]);\n  const BackdropMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.backdropAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeBackdrop')}\n          {attributesCount > 0\n            && lang('GiftAttributeBackdropPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          {renderDropdownArrows(isMenuOpen)}\n        </div>\n      );\n    }, [lang, filter]);\n  const PatternMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.patternAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeSymbol')}\n          {attributesCount > 0\n            && lang('GiftAttributeSymbolPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          {renderDropdownArrows(isMenuOpen)}\n        </div>\n      );\n    }, [lang, filter]);\n\n  const handleSortMenuItemClick = useLastCallback((type: ResaleGiftsSortType) => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      sortType: type,\n    } });\n  });\n\n  const handleSelectedAllModelsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n    } });\n  });\n  const handleSelectedAllPatternsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: [],\n    } });\n  });\n  const handleSelectedAllBackdropsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: [],\n    } });\n  });\n\n  const handleModelMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeModel) => {\n    if (!counters) return;\n    const modelAttributes = filter.modelAttributes || [];\n    const modelAttribute\n      = counters.find((counter): counter is ApiStarGiftAttributeCounter<StarGiftAttributeIdModel> =>\n        counter.attribute.type === 'model' && counter.attribute.documentId === attribute.sticker.id,\n      )?.attribute;\n\n    if (!modelAttribute) return;\n\n    const isActive = modelAttributes.some((item) => item.documentId === modelAttribute.documentId);\n    const updatedAttributes = isActive\n      ? modelAttributes.filter((item) => item.documentId !== modelAttribute.documentId)\n      : [...modelAttributes, modelAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: updatedAttributes,\n    } });\n  });\n\n  const handlePatternMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributePattern) => {\n    if (!counters) return;\n    const patternAttributes = filter.patternAttributes || [];\n    const patternAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdPattern> =>\n        counter.attribute.type === 'pattern' && counter.attribute.documentId === attribute.sticker.id,\n    )?.attribute;\n\n    if (!patternAttribute) return;\n\n    const isActive = patternAttributes.some((item) => item.documentId === patternAttribute.documentId);\n    const updatedAttributes = isActive\n      ? patternAttributes.filter((item) => item.documentId !== patternAttribute.documentId)\n      : [...patternAttributes, patternAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: updatedAttributes,\n    } });\n  });\n\n  const handleBackdropMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeBackdrop) => {\n    if (!counters) return;\n    const backdropAttributes = filter.backdropAttributes || [];\n    const backdropAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdBackdrop> =>\n        counter.attribute.type === 'backdrop' && counter.attribute.backdropId === attribute.backdropId,\n    )?.attribute;\n\n    if (!backdropAttribute) return;\n\n    const isActive = backdropAttributes.some((item) => item.backdropId === backdropAttribute.backdropId);\n    const updatedAttributes = isActive\n      ? backdropAttributes.filter((item) => item.backdropId !== backdropAttribute.backdropId)\n      : [...backdropAttributes, backdropAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: updatedAttributes,\n    } });\n  });\n\n  function renderDropdownArrows(isOpen?: boolean) {\n    return (\n      <div className={styles.dropdownArrows}>\n        <div className={buildClassName(styles.arrowLine, styles.topLeft, isOpen && styles.open)} />\n        <div className={buildClassName(styles.arrowLine, styles.topRight, isOpen && styles.open)} />\n        <div className={buildClassName(styles.arrowLine, styles.bottomLeft, isOpen && styles.open)} />\n        <div className={buildClassName(styles.arrowLine, styles.bottomRight, isOpen && styles.open)} />\n      </div>\n    );\n  }\n\n  function renderSortMenuItems() {\n    return (\n      <>\n        <MenuItem icon=\"sort-by-price\" onClick={() => { handleSortMenuItemClick('byPrice'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByPrice')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byPrice' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n        <MenuItem icon=\"sort-by-date\" onClick={() => { handleSortMenuItemClick('byDate'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByDate')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byDate' ? 'check' : 'placeholder'}\n          />\n\n        </MenuItem>\n        <MenuItem icon=\"sort-by-number\"onClick={() => { handleSortMenuItemClick('byNumber'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByNumber')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byNumber' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n      </>\n    );\n  }\n\n  function renderSortMenu() {\n    return (\n      <Menu\n        isOpen={isSortContextMenuOpen}\n        anchor={sortContextMenuAnchor}\n        ref={sortMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getSortMenuElement}\n        autoClose\n        onClose={handleSortContextMenuClose}\n        onCloseAnimationEnd={handleSortContextMenuHide}\n        positionX=\"left\"\n      >\n        {renderSortMenuItems()}\n      </Menu>\n    );\n  }\n\n  const handleSearchModelInputReset = useCallback(() => {\n    setSearchModelQuery('');\n  }, []);\n  const handleSearchBackdropInputReset = useCallback(() => {\n    setSearchBackdropQuery('');\n  }, []);\n  const handleSearchPatternInputReset = useCallback(() => {\n    setSearchPatternQuery('');\n  }, []);\n  const handleSearchInputClick = useLastCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  });\n\n  const modelMenuItemsContainerRef = useRef<HTMLDivElement>();\n  const { observe } = useIntersectionObserver({\n    rootRef: modelMenuItemsContainerRef,\n    isDisabled: !modelContextMenuAnchor,\n  });\n\n  function renderModelMenuItems() {\n    const models = filteredAndSearchedAttributes.model;\n    const selectedAttributes = filter.modelAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n    return (\n      <div className={styles.menuContentContainer} ref={modelMenuItemsContainerRef}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchModelQuery}\n          onChange={setSearchModelQuery}\n          onReset={handleSearchModelInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllModelsClick}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {models.map((model) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === model.sticker.id);\n          return (\n            <MenuItem\n              key={model.name}\n              onClick={() => {\n                handleModelMenuItemClick(model);\n              }}\n            >\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={model.sticker}\n                type=\"model\"\n                observeIntersectionForLoading={observe}\n                observeIntersectionForPlaying={observe}\n              />\n              <div className={styles.menuItemStickerText}>\n                {model.name}\n                <span className={styles.menuItemCount}>\n                  {lang.number(countersMap.model.get(model.sticker.id) || 0)}\n                </span>\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderModelMenu() {\n    return (\n      <Menu\n        isOpen={isModelContextMenuOpen}\n        anchor={modelContextMenuAnchor}\n        ref={modelMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getModelMenuElement}\n        autoClose\n        onClose={handleModelContextMenuClose}\n        onCloseAnimationEnd={handleModelContextMenuHide}\n      >\n        {renderModelMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderBackdropMenuItems() {\n    const backdrops = filteredAndSearchedAttributes.backdrop;\n    const selectedAttributes = filter.backdropAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchBackdropQuery}\n          onChange={setSearchBackdropQuery}\n          onReset={handleSearchBackdropInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllBackdropsClick}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {backdrops.map((backdrop) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.backdropId === backdrop.backdropId);\n\n          return (\n            <MenuItem\n              key={backdrop.name}\n              onClick={() => {\n                handleBackdropMenuItemClick(backdrop);\n              }}\n            >\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[backdrop.centerColor, backdrop.edgeColor]}\n              />\n              <div className={styles.backdropAttributeMenuItemText}>\n                {backdrop.name}\n                <span className={styles.menuItemCount}>\n                  {lang.number(countersMap.backdrop.get(backdrop.backdropId) || 0)}\n                </span>\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderBackdropMenu() {\n    return (\n      <Menu\n        isOpen={isBackdropContextMenuOpen}\n        anchor={backdropContextMenuAnchor}\n        ref={backdropMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getBackdropMenuElement}\n        autoClose\n        onClose={handleBackdropContextMenuClose}\n        onCloseAnimationEnd={handleBackdropContextMenuHide}\n        positionX=\"right\"\n      >\n        {renderBackdropMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderPatternMenuItems() {\n    const patterns = filteredAndSearchedAttributes.pattern;\n    const selectedAttributes = filter.patternAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchPatternQuery}\n          onChange={setSearchPatternQuery}\n          onReset={handleSearchPatternInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllPatternsClick}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {patterns.map((pattern) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === pattern.sticker.id);\n\n          return (\n            <MenuItem\n              key={pattern.name}\n              onClick={() => {\n                handlePatternMenuItemClick(pattern);\n              }}\n            >\n\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={pattern.sticker}\n                type=\"pattern\"\n              />\n\n              <div className={styles.menuItemStickerText}>\n                {pattern.name}\n                <span className={styles.menuItemCount}>\n                  {lang.number(countersMap.pattern.get(pattern.sticker.id) || 0)}\n                </span>\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPatternMenu() {\n    return (\n      <Menu\n        isOpen={isPatternContextMenuOpen}\n        anchor={patternContextMenuAnchor}\n        ref={patternMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getPatternMenuElement}\n        autoClose\n        onClose={handlePatternContextMenuClose}\n        onCloseAnimationEnd={handlePatternContextMenuHide}\n      >\n        {renderPatternMenuItems()}\n      </Menu>\n    );\n  }\n\n  return (\n    <div className={styles.root}>\n      {Boolean(sortContextMenuAnchor) && renderSortMenu()}\n      {Boolean(modelContextMenuAnchor) && renderModelMenu()}\n      {Boolean(backdropContextMenuAnchor) && renderBackdropMenu()}\n      {Boolean(patternContextMenuAnchor) && renderPatternMenu()}\n      <div className={styles.buttonsContainer}>\n        <SortMenuButton\n          onTrigger={handleSortContextMenu}\n          isOpen={isSortContextMenuOpen}\n        />\n        <ModelMenuButton\n          onTrigger={handleModelContextMenu}\n          isOpen={isModelContextMenuOpen}\n        />\n        <BackdropMenuButton\n          onTrigger={handleBackdropContextMenu}\n          isOpen={isBackdropContextMenuOpen}\n        />\n        <PatternMenuButton\n          onTrigger={handlePatternContextMenu}\n          isOpen={isPatternContextMenuOpen}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal((global): Complete<StateProps> => {\n  const { resaleGifts } = selectTabState(global);\n\n  const attributes = resaleGifts.attributes;\n  const counters = resaleGifts.counters;\n  const filter = resaleGifts.filter;\n\n  return {\n    attributes,\n    counters,\n    filter,\n  };\n})(GiftResaleFilters));\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"cUjwvN00\",\"pinned\":\"NhJABU3M\",\"item-selected\":\"medfcJpd\",\"itemSelected\":\"medfcJpd\",\"item\":\"dO7FKYY4\",\"selected-item\":\"B2lEJk1v\",\"selectedItem\":\"B2lEJk1v\",\"star\":\"Pb7AU805\"};","import type { ElementRef } from '../../../lib/teact/teact';\nimport {\n  memo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  areUniqueStarGiftsDisallowed?: boolean;\n  areLimitedStarGiftsDisallowed?: boolean;\n  isSelf?: boolean;\n  hasMyUnique?: boolean;\n  isPinned?: boolean;\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n};\n\nconst StarGiftCategoryList = ({\n  ref: externalRef,\n  idsByCategory,\n  onCategoryChanged,\n  areUniqueStarGiftsDisallowed,\n  areLimitedStarGiftsDisallowed,\n  isSelf,\n  hasMyUnique,\n  isPinned,\n}: StateProps & OwnProps) => {\n  let ref = useRef<HTMLDivElement>();\n  if (externalRef) {\n    ref = externalRef;\n  }\n\n  const lang = useLang();\n\n  const hasCollectible = Boolean(idsByCategory?.collectible?.length);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(category);\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'myUnique') return lang('GiftCategoryMyGifts');\n    if (category === 'collectible') return lang('GiftCategoryCollectibles');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, isPinned && styles.pinned, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {!areUniqueStarGiftsDisallowed && !isSelf && hasMyUnique && renderCategoryItem('myUnique')}\n      {(!areUniqueStarGiftsDisallowed || !areLimitedStarGiftsDisallowed)\n        && hasCollectible && renderCategoryItem('collectible')}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","import type { FC } from '@teact';\nimport {\n  memo, useEffect,\n  useMemo, useRef, useState } from '@teact';\nimport type React from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiDisallowedGifts,\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiSavedStarGift,\n  ApiStarGift,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectTabState } from '../../../global/selectors';\nimport { selectPeer, selectUserFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { getNextArrowReplacement } from '../../../util/localization/format';\nimport { throttle } from '../../../util/schedulers';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../hooks/useFlag';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport InteractiveSparkles from '../../common/InteractiveSparkles';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport GiftComposer from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport GiftModalResaleScreen from './GiftModalResaleScreen';\nimport GiftResaleFilters from './GiftResaleFilters';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGift;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  myUniqueGiftsById?: Record<string, ApiSavedStarGift>;\n  myUniqueGiftIds?: string[];\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  disallowedGifts?: ApiDisallowedGifts;\n  resaleGiftsCount?: number;\n  areResaleGiftsLoading?: boolean;\n  selectedResaleGift?: ApiStarGift;\n  tabId: number;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\nconst CATEGORY_LIST_STICKY_TOP = 3.5 * REM;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst GiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  myUniqueGiftsById,\n  myUniqueGiftIds,\n  starBalance,\n  peer,\n  currentUserId,\n  disallowedGifts,\n  resaleGiftsCount,\n  areResaleGiftsLoading,\n  selectedResaleGift,\n  tabId,\n}) => {\n  const {\n    closeGiftModal,\n    openGiftInfoModal,\n    resetResaleGifts,\n    loadResaleGifts,\n    openGiftInMarket,\n    closeResaleGiftsMarket,\n    loadMyUniqueGifts,\n    openGiftTransferConfirmModal,\n    setGiftModalSelectedGift,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n  const transitionRef = useRef<HTMLDivElement>();\n  const giftHeaderRef = useRef<HTMLHeadingElement>();\n  const categoryListRef = useRef<HTMLDivElement>();\n\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingPeer = useCurrentOrPrev(peer);\n\n  const user = renderingPeer && isApiPeerUser(renderingPeer) ? renderingPeer : undefined;\n  const chat = renderingPeer && isApiPeerChat(renderingPeer) ? renderingPeer : undefined;\n  const isSelf = Boolean(currentUserId && renderingModal?.forPeerId === currentUserId);\n\n  const selectedGift = renderingModal?.selectedGift;\n  const [shouldShowMainScreenHeader, setShouldShowMainScreenHeader] = useState(false);\n  const [isMainScreenHeaderForStarGifts, setIsMainScreenHeaderForStarGifts] = useState(false);\n  const [isGiftScreenHeaderForStarGifts, setIsGiftScreenHeaderForStarGifts] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n  const [isCategoryListPinned, pinCategoryList, unpinCategoryList] = useFlag(false);\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const areAllGiftsDisallowed = useMemo(() => {\n    if (!disallowedGifts) {\n      return undefined;\n    }\n    const {\n      shouldDisallowPremiumGifts,\n      ...disallowedGiftTypes\n    } = disallowedGifts;\n    return !isSelf && Object.values(disallowedGiftTypes).every(Boolean);\n  }, [isSelf, disallowedGifts]);\n\n  const areUnlimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUnlimitedStarGifts;\n  const areLimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowLimitedStarGifts;\n  const areUniqueStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUniqueStarGifts;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const allGifts = renderingModal?.gifts;\n  const filteredGifts = useMemo(() => {\n    return allGifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1 && gift.currency !== STARS_CURRENCY_CODE);\n  }, [allGifts]);\n\n  const giftsByStars = useMemo(() => {\n    const mapGifts = new Map();\n\n    if (!filteredGifts) return mapGifts;\n\n    filteredGifts.forEach((gift) => {\n      const giftByStars = allGifts?.find(\n        (starsGift) => starsGift.currency === STARS_CURRENCY_CODE\n          && starsGift.months === gift.months,\n      );\n      if (giftByStars) {\n        mapGifts.set(gift, giftByStars);\n      }\n    });\n\n    return mapGifts;\n  }, [allGifts, filteredGifts]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const isResaleScreen = Boolean(selectedResaleGift) && !selectedGift;\n  const isGiftScreen = Boolean(selectedGift);\n  const shouldShowHeader = isResaleScreen || isGiftScreen || shouldShowMainScreenHeader;\n  const isHeaderForStarGifts = isGiftScreen ? isGiftScreenHeaderForStarGifts : isMainScreenHeaderForStarGifts;\n\n  useEffect(() => {\n    if (selectedResaleGift) {\n      const giftId = 'regularGiftId' in selectedResaleGift\n        ? selectedResaleGift.regularGiftId\n        : selectedResaleGift.id;\n      loadResaleGifts({ giftId });\n    }\n  }, [selectedResaleGift]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setShouldShowMainScreenHeader(false);\n      setGiftModalSelectedGift({ gift: undefined });\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    setIsGiftScreenHeaderForStarGifts(Boolean(selectedGift && 'id' in selectedGift));\n  }, [selectedGift]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (isGiftScreen) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setShouldShowMainScreenHeader(scrollTop > 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsMainScreenHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n\n      if (categoryListRef.current && scrollerRef.current) {\n        const { top: listTop } = categoryListRef.current.getBoundingClientRect();\n        const { top: scrollerTop } = scrollerRef.current.getBoundingClientRect();\n        const isPinned = listTop - scrollerTop <= CATEGORY_LIST_STICKY_TOP;\n        if (isPinned) {\n          pinCategoryList();\n        } else {\n          unpinCategoryList();\n        }\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      >\n        {lang('GiftPremiumDescriptionLinkCaption', undefined, {\n          withNodes: true,\n          specialReplacement: getNextArrowReplacement(),\n        })}\n      </SafeLink>\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = useMemo(() => {\n    if (chat) {\n      return lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    if (isSelf) {\n      return lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      });\n    }\n\n    if (selectedCategory === 'collectible') {\n      return lang('StarGiftDescriptionCollectibles');\n    }\n\n    return lang('StarGiftDescription', {\n      user: getUserFullName(user)!,\n    }, { withNodes: true, withMarkdown: true });\n  }, [chat, isSelf, selectedCategory, user, lang]);\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption, target?: 'resell' | 'original') => {\n    if (target === 'resell') {\n      if (!('id' in gift)) {\n        return;\n      }\n      if (isResaleScreen) {\n        openGiftInfoModal({ gift, recipientId: renderingModal?.forPeerId });\n        return;\n      }\n      openGiftInMarket({ gift, tabId });\n      return;\n    }\n    setGiftModalSelectedGift({ gift });\n  });\n\n  const handleMyGiftClick = useLastCallback((gift: ApiStarGift) => {\n    if (gift.type === 'starGift' || !myUniqueGiftsById || !peer?.id) return;\n    const savedGift = myUniqueGiftsById[gift.id];\n\n    openGiftTransferConfirmModal({\n      gift: savedGift,\n      recipientId: peer.id,\n    });\n  });\n\n  const handleLoadMore = useLastCallback(() => {\n    if (selectedCategory === 'myUnique') {\n      loadMyUniqueGifts();\n    }\n  });\n\n  function renderStarGifts() {\n    if (selectedCategory === 'myUnique') {\n      return (\n        <InfiniteScroll\n          className={styles.starGiftsContainer}\n          items={myUniqueGiftIds}\n          onLoadMore={handleLoadMore}\n          scrollContainerClosest={`.${styles.main}`}\n          itemSelector=\".starGiftItem\"\n        >\n          {myUniqueGiftsById && myUniqueGiftIds?.map((giftId) => {\n            const savedGift = myUniqueGiftsById[giftId];\n            if (!savedGift) return undefined;\n\n            return (\n              <GiftItemStar\n                key={giftId}\n                gift={savedGift.gift}\n                observeIntersection={observeIntersection}\n                onClick={handleMyGiftClick}\n                withTransferBadge\n              />\n            );\n          })}\n        </InfiniteScroll>\n      );\n    }\n\n    const filteredGiftIds = starGiftIdsByCategory?.[selectedCategory]?.filter((giftId) => {\n      const gift = starGiftsById?.[giftId];\n      if (!gift) return false;\n\n      const { isLimited, availabilityResale } = gift;\n\n      if (areLimitedStarGiftsDisallowed && isLimited) {\n        return !areUniqueStarGiftsDisallowed ? availabilityResale : false;\n      }\n\n      if (areUnlimitedStarGiftsDisallowed && !isLimited) return false;\n\n      return true;\n    });\n\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && filteredGiftIds?.flatMap((giftId) => {\n          const gift = starGiftsById[giftId];\n          const shouldShowResale = Boolean(gift.availabilityResale) && !areUniqueStarGiftsDisallowed;\n          const shouldDuplicateAsResale = shouldShowResale && !gift.isSoldOut && !areLimitedStarGiftsDisallowed;\n\n          const elements = [\n            <GiftItemStar\n              key={giftId}\n              gift={gift}\n              observeIntersection={observeIntersection}\n              isResale={shouldShowResale && !shouldDuplicateAsResale}\n              onClick={handleGiftClick}\n            />,\n          ];\n\n          if (shouldDuplicateAsResale) {\n            elements.push(\n              <GiftItemStar\n                key={`resale_${giftId}`}\n                isResale\n                gift={gift}\n                observeIntersection={observeIntersection}\n                onClick={handleGiftClick}\n              />,\n            );\n          }\n\n          return elements;\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              optionByStars={giftsByStars.get(gift)}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseModal = useLastCallback(() => {\n    setGiftModalSelectedGift({ gift: undefined });\n    resetResaleGifts();\n    closeGiftModal();\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (isResaleScreen) {\n      closeResaleGiftsMarket({ tabId });\n      return;\n    }\n    if (isGiftScreen) {\n      setGiftModalSelectedGift({ gift: undefined });\n      return;\n    }\n    handleCloseModal();\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            className={styles.avatar}\n            size={AVATAR_SIZE}\n            peer={renderingPeer}\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <InteractiveSparkles\n            className={styles.logoBackground}\n            color=\"gold\"\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n            onRequestAnimation={handleRequestAnimation}\n          />\n        </div>\n        {!isSelf && !chat && !disallowedGifts?.shouldDisallowPremiumGifts && (\n          <>\n            {renderGiftPremiumHeader()}\n            {renderGiftPremiumDescription()}\n            {renderPremiumGifts()}\n          </>\n        )}\n\n        {!areAllGiftsDisallowed && (\n          <>\n            {renderStarGiftsHeader()}\n            {renderStarGiftsDescription()}\n            <StarGiftCategoryList\n              ref={categoryListRef}\n              areUniqueStarGiftsDisallowed={areUniqueStarGiftsDisallowed}\n              areLimitedStarGiftsDisallowed={areLimitedStarGiftsDisallowed}\n              isSelf={isSelf}\n              hasMyUnique={Boolean(myUniqueGiftIds?.length)}\n              isPinned={isCategoryListPinned}\n              onCategoryChanged={onCategoryChanged}\n            />\n            <Transition\n              name=\"zoomFade\"\n              activeKey={getCategoryKey(selectedCategory)}\n              className={styles.starGiftsTransition}\n            >\n              {renderStarGifts()}\n            </Transition>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  const isBackButton = isGiftScreen || isResaleScreen;\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  function renderHeader() {\n    if (!shouldShowHeader) return undefined;\n    if (isResaleScreen) {\n      const isFirstLoading = areResaleGiftsLoading && !resaleGiftsCount;\n      return (\n        <div className={styles.resaleHeaderContentContainer}>\n          <div className={styles.resaleHeaderTextBlock}>\n            <h2 className={styles.resaleHeaderText}>\n              {selectedResaleGift.title}\n            </h2>\n            {isFirstLoading\n              && (\n                <div className={styles.resaleHeaderDescription}>\n                  {lang('Loading')}\n                </div>\n              )}\n            {!isFirstLoading && resaleGiftsCount !== undefined\n              && (\n                <div className={styles.resaleHeaderDescription}>\n                  {lang('HeaderDescriptionResaleGifts', {\n                    count: resaleGiftsCount,\n                  }, { withNodes: true, withMarkdown: true, pluralValue: resaleGiftsCount })}\n                </div>\n              )}\n          </div>\n          <GiftResaleFilters dialogRef={dialogRef} />\n        </div>\n      );\n    }\n    return (\n      <h2 className={styles.commonHeaderText}>\n        {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={handleCloseModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n      isLowStackPriority\n      withBalanceBar\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"tiny\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <div className={buildClassName(\n        styles.header,\n        isResaleScreen && styles.resaleHeader,\n        !shouldShowHeader && styles.hiddenHeader,\n        isCategoryListPinned && !isResaleScreen && styles.noBorder)}\n      >\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={!shouldShowHeader ? 0 : isResaleScreen ? 1 : isHeaderForStarGifts ? 2 : 3}\n          slideClassName={styles.headerSlide}\n        >\n          {renderHeader()}\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={isGiftScreen ? 1 : isResaleScreen ? 2 : 0}\n      >\n        {!isGiftScreen && !isResaleScreen && renderMainScreen()}\n        {isResaleScreen && selectedResaleGift\n          && (\n            <GiftModalResaleScreen\n              onGiftClick={handleGiftClick}\n            />\n          )}\n        {isGiftScreen && renderingModal?.forPeerId && (\n          <GiftComposer\n            gift={selectedGift}\n            giftByStars={giftsByStars.get(selectedGift)}\n            peerId={renderingModal.forPeerId}\n          />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const userFullInfo = peer ? selectUserFullInfo(global, peer?.id) : undefined;\n\n  const { resaleGifts } = selectTabState(global);\n  const resaleGiftsCount = resaleGifts.count;\n  const areResaleGiftsLoading = resaleGifts.isLoading !== false;\n  const selectedResaleGift = modal?.selectedResaleGift;\n\n  return {\n    boostPerSentGift: global.appConfig.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    myUniqueGiftsById: global.myUniqueGifts?.byId,\n    myUniqueGiftIds: global.myUniqueGifts?.ids,\n    starBalance: stars?.balance,\n    peer,\n    currentUserId,\n    disallowedGifts: userFullInfo?.disallowedGifts,\n    resaleGiftsCount,\n    areResaleGiftsLoading,\n    selectedResaleGift,\n    tabId: selectTabState(global).id,\n  };\n})(GiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return 0;\n  if (category === 'myUnique') return 1;\n  return 2;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"W3JMs1YE\"};","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { filterPeersByQuery } from '../../../../global/helpers/peers';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker = ({\n  modal,\n  currentUserId,\n  userIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const global = getGlobal();\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredPeerIds = idsWithSelf ? filterPeersByQuery({ ids: idsWithSelf, query: searchQuery }) : [];\n\n    return sortChatIds(unique(filteredPeerIds).filter((peerId) => {\n      return selectCanGift(global, peerId);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n  };\n})(GiftRecipientPicker));\n","import type { TeactNode } from '../../../lib/teact/teact';\n\nimport type { ApiPeer, ApiStarGiftAttributeOriginalDetails } from '../../../api/types';\n\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { type LangFn } from '../../../util/localization';\nimport { renderTextWithEntities } from './renderTextWithEntities';\n\nimport Link from '../../ui/Link';\n\ntype GiftOriginalInfoOptions = {\n  originalDetails: ApiStarGiftAttributeOriginalDetails;\n  recipient: ApiPeer;\n  sender?: ApiPeer;\n  onOpenChat: (peerId: string) => void;\n  lang: LangFn;\n};\n\nexport function renderGiftOriginalInfo({\n  originalDetails,\n  recipient,\n  sender,\n  onOpenChat,\n  lang,\n}: GiftOriginalInfoOptions): TeactNode | undefined {\n  const { recipientId, senderId, date, message } = originalDetails;\n\n  const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n  const recipientLink = (\n    <Link onClick={() => onOpenChat(recipientId)} isPrimary>\n      {getPeerTitle(lang, recipient)}\n    </Link>\n  );\n\n  if (!sender || senderId === recipientId) {\n    return message\n      ? lang('GiftInfoPeerOriginalInfoText', {\n        peer: recipientLink,\n        text: renderTextWithEntities(message),\n        date: formattedDate,\n      }, {\n        withNodes: true,\n      })\n      : lang('GiftInfoPeerOriginalInfo', {\n        peer: recipientLink,\n        date: formattedDate,\n      }, {\n        withNodes: true,\n      });\n  }\n\n  const senderLink = (\n    <Link onClick={() => onOpenChat(sender.id)} isPrimary>\n      {getPeerTitle(lang, sender)}\n    </Link>\n  );\n\n  return message\n    ? lang('GiftInfoPeerOriginalInfoTextSender', {\n      peer: recipientLink,\n      sender: senderLink,\n      text: renderTextWithEntities(message),\n      date: formattedDate,\n    }, {\n      withNodes: true,\n    })\n    : lang('GiftInfoPeerOriginalInfoSender', {\n      peer: recipientLink,\n      date: formattedDate,\n      sender: senderLink,\n    }, {\n      withNodes: true,\n    });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Ef0cKSqQ\",\"giftPreview\":\"IvuNzslN\",\"backdrop\":\"dNukis4X\",\"arrow\":\"oufsMLLF\"};","import { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiPeer, ApiStarGiftUnique,\n} from '../../../api/types';\n\nimport { getGiftAttributes } from '../helpers/gifts';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport AnimatedIconFromSticker from '../AnimatedIconFromSticker';\nimport Avatar from '../Avatar';\nimport Icon from '../icons/Icon';\nimport RadialPatternBackground from '../profile/RadialPatternBackground';\n\nimport styles from './GiftTransferPreview.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer;\n  gift: ApiStarGiftUnique;\n};\n\nconst AVATAR_SIZE = 4 * REM;\nconst GIFT_STICKER_SIZE = 3 * REM;\n\nconst GiftTransferPreview = ({\n  peer,\n  gift,\n}: OwnProps) => {\n  const giftAttributes = useMemo(() => {\n    return getGiftAttributes(gift);\n  }, [gift]);\n\n  if (!giftAttributes) return undefined;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.giftPreview}>\n        <RadialPatternBackground\n          className={styles.backdrop}\n          backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n          patternIcon={giftAttributes.pattern?.sticker}\n          ringsCount={1}\n          ovalFactor={1}\n          patternSize={12}\n        />\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          size={GIFT_STICKER_SIZE}\n          sticker={giftAttributes.model?.sticker}\n        />\n      </div>\n      <Icon name=\"next\" className={styles.arrow} />\n      <Avatar\n        peer={peer}\n        size={AVATAR_SIZE}\n        className={styles.avatar}\n      />\n    </div>\n  );\n};\n\nexport default memo(GiftTransferPreview);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cXxisAOv\",\"uncommon\":\"ijxb6cY4\",\"rare\":\"ILZMGKzU\",\"epic\":\"yV7QxSSZ\",\"legendary\":\"mfLnm_Bt\"};","import { memo } from '../../lib/teact/teact';\n\nimport type { ApiStarGiftAttributeRarity } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { getGiftRarityTitle } from './helpers/gifts';\n\nimport useLang from '../../hooks/useLang';\n\nimport BadgeButton from './BadgeButton';\n\nimport styles from './GiftRarityBadge.module.scss';\n\ntype OwnProps = {\n  rarity: ApiStarGiftAttributeRarity;\n};\n\nconst GiftRarityBadge = ({ rarity }: OwnProps) => {\n  const lang = useLang();\n\n  return (\n    <BadgeButton className={buildClassName(styles.root, rarity.type !== 'regular' && styles[rarity.type])}>\n      {getGiftRarityTitle(lang, rarity)}\n    </BadgeButton>\n  );\n};\n\nexport default memo(GiftRarityBadge);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"nnublcCk\",\"uniqueTitleNumber\":\"nGQgapzK\",\"small\":\"lmRjx4L1\",\"regular\":\"WnPo9akz\",\"checkBox\":\"fjE0wGvw\",\"checkBoxDescription\":\"tepUTe4z\",\"upgradeIcon\":\"lgyInH5K\",\"descriptionConfirm\":\"BJh2Tufh\",\"titleConfirm\":\"gA102W1G\",\"header\":\"p7FTs7_p\",\"title\":\"pIbzzTir\",\"description\":\"CCPfr26t\",\"warningDescription\":\"eEsRJVa1\",\"modalContent\":\"o9rFZ6By\",\"moreMenuButton\":\"EMwExRMy\",\"closeButton\":\"jQv0ZSEW\",\"giftResalePriceContainer\":\"BN8gf5y6\",\"starAmountIcon\":\"_5guecUe\",\"giftResalePriceStar\":\"H_q8o2vY\",\"headerButton\":\"WA0INleU\",\"left\":\"aOhTHZlf\",\"right\":\"rJOB1u5Q\",\"footer\":\"bho0GTYt\",\"footerDescription\":\"VUylTszM\",\"footerHint\":\"mxS8kDnA\",\"buyButton\":\"i1MmnrPG\",\"unknown\":\"zDauXmpS\",\"giftValue\":\"w_E4LkUj\",\"uniqueValue\":\"uAjIRJva\",\"uniqueAttribute\":\"OJQnkf17\",\"attributeName\":\"dq7wCHJb\",\"uniqueGift\":\"I6o_pGAm\",\"modalHeader\":\"ie9tImaj\",\"modalCloseButton\":\"p38RBGdC\",\"ownerAddress\":\"DavMRg4Q\",\"copyIcon\":\"SLX5tX8C\",\"messageContainer\":\"oW5T3mkV\",\"removeMessageButton\":\"TrW2LVm5\"};","import { memo, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiEmojiStatusType,\n  ApiPeer,\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { getHasAdminRight } from '../../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../../global/helpers/peers';\nimport { getMainUsername } from '../../../../global/helpers/users';\nimport { selectPeer, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport {\n  formatStarsAsIcon, formatStarsAsText, formatTonAsIcon, formatTonAsText,\n  getNextArrowReplacement,\n} from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { renderGiftOriginalInfo } from '../../../common/helpers/giftOriginalInfo';\nimport { getGiftAttributes, getGiftRarityTitle, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftMenuItems from '../../../common/gift/GiftMenuItems';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport GiftRarityBadge from '../../../common/GiftRarityBadge';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport Link from '../../../ui/Link';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  releasedByPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n  tonExplorerUrl?: string;\n  currentUser?: ApiUser;\n  recipientPeer?: ApiPeer;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  releasedByPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n  tonExplorerUrl,\n  currentUser,\n  recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    buyStarGift,\n    closeGiftModal,\n    openGiftInfoValueModal,\n    updateResaleGiftsFilter,\n    openGiftInMarket,\n    openGiftDescriptionRemoveModal,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState<boolean>(false);\n  const [shouldPayInTon, setShouldPayInTon] = useState<boolean>(false);\n\n  const uniqueGiftHeaderRef = useRef<HTMLDivElement>();\n\n  const handleSymbolClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.pattern) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [],\n        backdropAttributes: [],\n        patternAttributes: [{\n          type: 'pattern',\n          documentId: giftAttributes.pattern.sticker.id,\n        }],\n      },\n    });\n  });\n\n  const handleBackdropClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.backdrop) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [],\n        backdropAttributes: [{\n          type: 'backdrop',\n          backdropId: giftAttributes.backdrop.backdropId,\n        }],\n        patternAttributes: [],\n      },\n    });\n  });\n\n  const handleModelClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.model) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [{\n          type: 'model',\n          documentId: giftAttributes.model.sticker.id,\n        }],\n        backdropAttributes: [],\n        patternAttributes: [],\n      },\n    });\n  });\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n  const hasConvertOption = canConvertDifference > 0 && Boolean(savedGift?.starsToConvert);\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n\n  const selfCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((status) =>\n      status.type === 'collectible' && status.slug === starGiftUniqueSlug);\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const isSelfUnique = Boolean(selfCollectibleStatus);\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n\n  const canManage = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights\n      : gift?.type === 'starGift'\n        ? renderingTargetPeer?.id === currentUserId\n        : gift?.ownerId === currentUserId || isSelfUnique\n  );\n\n  function getResalePrice(isInTon?: boolean) {\n    if (!isGiftUnique) return undefined;\n    const amounts = gift.resellPrice;\n    if (!amounts) return undefined;\n\n    if (gift?.resaleTonOnly || isInTon) {\n      return amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n    }\n\n    return amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n  }\n\n  const resellPrice = getResalePrice();\n  const confirmPrice = getResalePrice(shouldPayInTon);\n  const resellPriceInStars = resellPrice?.currency === TON_CURRENCY_CODE && isGiftUnique\n    ? gift.resellPrice?.find((amount) => amount.currency === STARS_CURRENCY_CODE)\n    : undefined;\n  const canBuyGift = !isSelfUnique && gift?.type === 'starGiftUnique'\n    && gift.ownerId !== currentUserId && Boolean(resellPrice);\n\n  const giftOwnerTitle = (() => {\n    if (!isGiftUnique) return undefined;\n    const { ownerName, ownerId } = gift;\n    const global = getGlobal(); // Peer titles do not need to be reactive\n    const owner = ownerId ? selectPeer(global, ownerId) : undefined;\n    return owner ? getPeerTitle(lang, owner) : ownerName;\n  })();\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    const giftChat = isSender ? renderingTargetPeer : renderingFromPeer;\n    if (!savedGift?.upgradeMsgId || !giftChat) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: giftChat.id, messageId: upgradeMsgId });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleRemoveMessage = useLastCallback(() => {\n    if (!savedGift?.inputGift || !savedGift.dropOriginalDetailsStars || !gift || !giftAttributes) return;\n\n    const { originalDetails } = giftAttributes;\n    if (!originalDetails) return;\n\n    openGiftDescriptionRemoveModal({\n      gift: savedGift,\n      price: savedGift.dropOriginalDetailsStars,\n      details: originalDetails,\n    });\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    const giftOwnerId = renderingTargetPeer?.id;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift, peerId: giftOwnerId });\n  });\n\n  const handleBuyGift = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !getResalePrice()) return;\n    setIsConfirmModalOpen(true);\n  });\n\n  const closeConfirmModal = useLastCallback(() => {\n    setIsConfirmModalOpen(false);\n  });\n\n  const handleConfirmBuyGift = useLastCallback(() => {\n    const peer = recipientPeer || currentUser;\n    const price = getResalePrice(shouldPayInTon);\n    if (!peer || !price || gift?.type !== 'starGiftUnique') return;\n    closeConfirmModal();\n    closeGiftModal();\n    buyStarGift({ peerId: peer.id, slug: gift.slug, price });\n  });\n\n  const handleOpenValueModal = useLastCallback(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return;\n\n    openGiftInfoValueModal({\n      gift,\n    });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const uniqueGiftTitle = useMemo(() => {\n    if (!gift || gift.type !== 'starGiftUnique' || !giftAttributes?.backdrop) return undefined;\n\n    const numberColor = giftAttributes.backdrop.textColor;\n    const digitCount = String(gift.number).length;\n    const numberSizeClass = digitCount >= 6 ? styles.small : styles.regular;\n    const styledNumber = (\n      <span className={buildClassName(styles.uniqueTitleNumber, numberSizeClass)} style={`color: ${numberColor}`}>\n        {lang('GiftSavedNumber', { number: gift.number })}\n      </span>\n    );\n\n    return lang('GiftInfoUniqueTitle', {\n      name: gift.title,\n      number: styledNumber,\n    }, { withNodes: true });\n  }, [gift, giftAttributes, lang]);\n\n  const uniqueGiftSubtitle = useMemo(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return undefined;\n\n    if (releasedByPeer) {\n      const releasedByUsername = `@${getMainUsername(releasedByPeer)}`;\n      const ownerTitle = releasedByUsername || getPeerTitle(lang, releasedByPeer);\n      const fallbackText = isApiPeerUser(releasedByPeer)\n        ? lang('ActionFallbackUser')\n        : lang('ActionFallbackChannel');\n\n      return ownerTitle || fallbackText;\n    }\n\n    const modelName = giftAttributes?.model?.name;\n\n    return modelName;\n  }, [gift, giftAttributes, releasedByPeer, lang]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canBuyGift) {\n      return (\n        <Button className={styles.buyButton} onClick={handleBuyGift}>\n          <div>\n            {lang('ButtonBuyGift', {\n              stars: resellPrice?.currency === TON_CURRENCY_CODE\n                ? formatTonAsIcon(lang, resellPrice.amount, { shouldConvertFromNanos: true })\n                : formatStarsAsIcon(lang, resellPrice?.amount, { asFont: true }),\n            }, { withNodes: true })}\n          </div>\n          {resellPrice?.currency === TON_CURRENCY_CODE && Boolean(resellPriceInStars) && (\n            <div className={styles.footerHint}>\n              {lang('GiftBuyEqualsTo', {\n                stars: formatStarsAsIcon(lang, resellPriceInStars.amount, { asFont: true }),\n              }, { withNodes: true })}\n            </div>\n          )}\n        </Button>\n      );\n    }\n\n    if (canFocusUpgrade) {\n      return (\n        <Button onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftInfoUpgradeForFree')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.canUpgrade && !savedGift.upgradeMsgId) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftInfoUpgrade')}\n        </Button>\n      );\n    }\n\n    if (savedGift?.prepaidUpgradeHash) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftAnUpgradeButton')}\n        </Button>\n      );\n    }\n\n    return (\n      <Button onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const saleDateInfo = useMemo(() => {\n    if (!gift) return undefined;\n    let text = '';\n    if (gift.type === 'starGift') {\n      if (gift.firstSaleDate) {\n        text += `${lang('GiftInfoFirstSale')} ${formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true)}`;\n      }\n      if (gift.lastSaleDate) {\n        text += '\\n';\n        text += `${lang('GiftInfoLastSale')} ${formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true)}`;\n      }\n    }\n\n    return text;\n  }, [gift, lang]);\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted, upgradeMsgId,\n    } = savedGift || {};\n    const canConvert = hasConvertOption && Boolean(starsToConvert);\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const isWarningDescription = savedGift?.isRefunded || (!savedGift && gift?.type === 'starGift');\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n      if (savedGift.isRefunded) return lang('GiftInfoDescriptionRefunded');\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (canManage && savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n        return lang('GiftInfoDescriptionUpgrade2');\n      }\n      if (savedGift.canUpgrade && canManage) {\n        return canManage\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canManage && !isSender) return undefined;\n      if (isConverted && canConvert) {\n        return canManage\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: starsToConvert,\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescriptionUpgrade', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n        }\n\n        return lang('GiftInfoDescriptionUpgradeRegular');\n      }\n\n      if (canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescription', {\n            amount: starsToConvert,\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n            pluralValue: starsToConvert,\n          });\n        }\n\n        return lang('GiftInfoDescriptionRegular');\n      }\n\n      if (canConvert) {\n        return lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        });\n      }\n\n      return lang('GiftInfoPeerDescriptionOutRegular', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n    })();\n\n    function getTitle() {\n      if (isGiftUnique) return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canManage ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n\n        <Button\n          className={styles.closeButton}\n          round\n          color=\"translucent-white\"\n          size=\"tiny\"\n          iconName=\"close\"\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        />\n\n        {Boolean(resellPrice?.amount) && (\n          <div className={styles.giftResalePriceContainer}>\n            {resellPrice.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, resellPrice.amount, {\n                className: styles.giftResalePriceStar,\n                shouldConvertFromNanos: true,\n              })\n              : formatStarsAsIcon(lang, resellPrice.amount, {\n                asFont: true,\n                className: styles.giftResalePriceStar,\n              })}\n          </div>\n        )}\n      </div>\n    );\n\n    const uniqueGiftHeader = isGiftUnique && (\n      <div ref={uniqueGiftHeaderRef} className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={uniqueGiftTitle}\n          subtitle={uniqueGiftSubtitle}\n          subtitlePeer={releasedByPeer}\n          showManageButtons={canManage}\n          savedGift={savedGift}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {Boolean(description) && (\n          <p className={buildClassName(styles.description, isWarningDescription && styles.warningDescription)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      const hasFrom = fromId || isNameHidden;\n\n      if (hasFrom) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          !fromId ? (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ) : { chatId: fromId },\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          <span title={saleDateInfo}>{formatDateTimeToString(savedGift.date * 1000, lang.code, true)}</span>,\n        ]);\n      }\n\n      if (gift.firstSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canManage && hasConvertOption && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (isGiftUnique) {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const ownerPeer = ownerId ? selectPeer(getGlobal(), ownerId) : undefined;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else if (ownerPeer || ownerName) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId, withEmojiStatus: true } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleModelClick}\n            >\n              {model.name}\n            </span>\n            <GiftRarityBadge rarity={model.rarity} />\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleBackdropClick}\n            >\n              {backdrop.name}\n            </span>\n            <BadgeButton>{getGiftRarityTitle(lang, backdrop.rarity)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleSymbolClick}\n            >\n              {pattern.name}\n            </span>\n            <BadgeButton>{getGiftRarityTitle(lang, pattern.rarity)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (gift.valueAmount && gift.valueCurrency) {\n        const formattedValue = formatCurrencyAsString(gift.valueAmount, gift.valueCurrency, lang.code);\n        tableData.push([\n          lang('GiftInfoValue'),\n          <span className={styles.uniqueValue}>\n            {lang('GiftInfoValueAmount', { amount: formattedValue })}\n            <BadgeButton onClick={handleOpenValueModal}>\n              {lang('GiftInfoValueLinkMore')}\n            </BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (originalDetails) {\n        const { recipientId, senderId } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const text = renderGiftOriginalInfo({\n          originalDetails, recipient, sender, onOpenChat: openChat, lang,\n        });\n\n        tableData.push([\n          undefined,\n          <div className={styles.messageContainer}>\n            <div>\n              {text}\n            </div>\n            {Boolean(savedGift?.dropOriginalDetailsStars) && (\n              <Button\n                round\n                className={styles.removeMessageButton}\n                size=\"smaller\"\n                color=\"translucent\"\n                ariaLabel=\"Delete original details\"\n                onClick={handleRemoveMessage}\n                iconName=\"delete\"\n              />\n            )}\n          </div>,\n        ]);\n      }\n    }\n\n    const tonLink = tonExplorerUrl && isGiftUnique && gift.giftAddress && (\n      `${tonExplorerUrl}${gift.giftAddress}`\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {(canManage || tonLink || canBuyGift) && (\n          <div className={styles.footerDescription}>\n            {tonLink && (\n              <div>\n                {lang('GiftInfoTonText', {\n                  link: (\n                    <SafeLink url={tonLink} shouldSkipModal text={lang('GiftInfoTonLinkText')}>\n                      {lang('GiftInfoTonLinkText', undefined,\n                        { withNodes: true, specialReplacement: getNextArrowReplacement() })}\n                    </SafeLink>\n                  ),\n                }, { withNodes: true })}\n              </div>\n            )}\n            {canManage && (\n              <div>\n                {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                  link: (\n                    <Link isPrimary onClick={handleTriggerVisibility}>\n                      {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`, undefined,\n                        { withNodes: true, specialReplacement: getNextArrowReplacement() })}\n                    </Link>\n                  ),\n                }, {\n                  withNodes: true,\n                })}\n              </div>\n            )}\n            {!canBuyGift && isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n            {canBuyGift && giftOwnerTitle && (\n              <div>\n                {lang('GiftInfoBuyGift', {\n                  user: giftOwnerTitle,\n                }, { withNodes: true })}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isGiftUnique ? uniqueGiftModalHeader : undefined,\n      header: isGiftUnique ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang,\n    canManage, hasConvertOption, isSender, oldLang, tonExplorerUrl,\n    gift, giftAttributes, renderFooterButton, isTargetChat,\n    isGiftUnique, saleDateInfo,\n    canBuyGift, giftOwnerTitle, resellPrice, uniqueGiftTitle, uniqueGiftSubtitle, releasedByPeer,\n    handleSymbolClick, handleBackdropClick, handleModelClick,\n  ]);\n\n  const moreMenuItems = typeGift && (\n    <GiftMenuItems\n      peerId={renderingModal!.peerId!}\n      gift={typeGift}\n      canManage={canManage}\n      collectibleEmojiStatuses={collectibleEmojiStatuses}\n      currentUserEmojiStatus={currentUserEmojiStatus}\n    />\n  );\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={isGiftUnique}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        contentClassName={styles.modalContent}\n        closeButtonColor={isGiftUnique ? 'translucent-white' : undefined}\n        moreMenuItems={moreMenuItems}\n        onClose={handleClose}\n        withBalanceBar={Boolean(canBuyGift)}\n        currencyInBalanceBar={confirmPrice?.currency}\n        isLowStackPriority\n      />\n      {uniqueGift && currentUser && Boolean(confirmPrice) && (\n        <ConfirmDialog\n          isOpen={isConfirmModalOpen}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={lang('ButtonBuyGift', {\n            stars: confirmPrice?.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, confirmPrice.amount, { shouldConvertFromNanos: true })\n              : formatStarsAsIcon(lang, confirmPrice.amount, { asFont: true }),\n          }, { withNodes: true })}\n          confirmHandler={handleConfirmBuyGift}\n        >\n\n          {uniqueGift.resaleTonOnly\n            && (\n              <div className={styles.descriptionConfirm}>\n                {lang('ConfirmBuyGiftForTonDescription')}\n              </div>\n            )}\n          <GiftTransferPreview\n            peer={recipientPeer || currentUser}\n            gift={uniqueGift}\n          />\n          <div className={styles.titleConfirm}>\n            {lang('TitleConfirmPayment')}\n          </div>\n          {!recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyForPeerConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                  peer: getPeerTitle(lang, recipientPeer),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {!uniqueGift.resaleTonOnly && (\n            <>\n              <Checkbox\n                className={styles.checkBox}\n                label={lang('LabelPayInTON')}\n                checked={shouldPayInTon}\n                onCheck={setShouldPayInTon}\n              />\n\n              <div className={styles.checkBoxDescription}>\n                {lang('DescriptionPayInTON')}\n              </div>\n            </>\n          )}\n        </ConfirmDialog>\n      )}\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {hasConvertOption && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n    const currentUserId = global.currentUserId;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n    const currentUser = selectUser(global, currentUserId!);\n    const recipientPeer = modal?.recipientId && currentUserId !== modal.recipientId\n      ? selectPeer(global, modal.recipientId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    const gift = isSavedGift ? typeGift.gift : typeGift;\n    const releasedByPeerId = gift?.type === 'starGiftUnique' && gift.releasedByPeerId;\n    const releasedByPeer = releasedByPeerId ? selectPeer(global, releasedByPeerId) : undefined;\n\n    return {\n      fromPeer,\n      targetPeer,\n      releasedByPeer,\n      currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig.starGiftMaxConvertPeriod,\n      tonExplorerUrl: global.appConfig.tonExplorerUrl,\n      hasAdminRights,\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n      currentUser,\n      recipientPeer,\n    };\n  },\n)(GiftInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"v4GJBsdC\",\"sticker\":\"lJodRD0R\",\"description\":\"VjWaO8un\",\"initialPrice\":\"K7zsAhVt\",\"starIcon\":\"Xw91xwpe\",\"footer\":\"OJDo2xUd\",\"footerSticker\":\"hspYTy7V\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './GiftInfoValueModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoValueModal'];\n};\n\nconst HEADER_STICKER_SIZE = 120;\nconst FOOTER_STICKER_SIZE = 24;\n\nconst GiftInfoValueModal: FC<OwnProps> = ({\n  modal,\n}) => {\n  const { closeGiftInfoValueModal, openUrl, openGiftInMarket } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleOpenFragment = useLastCallback(() => {\n    if (modal?.valueInfo.fragmentListedUrl) {\n      openUrl({ url: modal.valueInfo.fragmentListedUrl });\n    }\n  });\n\n  const handleOpenTelegramMarket = useLastCallback(() => {\n    if (modal?.gift) {\n      openGiftInMarket({ gift: modal.gift });\n    }\n  });\n\n  const modalData = useMemo(() => {\n    if (!renderingModal) return undefined;\n\n    const { gift, valueInfo } = renderingModal;\n    const giftAttributes = getGiftAttributes(gift);\n\n    if (!giftAttributes) return undefined;\n\n    const header = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={giftAttributes.model!.sticker}\n          size={HEADER_STICKER_SIZE}\n        />\n        <Button\n          pill\n          size=\"tiny\"\n          fluid\n          nonInteractive\n        >\n          {formatCurrencyAsString(valueInfo.value, valueInfo.currency, lang.code)}\n        </Button>\n        <div className={styles.description}>\n          {lang('GiftValueDescription', { giftName: gift.title }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n        </div>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang('GiftValueTitleInitialSale'),\n      formatDateToString(valueInfo.initialSaleDate * 1000, lang.code),\n    ]);\n\n    tableData.push([\n      lang('GiftValueTitleInitialPrice'),\n      <span className={styles.initialPrice}>\n        {formatStarsAsIcon(lang, valueInfo.initialSaleStars, { className: styles.starIcon })}\n        {' (~ '}\n        {formatCurrencyAsString(valueInfo.initialSalePrice, valueInfo.currency, lang.code)}\n        )\n      </span>,\n    ]);\n\n    if (valueInfo.lastSaleDate) {\n      tableData.push([\n        lang('GiftValueTitleLastSale'),\n        formatDateToString(valueInfo.lastSaleDate * 1000, lang.code),\n      ]);\n    }\n\n    if (valueInfo.lastSalePrice) {\n      tableData.push([\n        lang('GiftValueTitleLastPrice'),\n        formatCurrencyAsString(valueInfo.lastSalePrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    if (valueInfo.floorPrice) {\n      tableData.push([\n        lang('GiftValueTitleMinimumPrice'),\n        formatCurrencyAsString(valueInfo.floorPrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    if (valueInfo.averagePrice) {\n      tableData.push([\n        lang('GiftValueTitleAveragePrice'),\n        formatCurrencyAsString(valueInfo.averagePrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    const canBuyOnFragment = Boolean(valueInfo.fragmentListedUrl && valueInfo.fragmentListedCount);\n    const canBuyOnTelegram = Boolean(valueInfo.listedCount && valueInfo.listedCount);\n    const hasFooter = canBuyOnFragment || canBuyOnTelegram;\n\n    const footer = hasFooter && (\n      <div className={styles.footer}>\n        {canBuyOnFragment && (\n          <Button\n            isText\n            onClick={handleOpenFragment}\n            noForcedUpperCase\n            size=\"tiny\"\n          >\n            {lang.number(valueInfo.fragmentListedCount!)}\n            <AnimatedIconFromSticker\n              className={styles.footerSticker}\n              sticker={giftAttributes.model!.sticker}\n              size={FOOTER_STICKER_SIZE}\n            />\n            {lang('GiftValueForSaleOnFragment')}\n          </Button>\n        )}\n\n        {canBuyOnTelegram && (\n          <Button\n            isText\n            noForcedUpperCase\n            size=\"tiny\"\n            onClick={handleOpenTelegramMarket}\n          >\n            {lang.number(valueInfo.listedCount!)}\n            <AnimatedIconFromSticker\n              className={styles.footerSticker}\n              sticker={giftAttributes.model!.sticker}\n              size={FOOTER_STICKER_SIZE}\n            />\n            {lang('GiftValueForSaleOnTelegram')}\n          </Button>\n        )}\n      </div>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [lang, renderingModal, handleOpenFragment, handleOpenTelegramMarket]);\n\n  if (!modalData) return undefined;\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      onClose={closeGiftInfoValueModal}\n      header={modalData.header}\n      tableData={modalData.tableData}\n      footer={modalData.footer}\n    />\n  );\n};\n\nexport default memo(GiftInfoValueModal);\n","import { memo, useCallback } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatShortDuration } from '../../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftLockedModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['lockedGiftModal'];\n};\n\nconst GiftLockedModal = ({\n  modal,\n}: OwnProps) => {\n  const { closeLockedGiftModal } = getActions();\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => {\n    closeLockedGiftModal();\n  });\n\n  const getMessageText = useCallback(() => {\n    if (!modal) return '';\n\n    if (modal.untilDate) {\n      const timeRemaining = modal.untilDate ? modal.untilDate - getServerTime() : 0;\n      return lang('GiftLockedMessage', {\n        relativeDate: formatShortDuration(lang, timeRemaining),\n      },\n      {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    if (modal.reason) {\n      return renderTextWithEntities(modal.reason);\n    }\n\n    return lang('TitleGiftLocked');\n  }, [modal, lang]);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      className=\"narrow\"\n      onClose={handleClose}\n      title={lang('TitleGiftLocked')}\n      headerClassName={styles.header}\n    >\n      <p className={styles.message}>\n        {getMessageText()}\n      </p>\n      <Button\n        onClick={handleClose}\n      >\n        {lang('OK')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(GiftLockedModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"AqB1qB8W\",\"message\":\"pA8Bz4TW\"};","// extracted by mini-css-extract-plugin\nexport default {\"checkBoxDescription\":\"pWjQiY4m\",\"inputPriceDescription\":\"SGFmA4kL\",\"checkBox\":\"yt_nODdj\",\"descriptionPrice\":\"r9R0VR_w\",\"inputPrice\":\"ElDo1Bru\"};","import {\n  memo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport {\n  selectStarsGiftResaleCommission,\n  selectTonGiftResaleCommission,\n} from '../../../../global/selectors';\nimport { convertTonFromNanos, convertTonToNanos } from '../../../../util/formatCurrency';\nimport { convertTonToUsd, formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon, formatStarsAsText, formatTonAsIcon,\n  formatTonAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftResalePriceComposerModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftResalePriceComposerModal'];\n};\n\nexport type StateProps = {\n  starsCommission?: number;\n  starsResaleAmountMin: number;\n  starsResaleAmountMax?: number;\n  starsUsdWithdrawRate?: number;\n  tonCommission?: number;\n  tonResaleAmountMin: number;\n  tonResaleAmountMax?: number;\n  tonUsdRate?: number;\n};\n\nconst GiftResalePriceComposerModal = ({\n  modal, starsCommission,\n  starsResaleAmountMin, starsResaleAmountMax, starsUsdWithdrawRate,\n  tonCommission, tonResaleAmountMin, tonResaleAmountMax, tonUsdRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftResalePriceComposerModal,\n    closeGiftInfoModal,\n    updateStarGiftPrice,\n    showNotification,\n  } = getActions();\n  const isOpen = Boolean(modal);\n  const [price, setPrice] = useState<number | undefined>(undefined);\n  const [isPriceInTon, setIsPriceInTon] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const hasPrice = Boolean(price);\n\n  const lang = useLang();\n\n  const handleChangePrice = useLastCallback((e) => {\n    const value = e.target.value;\n    const number = parseFloat(value);\n    const maxAmount = isPriceInTon ? tonResaleAmountMax : starsResaleAmountMax;\n    const result = value === '' || Number.isNaN(number) ? undefined\n      : maxAmount ? Math.min(number, maxAmount) : number;\n    setPrice(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeGiftResalePriceComposerModal();\n  });\n\n  const handleSellGift = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift || !price) return;\n    closeGiftResalePriceComposerModal();\n    closeGiftInfoModal();\n    updateStarGiftPrice(\n      {\n        gift: savedGift.inputGift,\n        price: {\n          currency: isPriceInTon ? 'TON' : 'XTR',\n          amount: isPriceInTon ? convertTonToNanos(price) : price,\n          nanos: 0,\n        },\n      });\n    showNotification({\n      icon: 'sell-outline',\n      message: {\n        key: 'NotificationGiftIsSale',\n        variables: {\n          gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }),\n        },\n      },\n    });\n  });\n  const commission = isPriceInTon ? tonCommission : starsCommission;\n  const minAmount = isPriceInTon ? tonResaleAmountMin : starsResaleAmountMin;\n  const isPriceCorrect = hasPrice && price >= minAmount;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={isPriceInTon ? lang('PriceInTON') : lang('PriceInStars')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      <div className={styles.inputPrice}>\n        <InputText\n          label={isPriceInTon ? lang('EnterPriceInTon') : lang('EnterPriceInStars')}\n          onChange={handleChangePrice}\n          value={price?.toString()}\n          inputMode=\"numeric\"\n          tabIndex={0}\n          teactExperimentControlled={!isPriceInTon}\n        />\n      </div>\n\n      <div className={styles.inputPriceDescription}>\n        <span>\n          {!isPriceCorrect && Boolean(commission) && lang('DescriptionComposerGiftMinimumPrice', {\n            stars: isPriceInTon ? formatTonAsText(lang, minAmount) : formatStarsAsText(lang, minAmount),\n          }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n          {isPriceCorrect && (() => {\n            const priceWithCommission = commission ? Number((price * commission).toFixed()) : price;\n            return lang('DescriptionComposerGiftResalePrice',\n              {\n                stars: isPriceInTon\n                  ? formatTonAsText(lang, priceWithCommission)\n                  : formatStarsAsText(lang, priceWithCommission),\n              },\n              {\n                withMarkdown: true,\n                withNodes: true,\n              });\n          })()}\n        </span>\n\n        {isPriceCorrect && Boolean(isPriceInTon ? tonUsdRate : starsUsdWithdrawRate) && (\n          <span className={styles.descriptionPrice}>\n            {` ${formatCurrencyAsString(\n              isPriceInTon ? convertTonToUsd(price, tonUsdRate!) : price * starsUsdWithdrawRate!,\n              'USD',\n              lang.code,\n            )}`}\n          </span>\n        )}\n      </div>\n\n      <Checkbox\n        className={styles.checkBox}\n        label={lang('OnlyAcceptTON')}\n        checked={isPriceInTon}\n        onCheck={setIsPriceInTon}\n      />\n\n      <div className={styles.checkBoxDescription}>\n        {lang('OnlyAcceptTONDescription')}\n      </div>\n\n      <Button noForcedUpperCase disabled={!isPriceCorrect} onClick={handleSellGift}>\n        {isPriceCorrect && lang('ButtonSellGift', {\n          stars: isPriceInTon ? formatTonAsIcon(lang, price)\n            : formatStarsAsIcon(lang, price, { asFont: true }),\n        }, { withNodes: true })}\n        {!isPriceCorrect && lang('Sell')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const starsCommission = selectStarsGiftResaleCommission(global);\n    const starsResaleAmountMin = global.appConfig.starsStargiftResaleAmountMin || 0;\n    const starsResaleAmountMax = global.appConfig.starsStargiftResaleAmountMax;\n\n    const starsUsdWithdrawRateX1000 = global.appConfig.starsUsdWithdrawRateX1000;\n    const starsUsdWithdrawRate = starsUsdWithdrawRateX1000 ? starsUsdWithdrawRateX1000 / 1000 : 1;\n\n    const tonCommission = selectTonGiftResaleCommission(global);\n    const tonResaleAmountMin = convertTonFromNanos(global.appConfig.tonStargiftResaleAmountMin || 0);\n    const maxTonFromConfig = global.appConfig.tonStargiftResaleAmountMax;\n    const tonResaleAmountMax = maxTonFromConfig ? convertTonFromNanos(maxTonFromConfig) : undefined;\n\n    const tonUsdRate = global.appConfig.tonUsdRate;\n\n    return {\n      starsCommission,\n      starsResaleAmountMin,\n      starsResaleAmountMax,\n      starsUsdWithdrawRate,\n      tonCommission,\n      tonResaleAmountMin,\n      tonResaleAmountMax,\n      tonUsdRate,\n    };\n  },\n)(GiftResalePriceComposerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"EWaVCxY4\",\"footerButton\":\"_Dt6RSQV\",\"link\":\"Xu0TqkRj\",\"priceDecreaseTimer\":\"ryB8xKvy\"};","import {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { getNextArrowReplacement } from '../../../../util/localization/format';\nimport {\n  getRandomGiftPreviewAttributes, type GiftPreviewAttributes,\n  preloadGiftAttributeStickers } from '../../../common/helpers/gifts';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedCounter from '../../../common/AnimatedCounter';\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport Link from '../../../ui/Link';\nimport TextTimer from '../../../ui/TextTimer';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const {\n    closeGiftUpgradeModal,\n    closeGiftInfoModal,\n    upgradeGift,\n    upgradePrepaidGift,\n    openStarGiftPriceDecreaseInfoModal,\n    shiftGiftUpgradeNextPrice,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const isPrepaid = Boolean(renderingModal?.gift?.prepaidUpgradeHash);\n\n  const [previewAttributes, setPreviewAttributes] = useState<GiftPreviewAttributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleTimerEnd = useLastCallback(() => {\n    shiftGiftUpgradeNextPrice();\n  });\n\n  const nextPrice = renderingModal?.nextPrices?.[0];\n  const nextPriceDate = nextPrice?.date;\n  const upgradeStars = renderingModal?.currentUpgradeStars;\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n\n    if (!gift) return;\n\n    if (isPrepaid && gift.prepaidUpgradeHash && renderingRecipient) {\n      if (!upgradeStars) return;\n\n      upgradePrepaidGift({\n        peerId: renderingRecipient.id,\n        hash: gift.prepaidUpgradeHash,\n        stars: upgradeStars,\n      });\n      handleClose();\n      closeGiftInfoModal();\n      return;\n    }\n\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomGiftPreviewAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  const handleOpenPriceInfo = useLastCallback(() => {\n    if (!renderingModal?.prices) return;\n\n    openStarGiftPriceDecreaseInfoModal({\n      prices: renderingModal.prices,\n      currentPrice: upgradeStars || 0,\n      minPrice: renderingModal.minPrice || 0,\n      maxPrice: renderingModal.maxPrice || 0,\n    });\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    preloadGiftAttributeStickers(attributes);\n  }, [renderingModal?.sampleAttributes]);\n\n  const formattedPriceElement = useMemo(() => (upgradeStars ? (\n    <span>\n      <Icon name=\"star\" className=\"star-amount-icon\" />\n      <AnimatedCounter text={lang.number(upgradeStars)} />\n    </span>\n  ) : undefined), [lang, upgradeStars]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes || !isOpen) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const userName = renderingRecipient ? getPeerTitle(lang, renderingRecipient) : lang('ActionFallbackUser');\n\n    const listItemData = (renderingRecipient ? [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftPeerUpgradeUniqueDescription', { user: userName })],\n      ['trade', lang('GiftUpgradeTransferableTitle'),\n        lang('GiftPeerUpgradeTransferableDescription', { user: userName })],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftPeerUpgradeTradeableDescription', { user: userName })],\n    ] : [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ]) satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const hasPriceDecreaseInfo = Boolean(nextPriceDate)\n      && Boolean(renderingModal?.prices?.length)\n      && !gift?.alreadyPaidUpgradeStars;\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            {!isPrepaid && (\n              <Checkbox\n                label={lang('GiftUpgradeKeepDetails')}\n                onCheck={setShouldKeepOriginalDetails}\n                checked={shouldKeepOriginalDetails}\n              />\n            )}\n            <Button className={styles.footerButton} isShiny onClick={handleUpgrade}>\n              <div className={styles.buttonContent}>\n                <div>\n                  {gift.alreadyPaidUpgradeStars\n                    ? lang('GeneralConfirm')\n                    : isPrepaid\n                      ? lang('GiftPayForUpgradeButton', { amount: formattedPriceElement }, { withNodes: true })\n                      : lang('GiftUpgradeButton', { amount: formattedPriceElement }, { withNodes: true })}\n                </div>\n                {hasPriceDecreaseInfo && (\n                  <div className={styles.priceDecreaseTimer}>\n                    {lang('StarGiftPriceDecreaseTimer', {\n                      timer: <TextTimer endsAt={nextPriceDate} onEnd={handleTimerEnd} />,\n                    }, { withNodes: true })}\n                  </div>\n                )}\n              </div>\n            </Button>\n            {hasPriceDecreaseInfo && (\n              <Link\n                className={styles.link}\n                isPrimary\n                onClick={handleOpenPriceInfo}\n              >\n                {lang('StarGiftPriceDecreaseInfoLink', undefined,\n                  { withNodes: true, specialReplacement: getNextArrowReplacement() })}\n              </Link>\n            )}\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, isOpen, lang,\n    renderingRecipient, renderingModal?.gift,\n    shouldKeepOriginalDetails, isPrepaid,\n    renderingModal?.prices?.length,\n    nextPriceDate, formattedPriceElement]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"rCVinZx6\",\"modalContent\":\"MAEILhFp\",\"header\":\"lTDjKYuV\",\"title\":\"_tvAimMQ\",\"description\":\"X88e7g62\",\"finishedBadge\":\"pC_V4Juh\",\"giftName\":\"AwBqE6Vc\",\"footer\":\"kVyu9ZRp\",\"itemsBoughtLink\":\"GwhTY_Uw\",\"itemsBoughtSticker\":\"H4JSQGvw\",\"footerButton\":\"QgTA5Tm_\",\"buttonSubtitle\":\"XV66UlTa\",\"starIcon\":\"Ui25Ac3P\",\"learnMoreLink\":\"xv_0WTej\"};","import {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { TME_LINK_PREFIX } from '../../../../config';\nimport { selectTabState } from '../../../../global/selectors';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatCountdown, formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { HOUR } from '../../../../util/dates/units';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getServerTime } from '../../../../util/serverTime';\nimport {\n  getRandomGiftPreviewAttributes, getStickerFromGift, type GiftPreviewAttributes,\n  preloadGiftAttributeStickers } from '../../../common/helpers/gifts';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport Link from '../../../ui/Link';\nimport MenuItem from '../../../ui/MenuItem';\nimport TextTimer from '../../../ui/TextTimer';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport GiftItemStar from '../GiftItemStar';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftAuctionModal.module.scss';\n\nconst TEXT_TIMER_THRESHOLD = 48 * HOUR;\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionModal'];\n};\n\ntype StateProps = {\n  auctionState?: ApiStarGiftAuctionState;\n};\n\nconst GiftAuctionModal = ({ modal, auctionState }: OwnProps & StateProps) => {\n  const {\n    closeGiftAuctionModal,\n    setGiftModalSelectedGift,\n    openGiftAuctionInfoModal,\n    openGiftAuctionAcquiredModal,\n    openAboutStarGiftModal,\n    showNotification,\n    openChatWithDraft,\n    openUrl,\n    openGiftInMarket,\n  } = getActions();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingAuctionState = useCurrentOrPrev(auctionState);\n\n  const gift = renderingAuctionState?.gift;\n  const state = renderingAuctionState?.state;\n  const userState = renderingAuctionState?.userState;\n  const isFinished = state?.type === 'finished';\n\n  const [previewAttributes, setPreviewAttributes] = useState<GiftPreviewAttributes | undefined>();\n  const shouldUseUniqueHeader = Boolean(gift && state && previewAttributes);\n\n  const uniqueHeaderRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomGiftPreviewAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen) {\n      if (renderingModal?.sampleAttributes) {\n        updatePreviewAttributes();\n      } else {\n        setPreviewAttributes(undefined);\n      }\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    preloadGiftAttributeStickers(attributes);\n  }, [renderingModal?.sampleAttributes]);\n\n  const handleClose = useLastCallback(() => closeGiftAuctionModal());\n\n  const handleLearnMoreClick = useLastCallback(() => {\n    if (!gift) return;\n    openGiftAuctionInfoModal({ auctionGiftId: gift.id });\n  });\n\n  const handleLearnMoreAboutGiftsClick = useLastCallback(() => {\n    openAboutStarGiftModal({});\n  });\n\n  const handleItemsBoughtClick = useLastCallback(() => {\n    if (!gift) return;\n    const giftSticker = getStickerFromGift(gift);\n    openGiftAuctionAcquiredModal({ giftId: gift.id, giftTitle: gift.title, giftSticker });\n  });\n\n  const handleJoinClick = useLastCallback(() => {\n    if (!gift) return;\n    closeGiftAuctionModal({ shouldKeepAuction: true });\n    setGiftModalSelectedGift({ gift });\n  });\n\n  const auctionLink = useMemo(() => {\n    if (!gift?.auctionSlug) return undefined;\n    return `${TME_LINK_PREFIX}auction/${gift.auctionSlug}`;\n  }, [gift]);\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!auctionLink) return;\n    copyTextToClipboard(auctionLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleShareLink = useLastCallback(() => {\n    if (!auctionLink) return;\n    openChatWithDraft({ text: { text: auctionLink } });\n  });\n\n  const handleOpenFragment = useLastCallback(() => {\n    if (state?.type === 'finished' && state.fragmentListedUrl) {\n      openUrl({ url: state.fragmentListedUrl });\n    }\n  });\n\n  const handleOpenTelegramMarket = useLastCallback(() => {\n    if (!gift) return;\n    handleClose();\n    openGiftInMarket({ gift });\n  });\n\n  const uniqueHeader = useMemo(() => {\n    if (!shouldUseUniqueHeader) {\n      return undefined;\n    }\n\n    const giftTitle = gift!.title || lang('StarGift');\n    const badge = isFinished ? lang('GiftAuctionEnded') : lang('GiftAuctionInfoTitle');\n    const subtitle = (\n      <Link className={styles.learnMoreLink} isPrimary onClick={handleLearnMoreAboutGiftsClick}>\n        {lang('GiftAuctionLearnMoreAboutGifts')}\n      </Link>\n    );\n\n    return (\n      <div ref={uniqueHeaderRef}>\n        <UniqueGiftHeader\n          modelAttribute={previewAttributes!.model}\n          backdropAttribute={previewAttributes!.backdrop}\n          patternAttribute={previewAttributes!.pattern}\n          title={giftTitle}\n          badge={badge}\n          subtitle={subtitle}\n        />\n      </div>\n    );\n  }, [shouldUseUniqueHeader, gift, isFinished, lang, previewAttributes, handleLearnMoreAboutGiftsClick]);\n\n  const regularHeader = useMemo(() => {\n    if (!gift || !state || shouldUseUniqueHeader) {\n      return undefined;\n    }\n\n    const giftTitle = gift.title || lang('StarGift');\n    const giftsPerRound = gift.giftsPerRound || 0;\n\n    return (\n      <div className={styles.header}>\n        <GiftItemStar gift={gift} hideBadge noClickable />\n        <h1 className={styles.title}>\n          {giftTitle}\n        </h1>\n        {isFinished ? (\n          <span className={styles.finishedBadge}>{lang('GiftAuctionEnded')}</span>\n        ) : (\n          <p className={styles.description}>\n            {lang('GiftAuctionTopBidders', {\n              count: giftsPerRound,\n              gift: <span className={styles.giftName}>{giftTitle}</span>,\n              link: (\n                <Link isPrimary onClick={handleLearnMoreClick}>\n                  {lang('GiftAuctionLearnMore', undefined,\n                    { withNodes: true })}\n                </Link>\n              ),\n            }, { pluralValue: giftsPerRound, withNodes: true, withMarkdown: true })}\n          </p>\n        )}\n      </div>\n    );\n  }, [gift, state, shouldUseUniqueHeader, isFinished, lang, handleLearnMoreClick]);\n\n  const header = uniqueHeader || regularHeader;\n\n  const modalData = useMemo(() => {\n    if (!gift || !state || !userState) {\n      return undefined;\n    }\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang('GiftAuctionStarted'),\n      formatDateTimeToString(state.startDate * 1000, lang.code, true),\n    ]);\n\n    tableData.push([\n      lang('GiftAuctionEnds'),\n      formatDateTimeToString(state.endDate * 1000, lang.code, true),\n    ]);\n\n    if (gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: lang.number(gift.availabilityTotal),\n        }, { pluralValue: gift.availabilityRemains || 0 }),\n      ]);\n    }\n\n    if (state.type === 'active') {\n      tableData.push([\n        lang('GiftAuctionCurrentRound'),\n        lang('GiftAuctionRoundValue', {\n          current: lang.number(state.currentRound),\n          total: lang.number(state.totalRounds),\n        }),\n      ]);\n    }\n\n    if (isFinished) {\n      tableData.push([\n        lang('GiftAuctionAveragePrice'),\n        formatStarsAsIcon(lang, state.averagePrice, { className: styles.starIcon }),\n      ]);\n    }\n\n    const acquiredCount = userState.acquiredCount;\n    const giftSticker = getStickerFromGift(gift);\n    const auctionTimeLeft = state.endDate - getServerTime();\n    const shouldUseTextTimer = auctionTimeLeft > 0 && auctionTimeLeft < TEXT_TIMER_THRESHOLD;\n\n    const canBuyOnFragment = state.type === 'finished'\n      && Boolean(state.fragmentListedUrl && state.fragmentListedCount);\n    const canBuyOnTelegram = state.type === 'finished' && Boolean(state.listedCount);\n\n    const footer = (\n      <div className={styles.footer}>\n        {acquiredCount > 0 && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleItemsBoughtClick}>\n            {lang('GiftAuctionItemsBought', {\n              count: acquiredCount,\n              gift: giftSticker && (\n                <AnimatedIconFromSticker\n                  className={styles.itemsBoughtSticker}\n                  sticker={giftSticker}\n                  size={20}\n                  play={false}\n                />\n              ),\n            }, { pluralValue: acquiredCount, withNodes: true })}\n          </Link>\n        )}\n        {canBuyOnFragment && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleOpenFragment}>\n            {lang('GiftAuctionForSaleOnFragment', {\n              count: giftSticker ? (\n                <>\n                  {lang.number(state.fragmentListedCount!)}\n                  <AnimatedIconFromSticker\n                    className={styles.itemsBoughtSticker}\n                    sticker={giftSticker}\n                    size={20}\n                    play={false}\n                  />\n                </>\n              ) : lang.number(state.fragmentListedCount!),\n            }, { withNodes: true })}\n          </Link>\n        )}\n        {canBuyOnTelegram && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleOpenTelegramMarket}>\n            {lang('GiftAuctionForSaleOnTelegram', {\n              count: giftSticker ? (\n                <>\n                  {lang.number(state.listedCount!)}\n                  <AnimatedIconFromSticker\n                    className={styles.itemsBoughtSticker}\n                    sticker={giftSticker}\n                    size={20}\n                    play={false}\n                  />\n                </>\n              ) : lang.number(state.listedCount!),\n            }, { withNodes: true })}\n          </Link>\n        )}\n        <Button\n          noForcedUpperCase\n          className={styles.footerButton}\n          onClick={isFinished ? handleClose : handleJoinClick}\n        >\n          {isFinished ? lang('OK') : (\n            <div>\n              <div>\n                {lang('GiftAuctionJoin')}\n              </div>\n              {auctionTimeLeft > 0 && (\n                <div className={styles.buttonSubtitle}>\n                  {lang('GiftAuctionTimeLeft', {\n                    time: shouldUseTextTimer\n                      ? <TextTimer endsAt={state.endDate} />\n                      : formatCountdown(lang, auctionTimeLeft),\n                  }, { withNodes: true })}\n                </div>\n              )}\n            </div>\n          )}\n        </Button>\n      </div>\n    );\n\n    return {\n      tableData,\n      footer,\n    };\n  }, [gift, state, userState, isFinished, lang, handleJoinClick, handleItemsBoughtClick, handleClose,\n    handleOpenFragment, handleOpenTelegramMarket]);\n\n  const moreMenuItems = useMemo(() => {\n    if (!shouldUseUniqueHeader) return undefined;\n\n    return (\n      <>\n        <MenuItem icon=\"info\" onClick={handleLearnMoreClick}>\n          {lang('GiftAuctionLearnMoreMenuItem')}\n        </MenuItem>\n        <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n          {lang('CopyLink')}\n        </MenuItem>\n        <MenuItem icon=\"forward\" onClick={handleShareLink}>\n          {lang('Share')}\n        </MenuItem>\n      </>\n    );\n  }, [shouldUseUniqueHeader, lang, handleLearnMoreClick, handleCopyLink, handleShareLink]);\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      header={header}\n      footer={modalData?.footer}\n      tableData={modalData?.tableData}\n      className={styles.modal}\n      contentClassName={styles.modalContent}\n      closeButtonColor={shouldUseUniqueHeader ? 'translucent-white' : undefined}\n      moreMenuItems={moreMenuItems}\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionModal?.auctionGiftId;\n    return {\n      auctionState: auctionGiftId\n        ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined,\n    };\n  },\n)(GiftAuctionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"FbamIaWM\",\"headerControlPanel\":\"oKcR_Gxv\",\"slider\":\"lpcp8Oip\",\"title\":\"jNHNh7KT\",\"subtitle\":\"HlVun4XF\",\"infoCards\":\"K9fWcZP0\",\"infoCard\":\"QBcr61z8\",\"infoCardValue\":\"S9vK5Tny\",\"infoCardLabel\":\"UzCztm_V\",\"separator\":\"eCFcDThE\",\"winningStatus\":\"IENM5upL\",\"bidderInfoSlide\":\"VvFvniw8\",\"winningText\":\"mHlgX1Lm\",\"winningBadge\":\"yWQ_64QE\",\"section\":\"VfdOWkWu\",\"sectionTitle\":\"aJxJv1Tj\",\"sectionTitleTransition\":\"I344VxP8\",\"bidderRow\":\"_6493YZ5\",\"bidderPosition\":\"bjYqFB3Y\",\"bidderInfo\":\"MSwHwQYX\",\"bidderName\":\"StE9kpcQ\",\"topBidderRow\":\"Q0o2Mlnj\",\"topBidderPosition\":\"mQa4yF_w\",\"bidderAmount\":\"jTHhbapk\",\"buttonStar\":\"eY_4yHis\",\"giftSticker\":\"ETmmzDXX\",\"customBidInput\":\"KRqfUs0J\",\"customBidInputIcon\":\"m1O8A6wT\"};","import { memo, useEffect, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAuctionState,\n  ApiStarsAmount,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectPeer, selectTabState } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getBidAuctionPosition } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\n\nimport { useTransitionActiveKey } from '../../../../hooks/animations/useTransitionActiveKey';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedCounter from '../../../common/AnimatedCounter';\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\nimport TextTimer from '../../../ui/TextTimer';\nimport Transition from '../../../ui/Transition';\nimport StarSlider from '../../paidReaction/StarSlider';\nimport BalanceBlock from '../../stars/BalanceBlock';\n\nimport styles from './GiftAuctionBidModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionBidModal'];\n};\n\ntype StateProps = {\n  auctionState?: ApiStarGiftAuctionState;\n  starBalance?: ApiStarsAmount;\n  currentUserPeer?: ApiPeer;\n  topBidderIds?: string[];\n};\n\nconst DEFAULT_BID_AMOUNT = 50;\nconst MAX_BID_AMOUNT_STEP = 50000;\nconst MAX_CUSTOM_BID_AMOUNT = 1000000000;\nconst BID_ROUNDING_STEP = 10000;\nconst MIN_SLIDER_PROGRESS = 0.25;\nconst GIFT_STICKER_SIZE = 24;\nconst DEFAULT_TOP_BIDDERS_COUNT = 3;\n\nconst GiftAuctionBidModal = ({\n  modal,\n  auctionState,\n  starBalance,\n  currentUserPeer,\n  topBidderIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftAuctionBidModal, sendStarGiftAuctionBid, loadGiftAuction } = getActions();\n\n  const isOpen = Boolean(modal);\n\n  const renderingAuctionState = useCurrentOrPrev(auctionState);\n  const renderingTopBidderIds = useCurrentOrPrev(topBidderIds);\n\n  const renderingTopBidderPeers = useMemo(() => {\n    if (!renderingTopBidderIds) return undefined;\n    const global = getGlobal();\n    return renderingTopBidderIds\n      .map((id) => selectPeer(global, id))\n      .filter(Boolean);\n  }, [renderingTopBidderIds]);\n\n  const [topBidder1, topBidder2, topBidder3] = renderingTopBidderPeers || [];\n\n  const topBidder1Key = useTransitionActiveKey([topBidder1?.id || '0']);\n  const topBidder2Key = useTransitionActiveKey([topBidder2?.id || '0']);\n  const topBidder3Key = useTransitionActiveKey([topBidder3?.id || '0']);\n\n  const giftsPerRound = renderingAuctionState?.gift.giftsPerRound || 0;\n\n  const lang = useLang();\n\n  const activeState = renderingAuctionState?.state.type === 'active'\n    ? renderingAuctionState.state\n    : undefined;\n  const userState = renderingAuctionState?.userState;\n\n  const [selectedBidAmount, setSelectedBidAmount] = useState(DEFAULT_BID_AMOUNT);\n  const [isCustomBidModalOpen, openCustomBidModal, closeCustomBidModal] = useFlag();\n  const [customBidValue, setCustomBidValue] = useState('');\n\n  const baseMinBid = activeState?.minBidAmount || DEFAULT_BID_AMOUNT;\n\n  const currentMinBid = userState?.minBidAmount || baseMinBid;\n\n  const sliderMaxValue = Math.ceil(currentMinBid / BID_ROUNDING_STEP) * BID_ROUNDING_STEP + MAX_BID_AMOUNT_STEP;\n\n  useEffect(() => {\n    setSelectedBidAmount(currentMinBid);\n  }, [currentMinBid]);\n\n  const nextRoundAt = activeState?.nextRoundAt;\n\n  const bidDifference = userState?.bidAmount ? selectedBidAmount - userState.bidAmount : 0;\n  const isAtMaxValue = selectedBidAmount >= sliderMaxValue;\n\n  const sliderSecondaryText = useMemo(() => {\n    if (isAtMaxValue) return lang('GiftAuctionTapToBidMore');\n    if (bidDifference <= 0) return undefined;\n    return (\n      <>\n        +\n        <AnimatedCounter text={lang.number(bidDifference)} />\n      </>\n    );\n  }, [bidDifference, isAtMaxValue, lang]);\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setSelectedBidAmount(value);\n  });\n\n  const handleTimerEnd = useLastCallback(() => {\n    if (!modal?.auctionGiftId || !isOpen) return;\n    loadGiftAuction({ giftId: modal.auctionGiftId });\n  });\n\n  const handleRequestCustomValue = useLastCallback(() => {\n    openCustomBidModal();\n  });\n\n  const handleBadgeClick = useLastCallback(() => {\n    if (isAtMaxValue) {\n      handleRequestCustomValue();\n    }\n  });\n\n  const handleCustomBidChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/\\D/g, '');\n    const numValue = Number(value);\n    if (numValue > MAX_CUSTOM_BID_AMOUNT) return;\n    setCustomBidValue(value);\n  });\n\n  const handleCustomBidSubmit = useLastCallback(() => {\n    if (!renderingAuctionState?.gift.id || !modal) return;\n\n    const resultValue = Number(customBidValue);\n    if (resultValue < currentMinBid) return;\n\n    setSelectedBidAmount(resultValue);\n    closeCustomBidModal();\n\n    setCustomBidValue('');\n\n    const { peerId, message, shouldHideName } = modal;\n    const isUpdateBid = Boolean(userState?.bidAmount);\n\n    sendStarGiftAuctionBid({\n      giftId: renderingAuctionState.gift.id,\n      bidAmount: resultValue,\n      peerId,\n      message: message ? { text: message } : undefined,\n      shouldHideName,\n      isUpdateBid,\n    });\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (!renderingAuctionState?.gift.id || !modal) return;\n    const { peerId, message, shouldHideName } = modal;\n    const isUpdateBid = Boolean(userState?.bidAmount);\n\n    sendStarGiftAuctionBid({\n      giftId: renderingAuctionState.gift.id,\n      bidAmount: selectedBidAmount,\n      peerId,\n      message: message ? { text: message } : undefined,\n      shouldHideName,\n      isUpdateBid,\n    });\n  });\n\n  const userPosition = useMemo(() => {\n    if (!selectedBidAmount || !activeState?.bidLevels?.length) return undefined;\n\n    const { bidLevels } = activeState;\n    const userBidDate = userState?.bidDate || Number.MAX_SAFE_INTEGER;\n\n    return getBidAuctionPosition(selectedBidAmount, userBidDate, bidLevels);\n  }, [selectedBidAmount, activeState, userState?.bidDate]);\n\n  function renderInfoCards() {\n    return (\n      <div className={styles.infoCards}>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(currentMinBid)}\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionMinimumBid')}</div>\n        </div>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <TextTimer endsAt={nextRoundAt || 0} shouldShowZeroOnEnd onEnd={handleTimerEnd} />\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionUntilNextRound')}</div>\n        </div>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <AnimatedIconFromSticker\n              noLoop={false}\n              className={styles.giftSticker}\n              sticker={renderingAuctionState?.gift.sticker}\n              size={GIFT_STICKER_SIZE}\n            />\n            {lang.number(activeState?.giftsLeft || 0)}\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionLeft')}</div>\n        </div>\n      </div>\n    );\n  }\n\n  const isWinning = Boolean(userState?.bidAmount && userPosition && userPosition <= giftsPerRound);\n\n  function renderCurrentBidSectionTitle() {\n    const giftTitle = renderingAuctionState?.gift.title || lang('StarGift');\n    const nextGiftNum = userPosition && userPosition <= 100\n      ? (activeState?.lastGiftNum || 0) + userPosition\n      : undefined;\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={isWinning ? 0 : 1}\n        className={styles.sectionTitleTransition}\n        slideClassName={styles.bidderInfoSlide}\n      >\n        {isWinning ? (\n          <div className={styles.winningStatus}>\n            <span className={styles.winningText}>{lang('GiftAuctionYoureWinning')}</span>\n            <span className={styles.winningBadge}>\n              {lang('GiftUnique', { title: giftTitle, number: nextGiftNum ? lang.number(nextGiftNum) : undefined })}\n            </span>\n          </div>\n        ) : (\n          <div className={styles.sectionTitle}>{lang('GiftAuctionYourBidWillBe')}</div>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderUserBid() {\n    return (\n      <div className={styles.section}>\n        {renderCurrentBidSectionTitle()}\n        <div className={styles.bidderRow}>\n          <div className={styles.bidderPosition}>\n            {userPosition && userPosition > 100 ? `${userPosition}+` : (userPosition || 1)}\n          </div>\n          <div className={styles.bidderInfo}>\n            {currentUserPeer && <Avatar peer={currentUserPeer} size=\"small\" />}\n            {currentUserPeer && <FullNameTitle peer={currentUserPeer} className={styles.bidderName} />}\n          </div>\n          <div className={styles.bidderAmount}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(selectedBidAmount)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTopBidderRow(\n    index: number,\n    emoji: string,\n    peer: ApiPeer | undefined,\n    amount: number | undefined,\n    activeKey: number,\n  ) {\n    return (\n      <div className={styles.topBidderRow} key={index}>\n        <div className={styles.topBidderPosition}>\n          {renderText(emoji, ['emoji'])}\n        </div>\n        <Transition\n          name=\"fade\"\n          activeKey={activeKey}\n          className={styles.bidderInfo}\n          slideClassName={styles.bidderInfoSlide}\n        >\n          {peer && (\n            <>\n              <Avatar peer={peer} size=\"small\" />\n              <FullNameTitle peer={peer} className={styles.bidderName} />\n            </>\n          )}\n        </Transition>\n        {amount !== undefined && (\n          <div className={styles.bidderAmount}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(amount)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderTopWinners() {\n    const topCount = DEFAULT_TOP_BIDDERS_COUNT;\n    const bidLevels = activeState?.bidLevels;\n\n    return (\n      <div className={styles.section}>\n        <div className={styles.sectionTitle}>\n          {lang('GiftAuctionTopWinners', { count: topCount }, { pluralValue: topCount })}\n        </div>\n        {renderTopBidderRow(0, '', topBidder1, bidLevels?.[0]?.amount, topBidder1Key)}\n        {renderTopBidderRow(1, '', topBidder2, bidLevels?.[1]?.amount, topBidder2Key)}\n        {renderTopBidderRow(2, '', topBidder3, bidLevels?.[2]?.amount, topBidder3Key)}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      contentClassName={styles.content}\n      onClose={closeGiftAuctionBidModal}\n      isLowStackPriority\n    >\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={currentMinBid}\n        minValue={baseMinBid}\n        minAllowedValue={currentMinBid}\n        minAllowedProgress={MIN_SLIDER_PROGRESS}\n        maxValue={sliderMaxValue}\n        floatingBadgeDescription={sliderSecondaryText}\n        onChange={handleAmountChange}\n        onBadgeClick={handleBadgeClick}\n        onCustomValueClick={handleRequestCustomValue}\n        shouldUseDynamicColor\n        shouldAllowCustomValue\n      />\n\n      <h3 className={styles.title}>{lang('GiftAuctionPlaceBid')}</h3>\n      {renderInfoCards()}\n\n      {renderUserBid()}\n      {renderTopWinners()}\n\n      <Button noForcedUpperCase onClick={handleSubmit}>\n        {lang(userState?.bidAmount ? 'GiftAuctionAddToBid' : 'GiftAuctionPlaceBidButton', {\n          amount: formatStarsAsIcon(lang,\n            userState?.bidAmount ? selectedBidAmount - userState.bidAmount : selectedBidAmount,\n            { asFont: true, className: styles.buttonStar }),\n        }, { withNodes: true })}\n      </Button>\n      <ConfirmDialog\n        isOpen={isCustomBidModalOpen}\n        title={lang('GiftAuctionCustomBidTitle')}\n        confirmLabel={lang('GiftAuctionCustomBidButton')}\n        isConfirmDisabled={!customBidValue || Number(customBidValue) < currentMinBid}\n        confirmHandler={handleCustomBidSubmit}\n        onClose={closeCustomBidModal}\n      >\n        <p>{lang('GiftAuctionCustomBidDescription', { count: renderingAuctionState?.gift.giftsPerRound })}</p>\n        <div className={styles.customBidInput}>\n          <StarIcon type=\"gold\" size=\"adaptive\" className={styles.customBidInputIcon} />\n          <InputText\n            value={customBidValue}\n            onChange={handleCustomBidChange}\n            placeholder={lang('GiftAuctionCustomBidPlaceholder')}\n            inputMode=\"numeric\"\n            teactExperimentControlled\n          />\n        </div>\n      </ConfirmDialog>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { stars, currentUserId } = global;\n    const { giftAuctionBidModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionBidModal?.auctionGiftId;\n    const giftAuction = auctionGiftId\n      ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined;\n\n    const currentUserPeer = currentUserId ? selectPeer(global, currentUserId) : undefined;\n\n    const topBidderIds = giftAuction?.state.type === 'active'\n      ? giftAuction.state.topBidders\n      : undefined;\n\n    return {\n      auctionState: giftAuction,\n      starBalance: stars?.balance,\n      currentUserPeer,\n      topBidderIds,\n    };\n  },\n)(GiftAuctionBidModal));\n","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectTabState } from '../../../../global/selectors';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftAuctionInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionInfoModal'];\n};\n\ntype StateProps = {\n  giftAuction?: ApiStarGiftAuctionState;\n};\n\nconst GiftAuctionInfoModal = ({\n  modal,\n  giftAuction,\n}: OwnProps & StateProps) => {\n  const { closeGiftAuctionInfoModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal && giftAuction);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftAuctionInfoModal();\n  });\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div className={styles.iconWrapper}>\n          <Icon name=\"auction-filled\" className={styles.icon} />\n        </div>\n        <div className={styles.title}>\n          {lang('GiftAuctionInfoTitle')}\n        </div>\n        <div className={styles.subtitle}>\n          {lang('GiftAuctionInfoSubtitle')}\n        </div>\n      </div>\n    );\n  }, [lang]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n          onClick={handleClose}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  const listItemData = useMemo(() => {\n    const count = giftAuction?.gift.giftsPerRound || 0;\n    return [\n      ['auction-drop', lang('GiftAuctionInfoTopBiddersTitle', { count }, { pluralValue: count }),\n        lang('GiftAuctionInfoTopBiddersSubtitle', { count }, { pluralValue: count })],\n      ['auction-next-round', lang('GiftAuctionInfoBidCarryoverTitle'),\n        lang('GiftAuctionInfoBidCarryoverSubtitle', { count })],\n      ['stars-refund', lang('GiftAuctionInfoMissedBiddersTitle'),\n        lang('GiftAuctionInfoMissedBiddersSubtitle')],\n    ] satisfies TableAboutData;\n  }, [lang, giftAuction]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionInfoModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionInfoModal?.auctionGiftId;\n    return {\n      giftAuction: auctionGiftId\n        ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined,\n    };\n  },\n)(GiftAuctionInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"BYvGxmfu\",\"iconWrapper\":\"X5HEn2ho\",\"icon\":\"aiSlk9Zw\",\"title\":\"obG607lY\",\"subtitle\":\"wKo4cuID\",\"footer\":\"M_SnCV2j\",\"understoodIcon\":\"OQCwJP3j\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"Pz3wJVwI\",\"content\":\"vBYqMeRD\",\"giftsListContainer\":\"Ly9mKtg2\",\"giftsList\":\"lla9jO09\",\"giftHeader\":\"TuVkgxwZ\",\"bidValue\":\"zdUvUfOO\",\"badge\":\"btuWuz25\",\"starIcon\":\"GRggVFef\",\"okButton\":\"kIsP2W0m\"};","import { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionAcquiredGift, ApiSticker } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectTabState } from '../../../../global/selectors';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useScrollNotch from '../../../../hooks/useScrollNotch';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport BadgeButton from '../../../common/BadgeButton';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport TableInfo, { type TableData } from '../../common/TableInfo';\n\nimport styles from './GiftAuctionAcquiredModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionAcquiredModal'];\n};\n\ntype StateProps = {\n  acquiredGifts?: ApiStarGiftAuctionAcquiredGift[];\n  giftTitle?: string;\n  giftSticker?: ApiSticker;\n};\n\nconst GiftAuctionAcquiredModal = ({ modal, acquiredGifts, giftTitle, giftSticker }: OwnProps & StateProps) => {\n  const { closeGiftAuctionAcquiredModal } = getActions();\n\n  const containerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal?.giftId);\n  const renderingGifts = useCurrentOrPrev(acquiredGifts);\n  const renderingGiftTitle = useCurrentOrPrev(giftTitle);\n  const renderingGiftSticker = useCurrentOrPrev(giftSticker);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftAuctionAcquiredModal();\n  });\n\n  const giftItems = useMemo(() => {\n    if (!renderingGifts?.length) return undefined;\n\n    return renderingGifts.map((gift) => {\n      const header = lang('GiftAuctionBoughtGiftHeader', {\n        gift: renderingGiftTitle || lang('StarGift'),\n        giftNumber: gift.giftNumber ? lang.number(gift.giftNumber) : '',\n        round: lang.number(gift.round),\n      });\n\n      const tableData: TableData = [\n        [undefined, (\n          <span className={styles.giftHeader}>\n            {renderingGiftSticker && (\n              <AnimatedIconFromSticker\n                className={styles.giftSticker}\n                sticker={renderingGiftSticker}\n                size={20}\n                play={false}\n              />\n            )}\n            <span>{header}</span>\n          </span>\n        )],\n        [lang('GiftAuctionRecipient'), { chatId: gift.peerId }],\n        [lang('GiftAuctionDate'), formatDateTimeToString(gift.date * 1000, lang.code, true)],\n        [lang('GiftAuctionAcceptedBid'), (\n          <span className={styles.bidValue}>\n            {formatStarsAsIcon(lang, gift.bidAmount, { className: styles.starIcon })}\n            <BadgeButton className={styles.badge}>\n              {lang('GiftAuctionTopPosition', { position: gift.position })}\n            </BadgeButton>\n          </span>\n        )],\n      ];\n\n      return { tableData, key: `${gift.round}-${gift.giftNumber}` };\n    });\n  }, [renderingGifts, renderingGiftTitle, renderingGiftSticker, lang]);\n\n  const giftsCount = renderingGifts?.length || 0;\n\n  useScrollNotch({\n    containerRef,\n    selector: `.${styles.giftsList}`,\n    isBottomNotch: true,\n  }, [giftItems]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      title={lang('GiftAuctionBoughtGiftsTitle', { count: giftsCount }, { pluralValue: giftsCount })}\n      className={styles.modal}\n      contentClassName={styles.content}\n      onClose={handleClose}\n      isCondensedHeader\n      isSlim\n    >\n      <div className={styles.giftsListContainer} ref={containerRef}>\n        <div className={styles.giftsList}>\n          {giftItems?.map((item) => (\n            <TableInfo key={item.key} tableData={item.tableData} />\n          ))}\n        </div>\n      </div>\n      <Button className={styles.okButton} onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionAcquiredModal } = selectTabState(global);\n\n    return {\n      acquiredGifts: giftAuctionAcquiredModal?.acquiredGifts,\n      giftTitle: giftAuctionAcquiredModal?.giftTitle,\n      giftSticker: giftAuctionAcquiredModal?.giftSticker,\n    };\n  },\n)(GiftAuctionAcquiredModal));\n","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport TransferBetweenPeers from '../../../common/TransferBetweenPeers';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionChangeRecipientModal'];\n};\n\ntype StateProps = {\n  oldPeer?: ApiPeer;\n  newPeer?: ApiPeer;\n};\n\nconst GiftAuctionChangeRecipientModal = ({ modal, oldPeer, newPeer }: OwnProps & StateProps) => {\n  const { closeGiftAuctionChangeRecipientModal, openGiftAuctionBidModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingOldPeer = useCurrentOrPrev(oldPeer);\n  const renderingNewPeer = useCurrentOrPrev(newPeer);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.auctionGiftId) return;\n\n    closeGiftAuctionChangeRecipientModal();\n    openGiftAuctionBidModal({\n      auctionGiftId: renderingModal.auctionGiftId,\n      peerId: renderingModal.newPeerId,\n      message: renderingModal.message,\n      shouldHideName: renderingModal.shouldHideName,\n    });\n  });\n\n  if (!renderingOldPeer || !renderingNewPeer) return undefined;\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('GiftAuctionChangeRecipientTitle')}\n      onClose={closeGiftAuctionChangeRecipientModal}\n      confirmLabel={lang('Continue')}\n      confirmHandler={handleConfirm}\n    >\n      <TransferBetweenPeers fromPeer={renderingOldPeer} toPeer={renderingNewPeer} />\n      <p>\n        {lang('GiftAuctionChangeRecipientDescription', {\n          oldPeer: getPeerTitle(lang, renderingOldPeer),\n          newPeer: getPeerTitle(lang, renderingNewPeer),\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const oldPeer = modal?.oldPeerId ? selectPeer(global, modal.oldPeerId) : undefined;\n    const newPeer = modal?.newPeerId ? selectPeer(global, modal.newPeerId) : undefined;\n\n    return {\n      oldPeer,\n      newPeer,\n    };\n  })(GiftAuctionChangeRecipientModal),\n);\n","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport Button from '../../ui/Button';\nimport TableInfoModal, { type TableData } from '../common/TableInfoModal';\n\nimport styles from './StarGiftPriceDecreaseInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starGiftPriceDecreaseInfoModal'];\n};\n\nconst StarGiftPriceDecreaseInfoModal = ({ modal }: OwnProps) => {\n  const { closeStarGiftPriceDecreaseInfoModal } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleClose = useLastCallback(() => {\n    closeStarGiftPriceDecreaseInfoModal();\n  });\n\n  const tableData = useMemo(() => {\n    if (!renderingModal) return undefined;\n    const { prices } = renderingModal;\n    return prices.map((price): TableData[number] => [\n      formatDateTimeToString(price.date * 1000, lang.code, true, undefined, true),\n      formatStarsAsIcon(lang, price.upgradeStars, { containerClassName: styles.starIconContainer }),\n    ]);\n  }, [lang, renderingModal]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <p className={styles.footerText}>{lang('UpgradeCostDrops')}</p>\n        <Button\n          onClick={handleClose}\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  if (!tableData || !renderingModal) return undefined;\n\n  const { currentPrice, minPrice, maxPrice } = renderingModal;\n  const progress = maxPrice !== minPrice ? (currentPrice - minPrice) / (maxPrice - minPrice) : 0;\n\n  const header = (\n    <div className={styles.header}>\n      <PremiumProgress\n        leftText={formatStarsAsText(lang, maxPrice)}\n        rightText={formatStarsAsText(lang, minPrice)}\n        floatingBadgeText={formatStarsAsText(lang, currentPrice)}\n        floatingBadgeIcon=\"star\"\n        progress={progress}\n        isInverted\n        shouldSkipGradient\n        className={styles.progress}\n      />\n      <p className={styles.headerTitle}>{lang('StarGiftUpgradeCostModalTitle')}</p>\n      <p className={styles.headerHint}>{lang('StarGiftUpgradeCostHint')}</p>\n    </div>\n  );\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      onClose={handleClose}\n      header={header}\n      tableData={tableData}\n      tableClassName={buildClassName(styles.table, 'custom-scroll')}\n      footer={footer}\n    />\n  );\n};\n\nexport default memo(StarGiftPriceDecreaseInfoModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"ETFjTQkC\",\"headerTitle\":\"JKYZ8cFl\",\"headerHint\":\"wHxufgix\",\"starIconContainer\":\"NEElQBO6\",\"progress\":\"DJPf4ekd\",\"table\":\"WuL_UIYd\",\"footerText\":\"TWuxZcHO\",\"footer\":\"OXLUuiYb\",\"understoodIcon\":\"QJryEH9W\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"kSwGxZvD\",\"content\":\"rGPBNoZR\",\"videoPreviewWrapper\":\"e4SGnYtk\",\"sparkles\":\"wYp9XwdI\",\"title\":\"CMt0et4C\",\"subtitle\":\"exd4nt_X\",\"footer\":\"hx2wl4Ar\",\"understoodIcon\":\"qegJKhEH\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Sparkles from '../../common/Sparkles';\nimport PremiumFeaturePreviewVideo from '../../main/premium/previews/PremiumFeaturePreviewVideo';\nimport Button from '../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../common/TableAboutModal';\n\nimport styles from './AboutStarGiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['aboutStarGiftModal'];\n};\n\nconst AboutStarGiftModal = ({\n  modal,\n}: OwnProps) => {\n  const { closeAboutStarGiftModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleClose = useLastCallback(() => {\n    closeAboutStarGiftModal();\n  });\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div className={styles.videoPreviewWrapper}>\n          <Sparkles preset=\"progress\" className={styles.sparkles} />\n          <PremiumFeaturePreviewVideo\n            videoId={renderingModal?.videoId}\n            videoThumbnail={renderingModal?.videoThumbnail}\n            isActive={isOpen}\n            isDown\n          />\n        </div>\n        <div className={styles.title}>\n          {lang('StarGiftInfoTitle')}\n        </div>\n        <div className={styles.subtitle}>\n          {lang('StarGiftInfoSubtitle')}\n        </div>\n      </div>\n    );\n  }, [lang, renderingModal, isOpen]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n          onClick={handleClose}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  const listItemData = useMemo(() => {\n    return [\n      ['diamond', lang('StarGiftInfoUniqueTitle'), lang('StarGiftInfoUniqueSubtitle')],\n      ['auction', lang('StarGiftInfoTradableTitle'), lang('StarGiftInfoTradableSubtitle')],\n      ['crown-wear-outline', lang('StarGiftInfoWearableTitle'), lang('StarGiftInfoWearableSubtitle')],\n    ] satisfies TableAboutData;\n  }, [lang]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      contentClassName={styles.content}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop={Boolean(renderingModal?.videoId)}\n      absoluteCloseButtonColor=\"translucent-white\"\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(AboutStarGiftModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"qL0cHbwS\",\"profileBlock\":\"t18QCmAb\",\"radialPattern\":\"_1RfhkfB\",\"lockIcon\":\"jiPObOWv\",\"avatar\":\"JK2zOWA7\",\"userTitle\":\"lxxbgNCl\",\"status\":\"MLMdxkUg\",\"giftTitle\":\"wxg_5ou_\",\"infoDescription\":\"KSCLIMZm\",\"footer\":\"VDrvalBo\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectIsCurrentUserPremium, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useAppLayout from '../../../../hooks/useAppLayout';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useCustomEmoji from '../../../common/hooks/useCustomEmoji';\n\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport Icon from '../../../common/icons/Icon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftStatusInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftStatusInfoModal'];\n};\n\ntype StateProps = {\n  currentUser: ApiUser;\n  isCurrentUserPremium?: boolean;\n};\n\nconst AVATAR_SIZE = 7 * REM;\n\nconst GiftStatusInfoModal = ({\n  modal,\n  currentUser,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftStatusInfoModal,\n    setEmojiStatus,\n  } = getActions();\n  const lang = useLang();\n  const { isMobile } = useAppLayout();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const { emojiStatus } = renderingModal || {};\n\n  const subtitleColor = emojiStatus?.textColor;\n\n  const patternIcon = useCustomEmoji(emojiStatus?.patternDocumentId);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftStatusInfoModal();\n  });\n\n  const onWearClick = useLastCallback(() => {\n    if (emojiStatus) {\n      setEmojiStatus({ emojiStatus });\n    }\n    closeGiftStatusInfoModal();\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    if (!emojiStatus || !isOpen) return undefined;\n\n    const backdropColors = [emojiStatus.centerColor, emojiStatus.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternIcon={patternIcon.customEmoji}\n        yPosition={6.875 * REM}\n        maxRadius={0.31}\n        patternSize={isMobile ? 13 : 15}\n        ovalFactor={1}\n      />\n    );\n  }, [emojiStatus, isOpen, isMobile, patternIcon]);\n\n  const mockPeerWithStatus = useMemo(() => {\n    return {\n      ...currentUser,\n      emojiStatus,\n    } satisfies ApiUser;\n  }, [currentUser, emojiStatus]);\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div\n          className={buildClassName(styles.profileBlock)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n        >\n\n          {radialPatternBackdrop}\n          <Avatar peer={mockPeerWithStatus} size={AVATAR_SIZE} className={styles.avatar} />\n          <FullNameTitle\n            peer={mockPeerWithStatus}\n            className={styles.userTitle}\n            withEmojiStatus\n            noFake\n            noVerified\n          />\n          <p className={styles.status} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n            {lang('Online')}\n          </p>\n        </div>\n        <div className={styles.giftTitle}>\n          {lang('UniqueStatusWearTitle', {\n            gift: mockPeerWithStatus?.emojiStatus?.title,\n          })}\n        </div>\n        <div className={styles.infoDescription}>\n          {lang('UniqueStatusBenefitsDescription')}\n        </div>\n      </div>\n    );\n  }, [subtitleColor, radialPatternBackdrop, mockPeerWithStatus, lang]);\n\n  const listItemData = [\n    ['radial-badge', lang('UniqueStatusBadgeBenefitTitle'), lang('UniqueStatusBadgeDescription')],\n    ['unique-profile', lang('UniqueStatusProfileDesignBenefitTitle'), lang('UniqueStatusProfileDesignDescription')],\n    ['proof-of-ownership', lang('UniqueStatusProofOfOwnershipBenefitTitle'),\n      lang('UniqueStatusProofOfOwnershipDescription')],\n  ] satisfies TableAboutData;\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          onClick={onWearClick}\n        >\n          {lang('UniqueStatusWearButton')}\n          {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n        </Button>\n      </div>\n    );\n  }, [lang, isCurrentUserPremium, isOpen]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const currentUser = selectUser(global, global.currentUserId!)!;\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      currentUser,\n      isCurrentUserPremium,\n    };\n  },\n)(GiftStatusInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"LQgz8Nlx\",\"giftPreview\":\"hgs0ts_O\",\"backdrop\":\"OnBhMaBw\",\"description\":\"HBxB4QPY\",\"arrow\":\"kXTOUpfb\",\"noPassword\":\"BnqLhoKr\"};","import {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { type CustomPeer, SettingsScreens } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const {\n    closeGiftWithdrawModal,\n    clearGiftWithdrawError,\n    closeGiftInfoModal,\n    processStarGiftWithdrawal,\n    openSettingsScreen,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  const handleSetUpPassword = useLastCallback(() => {\n    openSettingsScreen({\n      screen: SettingsScreens.TwoFaDisabled,\n    });\n    closeGiftWithdrawModal();\n    closeGiftInfoModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      isCondensedHeader\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternIcon={giftAttributes.pattern?.sticker}\n                ringsCount={1}\n                ovalFactor={1}\n                patternSize={12}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && (\n        <>\n          <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>\n          <Button className=\"mt-2\" onClick={handleSetUpPassword}>{lang('SetUp2FA')}</Button>\n        </>\n      )}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          onClearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\nimport type { UniqueCustomPeer } from '../../../../types';\n\nimport { ALL_FOLDER_ID } from '../../../../config';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePeerSearch from '../../../../hooks/usePeerSearch';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferModal'];\n};\n\ntype StateProps = {\n  contactIds?: string[];\n  currentUserId?: string;\n};\n\ntype Categories = 'withdraw';\n\nconst GiftTransferModal = ({\n  modal, contactIds, currentUserId,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftTransferModal,\n    openGiftWithdrawModal,\n    openGiftTransferConfirmModal,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const lang = useLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const orderedChatIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n\n  const sortedLocalIds = useMemo(() => {\n    return unique([\n      ...(contactIds || []),\n      ...(orderedChatIds || []),\n    ]);\n  }, [contactIds, orderedChatIds]);\n\n  const { result: foundIds, currentResultsQuery } = usePeerSearch({\n    query: searchQuery,\n    defaultValue: sortedLocalIds,\n  });\n\n  const isLoading = currentResultsQuery !== searchQuery;\n\n  const categories = useMemo(() => {\n    if (currentResultsQuery) return MEMO_EMPTY_ARRAY;\n\n    return [{\n      type: 'withdraw',\n      isCustomPeer: true,\n      avatarIcon: 'toncoin',\n      peerColorId: 5,\n      title: lang('GiftTransferTON'),\n    }] satisfies UniqueCustomPeer<Categories>[];\n  }, [lang, currentResultsQuery]);\n\n  const handleCategoryChange = useLastCallback((category: Categories) => {\n    if (category !== 'withdraw') return;\n\n    openGiftWithdrawModal({\n      gift: renderingModal!.gift,\n    });\n    closeGiftTransferModal();\n  });\n\n  const displayIds = useMemo(() => {\n    if (isLoading) return MEMO_EMPTY_ARRAY;\n    const global = getGlobal();\n\n    return sortChatIds((foundIds || []).filter((peerId) => (\n      peerId !== currentUserId && selectCanGift(global, peerId)\n    )),\n    false);\n  }, [isLoading, foundIds, currentUserId]);\n\n  const handlePeerSelect = useLastCallback((peerId: string) => {\n    if (!renderingModal?.gift) return;\n\n    openGiftTransferConfirmModal({\n      gift: renderingModal.gift,\n      recipientId: peerId,\n    });\n  });\n\n  return (\n    <PickerModal\n      isOpen={isOpen}\n      onClose={closeGiftTransferModal}\n      title={lang('GiftTransferTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker<Categories>\n        itemIds={displayIds}\n        categories={categories}\n        onSelectedCategoryChange={handleCategoryChange}\n        withDefaultPadding\n        withPeerUsernames\n        isSearchable\n        noScrollRestore\n        isLoading={isLoading}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        onFilterChange={setSearchQuery}\n        onSelectedIdChange={handlePeerSelect}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { contactList, currentUserId } = global;\n\n    return {\n      contactIds: contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(GiftTransferModal));\n","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferConfirmModal'];\n};\n\ntype StateProps = {\n  selectedPeer?: ApiPeer;\n};\n\nconst GiftTransferConfirmModal = ({ modal, selectedPeer }: OwnProps & StateProps) => {\n  const {\n    closeGiftTransferConfirmModal, transferGift, openChat, closeGiftModal, closeGiftTransferModal,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingSelectedPeer = useCurrentOrPrev(selectedPeer);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift || !renderingModal.recipientId) return;\n\n    transferGift({\n      gift: renderingModal.gift.inputGift,\n      recipientId: renderingModal.recipientId,\n      transferStars: renderingModal.gift.transferStars,\n    });\n\n    closeGiftTransferConfirmModal();\n    openChat({ id: renderingModal.recipientId });\n\n    closeGiftModal();\n    closeGiftTransferModal();\n  });\n\n  if (!renderingModal) return undefined;\n\n  const { gift } = renderingModal;\n  const uniqueGift = gift.gift.type === 'starGiftUnique' ? gift.gift : undefined;\n\n  if (!uniqueGift) return undefined;\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      noDefaultTitle\n      onClose={closeGiftTransferConfirmModal}\n      confirmLabel={gift.transferStars\n        ? lang(\n          'GiftTransferConfirmButton',\n          { amount: formatStarsAsIcon(lang, gift.transferStars, { asFont: true }) },\n          { withNodes: true },\n        ) : lang('GiftTransferConfirmButtonFree')}\n      confirmHandler={handleConfirm}\n    >\n      {renderingSelectedPeer && (\n        <GiftTransferPreview\n          peer={renderingSelectedPeer}\n          gift={uniqueGift}\n        />\n      )}\n      <p>\n        {gift.transferStars\n          ? lang('GiftTransferConfirmDescription', {\n            gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n            amount: formatStarsAsText(lang, gift.transferStars),\n            peer: getPeerTitle(lang, renderingSelectedPeer!),\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftTransferConfirmDescriptionFree', {\n            gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n            peer: getPeerTitle(lang, renderingSelectedPeer!),\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n          })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const selectedPeer = modal?.recipientId ? selectPeer(global, modal.recipientId) : undefined;\n\n    return {\n      selectedPeer,\n    };\n  })(GiftTransferConfirmModal),\n);\n","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { renderGiftOriginalInfo } from '../../../common/helpers/giftOriginalInfo';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nimport styles from './GiftDescriptionRemoveModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftDescriptionRemoveModal'];\n};\n\ntype StateProps = {\n  senderPeer?: ApiPeer;\n  recipientPeer?: ApiPeer;\n};\n\nconst GiftDescriptionRemoveModal = ({\n  modal, senderPeer, recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftDescriptionRemoveModal, removeGiftDescription, openChat,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingSenderPeer = useCurrentOrPrev(senderPeer);\n  const renderingRecipientPeer = useCurrentOrPrev(recipientPeer);\n\n  const openChatHandler = useLastCallback((id: string) => {\n    closeGiftDescriptionRemoveModal();\n    openChat({ id });\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift || !renderingModal.price) return;\n\n    removeGiftDescription({\n      gift: renderingModal.gift.inputGift,\n      price: renderingModal.price,\n    });\n  });\n\n  if (!renderingModal || !renderingRecipientPeer) return undefined;\n\n  const { price, details } = renderingModal;\n\n  const description = renderGiftOriginalInfo({\n    originalDetails: details, recipient: renderingRecipientPeer,\n    sender: renderingSenderPeer, onOpenChat: openChatHandler, lang,\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('RemoveGiftDescriptionTitle')}\n      onClose={closeGiftDescriptionRemoveModal}\n      confirmLabel={lang('RemoveGiftDescriptionButton', {\n        amount: formatStarsAsIcon(lang, price, { asFont: true }),\n      }, { withNodes: true })}\n      confirmHandler={handleConfirm}\n    >\n      <div className={styles.confirmText}>{lang('RemoveGiftDescriptionConfirmText')}</div>\n      {Boolean(description) && (\n        <div className={styles.giftDescription}>\n          {description}\n        </div>\n      )}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const senderPeer = modal?.details.senderId ? selectPeer(global, modal.details.senderId) : undefined;\n    const recipientPeer = modal?.details.recipientId ? selectPeer(global, modal.details.recipientId) : undefined;\n\n    return {\n      senderPeer,\n      recipientPeer,\n    };\n  })(GiftDescriptionRemoveModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"confirmText\":\"LVOpBXUW\",\"giftDescription\":\"FA1_yVBY\"};","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"IHwFZk68\",\"receiveText\":\"lh9lMCxr\",\"table\":\"wGrc4H5s\",\"attributeValue\":\"fqgphS0b\",\"warning\":\"YnTd0N6i\",\"hint\":\"IluvaDj9\",\"success\":\"UitlqwUx\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { TON_CURRENCY_CODE } from '../../../../config';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n  selectStarsGiftResaleCommission,\n  selectTonGiftResaleCommission,\n} from '../../../../global/selectors';\nimport { convertTonToUsd, formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport {\n  formatCurrencyAmountAsText, formatStarsAsIcon, formatStarsAsText, formatTonAsIcon, formatTonAsText,\n} from '../../../../util/localization/format';\nimport { round } from '../../../../util/math';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getGiftRarityTitle } from '../../../common/helpers/gifts';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport TableInfo, { type TableData } from '../../common/TableInfo';\n\nimport styles from './GiftOfferAcceptModal.module.scss';\n\nconst PRICE_WARNING_THRESHOLD_PERCENT = 10;\n\nexport type OwnProps = {\n  modal: TabState['giftOfferAcceptModal'];\n};\n\ntype StateProps = {\n  recipientPeer?: ApiPeer;\n  starsCommission?: number;\n  tonCommission?: number;\n  starsUsdRate?: number;\n  tonUsdRate?: number;\n};\n\nconst GiftOfferAcceptModal = ({\n  modal, recipientPeer, starsCommission, tonCommission, starsUsdRate, tonUsdRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftOfferAcceptModal, acceptStarGiftOffer,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingBuyerPeer = useCurrentOrPrev(recipientPeer);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal) return;\n\n    acceptStarGiftOffer({ messageId: renderingModal.messageId });\n    closeGiftOfferAcceptModal();\n  });\n\n  const giftAttributes = useMemo(() => {\n    return renderingModal?.gift && getGiftAttributes(renderingModal.gift);\n  }, [renderingModal?.gift]);\n\n  const isPriceInTon = renderingModal?.price.currency === TON_CURRENCY_CODE;\n  const commission = isPriceInTon ? tonCommission : starsCommission;\n  const priceAmount = renderingModal?.price.amount || 0;\n  const receiveAmount = commission\n    ? (round(priceAmount * commission, isPriceInTon ? 2 : 0))\n    : priceAmount;\n\n  const tableData: TableData = useMemo(() => {\n    if (!giftAttributes) return [];\n\n    const { model, backdrop, pattern } = giftAttributes;\n    const data: TableData = [];\n\n    if (model) {\n      data.push([\n        lang('GiftAttributeModel'),\n        <span className={styles.attributeValue}>\n          <span>{model.name}</span>\n          <BadgeButton>{getGiftRarityTitle(lang, model.rarity)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    if (backdrop) {\n      data.push([\n        lang('GiftAttributeBackdrop'),\n        <span className={styles.attributeValue}>\n          <span>{backdrop.name}</span>\n          <BadgeButton>{getGiftRarityTitle(lang, backdrop.rarity)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    if (pattern) {\n      data.push([\n        lang('GiftAttributeSymbol'),\n        <span className={styles.attributeValue}>\n          <span>{pattern.name}</span>\n          <BadgeButton>{getGiftRarityTitle(lang, pattern.rarity)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    const gift = renderingModal?.gift;\n    if (gift?.valueAmount && gift.valueCurrency) {\n      const formattedValue = formatCurrencyAsString(gift.valueAmount, gift.valueCurrency, lang.code);\n      data.push([\n        lang('GiftInfoValue'),\n        lang('GiftInfoValueAmount', { amount: formattedValue }),\n      ]);\n    }\n\n    return data;\n  }, [giftAttributes, lang, renderingModal?.gift]);\n\n  const priceWarning = useMemo(() => {\n    if (!renderingModal) return undefined;\n\n    const { gift } = renderingModal;\n    const { valueUsdAmount } = gift;\n    if (!valueUsdAmount || valueUsdAmount <= 0 || receiveAmount <= 0) return undefined;\n\n    const avgValueUsd = valueUsdAmount / 100;\n\n    let receiveValueUsd: number;\n    if (isPriceInTon) {\n      if (!tonUsdRate) return undefined;\n      receiveValueUsd = convertTonToUsd(receiveAmount, tonUsdRate, true) / 100;\n    } else {\n      if (!starsUsdRate) return undefined;\n      receiveValueUsd = receiveAmount * starsUsdRate / 100;\n    }\n\n    const isLower = avgValueUsd >= receiveValueUsd;\n    const percent = isLower\n      ? (1 - receiveValueUsd / avgValueUsd) * 100\n      : (receiveValueUsd / avgValueUsd - 1) * 100;\n\n    if (percent <= PRICE_WARNING_THRESHOLD_PERCENT) return undefined;\n\n    return { percent, isLow: isLower };\n  }, [renderingModal, receiveAmount, isPriceInTon, tonUsdRate, starsUsdRate]);\n\n  if (!renderingModal || !renderingBuyerPeer) return undefined;\n\n  const { gift, price } = renderingModal;\n  const giftName = lang('GiftUnique', { title: gift.title, number: gift.number });\n  const buyerName = getPeerTitle(lang, renderingBuyerPeer);\n\n  const formattedPrice = formatCurrencyAmountAsText(lang, price);\n  const formattedReceiveAmountAsText = isPriceInTon\n    ? formatTonAsText(lang, receiveAmount, true)\n    : formatStarsAsText(lang, receiveAmount);\n  const formattedReceiveAmountAsIcon = isPriceInTon\n    ? formatTonAsIcon(lang, receiveAmount, { shouldConvertFromNanos: true })\n    : formatStarsAsIcon(lang, receiveAmount, { asFont: true });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('GiftOfferAcceptTitle')}\n      onClose={closeGiftOfferAcceptModal}\n      confirmLabel={lang('GiftOfferAcceptButton', {\n        amount: formattedReceiveAmountAsIcon,\n      }, { withNodes: true })}\n      confirmHandler={handleConfirm}\n    >\n      <GiftTransferPreview\n        peer={renderingBuyerPeer}\n        gift={gift}\n      />\n      <p className={styles.description}>\n        {lang('GiftOfferAcceptText', {\n          gift: giftName,\n          user: buyerName,\n          price: formattedPrice,\n        }, { withNodes: true, withMarkdown: true })}\n      </p>\n      <p className={styles.receiveText}>\n        {lang('GiftOfferAcceptReceive', {\n          amount: formattedReceiveAmountAsText,\n        }, { withNodes: true, withMarkdown: true })}\n      </p>\n      {Boolean(tableData.length) && (\n        <TableInfo tableData={tableData} className={styles.table} />\n      )}\n      {priceWarning && (\n        <p className={priceWarning.isLow ? styles.warning : styles.success}>\n          {lang(priceWarning.isLow ? 'GiftOfferPriceLow' : 'GiftOfferPriceHigh', {\n            percent: formatPercent(priceWarning.percent, 0),\n            gift: gift.title,\n          }, { withNodes: true, withMarkdown: true })}\n        </p>\n      )}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const recipientPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const starsCommission = selectStarsGiftResaleCommission(global);\n    const tonCommission = selectTonGiftResaleCommission(global);\n\n    const starsUsdSellRateX1000 = global.appConfig?.starsUsdSellRateX1000;\n    const starsUsdRate = starsUsdSellRateX1000 ? starsUsdSellRateX1000 / 1000 : undefined;\n    const tonUsdRate = global.appConfig?.tonUsdRate;\n\n    return {\n      recipientPeer,\n      starsCommission,\n      tonCommission,\n      starsUsdRate,\n      tonUsdRate,\n    };\n  })(GiftOfferAcceptModal),\n);\n","import { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiUser } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectUser } from '../../../../global/selectors';\nimport { formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['chatRefundModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst ChatRefundModal = ({ modal, user }: OwnProps & StateProps) => {\n  const { closeChatRefundModal, toggleNoPaidMessagesException } = getActions();\n\n  const [shouldRefundStars, setShouldRefundStars] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingUser = useCurrentOrPrev(user);\n\n  const { starsToRefund, userId } = renderingModal || {};\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n\n  const handleConfirmRemoveFee = useLastCallback(() => {\n    closeChatRefundModal();\n    if (!userId) return;\n\n    toggleNoPaidMessagesException ({ userId, shouldRefundCharged: shouldRefundStars });\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={closeChatRefundModal}\n      title={lang('RemoveFeeTitle')}\n      confirmLabel={lang('ConfirmRemoveMessageFee')}\n      confirmHandler={handleConfirmRemoveFee}\n    >\n      {lang('ConfirmDialogMessageRemoveFee', {\n        peer: renderingUser && getPeerTitle(lang, renderingUser),\n      }, {\n        withMarkdown: true,\n        withNodes: true,\n      })}\n      {\n        Boolean(starsToRefund) && (\n          <Checkbox\n            className=\"dialog-checkbox\"\n            label={lang('ConfirmDialogRemoveFeeRefundStars', {\n              amount: formatStarsAsText(lang, starsToRefund),\n            }, {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n            checked={shouldRefundStars}\n            onCheck={setShouldRefundStars}\n          />\n        )\n      }\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const user = modal?.userId ? selectUser(global, modal.userId) : undefined;\n\n  return {\n    user,\n  };\n})(ChatRefundModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarsAmount } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { convertTonFromNanos } from '../../../util/formatCurrency';\nimport { formatStarsAsText, formatTonAsText } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\n\nimport ConfirmDialog from '../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['priceConfirmModal'];\n};\n\ntype StateProps = {\n  starBalance?: ApiStarsAmount;\n  tonBalance?: number;\n};\n\nconst PriceConfirmModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starBalance,\n  tonBalance,\n}) => {\n  const actions = getActions();\n\n  const lang = useLang();\n\n  const handleConfirm = useCallback(() => {\n    if (!modal?.directInfo) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    const { currency, newAmount } = modal;\n    const isTon = currency === 'TON';\n    const currentBalance = isTon ? tonBalance : starBalance?.amount;\n\n    if (currentBalance === undefined) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    if (currentBalance < newAmount!) {\n      actions.openStarsBalanceModal({\n        currency: isTon ? 'TON' : 'XTR',\n        tabId: getCurrentTabId(),\n      });\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    actions.sendStarPaymentForm({\n      directInfo: modal.directInfo,\n      tabId: getCurrentTabId(),\n    });\n    actions.closePriceConfirmModal();\n  }, [modal, starBalance, tonBalance, actions]);\n\n  const handleClose = useCallback(() => {\n    actions.closePriceConfirmModal();\n  }, [actions]);\n\n  if (!modal) {\n    return undefined;\n  }\n\n  const {\n    originalAmount,\n    newAmount,\n    currency,\n  } = modal;\n\n  const isTon = currency === 'TON';\n\n  let originalAmountText: string;\n  let newAmountText: string;\n\n  if (isTon) {\n    originalAmountText = formatTonAsText(lang, convertTonFromNanos(originalAmount!));\n    newAmountText = formatTonAsText(lang, convertTonFromNanos(newAmount!));\n  } else {\n    originalAmountText = formatStarsAsText(lang, originalAmount!);\n    newAmountText = formatStarsAsText(lang, newAmount!);\n  }\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(modal)}\n      onClose={handleClose}\n      title={lang('PriceChanged')}\n      confirmHandler={handleConfirm}\n      confirmLabel={lang('PayNewPrice')}\n    >\n      <p>\n        {lang('PriceChangedText', {\n          originalAmount: originalAmountText,\n          newAmount: newAmountText,\n        }, {\n          withMarkdown: true,\n          withNodes: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const starBalance = global.stars?.balance;\n  const tonBalance = global.ton?.balance?.amount;\n\n  return {\n    starBalance,\n    tonBalance,\n  };\n},\n)(PriceConfirmModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"gift\":\"KSVFHEn0\",\"timer\":\"fJGfJQgw\",\"noActive\":\"gx0hMACm\",\"content\":\"DNfpDFqJ\",\"dialog\":\"wrFlN_O8\"};","import { memo, useMemo } from '@teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState, ApiStarGiftAuctionStateActive } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getBidAuctionPosition } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport CustomEmoji from '../../../common/CustomEmoji';\nimport Button from '../../../ui/Button';\nimport ListItem from '../../../ui/ListItem';\nimport Modal from '../../../ui/Modal';\nimport TextTimer from '../../../ui/TextTimer';\n\nimport styles from './ActiveGiftAuctionsModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['activeGiftAuctionsModal'];\n};\n\ntype StateProps = {\n  activeGiftAuctionIds?: string[];\n  giftAuctionByGiftId?: Record<string, ApiStarGiftAuctionState>;\n};\n\nconst ICON_SIZE = 2 * REM;\n\nconst ActiveGiftAuctionsModal = ({\n  modal, activeGiftAuctionIds, giftAuctionByGiftId,\n}: OwnProps & StateProps) => {\n  const { closeActiveGiftAuctionsModal } = getActions();\n  const lang = useLang();\n\n  const activeAuctions = useMemo(() => {\n    return activeGiftAuctionIds?.map((id) => giftAuctionByGiftId?.[id])\n      .filter((auc): auc is ApiStarGiftAuctionState => (\n        auc?.state.type === 'active' && Boolean(auc.userState.bidAmount)\n      ));\n  }, [activeGiftAuctionIds, giftAuctionByGiftId]);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closeActiveGiftAuctionsModal}\n      hasCloseButton\n      isCondensedHeader\n      title={lang('GiftAuctionActiveTitle')}\n      dialogClassName={styles.dialog}\n      contentClassName={styles.content}\n    >\n      {activeAuctions?.length\n        ? activeAuctions.map((auction) => <ActiveAuctionItem key={auction.gift.id} auction={auction} />)\n        : <div className={styles.noActive}>{lang('GiftAuctionNoActive')}</div>}\n    </Modal>\n  );\n};\n\nfunction ActiveAuctionItem({ auction }: { auction: ApiStarGiftAuctionState }) {\n  const lang = useLang();\n  const { openGiftAuctionBidModal, closeActiveGiftAuctionsModal } = getActions();\n\n  const { userState, gift } = auction;\n  const state = auction.state as ApiStarGiftAuctionStateActive;\n\n  const bidPosition = useMemo(() => {\n    return getBidAuctionPosition(userState.bidAmount!, userState.bidDate!, state.bidLevels);\n  }, [userState, state.bidLevels]);\n\n  const handleClick = useLastCallback(() => {\n    openGiftAuctionBidModal({ auctionGiftId: gift.id });\n    closeActiveGiftAuctionsModal();\n  });\n\n  return (\n    <ListItem\n      leftElement={<CustomEmoji className={styles.gift} sticker={gift.sticker} size={ICON_SIZE} loopLimit={1} />}\n      rightElement={(\n        <Button\n          size=\"tiny\"\n          pill\n          fluid\n          iconName=\"auction-filled\"\n          onClick={handleClick}\n        >\n          {lang('GiftAuctionListRaiseBid')}\n          <TextTimer className={styles.timer} endsAt={state.nextRoundAt} shouldShowZeroOnEnd />\n        </Button>\n      )}\n      multiline\n      onClick={handleClick}\n    >\n      <div className=\"title\">\n        {lang('GiftAuctionListRound', {\n          current: lang.number(state.currentRound),\n          total: lang.number(state.totalRounds),\n        })}\n      </div>\n      <div className=\"subtitle\">\n        {lang('GiftAuctionBidPosition', {\n          amount: formatStarsAsIcon(lang, userState.bidAmount!, { noStyles: true }),\n          position: lang.number(bidPosition),\n        }, {\n          withNodes: true,\n        })}\n      </div>\n    </ListItem>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { activeGiftAuctionIds, giftAuctionByGiftId } = global;\n    return {\n      activeGiftAuctionIds,\n      giftAuctionByGiftId,\n    };\n  },\n)(ActiveGiftAuctionsModal));\n","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible, ApiEmojiStatusType, ApiSavedStarGift, ApiStarGift,\n} from '../../../api/types';\n\nimport { DEFAULT_STATUS_ICON_ID, TME_LINK_PREFIX } from '../../../config';\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport MenuItem from '../../ui/MenuItem';\n\ntype OwnProps = {\n  peerId: string;\n  canManage?: boolean;\n  gift: ApiSavedStarGift | ApiStarGift;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst GiftMenuItems = ({\n  peerId,\n  canManage,\n  gift: typeGift,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps) => {\n  const {\n    showNotification,\n    openChatWithDraft,\n    openGiftTransferModal,\n    openGiftResalePriceComposerModal,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    toggleSavedGiftPinned,\n    changeGiftVisibility,\n    updateStarGiftPrice,\n    closeGiftInfoModal,\n  } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const starGiftUniqueLink = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return `${TME_LINK_PREFIX}nft/${starGiftUniqueSlug}`;\n  }, [starGiftUniqueSlug]);\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((\n      status,\n    ) => status.type === 'collectible' && status.slug === starGiftUniqueSlug) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const currenUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const canTakeOff = isGiftUnique && currenUniqueEmojiStatusSlug === gift.slug;\n  const canWear = userCollectibleStatus && !canTakeOff;\n  const giftResalePrice = isGiftUnique ? gift.resellPrice : undefined;\n\n  const hasPinOptions = canManage && savedGift && !savedGift.isUnsaved && isGiftUnique;\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n  });\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    copyTextToClipboard(starGiftUniqueLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleLinkShare = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    openChatWithDraft({ text: { text: starGiftUniqueLink } });\n  });\n\n  const handleTransfer = useLastCallback(() => {\n    if (!savedGift || savedGift?.gift.type !== 'starGiftUnique') return;\n\n    if (savedGift.canTransferAt && savedGift.canTransferAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanTransferAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canTransferAt * 1000) },\n        },\n      });\n      return;\n    }\n\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleSell = useLastCallback(() => {\n    if (!savedGift) return;\n    if (savedGift.canResellAt && savedGift.canResellAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanResellAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canResellAt * 1000) },\n        },\n      });\n      return;\n    }\n    openGiftResalePriceComposerModal({ peerId, gift: savedGift });\n  });\n\n  const handleUnsell = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift) return;\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price: {\n      currency: STARS_CURRENCY_CODE, amount: 0, nanos: 0,\n    } });\n    showNotification({\n      icon: 'unlist-outline',\n      message: {\n        key: 'NotificationGiftIsUnlist',\n        variables: { gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }) },\n      },\n    });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !userCollectibleStatus) return;\n    openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n  });\n\n  const handleTakeOff = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    }\n  });\n\n  const handleTogglePin = useLastCallback(() => {\n    toggleSavedGiftPinned({ peerId, gift: savedGift! });\n  });\n\n  return (\n    <>\n      {hasPinOptions && (\n        <MenuItem icon={savedGift.isPinned ? 'unpin' : 'pin'} onClick={handleTogglePin}>\n          {lang(savedGift.isPinned ? 'ChatListUnpinFromTop' : 'ChatListPinToTop')}\n        </MenuItem>\n      )}\n      <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n        {lang('CopyLink')}\n      </MenuItem>\n      <MenuItem icon=\"forward\" onClick={handleLinkShare}>\n        {lang('Share')}\n      </MenuItem>\n      {canManage && isGiftUnique && (\n        <MenuItem icon=\"diamond\" onClick={handleTransfer}>\n          {lang('GiftInfoTransfer')}\n        </MenuItem>\n      )}\n      {canManage && isGiftUnique && !giftResalePrice && (\n        <MenuItem icon=\"sell-outline\" onClick={handleSell}>\n          {lang('Sell')}\n        </MenuItem>\n      )}\n      {canManage && isGiftUnique && Boolean(giftResalePrice) && (\n        <MenuItem icon=\"unlist-outline\" onClick={handleUnsell}>\n          {lang('GiftInfoUnlist')}\n        </MenuItem>\n      )}\n      {canManage && savedGift && (\n        <MenuItem icon={savedGift.isUnsaved ? 'eye-outline' : 'eye-crossed-outline'} onClick={handleTriggerVisibility}>\n          {lang(savedGift.isUnsaved ? 'GiftActionShow' : 'GiftActionHide')}\n        </MenuItem>\n      )}\n      {canWear && (\n        <MenuItem icon=\"crown-wear-outline\" onClick={handleWear}>\n          {lang('GiftInfoWear')}\n        </MenuItem>\n      )}\n      {canTakeOff && (\n        <MenuItem icon=\"crown-take-off-outline\" onClick={handleTakeOff}>\n          {lang('GiftInfoTakeOff')}\n        </MenuItem>\n      )}\n    </>\n  );\n};\n\nexport default memo(GiftMenuItems);\n"],"names":["memo","withGlobal","global","modal","user","forUserId","selectUser","undefined","StarsGiftModal","closeStarsGiftModal","openInvoice","requestConfetti","getActions","dialogRef","useRef","isOpen","Boolean","renderingModal","useCurrentOrPrev","oldLang","useOldLang","selectedOption","setSelectedOption","useState","isHeaderHidden","setHeaderHidden","useEffect","showConfetti","useLastCallback","dialog","current","top","left","width","height","querySelector","getBoundingClientRect","withStars","isCompleted","handleClick","option","type","userId","id","stars","currency","amount","handleClose","bottomText","useMemo","parts","split","_jsx","SafeLink","url","text","Modal","className","buildClassName","styles","modalDialog","contentClassName","content","isSlim","onClose","hasAbsoluteCloseButton","children","_jsxs","main","onScroll","e","scrollTop","currentTarget","header","hiddenHeader","starHeaderText","headerInfo","_Fragment","Avatar","size","peer","avatar","logoBackground","src","StarsBackground","alt","draggable","logo","StarLogo","headerText","center","renderText","formatCurrencyAsString","code","description","getPeerTitle","section","StarTopupOptionList","options","starsGiftOptions","onClick","secondaryInfo","chats","listIds","currentUserId","userIds","contactList","activeListIds","active","archivedListIds","archived","StarsGiftingPickerModal","closeStarsGiftingPickerModal","openStarsGiftModal","searchQuery","setSearchQuery","displayedUserIds","usersById","getGlobal","users","byId","combinedIds","unique","filteredUserIds","filterPeersByQuery","ids","query","sortChatIds","filter","isSupport","isUserBot","isDeletedUser","SERVICE_NOTIFICATIONS_USER_ID","handleSelectedUserIdsChange","newSelectedId","length","PickerModal","title","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","PeerPicker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","BalanceBlock","balance","withAddButton","lang","useLang","openStarsBalanceModal","balanceBlock","balanceInfo","smallerText","balanceBottom","TON_CURRENCY_CODE","Icon","name","convertCurrencyFromBaseUnit","StarIcon","STARS_CURRENCY_CODE","formatStarsAmount","BadgeButton","addStarsButton","addStarsIcon","StarsSubscriptionItem","subscription","openStarsSubscriptionModal","peerId","pricing","until","isCancelled","photo","useSelector","selectPeer","selectProvidedPeer","hasExpired","Date","now","formattedDate","formatDateToString","root","preview","subscriptionStar","info","subtitle","webPhoto","status","statusEnded","statusPricing","star","formatInteger","statusPeriod","getTransactionTitle","transaction","paidMessages","count","withNodes","pluralValue","isGiftResale","isNegativeAmount","isPostsSearch","isDropOriginalDetails","isPrepaidUpgrade","isStarGiftAuctionBid","starRefCommision","formatPercent","isGiftUpgrade","extendedMedia","subscriptionPeriod","isReaction","giveawayPostId","isMyGift","isGift","starGift","customPeer","shouldUseCustomPeer","buildStarsTransactionCustomPeer","titleKey","currencyAmount","nanos","SingleMediaThumb","boughtMedia","index","media","video","mediaHash","getMediaHash","thumb","getMediaThumbUri","mediaBlob","useMedia","blurry","full","PaidMediaThumb","isTransactionPreview","Math","min","isLocked","dir","slice","reverse","map","item","i","arr","realIndex","MediaSpoiler","isVisible","thumbDataUri","thumbnail","dataUri","noOutline","StarsTransactionItem","openStarsTransactionModal","date","transactionPeer","peerSelector","useCallback","isUniqueGift","giftSticker","getStickerFromGift","data","avatarPeer","subtitleKey","CUSTOM_PEER_PREMIUM","number","isRefund","hasFailed","isPending","previewContent","backdrop","getGiftAttributes","backgroundColors","centerColor","edgeColor","RadialPatternBackground","uniqueGiftBackground","AnimatedIconFromSticker","sticker","play","amountColorClass","negative","positive","formatDateTimeToString","formatStarsTransactionAmount","HEADER_HEIGHT","REM","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","shouldForceHeight","ton","history","all","transactions","starsBalanceState","tonBalanceState","canBuyPremium","selectIsPremiumPurchaseBlocked","tonUsdRate","appConfig","tonTopupUrl","animationLevel","selectSharedSettings","StarsBalanceModal","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","openUrl","currentState","subscriptions","areTabsPinned","pinTabs","unpinTabs","useFlag","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","tabsRef","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","gift","balanceNeeded","starsNeeded","starsNeededText","channel","selectChat","chatId","getChatTitle","bot","botId","getUserFullName","purpose","PAID_MESSAGES_PURPOSE","withMarkdown","shouldShowItems","shouldSuggestGifting","modalHeight","transactionCount","transactionTabs","key","tosText","handleLoadMoreTransactions","isTon","handleLoadMoreSubscriptions","openStarsGiftingPickerModalHandler","handleBuyStars","originPaymentInputInvoice","inputInvoice","spendPurposePeerId","handleTonTopUp","minimal","dialogStyle","tabsTop","scrollerTop","modalBalance","noSeparator","renderTonHeaderSection","tonAmount","ParticlesHeader","model","color","isDisabled","tonBalanceContainer","tonBalance","tonIconBalance","tonInUsd","convertTonToUsd","Button","topUpButton","fluid","hint","starButton","isText","noForcedUpperCase","topupOptions","tos","list","sectionTitle","nextOffset","disabled","isLoading","loadMore","loadMoreIcon","container","lastSection","Transition","resolveTransitionName","isRtl","activeKey","renderCount","shouldRestoreHeight","transition","InfiniteScroll","onLoadMore","items","scrollContainerClosest","itemSelector","noFastList","noScrollRestoreOnTop","TabList","ref","tabs","pinned","tabClassName","tab","activeTab","onSwitchTab","messageInputInvoice","message","selectChatMessage","messageId","chat","isPaidMedia","paidMedia","paidMediaMessage","paidMediaChat","StarPaymentModal","closeStarsPaymentModal","sendStarPaymentForm","markLoading","unmarkLoading","prevModal","usePrevious","isBotSubscription","canShowPeerItem","descriptionText","botName","starsText","areAllPhotos","every","duration","areAllVideos","mediaText","channelTitle","disclaimerText","link","inviteCustomPeer","getCustomPeerFromInvite","handlePayment","paymentContent","paymentImages","paymentPhoto","avatarStar","PeerBadge","avatarWebPhoto","avatarSize","badgeIcon","badgeText","badgeClassName","amountBadge","paymentImageBackground","PeerChip","botItem","paymentButton","formatStarsAsIcon","asFont","paymentButtonStar","disclaimer","currentUser","currentUserEmojiStatus","emojiStatus","collectibleEmojiStatuses","statuses","UniqueGiftManageButtons","savedGift","openGiftTransferModal","openGiftResalePriceComposerModal","openGiftStatusInfoModal","setEmojiStatus","updateStarGiftPrice","showNotification","closeGiftInfoModal","giftResalePrice","resellPrice","selectTabState","giftInfoModal","starGiftUniqueSlug","slug","userCollectibleStatus","find","currentUniqueEmojiStatusSlug","canTakeOff","canWear","handleTransfer","canTransferAt","getServerTime","variables","formatDateAtTime","handleWear","documentId","DEFAULT_STATUS_ICON_ID","handleSell","canResellAt","handleUnlist","inputGift","price","icon","iconName","iconAlignment","iconClassName","ariaLabel","UniqueGiftHeader","modelAttribute","backdropAttribute","patternAttribute","badge","subtitlePeer","showManageButtons","openChat","isMobile","useAppLayout","isGiftHover","markGiftHover","unmarkGiftHover","useTransitionActiveKey","subtitleColor","textColor","radialPatternBackdrop","backdropColors","radialPattern","canvasClassName","radialPatternCanvas","patternIcon","yPosition","maxRadius","patternSize","ovalFactor","withManageButtons","withBadge","slideClassName","transitionSlide","direction","noLoop","onMouseEnter","IS_TOUCH_ENV","onMouseLeave","subtitleBadge","style","buildStyle","AVATAR_SPARKLES_CENTER_SHIFT","paidMessageCommission","starsPaidMessageCommissionPermille","starsGiftSticker","selectGiftStickerForStars","selectGiftStickerForTon","canPlayAnimatedEmojis","selectCanPlayAnimatedEmojis","topSticker","StarsTransactionModal","openMediaViewer","closeStarsTransactionModal","triggerSparklesRef","handleOpenMedia","origin","MediaViewerOrigin","StarsTransaction","standaloneMedia","flatMap","Object","values","handleAvatarMouseMove","handleRequestAnimation","animate","starModalData","giftAttributes","toName","getStarsPeerTitleKey","messageLink","getMessageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","uniqueGiftHeader","pattern","regularHeader","onMouseMove","InteractiveSparkles","onRequestAnimation","centerShift","percent","tableData","peerLabel","push","containerClassName","copyTextToClipboard","availabilityTotal","availabilityRemains","total","footerTextParts","footer","renderingModalData","TableInfoModal","hasBackdrop","buttonText","StarsSubscriptionModal","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","isActive","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","hash","hasBotCancelled","isApiPeerUser","specialReplacement","STARS_ICON_PLACEHOLDER","footerTos","DEFAULT_POINTS","LARGE_STEP","THUMB_SIZE","BADGE_HORIZONTAL_PADDING","BADGE_ICON_SIZE","BADGE_TITLE_GAP","textMeasureCanvas","SLIDER_COLORS","buildPoints","minValue","maxValue","result","lastPoint","stepsNeeded","ceil","nextPoint","max","getProgress","points","value","pointIndex","findIndex","point","prevPoint","getValue","progress","floor","round","StarSlider","defaultValue","minValueProp","minAllowedValue","minAllowedProgress","floatingBadgeDescription","shouldUseDynamicColor","shouldAllowCustomValue","onChange","onBadgeClick","onCustomValueClick","containerRef","floatingBadgeContentRef","baseMinValue","actualMinValue","low","high","mid","testPoints","setValue","containerWidth","setContainerWidth","badgeWidth","setBadgeWidth","isDragging","setIsDragging","startXRef","prevBadgeWidth","minSliderProgress","titleEl","floatingBadgeTitle","computedStyle","getComputedStyle","font","fontWeight","fontSize","fontFamily","textWidth","document","createElement","ctx","getContext","measureText","getTextWidth","titleWidth","descriptionEl","descriptionWidth","scrollWidth","newBadgeWidth","currentWidth","abs","handleContainerResize","entry","contentRect","useResizeObserver","minBadgeX","maxBadgeX","beakOffset","beakTipOffset","beakWidth","currentBeakWidth","halfBadgeWidth","maxBeakOffset","CORNER_BEAK_WIDTH","trackLength","distanceFromLeft","distanceFromRight","isLeftSide","distanceToEdge","beakOffsetStart","t","maxTipOffset","calcBadgePosition","beakPath","tipOffset","tipX","generateBeakPath","handleChange","event","rawValue","Number","clampedValue","resultValue","handlePointerDown","clientX","handlePointerMove","handlePointerUp","rect","clickZoneWidth","right","dynamicColor","getColorForProgress","badgeStyle","rootStyle","dragging","floatingBadgeWrapper","floatingBadge","clickable","floatingBadgeText","noTransition","Sparkles","preset","floatingBadgeSparkles","floatingBadgeContent","withDescription","floatingBadgeIcon","AnimatedCounter","floatingBadgeTriangle","viewBox","fill","role","x1","x2","y1","y2","offset","floatingBadgeTrianglePath","d","sparkles","slider","step","onPointerDown","onPointerMove","onPointerUp","customValueIcon","ANONYMOUS_PEER","avatarIcon","customPeerAvatarColor","isCustomPeer","starBalance","maxAmount","paidReactionMaxAmount","defaultPrivacy","settings","paidReactionPrivacy","sendPaidReactionsAsPeerIds","PaidReactionModal","closePaidReactionModal","addLocalPaidReaction","loadSendPaidReactionsAs","starsAmount","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldSendAsAnonymous","setShouldSendAsAnonymous","sendAsPeerId","setSendAsPeerId","senderPeer","handleShowInTopSendersChange","target","checked","handleAmountChange","filteredMyReactorIds","unshift","canChangeSendAsPeer","currentReactor","reactions","topReactors","reactor","isMy","isAnonymous","includes","handleSend","isPrivate","shouldIgnoreDefaultPrivacy","handleSendAsPeerChange","renderMenuItem","isSelected","MenuItem","itemInfo","FullNameTitle","itemTitle","noFake","noVerified","itemSubtitle","itemIcon","SendAsPeerMenuButton","onTrigger","ripple","sendAsPeerMenuButton","sendAsPeerButtonAvatar","buttonDownIcon","sendAsPeersMenu","DropdownMenu","sendAsPeerMenu","bubbleClassName","sendAsPeerMenuBubble","trigger","positionX","autoClose","hasCurrentSender","myReactorAmount","forEach","isCurrentReactor","localAmount","sender","sort","a","b","chatTitle","isLowStackPriority","sendAsPeersMenuContainer","headerControlPanel","Separator","topLabel","countText","topPeer","topBadge","separator","Checkbox","checkBox","label","buttonStar","TEXT_TIMER_THRESHOLD","HOUR","theme","selectTheme","isBlurred","isBackgroundBlurred","patternColor","background","customBackground","backgroundColor","selectThemeValues","paidMessagesStars","selectPeerPaidMessagesStars","userFullInfo","selectUserFullInfo","isGiftForSelf","areUniqueStarGiftsDisallowed","disallowedGifts","shouldDisallowUniqueStarGifts","shouldDisallowLimitedStarGifts","tabState","auctionGiftId","isAuction","giftAuction","giftAuctionByGiftId","captionLimit","starGiftMaxMessageLength","isPaymentFormLoading","giftByStars","sendStarGift","sendPremiumGiftByStars","openGiftUpgradeModal","openGiftAuctionBidModal","openGiftAuctionInfoModal","openGiftAuctionChangeRecipientModal","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","shouldPayByStars","setShouldPayByStars","customBackgroundValue","useCustomBackground","isStarGift","isPremiumGift","hasPremiumByStars","isPeerUser","isSelf","localMessage","currentGift","isOutgoing","senderId","action","mediaType","days","months","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","fromId","handleGiftMessageChange","handleShouldHideNameChange","handleShouldPayForUpgradeChange","toggleShouldPayByStars","handleOpenUpgradePreview","giftId","handleGetMoreStars","handleLearnMoreClick","handleMainButtonClick","existingBidPeerId","userState","bidPeerId","oldPeerId","newPeerId","shouldUpgrade","canUseStarsPayment","bgClassName","inert","ActionMessage","threadId","MAIN_THREAD_ID","appearanceOrder","symbolsLeft","TextArea","maxLength","maxLengthIndicator","toString","ListItem","narrow","Switcher","Link","isPrimary","getNextArrowReplacement","receiver","renderOptionsSection","formatCurrency","giftsPerRound","auctionEndDate","state","endDate","auctionTimeLeft","shouldUseTextTimer","PremiumProgress","rightText","leftText","time","TextTimer","endsAt","formatCountdown","renderFooter","selectGiftStickerForDuration","baseMonthAmount","optionByStars","handleGiftClick","perMonth","discount","tabIndex","nonInteractive","caption","renderMonths","pill","GiftRibbon","isCurrentUserPremium","selectIsCurrentUserPremium","isResale","withTransferBadge","hideBadge","noClickable","observeIntersection","openGiftInfoModal","openPremiumModal","checkCanSendGift","openGiftAuctionModal","stickerRef","setIsVisible","isHover","markHover","unmarkHover","isGiftUnique","uniqueGift","regularGift","priceInfo","amounts","resaleTonOnly","getPriceAmount","priceCurrency","resellMinStars","formattedPrice","isLimited","isSoldOut","isPremiumRequired","requirePremium","isUserLimitReached","limitedPerUser","perUserRemains","perUserTotal","onSuccess","ringsCount","giftNumber","lockedUntilDate","giftRibbon","useOnIntersect","visible","isIntersecting","badgeContent","formatTonAsIcon","shouldConvertFromNanos","StickerView","observeIntersectionForPlaying","observeIntersectionForLoading","shouldLoop","shouldPreloadPreview","withSparkleEffect","starGifts","resaleGifts","areGiftsAllLoaded","isAllLoaded","areGiftsLoading","updateIteration","resellGifts","gifts","GiftModalResaleScreen","onGiftClick","loadResaleGifts","updateResaleGiftsFilter","scrollerRef","resellGiftsIds","g","hasFilter","modelAttributes","patternAttributes","backdropAttributes","handleLoadMoreResellGifts","regularGiftId","isGiftsEmpty","viewportIds","useInfiniteScroll","RESALE_GIFTS_LIMIT","observe","useIntersectionObserver","rootRef","throttleMs","handleResetGiftsFilter","resaleScreenRoot","notFoundGiftsRoot","AnimatedIconWithPreview","tgsUrl","LOCAL_TGS_URLS","SearchingDuck","notFoundGiftsDescription","notFoundGiftsLink","resaleStarGiftsContainer","preloadBackwards","GiftItemStar","ATTRIBUTE_STICKER_SIZE","ResaleGiftMenuAttributeSticker","customColor","useDynamicColorListener","thumbClassName","attributes","counters","GiftResaleFilters","searchModelQuery","setSearchModelQuery","searchBackdropQuery","setSearchBackdropQuery","searchPatternQuery","setSearchPatternQuery","filteredAttributes","counter","attribute","found","attr","backdropId","filteredAndSearchedAttributes","filterBySearch","trim","toLowerCase","countersMap","Map","set","sortMenuRef","isContextMenuOpen","isSortContextMenuOpen","contextMenuAnchor","sortContextMenuAnchor","handleContextMenu","handleSortContextMenu","handleContextMenuClose","handleSortContextMenuClose","handleContextMenuHide","handleSortContextMenuHide","useContextMenuHandlers","getSortMenuElement","modelMenuRef","isModelContextMenuOpen","modelContextMenuAnchor","handleModelContextMenu","handleModelContextMenuClose","handleModelContextMenuHide","getModelMenuElement","backdropMenuRef","isBackdropContextMenuOpen","backdropContextMenuAnchor","handleBackdropContextMenu","handleBackdropContextMenuClose","handleBackdropContextMenuHide","getBackdropMenuElement","patternMenuRef","isPatternContextMenuOpen","patternContextMenuAnchor","handlePatternContextMenu","handlePatternContextMenuClose","handlePatternContextMenuHide","getPatternMenuElement","SortMenuButton","sortType","isMenuOpen","ModelMenuButton","attributesCount","renderDropdownArrows","BackdropMenuButton","PatternMenuButton","handleSortMenuItemClick","handleSelectedAllModelsClick","handleSelectedAllPatternsClick","handleSelectedAllBackdropsClick","handleModelMenuItemClick","updatedAttributes","some","handlePatternMenuItemClick","handleBackdropMenuItemClick","dropdownArrows","arrowLine","topLeft","open","topRight","bottomLeft","bottomRight","handleSearchModelInputReset","handleSearchBackdropInputReset","handleSearchPatternInputReset","handleSearchInputClick","stopPropagation","preventDefault","modelMenuItemsContainerRef","Menu","anchor","menu","getMenuElement","onCloseAnimationEnd","menuItemText","menuItemIcon","models","selectedAttributes","isSelectedAll","menuContentContainer","SearchInput","search","onReset","placeholder","menuItemStickerText","menuItemCount","get","renderModelMenuItems","backdrops","backdropAttributeMenuItemText","renderBackdropMenuItems","patterns","renderPatternMenuItems","buttonsContainer","idsByCategory","StarGiftCategoryList","externalRef","onCategoryChanged","areLimitedStarGiftsDisallowed","hasMyUnique","isPinned","hasCollectible","collectible","selectedCategory","setSelectedCategory","renderCategoryName","category","renderCategoryItem","handleItemClick","useHorizontalScroll","CATEGORY_LIST_STICKY_TOP","runThrottledForScroll","throttle","cb","forPeerId","resaleGiftsCount","areResaleGiftsLoading","selectedResaleGift","boostPerSentGift","boostsPerSentGift","starGiftsById","starGiftIdsByCategory","myUniqueGiftsById","myUniqueGifts","myUniqueGiftIds","tabId","GiftModal","closeGiftModal","resetResaleGifts","openGiftInMarket","closeResaleGiftsMarket","loadMyUniqueGifts","openGiftTransferConfirmModal","setGiftModalSelectedGift","transitionRef","giftHeaderRef","categoryListRef","renderingPeer","isApiPeerChat","selectedGift","shouldShowMainScreenHeader","setShouldShowMainScreenHeader","isMainScreenHeaderForStarGifts","setIsMainScreenHeaderForStarGifts","isGiftScreenHeaderForStarGifts","setIsGiftScreenHeaderForStarGifts","isCategoryListPinned","pinCategoryList","unpinCategoryList","areAllGiftsDisallowed","shouldDisallowPremiumGifts","disallowedGiftTypes","areUnlimitedStarGiftsDisallowed","shouldDisallowUnlimitedStarGifts","allGifts","filteredGifts","prevGift","giftsByStars","mapGifts","starsGift","baseGift","reduce","prev","isResaleScreen","isGiftScreen","shouldShowHeader","isHeaderForStarGifts","handleScroll","headerTop","transitionTop","listTop","giftPremiumDescription","starGiftDescription","renderTextFilters","recipientId","handleMyGiftClick","handleLoadMore","handleCloseModal","handleCloseButtonClick","isBackButton","buttonClassName","withBalanceBar","closeButton","resaleHeader","noBorder","headerSlide","isFirstLoading","resaleHeaderContentContainer","resaleHeaderTextBlock","resaleHeaderText","resaleHeaderDescription","commonHeaderText","renderHeader","avatars","premiumGiftsGallery","GiftItemPremium","starGiftsDescription","starGiftsTransition","starGiftsContainer","filteredGiftIds","availabilityResale","shouldShowResale","shouldDuplicateAsResale","elements","renderStarGifts","GiftComposer","GiftRecipientPicker","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","filteredPeerIds","selectCanGift","selectedId","picker","forceShowSelf","renderGiftOriginalInfo","originalDetails","recipient","onOpenChat","recipientLink","renderTextWithEntities","senderLink","AVATAR_SIZE","GIFT_STICKER_SIZE","GiftTransferPreview","giftPreview","arrow","GiftRarityBadge","rarity","getGiftRarityTitle","typeGift","isSavedGift","fromPeer","targetPeer","hasAdminRights","getHasAdminRight","recipientPeer","releasedByPeerId","releasedByPeer","starGiftMaxConvertPeriod","tonExplorerUrl","GiftInfoModal","changeGiftVisibility","convertGiftToStars","openChatWithInfo","focusMessage","buyStarGift","openGiftInfoValueModal","openGiftDescriptionRemoveModal","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","isConfirmModalOpen","setIsConfirmModalOpen","shouldPayInTon","setShouldPayInTon","uniqueGiftHeaderRef","handleSymbolClick","handleBackdropClick","handleModelClick","renderingFromPeer","renderingTargetPeer","isTargetChat","isSender","canConvertDifference","conversionLeft","hasConvertOption","selfCollectibleStatus","isSelfUnique","canFocusUpgrade","upgradeMsgId","canManage","ownerId","getResalePrice","isInTon","confirmPrice","resellPriceInStars","canBuyGift","giftOwnerTitle","ownerName","owner","handleFocusUpgraded","giftChat","handleTriggerVisibility","isUnsaved","shouldUnsave","handleConvertToStars","handleRemoveMessage","dropOriginalDetailsStars","details","handleOpenUpgradeModal","giftOwnerId","handleBuyGift","closeConfirmModal","handleConfirmBuyGift","handleOpenValueModal","uniqueGiftTitle","numberColor","numberSizeClass","String","small","regular","styledNumber","uniqueTitleNumber","uniqueGiftSubtitle","ownerTitle","getMainUsername","fallbackText","modelName","renderFooterButton","buyButton","footerHint","isShiny","upgradeIcon","prepaidUpgradeHash","saleDateInfo","firstSaleDate","lastSaleDate","modalData","isConverted","canConvert","isVisibleForMe","isWarningDescription","isRefunded","uniqueGiftModalHeader","modalHeader","giftResalePriceContainer","giftResalePriceStar","warningDescription","CUSTOM_PEER_HIDDEN","unknown","starsValue","giftValue","starAmountIcon","ownerAddress","ownerPeer","copyIcon","withEmojiStatus","uniqueAttribute","attributeName","issued","issuedCount","totalCount","valueAmount","valueCurrency","formattedValue","uniqueValue","messageContainer","removeMessageButton","tonLink","giftAddress","footerDescription","shouldSkipModal","moreMenuItems","GiftMenuItems","modalContent","closeButtonColor","currencyInBalanceBar","ConfirmDialog","noDefaultTitle","confirmLabel","confirmHandler","descriptionConfirm","titleConfirm","formatTonAsText","formatStarsAsText","onCheck","checkBoxDescription","GiftInfoValueModal","closeGiftInfoValueModal","handleOpenFragment","valueInfo","fragmentListedUrl","handleOpenTelegramMarket","giftName","initialSaleDate","initialSaleStars","initialSalePrice","lastSalePrice","floorPrice","averagePrice","canBuyOnFragment","fragmentListedCount","canBuyOnTelegram","listedCount","GiftLockedModal","closeLockedGiftModal","getMessageText","untilDate","timeRemaining","relativeDate","formatShortDuration","reason","headerClassName","starsCommission","selectStarsGiftResaleCommission","starsResaleAmountMin","starsStargiftResaleAmountMin","starsResaleAmountMax","starsStargiftResaleAmountMax","starsUsdWithdrawRateX1000","starsUsdWithdrawRate","tonCommission","selectTonGiftResaleCommission","tonResaleAmountMin","convertTonFromNanos","tonStargiftResaleAmountMin","maxTonFromConfig","tonStargiftResaleAmountMax","tonResaleAmountMax","GiftResalePriceComposerModal","closeGiftResalePriceComposerModal","setPrice","isPriceInTon","setIsPriceInTon","hasPrice","handleChangePrice","parseFloat","isNaN","handleSellGift","convertTonToNanos","commission","minAmount","isPriceCorrect","InputText","inputMode","teactExperimentControlled","priceWithCommission","toFixed","GiftUpgradeModal","closeGiftUpgradeModal","upgradeGift","upgradePrepaidGift","openStarGiftPriceDecreaseInfoModal","shiftGiftUpgradeNextPrice","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","isPrepaid","previewAttributes","setPreviewAttributes","handleTimerEnd","nextPrice","nextPrices","nextPriceDate","currentUpgradeStars","handleUpgrade","updatePreviewAttributes","sampleAttributes","getRandomGiftPreviewAttributes","handleOpenPriceInfo","prices","currentPrice","minPrice","maxPrice","useInterval","preloadGiftAttributeStickers","formattedPriceElement","userName","listItemData","hasPriceDecreaseInfo","footerButton","buttonContent","priceDecreaseTimer","timer","onEnd","TableAboutModal","giftAuctionModal","auctionState","GiftAuctionModal","closeGiftAuctionModal","openGiftAuctionAcquiredModal","openAboutStarGiftModal","openChatWithDraft","renderingAuctionState","isFinished","shouldUseUniqueHeader","uniqueHeaderRef","handleLearnMoreAboutGiftsClick","handleItemsBoughtClick","giftTitle","handleJoinClick","shouldKeepAuction","auctionLink","auctionSlug","TME_LINK_PREFIX","handleCopyLink","handleShareLink","uniqueHeader","startDate","currentRound","totalRounds","acquiredCount","giftAuctionBidModal","currentUserPeer","topBidderIds","topBidders","GiftAuctionBidModal","closeGiftAuctionBidModal","sendStarGiftAuctionBid","loadGiftAuction","renderingTopBidderIds","renderingTopBidderPeers","topBidder1","topBidder2","topBidder3","topBidder1Key","topBidder2Key","topBidder3Key","activeState","selectedBidAmount","setSelectedBidAmount","isCustomBidModalOpen","openCustomBidModal","closeCustomBidModal","customBidValue","setCustomBidValue","baseMinBid","minBidAmount","currentMinBid","sliderMaxValue","nextRoundAt","bidDifference","bidAmount","isAtMaxValue","sliderSecondaryText","handleRequestCustomValue","handleBadgeClick","handleCustomBidChange","replace","handleCustomBidSubmit","isUpdateBid","handleSubmit","userPosition","bidLevels","userBidDate","bidDate","MAX_SAFE_INTEGER","getBidAuctionPosition","isWinning","renderTopBidderRow","emoji","topBidderRow","topBidderPosition","bidderInfo","bidderInfoSlide","bidderName","bidderAmount","infoCards","infoCard","infoCardValue","infoCardLabel","shouldShowZeroOnEnd","giftsLeft","nextGiftNum","lastGiftNum","sectionTitleTransition","winningStatus","winningText","winningBadge","renderCurrentBidSectionTitle","bidderRow","bidderPosition","renderTopWinners","isConfirmDisabled","customBidInput","customBidInputIcon","giftAuctionInfoModal","GiftAuctionInfoModal","closeGiftAuctionInfoModal","giftAuctionAcquiredModal","acquiredGifts","GiftAuctionAcquiredModal","closeGiftAuctionAcquiredModal","renderingGifts","renderingGiftTitle","renderingGiftSticker","giftItems","giftHeader","bidValue","starIcon","position","giftsCount","useScrollNotch","selector","giftsList","isBottomNotch","isCondensedHeader","giftsListContainer","TableInfo","okButton","oldPeer","newPeer","GiftAuctionChangeRecipientModal","closeGiftAuctionChangeRecipientModal","renderingOldPeer","renderingNewPeer","handleConfirm","TransferBetweenPeers","toPeer","StarGiftPriceDecreaseInfoModal","closeStarGiftPriceDecreaseInfoModal","isInverted","shouldSkipGradient","tableClassName","AboutStarGiftModal","closeAboutStarGiftModal","PremiumFeaturePreviewVideo","videoId","videoThumbnail","isDown","absoluteCloseButtonColor","GiftStatusInfoModal","closeGiftStatusInfoModal","useCustomEmoji","patternDocumentId","onWearClick","customEmoji","mockPeerWithStatus","FRAGMENT_PEER","byKey","hasPassword","twoFaSettings","passwordHint","GiftWithdrawModal","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","openSettingsScreen","shouldShowPassword","setShouldShowPassword","exportDelay","canExportAt","password","handleSetUpPassword","screen","SettingsScreens","TwoFaDisabled","exportHint","getDays","noPassword","PasswordForm","shouldShowSubmit","error","errorKey","withRegular","onClearError","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","contactIds","GiftTransferModal","closeGiftTransferModal","openGiftWithdrawModal","orderedChatIds","useFolderManagerForOrderedIds","ALL_FOLDER_ID","sortedLocalIds","foundIds","currentResultsQuery","usePeerSearch","categories","MEMO_EMPTY_ARRAY","peerColorId","handleCategoryChange","displayIds","handlePeerSelect","onSelectedCategoryChange","withPeerUsernames","noScrollRestore","selectedPeer","GiftTransferConfirmModal","closeGiftTransferConfirmModal","transferGift","renderingSelectedPeer","transferStars","GiftDescriptionRemoveModal","closeGiftDescriptionRemoveModal","removeGiftDescription","renderingSenderPeer","renderingRecipientPeer","openChatHandler","starsUsdSellRateX1000","starsUsdRate","GiftOfferAcceptModal","closeGiftOfferAcceptModal","acceptStarGiftOffer","renderingBuyerPeer","priceAmount","receiveAmount","priceWarning","valueUsdAmount","avgValueUsd","receiveValueUsd","isLower","isLow","buyerName","formatCurrencyAmountAsText","formattedReceiveAmountAsText","formattedReceiveAmountAsIcon","ChatRefundModal","closeChatRefundModal","toggleNoPaidMessagesException","shouldRefundStars","setShouldRefundStars","renderingUser","starsToRefund","handleConfirmRemoveFee","shouldRefundCharged","PriceConfirmModal","actions","directInfo","closePriceConfirmModal","newAmount","currentBalance","getCurrentTabId","originalAmount","originalAmountText","newAmountText","ICON_SIZE","ActiveAuctionItem","auction","closeActiveGiftAuctionsModal","bidPosition","leftElement","CustomEmoji","loopLimit","rightElement","multiline","noStyles","activeGiftAuctionIds","ActiveGiftAuctionsModal","activeAuctions","auc","dialogClassName","toggleSavedGiftPinned","starGiftUniqueLink","currenUniqueEmojiStatusSlug","hasPinOptions","handleLinkShare","handleUnsell","handleTakeOff","handleTogglePin"],"ignoreList":[],"sourceRoot":""}