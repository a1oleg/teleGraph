(()=>{"use strict";var e,t,s={80081(e,t,s){var n={};s.r(n),s.d(n,{Type:()=>Ed,cleanup:()=>qd,clear:()=>Nd,fetch:()=>Vd,isCacheApiSupported:()=>Ud,purgeClearableCache:()=>Hd,remove:()=>Fd,save:()=>Gd});var a={};s.r(a),s.d(a,{abortChatRequests:()=>uu,abortRequestGroup:()=>lu,acceptBotUrlAuth:()=>$h,acceptCall:()=>Pm,acceptLinkUrlAuth:()=>Qh,acceptPhoneCall:()=>oy,activateStealthMode:()=>Ay,addChatMembers:()=>Gl,allowBotSendMessages:()=>Yh,answerCallbackButton:()=>Th,appendTodoList:()=>wf,applyBoost:()=>Fy,applyGiftCode:()=>Oy,blockUser:()=>zp,broadcastLocalDbUpdateFull:()=>Xs,buildApiAccountDays:()=>Pu,buildApiAccountDaysTTL:()=>Cu,changeSessionSettings:()=>Su,changeSessionTtl:()=>wu,changeStarsSubscription:()=>i_,checkBotDownloadFileParams:()=>tm,checkChatInvite:()=>Vl,checkChatUsername:()=>wp,checkChatlistInvite:()=>Kl,checkGiftCode:()=>Ly,checkPassword:()=>Vu,checkSearchPostsFlood:()=>Wf,checkUsername:()=>Vp,clearPassword:()=>Gu,clearRecentReactions:()=>Fm,clearRecentStickers:()=>Yg,clickSponsoredMessage:()=>ug,closePoll:()=>Jf,confirmCall:()=>Cm,confirmPhoneCall:()=>iy,convertStarGift:()=>Zy,createChalistInvite:()=>Xl,createChannel:()=>Zu,createGroupCall:()=>hm,createGroupChat:()=>cl,createPhoneCallState:()=>ty,createTopic:()=>w_,deactivateAllUsernames:()=>vp,decodePhoneCallData:()=>ay,deleteChannel:()=>rl,deleteChat:()=>sl,deleteChatFolder:()=>yl,deleteChatMember:()=>Fl,deleteChatUser:()=>tl,deleteChatlistInvite:()=>Yl,deleteContact:()=>Vg,deleteExportedChatInvite:()=>Rp,deleteHistory:()=>kf,deleteMessages:()=>Mf,deleteParticipantHistory:()=>Af,deletePasskey:()=>kh,deleteProfilePhotos:()=>Lp,deleteRevokedExportedChatInvites:()=>kp,deleteSavedHistory:()=>Tf,deleteScheduledMessages:()=>Rf,deleteStory:()=>hy,deleteTopic:()=>P_,destroy:()=>tu,destroyPhoneCallState:()=>sy,discardCall:()=>Sm,discardGroupCall:()=>cm,disconnect:()=>su,dismissSuggestion:()=>E_,downloadMedia:()=>ru,editChannelCreator:()=>ol,editChatFolder:()=>ml,editChatPhoto:()=>dl,editChatlistInvite:()=>Zl,editExportedChatInvite:()=>Mp,editGroupCallParticipant:()=>dm,editGroupCallTitle:()=>um,editMessage:()=>bf,editStoryPrivacy:()=>Iy,editTodo:()=>Sf,editTopic:()=>M_,encodePhoneCallData:()=>ny,exportChatInvite:()=>Ap,exportGroupCallInvite:()=>lm,exportMessageLink:()=>Pg,faveSticker:()=>Qg,fetchAccountTTL:()=>Mu,fetchAlbumStories:()=>ky,fetchAlbums:()=>Ry,fetchAllStories:()=>cy,fetchAnimatedEmojiEffects:()=>sp,fetchAnimatedEmojis:()=>tp,fetchAppConfig:()=>B_,fetchAuthorizations:()=>$p,fetchAvailableEffects:()=>Tm,fetchAvailableReactions:()=>km,fetchBlockedUsers:()=>Wp,fetchBoostList:()=>qy,fetchBoostStatus:()=>Ny,fetchBotApp:()=>qh,fetchBotCanSendMessage:()=>Xh,fetchBotsRecommendations:()=>im,fetchChannelMonetizationStatistics:()=>Om,fetchChannelRecommendations:()=>nf,fetchChannelStatistics:()=>Lm,fetchChat:()=>$u,fetchChatFolders:()=>gl,fetchChatInviteImporters:()=>Tp,fetchChatlistInvites:()=>ef,fetchChats:()=>Lu,fetchCheckCanSendGift:()=>Ky,fetchCollectibleEmojiStatuses:()=>dp,fetchCollectionInfo:()=>zy,fetchCommonChats:()=>Rg,fetchConfig:()=>D_,fetchContactList:()=>Dg,fetchContactSignUpSetting:()=>th,fetchContentSettings:()=>mh,fetchCountryList:()=>wh,fetchCurrentUser:()=>fu,fetchCustomEmoji:()=>ep,fetchCustomEmojiSets:()=>jg,fetchDefaultStatusEmojis:()=>cp,fetchDefaultTagReactions:()=>Nm,fetchDefaultTopicIcons:()=>rp,fetchDiceStickers:()=>ip,fetchDiscussionMessage:()=>Hf,fetchEmojiKeywords:()=>_p,fetchExportedChatInvites:()=>Cp,fetchExtendedMedia:()=>Xf,fetchFactChecks:()=>Ff,fetchFavoriteStickers:()=>Kg,fetchFeaturedEmojiStickers:()=>Jg,fetchFeaturedStickers:()=>$g,fetchFullChat:()=>Wu,fetchFullUser:()=>Ag,fetchFutureCreatorAfterLeave:()=>al,fetchGenericEmojiEffects:()=>np,fetchGiveawayInfo:()=>Hy,fetchGlobalPrivacySettings:()=>Ih,fetchGroupCallParticipants:()=>fm,fetchGroupStatistics:()=>jm,fetchGroupsForDiscussion:()=>Ul,fetchInlineBot:()=>Uh,fetchInlineBotResults:()=>Eh,fetchLangDifference:()=>oh,fetchLangPack:()=>ih,fetchLangStrings:()=>dh,fetchLanguage:()=>ch,fetchLanguages:()=>rh,fetchLeaveChatlistSuggestions:()=>Jl,fetchMember:()=>Dl,fetchMembers:()=>Bl,fetchMessage:()=>ff,fetchMessagePublicForwards:()=>zm,fetchMessageReactions:()=>Um,fetchMessageReactionsList:()=>Em,fetchMessageStatistics:()=>Wm,fetchMessageSummary:()=>_g,fetchMessageViews:()=>Gf,fetchMessages:()=>lf,fetchMessagesById:()=>gf,fetchMonetizationRevenueWithdrawalUrl:()=>Qm,fetchMyBoosts:()=>Gy,fetchNearestCountry:()=>Tg,fetchNotificationExceptions:()=>eh,fetchNotifyDefaultSettings:()=>sh,fetchOutboxReadDate:()=>wg,fetchPaidMessagesRevenue:()=>Fg,fetchPaidMessagesStarsAmount:()=>kg,fetchPaidReactionPrivacy:()=>Nf,fetchPasskeys:()=>Mh,fetchPeerColors:()=>_h,fetchPeerProfileColors:()=>bh,fetchPeerProfileStories:()=>uy,fetchPeerSettings:()=>zu,fetchPeerStories:()=>dy,fetchPeerStoriesByIds:()=>fy,fetchPinnedDialogs:()=>pl,fetchPinnedMessages:()=>ag,fetchPopularAppBots:()=>am,fetchPremiumGifts:()=>ap,fetchPremiumPromo:()=>xy,fetchPreparedInlineMessage:()=>Cg,fetchPreviewMedias:()=>em,fetchPrivacySettings:()=>lh,fetchProfilePhotos:()=>Ng,fetchPromoData:()=>U_,fetchQuickReplies:()=>Ig,fetchRecentEmojiStatuses:()=>bp,fetchRecentReactions:()=>Gm,fetchRecentStickers:()=>zg,fetchRecommendedChatFolders:()=>hl,fetchResaleGifts:()=>Qy,fetchSavedChats:()=>Ou,fetchSavedGifs:()=>lp,fetchSavedReactionTags:()=>qm,fetchSavedStarGifts:()=>Xy,fetchScheduledHistory:()=>sg,fetchSeenBy:()=>ig,fetchSendAs:()=>og,fetchSponsoredMessages:()=>cg,fetchSponsoredPeer:()=>of,fetchStarGiftActiveAuctions:()=>f_,fetchStarGiftAuctionAcquiredGifts:()=>l_,fetchStarGiftAuctionState:()=>u_,fetchStarGiftCollections:()=>b_,fetchStarGiftUpgradePreview:()=>d_,fetchStarGiftWithdrawalUrl:()=>__,fetchStarGifts:()=>Jy,fetchStarsGiftOptions:()=>e_,fetchStarsGiveawayOptions:()=>$y,fetchStarsStatus:()=>t_,fetchStarsSubscriptions:()=>a_,fetchStarsTopupOptions:()=>r_,fetchStarsTransactionById:()=>n_,fetchStarsTransactions:()=>s_,fetchStatisticsAsyncGraph:()=>Km,fetchStickerSets:()=>Wg,fetchStickers:()=>Zg,fetchStickersForEmoji:()=>yp,fetchStoriesArchive:()=>ly,fetchStoriesMaxIds:()=>Py,fetchStoriesViews:()=>by,fetchStoryLink:()=>Sy,fetchStoryPublicForwards:()=>Jm,fetchStoryStatistics:()=>$m,fetchStoryViewList:()=>_y,fetchTemporaryPaymentPassword:()=>Vy,fetchTimezones:()=>Sh,fetchTonGifts:()=>op,fetchTopBotApps:()=>Dh,fetchTopInlineBots:()=>Bh,fetchTopReactions:()=>Vm,fetchTopUsers:()=>Bg,fetchTopicById:()=>v_,fetchTopics:()=>I_,fetchUniqueStarGift:()=>c_,fetchUniqueStarGiftValueInfo:()=>y_,fetchUnreadMentions:()=>pg,fetchUnreadReactions:()=>hg,fetchUsers:()=>Ug,fetchWallpapers:()=>Op,fetchWebAuthorizations:()=>Xp,fetchWebPagePreview:()=>zf,findFirstMessageIdAfterDate:()=>tg,forwardApiMessages:()=>Zf,forwardMessages:()=>eg,forwardMessagesLocal:()=>Yf,fulfillStarsSubscription:()=>o_,getChatByPhoneNumber:()=>wl,getChatByUsername:()=>Il,getDhConfig:()=>bm,getGroupCall:()=>rm,getPassword:()=>xu,getPasswordInfo:()=>Du,getPaymentForm:()=>Uy,getPremiumGiftCodeOptions:()=>jy,getReceipt:()=>Ey,getTemporaryPaymentPassword:()=>Eu,hideAllChatJoinRequests:()=>Dp,hideChatJoinRequest:()=>Bp,hidePeerSettingsBar:()=>Up,importChatInvite:()=>Ll,importContact:()=>Eg,incrementLocalMessagesCounter:()=>Mg,initPasskeyRegistration:()=>Ah,installStickerSet:()=>gp,invokeWebViewCustomMethod:()=>Zh,joinChannel:()=>el,joinChatlistInvite:()=>$l,joinGroupCall:()=>pm,joinGroupCallPresentation:()=>mm,launchPrepaidGiveaway:()=>Wy,leaveChannel:()=>nl,leaveChatlist:()=>Ql,leaveGroupCall:()=>gm,leaveGroupCallPresentation:()=>_m,loadAttachBot:()=>Wh,loadAttachBots:()=>jh,loadPollOptionResults:()=>Qf,markMessageListRead:()=>xf,markMessagesRead:()=>Vf,markStoryRead:()=>py,migrateChat:()=>xl,oldFetchLangPack:()=>uh,pinMessage:()=>Pf,prolongWebView:()=>Lh,provideAuthCode:()=>Id,provideAuthPassword:()=>vd,provideAuthPhoneNumber:()=>wd,provideAuthRegistration:()=>Pd,provideRecoveryEmailCode:()=>qu,readAllMentions:()=>fg,readAllReactions:()=>gg,receivedCall:()=>vm,registerDevice:()=>fh,registerPasskey:()=>Rh,removeRecentSticker:()=>Xg,reorderUsernames:()=>Ch,repairFileReference:()=>gu,reportChannelSpam:()=>Uf,reportMessages:()=>Df,reportMessagesDelivery:()=>qf,reportPeer:()=>_u,reportProfilePhoto:()=>bu,reportSpam:()=>qg,reportSponsoredMessage:()=>lg,reportStory:()=>wy,requestAppWebView:()=>Hh,requestBotUrlAuth:()=>Kh,requestCall:()=>wm,requestChannelDifference:()=>yu,requestChatUpdate:()=>Ju,requestLinkUrlAuth:()=>Jh,requestMainWebView:()=>Fh,requestPhoneCall:()=>ry,requestSimpleWebView:()=>Nh,requestWebView:()=>Gh,rescheduleMessage:()=>If,resolveBusinessChatLink:()=>Iu,resolveStarGiftOffer:()=>S_,restartAuth:()=>Cd,restartAuthWithPasskey:()=>Ad,restartAuthWithQr:()=>Md,saveCloseFriends:()=>Lg,saveDefaultSendAs:()=>rg,saveDraft:()=>Qu,saveGif:()=>fp,saveStarGift:()=>Yy,searchChats:()=>Ku,searchGifs:()=>mp,searchMessagesGlobal:()=>Of,searchMessagesInChat:()=>Lf,searchPublicPosts:()=>jf,searchStickers:()=>up,sendApiMessage:()=>mf,sendEmojiInteraction:()=>Rm,sendInlineBotResult:()=>xh,sendMessage:()=>yf,sendMessageAction:()=>Ef,sendMessageLocal:()=>hf,sendPaidReaction:()=>Dm,sendPaymentForm:()=>By,sendPollVote:()=>Kf,sendQuickReply:()=>vg,sendReaction:()=>Bm,sendScheduledMessages:()=>ng,sendSignalingData:()=>Mm,sendStarPaymentForm:()=>Dy,sendStoryReaction:()=>My,sendWatchingEmojiInteraction:()=>Am,sendWebViewData:()=>Oh,setAccountMainProfileTab:()=>Ru,setAccountTTL:()=>Au,setAllowHttpTransport:()=>hu,setBotInfo:()=>nm,setCallRating:()=>Im,setChannelMainProfileTab:()=>cf,setChatEnabledReactions:()=>Ol,setChatUsername:()=>Ip,setDefaultReaction:()=>xm,setDiscussionGroup:()=>El,setForceHttpTransport:()=>pu,setPrivacySettings:()=>ph,setShouldDebugExportedSenders:()=>mu,setViewForumAsMessages:()=>sf,sortChatFolders:()=>_l,startBot:()=>Vh,terminateAllAuthorizations:()=>Qp,terminateAllWebAuthorizations:()=>Zp,terminateAuthorization:()=>Jp,terminateWebAuthorization:()=>Yp,toggleAttachBot:()=>zh,toggleAutoTranslation:()=>rf,toggleChatArchived:()=>fl,toggleChatPinned:()=>ul,toggleDialogFilterTags:()=>bl,toggleDialogUnread:()=>Sl,toggleForum:()=>zl,toggleGroupCallStartSubscription:()=>ym,toggleIsProtected:()=>jl,toggleJoinRequest:()=>ql,toggleJoinToSend:()=>Nl,toggleNoPaidMessagesException:()=>Gg,toggleParticipantsHidden:()=>Wl,togglePeerTranslations:()=>tf,togglePinnedTopic:()=>C_,togglePreHistoryHidden:()=>Pl,toggleSavedDialogPinned:()=>ll,toggleSavedGiftPinned:()=>h_,toggleSignatures:()=>Tl,toggleSponsoredMessages:()=>vu,toggleStoriesHidden:()=>vy,toggleStoryInProfile:()=>my,toggleStoryPinnedToTop:()=>yy,toggleSuggestedPostApproval:()=>Bf,toggleTodoCompleted:()=>$f,toggleUserEmojiStatusPermission:()=>sm,toggleUsername:()=>Ph,transcribeAudio:()=>mg,transferStarGift:()=>p_,translateText:()=>yg,unblockUser:()=>Kp,uninstallStickerSet:()=>pp,unpinAllMessages:()=>Cf,unregisterDevice:()=>gh,updateBirthday:()=>Fp,updateChatAbout:()=>kl,updateChatAdmin:()=>Al,updateChatDefaultBannedRights:()=>Cl,updateChatMemberBannedRights:()=>Ml,updateChatNotifySettings:()=>Xu,updateChatTitle:()=>Rl,updateContact:()=>xg,updateContactNote:()=>Og,updateContactSignUpNotification:()=>nh,updateContentSettings:()=>yh,updateEmojiStatus:()=>Hg,updateGlobalPrivacySettings:()=>vh,updateIsOnline:()=>hh,updateNotificationSettings:()=>ah,updatePaidMessagesPrice:()=>af,updatePassword:()=>Fu,updatePrivateLink:()=>Pp,updateProfile:()=>xp,updateProfilePhoto:()=>Np,updateRecoveryEmail:()=>Nu,updateSavedReactionTag:()=>Hm,updateStarGiftPrice:()=>m_,updateTopicMutedState:()=>Yu,updateUsername:()=>Gp,upgradeStarGift:()=>g_,uploadContactProfilePhoto:()=>Hp,uploadProfilePhoto:()=>qp,uploadWallpaper:()=>jp,validateRequestedInfo:()=>Ty,verifyTransferOwnership:()=>il,viewSponsoredMessage:()=>dg,viewStory:()=>gy});const i="account",o="tt-media",r="tt-media-avatars",c=("undefined"!=typeof window&&window.innerHeight,2**31-1),d=c,u=Math.round(450),l=new Set(["newMessage","newScheduledMessage","deleteMessages","deleteScheduledMessages","deleteHistory","deleteParticipantHistory"]),f=(new Set(["svg","svgz"]),"video/webm"),g="image/gif",p=f,h=new Set(["image/png","image/jpeg",g]),m=new Set(["video/mp4","video/quicktime"]),y=new Set(["audio/mp3","audio/ogg","audio/wav","audio/mpeg","audio/flac","audio/aac","audio/m4a","audio/mp4","audio/x-m4a"]),_=(new Set([...h,...m]),"application/x-tgstoryboard"),b="MESSAGE_ID_REQUIRED",S=new Set(["USERNAME_PURCHASE_AVAILABLE","USERNAME_INVALID"]),w=(new Set(["t.me","web.t.me","a.t.me","k.t.me","z.t.me"]),"weba"),I="weba",v=(new Set(["AU","BD","CA","CO","EG","HN","IE","IN","JO","MX","MY","NI","NZ","PH","PK","SA","SV","US"]),"777000"),P=10n**12n,C=(-1000000000777n).toString(),M=(new Set(["USER_CANCELED"]),["log","error","warn","info","debug"]);function A(e,t,s=!0){let n,a,i;return(...o)=>{a=!0,i=o,n||(s&&(a=!1,e(...i)),n=self.setInterval(()=>{if(!a)return self.clearInterval(n),void(n=void 0);a=!1,e(...i)},t))}}function R(e){return function(e,t){let s,n=!1;return(...a)=>{s=a,n||(n=!0,e(()=>{n=!1,t(...s)}))}}(T,e)}let k;function T(e){k?k.push(e):(k=[e],Promise.resolve().then(()=>{const e=k;k=void 0,e.forEach(e=>e())}))}M.reduce((e,t)=>(e[t]=console[t],e),{});var B=s(7692),D=s(48287).hp;class U{constructor(e){this.counter=D.from(e)}increment(){for(let e=15;e>=0;e--){if(255!==this.counter[e]){this.counter[e]++;break}this.counter[e]=0}}}class E{constructor(e,t){t instanceof U||(t=new U(t)),this._counter=t,this._carryBlock=void 0,this._carryOffset=0,this._aes=new B.Ay(e)}update(e){return this.encrypt(e)}encrypt(e){const t=this._aes,s=this._counter,n=e,a=n.length,i=D.allocUnsafe(a);let o=0;if(this._carryBlock){const e=Math.min(16-this._carryOffset,a);for(let t=0;t<e;t++)i[o+t]=n[o+t]^this._carryBlock[this._carryOffset+t];o+=e,this._carryOffset+=e,16===this._carryOffset&&(this._carryBlock=void 0,this._carryOffset=0)}const r=D.allocUnsafe(16);for(;o+16<=a;){F(t.encrypt(s.counter),r),s.increment();for(let e=0;e<16;e++)i[o+e]=n[o+e]^r[e];o+=16}if(o<a){F(t.encrypt(s.counter),r),s.increment();let e=0;for(;o<a;o++,e++)i[o]=n[o]^r[e];this._carryBlock=r,this._carryOffset=e}return i}}function x(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),t}class V{data=new Uint8Array(0);constructor(e){this.algorithm=e}update(e){this.data=new Uint8Array(e)}async digest(){return"sha1"===this.algorithm?D.from(await self.crypto.subtle.digest("SHA-1",this.data)):D.from(await self.crypto.subtle.digest("SHA-256",this.data))}}function G(e){return new V(e)}function F(e,t){for(let s=0;s<e.length;s++)t.writeUInt32BE(e[s],4*s)}var N=s(48287).hp;function q(e,t=!0,s=!1){const n=e.length;if(0===n)return 0n;if(8===n)return s?t?e.readBigInt64LE(0):e.readBigInt64BE(0):t?e.readBigUInt64LE(0):e.readBigUInt64BE(0);let a=0n;if(t)for(let t=n-1;t>=0;t--)a=a<<8n|BigInt(e[t]);else for(let t=0;t<n;t++)a=a<<8n|BigInt(e[t]);return s&&0n!=(a&1n<<BigInt(8*n-1))&&(a-=1n<<BigInt(8*n)),a}function H(e,t=8){const s=N.allocUnsafe(t);if(8===t)return s.writeBigInt64LE(e),s;for(let n=0;n<t;n++)s[n]=Number(e>>BigInt(8*n)&0xFFn);return s}function L(e,t,s=!0,n=!1){if(!Number.isInteger(t)||t<=0)throw new RangeError("bytesNumber must be a positive integer");if(!n&&e<0n)throw new RangeError("Cannot convert negative to unsigned");const a=8n*BigInt(t);if(e<(n?-(1n<<a-1n):0n)||e>(n?(1n<<a-1n)-1n:(1n<<a)-1n))throw new RangeError(`Value ${e} does not fit in ${t} ${n?"signed":"unsigned"} bytes`);let i=n&&e<0n?(1n<<a)+e:e;const o=N.allocUnsafe(t);if(s)for(let e=0;e<t;e++)o[e]=Number(0xFFn&i),i>>=8n;else for(let e=t-1;e>=0;e--)o[e]=Number(0xFFn&i),i>>=8n;return o}function O(e,t){return(e%t+t)%t}function j(e){return N.from(x(e))}function W(e=8){return q(j(e),!0,!0)}function z(){return Number(q(j(4),!0,!0))}function K(e){const t=N.allocUnsafe(4*e.length);for(let s=0;s<e.length;s++)t.writeUInt32BE(e[s],4*s);return t}function $(e){const t=G("sha1");return t.update(e),t.digest()}function J(e){const t=G("sha256");return t.update(e),t.digest()}function Q(e,t,s){let n=1n,a=e%=s;for(;t>0n;){const e=t%2n;t/=2n,1n===e&&(n*=a,n%=s),a*=a,a%=s}return n}function X(e,t=!1){if(!t&&e<0n)throw new RangeError("Cannot convert negative to unsigned");let s;if(t)if(e>=0n){const t=ce(e)+1;s=Math.max(1,Math.ceil(t/8))}else{const t=ce(-e-1n)+1;s=Math.max(1,Math.ceil(t/8))}else{const t=ce(e);s=Math.max(1,Math.ceil(t/8))}return L(e,s,!1,t)}function Y(e){if(e<=0)return 0n;const t=x(Math.ceil(e/8));let s=0n;for(let e=0;e<t.length;e++)s=s<<8n|BigInt(t[e]);return s&(1n<<BigInt(e))-1n}function Z(e,t){const s=e<t?e:t,n=(e<t?t:e)-s+1n;if(n<=1n)return s;const a=ce(n-1n),i=(1n<<BigInt(a))/n*n;for(;;){const e=Y(a);if(e<i)return s+e%n}}function ee(e){return new Promise(t=>{setTimeout(t,e)})}function te(e,t){const s=[];for(let n=0;n<e.length;n++)s.push(e[n]^t[n]);return N.from(s)}const se=(()=>{let e;const t=[];for(let s=0;s<256;s++){e=s;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;t[s]=e}return t})();function ne(e){N.isBuffer(e)||(e=N.from(e));let t=-1;for(let s=0;s<e.length;s++){const n=e[s];t=se[255&(t^n)]^t>>>8}return(-1^t)>>>0}const ae=[],ie=[],oe=[];let re=0;function ce(e){let t=0;for(;re===t&&(ae.push(32<<re),ie.push(BigInt(ae[re])),oe.push(1n<<ie[re]),re++),!(e<oe[t]);)t++;if(!t)return 32-Math.clz32(Number(e));t--;let s=ae[t],n=e>>ie[t];for(;t--;){const e=n>>ie[t];e&&(s+=ae[t],n=e)}return s+32-Math.clz32(Number(n))}const de={abs:e=>e<0n?-e:e,sign:e=>0n===e?0n:e<0n?-1n:1n,pow:(e,t)=>e**t,min(e,...t){for(const s of t)s<e&&(e=s);return e},max(e,...t){for(const s of t)s>e&&(e=s);return e}};var ue=s(48287).hp;const le=e=>e.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace("-","").replace("_","")),fe=new Set([3162085175,2574415285,1072550713,3300522427,1450380236]),ge=new Set([85337187,2211011308,2851430293,1013613780,1459478408,3504867164,3045658042,1715713620,3608339646,4110704415,812830625]),pe=(e,t,s=[])=>{e.flags.includes("g")||(e=new RegExp(e.source,"g"));const n=e.exec(t);return n&&(s.push(n.slice(1)),pe(e,t,s)),s},he=(e,t)=>{const s=e.match(/([\w.]+)(?:#([0-9a-fA-F]+))?(?:\s{?\w+:[\w\d<>#.?!]+}?)*\s=\s([\w\d<>#.?]+);$/);if(!s)throw new Error(`Cannot parse TLObject ${e}`);const n=pe(/({)?(\w+):([\w\d<>#.?!]+)}?/,e),a={name:s[1],constructorId:parseInt(s[2],16),argsConfig:{},subclassOfId:ne(s[3]),result:s[3],isFunction:t,namespace:void 0};if(!a.constructorId){const e="";let t;t=Object.values(a.argsConfig).length?` ${Object.keys(a.argsConfig).map(e=>e.toString()).join(" ")}`:"";const s=`${a.name}${e}${t} = ${a.result}`.replace(/(:|\?)bytes /g,"$1string ").replace(/</g," ").replace(/>|{|}/g,"").replace(/ \w+:flags\d*\.\d+\?true/g,"");"inputMediaInvoice"===a.name&&a.name,a.constructorId=ne(ue.from(s,"utf8"))}for(const[e,t,s]of n)void 0===e&&(a.argsConfig[le(t)]=me(t,s));return a.name.includes(".")&&([a.namespace,a.name]=a.name.split(/\.(.+)/)),a.name=a.name.replace(/(?:^|_)([a-z])/g,(e,t)=>t.toUpperCase()).replace(/_/g,""),a};function me(e,t){e="self"===e?"is_self":e;const s={isVector:!1,isFlag:!1,skipConstructorId:!1,flagGroup:0,flagIndex:-1,flagIndicator:!0,type:"",useVectorId:void 0};if("#"!==t){s.flagIndicator=!1,s.type=t.replace(/^!+/,"");const e=s.type.match(/flags(\d*)\.(\d+)\?([\w<>.]+)/);e&&(s.isFlag=!0,s.flagGroup=Number(e[1]||1),s.flagIndex=Number(e[2]),[,,,s.type]=e);const n=s.type.match(/[Vv]ector<([\w\d.]+)>/);n&&(s.isVector=!0,s.useVectorId="V"===s.type.charAt(0),[,s.type]=n),/^[a-z]$/.test(s.type.split(".").pop().charAt(0))&&(s.skipConstructorId=!0)}return s}function ye(e){if(!(e instanceof ue)){if("string"!=typeof e)throw Error(`Bytes or str expected, not ${e.constructor.name}`);e=ue.from(e)}const t=[];let s;return e.length<254?(s=(e.length+1)%4,0!==s&&(s=4-s),t.push(ue.from([e.length])),t.push(e)):(s=e.length%4,0!==s&&(s=4-s),t.push(ue.from([254,e.length%256,(e.length>>8)%256,(e.length>>16)%256])),t.push(e)),t.push(ue.alloc(s).fill(0)),ue.concat(t)}var _e=s(48287).hp;const be="undefined"!=typeof self&&void 0!==self.localStorage,Se="GramJs:apiCache";function we(e){const t=function*(e,t=[],s=fe){(t||[]).reduce((e,t)=>({...e,[t.name]:t}),{});const n=[],a={},i={},o=e;let r=!1;for(let e of o.split("\n")){const t=e.indexOf("//");if(-1!==t&&(e=e.slice(0,t)),e=e.trim(),!e)continue;const o=e.match(/---(\w+)---/);if(o){const[,e]=o;r="functions"===e;continue}try{const t=he(e,r);if(s.has(t.constructorId))continue;n.push(t),t.isFunction||(i[t.result]||(i[t.result]=[]),a[t.name]=t,i[t.result].push(t))}catch(e){if(!e.toString().includes("vector#1cb5c415"))throw e}}for(const e of n)if(ge.has(e.constructorId))for(const t in e.argsConfig)"string"===e.argsConfig[t].type&&(e.argsConfig[t].type="bytes");for(const e of n)yield e}(e),s=[],n=[];for(const e of t)e.isFunction?n.push(e):s.push(e);return[s,n]}function Ie(e,t){switch(t){case"int":{const t=_e.alloc(4);return t.writeInt32LE(e,0),t}case"long":return H(e,8);case"int128":return H(e,16);case"int256":return H(e,32);case"double":{const t=_e.alloc(8);return t.writeDoubleLE(e,0),t}case"string":case"bytes":return ye(e);case"Bool":return e?_e.from("b5757299","hex"):_e.from("379779bc","hex");case"true":return _e.alloc(0);case"date":return function(e){if(!e)return ue.alloc(4).fill(0);if(e instanceof Date&&(e=Math.floor((Date.now()-e.getTime())/1e3)),"number"==typeof e){const t=ue.alloc(4);return t.writeInt32LE(e,0),t}throw Error(`Cannot interpret "${e}" as a date`)}(e);default:return e.getBytes()}}function ve(e,t){if(t.isVector){t.useVectorId&&e.readInt();const s=[],n=e.readInt();t.isVector=!1;for(let a=0;a<n;a++)s.push(ve(e,t));return t.isVector=!0,s}if(t.flagIndicator)return e.readInt();switch(t.type){case"int":return e.readInt();case"long":return e.readLong();case"int128":return e.readLargeInt(128);case"int256":return e.readLargeInt(256);case"double":return e.readDouble();case"string":return e.tgReadString();case"Bool":return e.tgReadBool();case"true":return!0;case"bytes":return e.tgReadBytes();case"date":return e.tgReadDate();default:if(t.skipConstructorId)throw new Error(`Unknown type ${t}`);return e.tgReadObject()}}function Pe(e,t){const s={};for(const n of t){const{name:t,constructorId:a,subclassOfId:i,argsConfig:o,namespace:r,result:c}=n,d=[r,t].join(".").replace(/^\./,"");class u{static CONSTRUCTOR_ID=a;static SUBCLASS_OF_ID=i;static className=d;static classType=e;CONSTRUCTOR_ID=a;SUBCLASS_OF_ID=i;className=d;classType=e;constructor(e){e=e||{},Object.keys(e).forEach(t=>{this[t]=e[t]})}static fromReader(e){const t={};for(const s in o)if(o.hasOwnProperty(s)){const n=o[s];if(n.isFlag){const a=t[`flags${n.flagGroup>1?n.flagGroup:""}`]&1<<n.flagIndex;if("true"===n.type){t[s]=Boolean(a);continue}t[s]=a?ve(e,n):void 0}else t[s]=ve(e,n)}return new u(t)}getBytes(){const e=this.CONSTRUCTOR_ID,t=_e.alloc(4);t.writeUInt32LE(e,0);const s=[t];for(const e in o)if(o.hasOwnProperty(e)){if(o[e].isFlag&&(!1===this[e]&&"true"===o[e].type||void 0===this[e]))continue;if(o[e].isVector){o[e].useVectorId&&s.push(_e.from("15c4b51c","hex"));const t=_e.alloc(4);t.writeInt32LE(this[e].length,0),s.push(t,_e.concat(this[e].map(t=>Ie(t,o[e].type))))}else if(o[e].flagIndicator)if(Object.values(o).some(e=>e.isFlag)){let e=0;for(const t in o)o[t].isFlag&&(!1===this[t]&&"true"===o[t].type||void 0===this[t]?e|=0:e|=1<<o[t].flagIndex);const t=_e.alloc(4);t.writeUInt32LE(e,0),s.push(t)}else s.push(_e.alloc(4));else if(s.push(Ie(this[e],o[e].type)),this[e]&&"function"==typeof this[e].getBytes){const t=o[e].type.charAt(o[e].type.indexOf(".")+1);t===t.toUpperCase()||s.shift()}}return _e.concat(s)}readResult(t){if("request"!==e)throw new Error("`readResult()` called for non-request instance");const s=c.match(/Vector<(int|long)>/);if(s){t.readInt();const e=[],n=t.readInt();if("int"===s[1])for(let s=0;s<n;s++)e.push(t.readInt());else for(let s=0;s<n;s++)e.push(t.readLong());return e}return t.tgReadObject()}}r?(s[r]||(s[r]={}),s[r][t]=u):s[t]=u}return s}const Ce=function(){let e;const t=be&&function(){const e=localStorage.getItem(Se);return e&&JSON.parse(e)}();return t?e=t:(e=function(){const[e,t]=we("boolFalse#bc799737 = Bool;\nboolTrue#997275b5 = Bool;\ntrue#3fedd339 = True;\nvector#1cb5c415 {t:Type} # [ t ] = Vector t;\nerror#c4b9f9bb code:int text:string = Error;\nnull#56730bcc = Null;\ninputPeerEmpty#7f3b18ea = InputPeer;\ninputPeerSelf#7da07ec9 = InputPeer;\ninputPeerChat#35a95cb9 chat_id:long = InputPeer;\ninputPeerUser#dde8a54c user_id:long access_hash:long = InputPeer;\ninputPeerChannel#27bcbbfc channel_id:long access_hash:long = InputPeer;\ninputPeerUserFromMessage#a87b0a1c peer:InputPeer msg_id:int user_id:long = InputPeer;\ninputPeerChannelFromMessage#bd2a0840 peer:InputPeer msg_id:int channel_id:long = InputPeer;\ninputUserEmpty#b98886cf = InputUser;\ninputUserSelf#f7c1b13f = InputUser;\ninputUser#f21158c6 user_id:long access_hash:long = InputUser;\ninputUserFromMessage#1da448e2 peer:InputPeer msg_id:int user_id:long = InputUser;\ninputPhoneContact#6a1dc4be flags:# client_id:long phone:string first_name:string last_name:string note:flags.0?TextWithEntities = InputContact;\ninputFile#f52ff27f id:long parts:int name:string md5_checksum:string = InputFile;\ninputFileBig#fa4f0bb5 id:long parts:int name:string = InputFile;\ninputFileStoryDocument#62dc8b48 id:InputDocument = InputFile;\ninputMediaEmpty#9664f57f = InputMedia;\ninputMediaUploadedPhoto#1e287d04 flags:# spoiler:flags.2?true file:InputFile stickers:flags.0?Vector<InputDocument> ttl_seconds:flags.1?int = InputMedia;\ninputMediaPhoto#b3ba0635 flags:# spoiler:flags.1?true id:InputPhoto ttl_seconds:flags.0?int = InputMedia;\ninputMediaGeoPoint#f9c44144 geo_point:InputGeoPoint = InputMedia;\ninputMediaContact#f8ab7dfb phone_number:string first_name:string last_name:string vcard:string = InputMedia;\ninputMediaUploadedDocument#37c9330 flags:# nosound_video:flags.3?true force_file:flags.4?true spoiler:flags.5?true file:InputFile thumb:flags.2?InputFile mime_type:string attributes:Vector<DocumentAttribute> stickers:flags.0?Vector<InputDocument> video_cover:flags.6?InputPhoto video_timestamp:flags.7?int ttl_seconds:flags.1?int = InputMedia;\ninputMediaDocument#a8763ab5 flags:# spoiler:flags.2?true id:InputDocument video_cover:flags.3?InputPhoto video_timestamp:flags.4?int ttl_seconds:flags.0?int query:flags.1?string = InputMedia;\ninputMediaVenue#c13d1c11 geo_point:InputGeoPoint title:string address:string provider:string venue_id:string venue_type:string = InputMedia;\ninputMediaPhotoExternal#e5bbfe1a flags:# spoiler:flags.1?true url:string ttl_seconds:flags.0?int = InputMedia;\ninputMediaDocumentExternal#779600f9 flags:# spoiler:flags.1?true url:string ttl_seconds:flags.0?int video_cover:flags.2?InputPhoto video_timestamp:flags.3?int = InputMedia;\ninputMediaGame#d33f43f3 id:InputGame = InputMedia;\ninputMediaInvoice#405fef0d flags:# title:string description:string photo:flags.0?InputWebDocument invoice:Invoice payload:bytes provider:flags.3?string provider_data:DataJSON start_param:flags.1?string extended_media:flags.2?InputMedia = InputMedia;\ninputMediaGeoLive#971fa843 flags:# stopped:flags.0?true geo_point:InputGeoPoint heading:flags.2?int period:flags.1?int proximity_notification_radius:flags.3?int = InputMedia;\ninputMediaPoll#f94e5f1 flags:# poll:Poll correct_answers:flags.0?Vector<bytes> solution:flags.1?string solution_entities:flags.1?Vector<MessageEntity> = InputMedia;\ninputMediaDice#e66fbf7b emoticon:string = InputMedia;\ninputMediaStory#89fdd778 peer:InputPeer id:int = InputMedia;\ninputMediaWebPage#c21b8849 flags:# force_large_media:flags.0?true force_small_media:flags.1?true optional:flags.2?true url:string = InputMedia;\ninputMediaPaidMedia#c4103386 flags:# stars_amount:long extended_media:Vector<InputMedia> payload:flags.0?string = InputMedia;\ninputMediaTodo#9fc55fde todo:TodoList = InputMedia;\ninputMediaStakeDice#f3a9244a game_hash:string ton_amount:long client_seed:bytes = InputMedia;\ninputChatPhotoEmpty#1ca48f57 = InputChatPhoto;\ninputChatUploadedPhoto#bdcdaec0 flags:# file:flags.0?InputFile video:flags.1?InputFile video_start_ts:flags.2?double video_emoji_markup:flags.3?VideoSize = InputChatPhoto;\ninputChatPhoto#8953ad37 id:InputPhoto = InputChatPhoto;\ninputGeoPointEmpty#e4c123d6 = InputGeoPoint;\ninputGeoPoint#48222faf flags:# lat:double long:double accuracy_radius:flags.0?int = InputGeoPoint;\ninputPhotoEmpty#1cd7bf0d = InputPhoto;\ninputPhoto#3bb3b94a id:long access_hash:long file_reference:bytes = InputPhoto;\ninputFileLocation#dfdaabe1 volume_id:long local_id:int secret:long file_reference:bytes = InputFileLocation;\ninputEncryptedFileLocation#f5235d55 id:long access_hash:long = InputFileLocation;\ninputDocumentFileLocation#bad07584 id:long access_hash:long file_reference:bytes thumb_size:string = InputFileLocation;\ninputSecureFileLocation#cbc7ee28 id:long access_hash:long = InputFileLocation;\ninputTakeoutFileLocation#29be5899 = InputFileLocation;\ninputPhotoFileLocation#40181ffe id:long access_hash:long file_reference:bytes thumb_size:string = InputFileLocation;\ninputPhotoLegacyFileLocation#d83466f3 id:long access_hash:long file_reference:bytes volume_id:long local_id:int secret:long = InputFileLocation;\ninputPeerPhotoFileLocation#37257e99 flags:# big:flags.0?true peer:InputPeer photo_id:long = InputFileLocation;\ninputStickerSetThumb#9d84f3db stickerset:InputStickerSet thumb_version:int = InputFileLocation;\ninputGroupCallStream#598a92a flags:# call:InputGroupCall time_ms:long scale:int video_channel:flags.0?int video_quality:flags.0?int = InputFileLocation;\npeerUser#59511722 user_id:long = Peer;\npeerChat#36c6019a chat_id:long = Peer;\npeerChannel#a2a5371e channel_id:long = Peer;\nstorage.fileUnknown#aa963b05 = storage.FileType;\nstorage.filePartial#40bc6f52 = storage.FileType;\nstorage.fileJpeg#7efe0e = storage.FileType;\nstorage.fileGif#cae1aadf = storage.FileType;\nstorage.filePng#a4f63c0 = storage.FileType;\nstorage.filePdf#ae1e508d = storage.FileType;\nstorage.fileMp3#528a0677 = storage.FileType;\nstorage.fileMov#4b09ebbc = storage.FileType;\nstorage.fileMp4#b3cea0e4 = storage.FileType;\nstorage.fileWebp#1081464c = storage.FileType;\nuserEmpty#d3bc4b7a id:long = User;\nuser#31774388 flags:# self:flags.10?true contact:flags.11?true mutual_contact:flags.12?true deleted:flags.13?true bot:flags.14?true bot_chat_history:flags.15?true bot_nochats:flags.16?true verified:flags.17?true restricted:flags.18?true min:flags.20?true bot_inline_geo:flags.21?true support:flags.23?true scam:flags.24?true apply_min_photo:flags.25?true fake:flags.26?true bot_attach_menu:flags.27?true premium:flags.28?true attach_menu_enabled:flags.29?true flags2:# bot_can_edit:flags2.1?true close_friend:flags2.2?true stories_hidden:flags2.3?true stories_unavailable:flags2.4?true contact_require_premium:flags2.10?true bot_business:flags2.11?true bot_has_main_app:flags2.13?true bot_forum_view:flags2.16?true bot_forum_can_manage_topics:flags2.17?true id:long access_hash:flags.0?long first_name:flags.1?string last_name:flags.2?string username:flags.3?string phone:flags.4?string photo:flags.5?UserProfilePhoto status:flags.6?UserStatus bot_info_version:flags.14?int restriction_reason:flags.18?Vector<RestrictionReason> bot_inline_placeholder:flags.19?string lang_code:flags.22?string emoji_status:flags.30?EmojiStatus usernames:flags2.0?Vector<Username> stories_max_id:flags2.5?RecentStory color:flags2.8?PeerColor profile_color:flags2.9?PeerColor bot_active_users:flags2.12?int bot_verification_icon:flags2.14?long send_paid_messages_stars:flags2.15?long = User;\nuserProfilePhotoEmpty#4f11bae1 = UserProfilePhoto;\nuserProfilePhoto#82d1f706 flags:# has_video:flags.0?true personal:flags.2?true photo_id:long stripped_thumb:flags.1?bytes dc_id:int = UserProfilePhoto;\nuserStatusEmpty#9d05049 = UserStatus;\nuserStatusOnline#edb93949 expires:int = UserStatus;\nuserStatusOffline#8c703f was_online:int = UserStatus;\nuserStatusRecently#7b197dc8 flags:# by_me:flags.0?true = UserStatus;\nuserStatusLastWeek#541a1d1a flags:# by_me:flags.0?true = UserStatus;\nuserStatusLastMonth#65899777 flags:# by_me:flags.0?true = UserStatus;\nchatEmpty#29562865 id:long = Chat;\nchat#41cbf256 flags:# creator:flags.0?true left:flags.2?true deactivated:flags.5?true call_active:flags.23?true call_not_empty:flags.24?true noforwards:flags.25?true id:long title:string photo:ChatPhoto participants_count:int date:int version:int migrated_to:flags.6?InputChannel admin_rights:flags.14?ChatAdminRights default_banned_rights:flags.18?ChatBannedRights = Chat;\nchatForbidden#6592a1a7 id:long title:string = Chat;\nchannel#1c32b11c flags:# creator:flags.0?true left:flags.2?true broadcast:flags.5?true verified:flags.7?true megagroup:flags.8?true restricted:flags.9?true signatures:flags.11?true min:flags.12?true scam:flags.19?true has_link:flags.20?true has_geo:flags.21?true slowmode_enabled:flags.22?true call_active:flags.23?true call_not_empty:flags.24?true fake:flags.25?true gigagroup:flags.26?true noforwards:flags.27?true join_to_send:flags.28?true join_request:flags.29?true forum:flags.30?true flags2:# stories_hidden:flags2.1?true stories_hidden_min:flags2.2?true stories_unavailable:flags2.3?true signature_profiles:flags2.12?true autotranslation:flags2.15?true broadcast_messages_allowed:flags2.16?true monoforum:flags2.17?true forum_tabs:flags2.19?true id:long access_hash:flags.13?long title:string username:flags.6?string photo:ChatPhoto date:int restriction_reason:flags.9?Vector<RestrictionReason> admin_rights:flags.14?ChatAdminRights banned_rights:flags.15?ChatBannedRights default_banned_rights:flags.18?ChatBannedRights participants_count:flags.17?int usernames:flags2.0?Vector<Username> stories_max_id:flags2.4?RecentStory color:flags2.7?PeerColor profile_color:flags2.8?PeerColor emoji_status:flags2.9?EmojiStatus level:flags2.10?int subscription_until_date:flags2.11?int bot_verification_icon:flags2.13?long send_paid_messages_stars:flags2.14?long linked_monoforum_id:flags2.18?long = Chat;\nchannelForbidden#17d493d5 flags:# broadcast:flags.5?true megagroup:flags.8?true monoforum:flags.10?true id:long access_hash:long title:string until_date:flags.16?int = Chat;\nchatFull#2633421b flags:# can_set_username:flags.7?true has_scheduled:flags.8?true translations_disabled:flags.19?true id:long about:string participants:ChatParticipants chat_photo:flags.2?Photo notify_settings:PeerNotifySettings exported_invite:flags.13?ExportedChatInvite bot_info:flags.3?Vector<BotInfo> pinned_msg_id:flags.6?int folder_id:flags.11?int call:flags.12?InputGroupCall ttl_period:flags.14?int groupcall_default_join_as:flags.15?Peer theme_emoticon:flags.16?string requests_pending:flags.17?int recent_requesters:flags.17?Vector<long> available_reactions:flags.18?ChatReactions reactions_limit:flags.20?int = ChatFull;\nchannelFull#e4e0b29d flags:# can_view_participants:flags.3?true can_set_username:flags.6?true can_set_stickers:flags.7?true hidden_prehistory:flags.10?true can_set_location:flags.16?true has_scheduled:flags.19?true can_view_stats:flags.20?true blocked:flags.22?true flags2:# can_delete_channel:flags2.0?true antispam:flags2.1?true participants_hidden:flags2.2?true translations_disabled:flags2.3?true stories_pinned_available:flags2.5?true view_forum_as_messages:flags2.6?true restricted_sponsored:flags2.11?true can_view_revenue:flags2.12?true paid_media_allowed:flags2.14?true can_view_stars_revenue:flags2.15?true paid_reactions_available:flags2.16?true stargifts_available:flags2.19?true paid_messages_available:flags2.20?true id:long about:string participants_count:flags.0?int admins_count:flags.1?int kicked_count:flags.2?int banned_count:flags.2?int online_count:flags.13?int read_inbox_max_id:int read_outbox_max_id:int unread_count:int chat_photo:Photo notify_settings:PeerNotifySettings exported_invite:flags.23?ExportedChatInvite bot_info:Vector<BotInfo> migrated_from_chat_id:flags.4?long migrated_from_max_id:flags.4?int pinned_msg_id:flags.5?int stickerset:flags.8?StickerSet available_min_id:flags.9?int folder_id:flags.11?int linked_chat_id:flags.14?long location:flags.15?ChannelLocation slowmode_seconds:flags.17?int slowmode_next_send_date:flags.18?int stats_dc:flags.12?int pts:int call:flags.21?InputGroupCall ttl_period:flags.24?int pending_suggestions:flags.25?Vector<string> groupcall_default_join_as:flags.26?Peer theme_emoticon:flags.27?string requests_pending:flags.28?int recent_requesters:flags.28?Vector<long> default_send_as:flags.29?Peer available_reactions:flags.30?ChatReactions reactions_limit:flags2.13?int stories:flags2.4?PeerStories wallpaper:flags2.7?WallPaper boosts_applied:flags2.8?int boosts_unrestrict:flags2.9?int emojiset:flags2.10?StickerSet bot_verification:flags2.17?BotVerification stargifts_count:flags2.18?int send_paid_messages_stars:flags2.21?long main_tab:flags2.22?ProfileTab = ChatFull;\nchatParticipant#c02d4007 user_id:long inviter_id:long date:int = ChatParticipant;\nchatParticipantCreator#e46bcee4 user_id:long = ChatParticipant;\nchatParticipantAdmin#a0933f5b user_id:long inviter_id:long date:int = ChatParticipant;\nchatParticipantsForbidden#8763d3e1 flags:# chat_id:long self_participant:flags.0?ChatParticipant = ChatParticipants;\nchatParticipants#3cbc93f8 chat_id:long participants:Vector<ChatParticipant> version:int = ChatParticipants;\nchatPhotoEmpty#37c1011c = ChatPhoto;\nchatPhoto#1c6e1c11 flags:# has_video:flags.0?true photo_id:long stripped_thumb:flags.1?bytes dc_id:int = ChatPhoto;\nmessageEmpty#90a6ca84 flags:# id:int peer_id:flags.0?Peer = Message;\nmessage#9cb490e9 flags:# out:flags.1?true mentioned:flags.4?true media_unread:flags.5?true silent:flags.13?true post:flags.14?true from_scheduled:flags.18?true legacy:flags.19?true edit_hide:flags.21?true pinned:flags.24?true noforwards:flags.26?true invert_media:flags.27?true flags2:# offline:flags2.1?true video_processing_pending:flags2.4?true paid_suggested_post_stars:flags2.8?true paid_suggested_post_ton:flags2.9?true id:int from_id:flags.8?Peer from_boosts_applied:flags.29?int peer_id:Peer saved_peer_id:flags.28?Peer fwd_from:flags.2?MessageFwdHeader via_bot_id:flags.11?long via_business_bot_id:flags2.0?long reply_to:flags.3?MessageReplyHeader date:int message:string media:flags.9?MessageMedia reply_markup:flags.6?ReplyMarkup entities:flags.7?Vector<MessageEntity> views:flags.10?int forwards:flags.10?int replies:flags.23?MessageReplies edit_date:flags.15?int post_author:flags.16?string grouped_id:flags.17?long reactions:flags.20?MessageReactions restriction_reason:flags.22?Vector<RestrictionReason> ttl_period:flags.25?int quick_reply_shortcut_id:flags.30?int effect:flags2.2?long factcheck:flags2.3?FactCheck report_delivery_until_date:flags2.5?int paid_message_stars:flags2.6?long suggested_post:flags2.7?SuggestedPost schedule_repeat_period:flags2.10?int summary_from_language:flags2.11?string = Message;\nmessageService#7a800e0a flags:# out:flags.1?true mentioned:flags.4?true media_unread:flags.5?true reactions_are_possible:flags.9?true silent:flags.13?true post:flags.14?true legacy:flags.19?true id:int from_id:flags.8?Peer peer_id:Peer saved_peer_id:flags.28?Peer reply_to:flags.3?MessageReplyHeader date:int action:MessageAction reactions:flags.20?MessageReactions ttl_period:flags.25?int = Message;\nmessageMediaEmpty#3ded6320 = MessageMedia;\nmessageMediaPhoto#695150d7 flags:# spoiler:flags.3?true photo:flags.0?Photo ttl_seconds:flags.2?int = MessageMedia;\nmessageMediaGeo#56e0d474 geo:GeoPoint = MessageMedia;\nmessageMediaContact#70322949 phone_number:string first_name:string last_name:string vcard:string user_id:long = MessageMedia;\nmessageMediaUnsupported#9f84f49e = MessageMedia;\nmessageMediaDocument#52d8ccd9 flags:# nopremium:flags.3?true spoiler:flags.4?true video:flags.6?true round:flags.7?true voice:flags.8?true document:flags.0?Document alt_documents:flags.5?Vector<Document> video_cover:flags.9?Photo video_timestamp:flags.10?int ttl_seconds:flags.2?int = MessageMedia;\nmessageMediaWebPage#ddf10c3b flags:# force_large_media:flags.0?true force_small_media:flags.1?true manual:flags.3?true safe:flags.4?true webpage:WebPage = MessageMedia;\nmessageMediaVenue#2ec0533f geo:GeoPoint title:string address:string provider:string venue_id:string venue_type:string = MessageMedia;\nmessageMediaGame#fdb19008 game:Game = MessageMedia;\nmessageMediaInvoice#f6a548d3 flags:# shipping_address_requested:flags.1?true test:flags.3?true title:string description:string photo:flags.0?WebDocument receipt_msg_id:flags.2?int currency:string total_amount:long start_param:string extended_media:flags.4?MessageExtendedMedia = MessageMedia;\nmessageMediaGeoLive#b940c666 flags:# geo:GeoPoint heading:flags.0?int period:int proximity_notification_radius:flags.1?int = MessageMedia;\nmessageMediaPoll#4bd6e798 poll:Poll results:PollResults = MessageMedia;\nmessageMediaDice#8cbec07 flags:# value:int emoticon:string game_outcome:flags.0?messages.EmojiGameOutcome = MessageMedia;\nmessageMediaStory#68cb6283 flags:# via_mention:flags.1?true peer:Peer id:int story:flags.0?StoryItem = MessageMedia;\nmessageMediaGiveaway#aa073beb flags:# only_new_subscribers:flags.0?true winners_are_visible:flags.2?true channels:Vector<long> countries_iso2:flags.1?Vector<string> prize_description:flags.3?string quantity:int months:flags.4?int stars:flags.5?long until_date:int = MessageMedia;\nmessageMediaGiveawayResults#ceaa3ea1 flags:# only_new_subscribers:flags.0?true refunded:flags.2?true channel_id:long additional_peers_count:flags.3?int launch_msg_id:int winners_count:int unclaimed_count:int winners:Vector<long> months:flags.4?int stars:flags.5?long prize_description:flags.1?string until_date:int = MessageMedia;\nmessageMediaPaidMedia#a8852491 stars_amount:long extended_media:Vector<MessageExtendedMedia> = MessageMedia;\nmessageMediaToDo#8a53b014 flags:# todo:TodoList completions:flags.0?Vector<TodoCompletion> = MessageMedia;\nmessageMediaVideoStream#ca5cab89 flags:# rtmp_stream:flags.0?true call:InputGroupCall = MessageMedia;\nmessageActionEmpty#b6aef7b0 = MessageAction;\nmessageActionChatCreate#bd47cbad title:string users:Vector<long> = MessageAction;\nmessageActionChatEditTitle#b5a1ce5a title:string = MessageAction;\nmessageActionChatEditPhoto#7fcb13a8 photo:Photo = MessageAction;\nmessageActionChatDeletePhoto#95e3fbef = MessageAction;\nmessageActionChatAddUser#15cefd00 users:Vector<long> = MessageAction;\nmessageActionChatDeleteUser#a43f30cc user_id:long = MessageAction;\nmessageActionChatJoinedByLink#31224c3 inviter_id:long = MessageAction;\nmessageActionChannelCreate#95d2ac92 title:string = MessageAction;\nmessageActionChatMigrateTo#e1037f92 channel_id:long = MessageAction;\nmessageActionChannelMigrateFrom#ea3948e9 title:string chat_id:long = MessageAction;\nmessageActionPinMessage#94bd38ed = MessageAction;\nmessageActionHistoryClear#9fbab604 = MessageAction;\nmessageActionGameScore#92a72876 game_id:long score:int = MessageAction;\nmessageActionPaymentSentMe#ffa00ccc flags:# recurring_init:flags.2?true recurring_used:flags.3?true currency:string total_amount:long payload:bytes info:flags.0?PaymentRequestedInfo shipping_option_id:flags.1?string charge:PaymentCharge subscription_until_date:flags.4?int = MessageAction;\nmessageActionPaymentSent#c624b16e flags:# recurring_init:flags.2?true recurring_used:flags.3?true currency:string total_amount:long invoice_slug:flags.0?string subscription_until_date:flags.4?int = MessageAction;\nmessageActionPhoneCall#80e11a7f flags:# video:flags.2?true call_id:long reason:flags.0?PhoneCallDiscardReason duration:flags.1?int = MessageAction;\nmessageActionScreenshotTaken#4792929b = MessageAction;\nmessageActionCustomAction#fae69f56 message:string = MessageAction;\nmessageActionBotAllowed#c516d679 flags:# attach_menu:flags.1?true from_request:flags.3?true domain:flags.0?string app:flags.2?BotApp = MessageAction;\nmessageActionSecureValuesSentMe#1b287353 values:Vector<SecureValue> credentials:SecureCredentialsEncrypted = MessageAction;\nmessageActionSecureValuesSent#d95c6154 types:Vector<SecureValueType> = MessageAction;\nmessageActionContactSignUp#f3f25f76 = MessageAction;\nmessageActionGeoProximityReached#98e0d697 from_id:Peer to_id:Peer distance:int = MessageAction;\nmessageActionGroupCall#7a0d7f42 flags:# call:InputGroupCall duration:flags.0?int = MessageAction;\nmessageActionInviteToGroupCall#502f92f7 call:InputGroupCall users:Vector<long> = MessageAction;\nmessageActionSetMessagesTTL#3c134d7b flags:# period:int auto_setting_from:flags.0?long = MessageAction;\nmessageActionGroupCallScheduled#b3a07661 call:InputGroupCall schedule_date:int = MessageAction;\nmessageActionSetChatTheme#b91bbd3a theme:ChatTheme = MessageAction;\nmessageActionChatJoinedByRequest#ebbca3cb = MessageAction;\nmessageActionWebViewDataSentMe#47dd8079 text:string data:string = MessageAction;\nmessageActionWebViewDataSent#b4c38cb5 text:string = MessageAction;\nmessageActionGiftPremium#48e91302 flags:# currency:string amount:long days:int crypto_currency:flags.0?string crypto_amount:flags.0?long message:flags.1?TextWithEntities = MessageAction;\nmessageActionTopicCreate#d999256 flags:# title_missing:flags.1?true title:string icon_color:int icon_emoji_id:flags.0?long = MessageAction;\nmessageActionTopicEdit#c0944820 flags:# title:flags.0?string icon_emoji_id:flags.1?long closed:flags.2?Bool hidden:flags.3?Bool = MessageAction;\nmessageActionSuggestProfilePhoto#57de635e photo:Photo = MessageAction;\nmessageActionRequestedPeer#31518e9b button_id:int peers:Vector<Peer> = MessageAction;\nmessageActionSetChatWallPaper#5060a3f4 flags:# same:flags.0?true for_both:flags.1?true wallpaper:WallPaper = MessageAction;\nmessageActionGiftCode#31c48347 flags:# via_giveaway:flags.0?true unclaimed:flags.5?true boost_peer:flags.1?Peer days:int slug:string currency:flags.2?string amount:flags.2?long crypto_currency:flags.3?string crypto_amount:flags.3?long message:flags.4?TextWithEntities = MessageAction;\nmessageActionGiveawayLaunch#a80f51e4 flags:# stars:flags.0?long = MessageAction;\nmessageActionGiveawayResults#87e2f155 flags:# stars:flags.0?true winners_count:int unclaimed_count:int = MessageAction;\nmessageActionBoostApply#cc02aa6d boosts:int = MessageAction;\nmessageActionRequestedPeerSentMe#93b31848 button_id:int peers:Vector<RequestedPeer> = MessageAction;\nmessageActionPaymentRefunded#41b3e202 flags:# peer:Peer currency:string total_amount:long payload:flags.0?bytes charge:PaymentCharge = MessageAction;\nmessageActionGiftStars#45d5b021 flags:# currency:string amount:long stars:long crypto_currency:flags.0?string crypto_amount:flags.0?long transaction_id:flags.1?string = MessageAction;\nmessageActionPrizeStars#b00c47a2 flags:# unclaimed:flags.0?true stars:long transaction_id:string boost_peer:Peer giveaway_msg_id:int = MessageAction;\nmessageActionStarGift#ea2c31d3 flags:# name_hidden:flags.0?true saved:flags.2?true converted:flags.3?true upgraded:flags.5?true refunded:flags.9?true can_upgrade:flags.10?true prepaid_upgrade:flags.13?true upgrade_separate:flags.16?true auction_acquired:flags.17?true gift:StarGift message:flags.1?TextWithEntities convert_stars:flags.4?long upgrade_msg_id:flags.5?int upgrade_stars:flags.8?long from_id:flags.11?Peer peer:flags.12?Peer saved_id:flags.12?long prepaid_upgrade_hash:flags.14?string gift_msg_id:flags.15?int to_id:flags.18?Peer gift_num:flags.19?int = MessageAction;\nmessageActionStarGiftUnique#e6c31522 flags:# upgrade:flags.0?true transferred:flags.1?true saved:flags.2?true refunded:flags.5?true prepaid_upgrade:flags.11?true assigned:flags.13?true from_offer:flags.14?true craft:flags.16?true gift:StarGift can_export_at:flags.3?int transfer_stars:flags.4?long from_id:flags.6?Peer peer:flags.7?Peer saved_id:flags.7?long resale_amount:flags.8?StarsAmount can_transfer_at:flags.9?int can_resell_at:flags.10?int drop_original_details_stars:flags.12?long can_craft_at:flags.15?int = MessageAction;\nmessageActionPaidMessagesRefunded#ac1f1fcd count:int stars:long = MessageAction;\nmessageActionPaidMessagesPrice#84b88578 flags:# broadcast_messages_allowed:flags.0?true stars:long = MessageAction;\nmessageActionConferenceCall#2ffe2f7a flags:# missed:flags.0?true active:flags.1?true video:flags.4?true call_id:long duration:flags.2?int other_participants:flags.3?Vector<Peer> = MessageAction;\nmessageActionTodoCompletions#cc7c5c89 completed:Vector<int> incompleted:Vector<int> = MessageAction;\nmessageActionTodoAppendTasks#c7edbc83 list:Vector<TodoItem> = MessageAction;\nmessageActionSuggestedPostApproval#ee7a1596 flags:# rejected:flags.0?true balance_too_low:flags.1?true reject_comment:flags.2?string schedule_date:flags.3?int price:flags.4?StarsAmount = MessageAction;\nmessageActionSuggestedPostSuccess#95ddcf69 price:StarsAmount = MessageAction;\nmessageActionSuggestedPostRefund#69f916f8 flags:# payer_initiated:flags.0?true = MessageAction;\nmessageActionGiftTon#a8a3c699 flags:# currency:string amount:long crypto_currency:string crypto_amount:long transaction_id:flags.0?string = MessageAction;\nmessageActionSuggestBirthday#2c8f2a25 birthday:Birthday = MessageAction;\nmessageActionStarGiftPurchaseOffer#774278d4 flags:# accepted:flags.0?true declined:flags.1?true gift:StarGift price:StarsAmount expires_at:int = MessageAction;\nmessageActionStarGiftPurchaseOfferDeclined#73ada76b flags:# expired:flags.0?true gift:StarGift price:StarsAmount = MessageAction;\nmessageActionNewCreatorPending#b07ed085 new_creator_id:long = MessageAction;\nmessageActionChangeCreator#e188503b new_creator_id:long = MessageAction;\ndialog#d58a08c6 flags:# pinned:flags.2?true unread_mark:flags.3?true view_forum_as_messages:flags.6?true peer:Peer top_message:int read_inbox_max_id:int read_outbox_max_id:int unread_count:int unread_mentions_count:int unread_reactions_count:int notify_settings:PeerNotifySettings pts:flags.0?int draft:flags.1?DraftMessage folder_id:flags.4?int ttl_period:flags.5?int = Dialog;\ndialogFolder#71bd134c flags:# pinned:flags.2?true folder:Folder peer:Peer top_message:int unread_muted_peers_count:int unread_unmuted_peers_count:int unread_muted_messages_count:int unread_unmuted_messages_count:int = Dialog;\nphotoEmpty#2331b22d id:long = Photo;\nphoto#fb197a65 flags:# has_stickers:flags.0?true id:long access_hash:long file_reference:bytes date:int sizes:Vector<PhotoSize> video_sizes:flags.1?Vector<VideoSize> dc_id:int = Photo;\nphotoSizeEmpty#e17e23c type:string = PhotoSize;\nphotoSize#75c78e60 type:string w:int h:int size:int = PhotoSize;\nphotoCachedSize#21e1ad6 type:string w:int h:int bytes:bytes = PhotoSize;\nphotoStrippedSize#e0b0bc2e type:string bytes:bytes = PhotoSize;\nphotoSizeProgressive#fa3efb95 type:string w:int h:int sizes:Vector<int> = PhotoSize;\nphotoPathSize#d8214d41 type:string bytes:bytes = PhotoSize;\ngeoPointEmpty#1117dd5f = GeoPoint;\ngeoPoint#b2a2f663 flags:# long:double lat:double access_hash:long accuracy_radius:flags.0?int = GeoPoint;\nauth.sentCode#5e002502 flags:# type:auth.SentCodeType phone_code_hash:string next_type:flags.1?auth.CodeType timeout:flags.2?int = auth.SentCode;\nauth.sentCodeSuccess#2390fe44 authorization:auth.Authorization = auth.SentCode;\nauth.sentCodePaymentRequired#e0955a3c store_product:string phone_code_hash:string support_email_address:string support_email_subject:string currency:string amount:long = auth.SentCode;\nauth.authorization#2ea2c0d4 flags:# setup_password_required:flags.1?true otherwise_relogin_days:flags.1?int tmp_sessions:flags.0?int future_auth_token:flags.2?bytes user:User = auth.Authorization;\nauth.authorizationSignUpRequired#44747e9a flags:# terms_of_service:flags.0?help.TermsOfService = auth.Authorization;\nauth.exportedAuthorization#b434e2b8 id:long bytes:bytes = auth.ExportedAuthorization;\ninputNotifyPeer#b8bc5b0c peer:InputPeer = InputNotifyPeer;\ninputNotifyUsers#193b4417 = InputNotifyPeer;\ninputNotifyChats#4a95e84e = InputNotifyPeer;\ninputNotifyBroadcasts#b1db7c7e = InputNotifyPeer;\ninputNotifyForumTopic#5c467992 peer:InputPeer top_msg_id:int = InputNotifyPeer;\ninputPeerNotifySettings#cacb6ae2 flags:# show_previews:flags.0?Bool silent:flags.1?Bool mute_until:flags.2?int sound:flags.3?NotificationSound stories_muted:flags.6?Bool stories_hide_sender:flags.7?Bool stories_sound:flags.8?NotificationSound = InputPeerNotifySettings;\npeerNotifySettings#99622c0c flags:# show_previews:flags.0?Bool silent:flags.1?Bool mute_until:flags.2?int ios_sound:flags.3?NotificationSound android_sound:flags.4?NotificationSound other_sound:flags.5?NotificationSound stories_muted:flags.6?Bool stories_hide_sender:flags.7?Bool stories_ios_sound:flags.8?NotificationSound stories_android_sound:flags.9?NotificationSound stories_other_sound:flags.10?NotificationSound = PeerNotifySettings;\npeerSettings#f47741f7 flags:# report_spam:flags.0?true add_contact:flags.1?true block_contact:flags.2?true share_contact:flags.3?true need_contacts_exception:flags.4?true report_geo:flags.5?true autoarchived:flags.7?true invite_members:flags.8?true request_chat_broadcast:flags.10?true business_bot_paused:flags.11?true business_bot_can_reply:flags.12?true geo_distance:flags.6?int request_chat_title:flags.9?string request_chat_date:flags.9?int business_bot_id:flags.13?long business_bot_manage_url:flags.13?string charge_paid_message_stars:flags.14?long registration_month:flags.15?string phone_country:flags.16?string name_change_date:flags.17?int photo_change_date:flags.18?int = PeerSettings;\nwallPaper#a437c3ed id:long flags:# creator:flags.0?true default:flags.1?true pattern:flags.3?true dark:flags.4?true access_hash:long slug:string document:Document settings:flags.2?WallPaperSettings = WallPaper;\nwallPaperNoFile#e0804116 id:long flags:# default:flags.1?true dark:flags.4?true settings:flags.2?WallPaperSettings = WallPaper;\ninputReportReasonSpam#58dbcab8 = ReportReason;\ninputReportReasonViolence#1e22c78d = ReportReason;\ninputReportReasonPornography#2e59d922 = ReportReason;\ninputReportReasonChildAbuse#adf44ee3 = ReportReason;\ninputReportReasonOther#c1e4a2b1 = ReportReason;\ninputReportReasonCopyright#9b89f93a = ReportReason;\ninputReportReasonGeoIrrelevant#dbd4feed = ReportReason;\ninputReportReasonFake#f5ddd6e7 = ReportReason;\ninputReportReasonIllegalDrugs#a8eb2be = ReportReason;\ninputReportReasonPersonalDetails#9ec7863d = ReportReason;\nuserFull#a02bc13e flags:# blocked:flags.0?true phone_calls_available:flags.4?true phone_calls_private:flags.5?true can_pin_message:flags.7?true has_scheduled:flags.12?true video_calls_available:flags.13?true voice_messages_forbidden:flags.20?true translations_disabled:flags.23?true stories_pinned_available:flags.26?true blocked_my_stories_from:flags.27?true wallpaper_overridden:flags.28?true contact_require_premium:flags.29?true read_dates_private:flags.30?true flags2:# sponsored_enabled:flags2.7?true can_view_revenue:flags2.9?true bot_can_manage_emoji_status:flags2.10?true display_gifts_button:flags2.16?true id:long about:flags.1?string settings:PeerSettings personal_photo:flags.21?Photo profile_photo:flags.2?Photo fallback_photo:flags.22?Photo notify_settings:PeerNotifySettings bot_info:flags.3?BotInfo pinned_msg_id:flags.6?int common_chats_count:int folder_id:flags.11?int ttl_period:flags.14?int theme:flags.15?ChatTheme private_forward_name:flags.16?string bot_group_admin_rights:flags.17?ChatAdminRights bot_broadcast_admin_rights:flags.18?ChatAdminRights wallpaper:flags.24?WallPaper stories:flags.25?PeerStories business_work_hours:flags2.0?BusinessWorkHours business_location:flags2.1?BusinessLocation business_greeting_message:flags2.2?BusinessGreetingMessage business_away_message:flags2.3?BusinessAwayMessage business_intro:flags2.4?BusinessIntro birthday:flags2.5?Birthday personal_channel_id:flags2.6?long personal_channel_message:flags2.6?int stargifts_count:flags2.8?int starref_program:flags2.11?StarRefProgram bot_verification:flags2.12?BotVerification send_paid_messages_stars:flags2.14?long disallowed_gifts:flags2.15?DisallowedGiftsSettings stars_rating:flags2.17?StarsRating stars_my_pending_rating:flags2.18?StarsRating stars_my_pending_rating_date:flags2.18?int main_tab:flags2.20?ProfileTab saved_music:flags2.21?Document note:flags2.22?TextWithEntities = UserFull;\ncontact#145ade0b user_id:long mutual:Bool = Contact;\nimportedContact#c13e3c50 user_id:long client_id:long = ImportedContact;\ncontactStatus#16d9703b user_id:long status:UserStatus = ContactStatus;\ncontacts.contactsNotModified#b74ba9d2 = contacts.Contacts;\ncontacts.contacts#eae87e42 contacts:Vector<Contact> saved_count:int users:Vector<User> = contacts.Contacts;\ncontacts.importedContacts#77d01c3b imported:Vector<ImportedContact> popular_invites:Vector<PopularContact> retry_contacts:Vector<long> users:Vector<User> = contacts.ImportedContacts;\ncontacts.blocked#ade1591 blocked:Vector<PeerBlocked> chats:Vector<Chat> users:Vector<User> = contacts.Blocked;\ncontacts.blockedSlice#e1664194 count:int blocked:Vector<PeerBlocked> chats:Vector<Chat> users:Vector<User> = contacts.Blocked;\nmessages.dialogs#15ba6c40 dialogs:Vector<Dialog> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.Dialogs;\nmessages.dialogsSlice#71e094f3 count:int dialogs:Vector<Dialog> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.Dialogs;\nmessages.dialogsNotModified#f0e3e596 count:int = messages.Dialogs;\nmessages.messages#1d73e7ea messages:Vector<Message> topics:Vector<ForumTopic> chats:Vector<Chat> users:Vector<User> = messages.Messages;\nmessages.messagesSlice#5f206716 flags:# inexact:flags.1?true count:int next_rate:flags.0?int offset_id_offset:flags.2?int search_flood:flags.3?SearchPostsFlood messages:Vector<Message> topics:Vector<ForumTopic> chats:Vector<Chat> users:Vector<User> = messages.Messages;\nmessages.channelMessages#c776ba4e flags:# inexact:flags.1?true pts:int count:int offset_id_offset:flags.2?int messages:Vector<Message> topics:Vector<ForumTopic> chats:Vector<Chat> users:Vector<User> = messages.Messages;\nmessages.messagesNotModified#74535f21 count:int = messages.Messages;\nmessages.chats#64ff9fd5 chats:Vector<Chat> = messages.Chats;\nmessages.chatsSlice#9cd81144 count:int chats:Vector<Chat> = messages.Chats;\nmessages.chatFull#e5d7d19c full_chat:ChatFull chats:Vector<Chat> users:Vector<User> = messages.ChatFull;\nmessages.affectedHistory#b45c69d1 pts:int pts_count:int offset:int = messages.AffectedHistory;\ninputMessagesFilterEmpty#57e2f66c = MessagesFilter;\ninputMessagesFilterPhotos#9609a51c = MessagesFilter;\ninputMessagesFilterVideo#9fc00e65 = MessagesFilter;\ninputMessagesFilterPhotoVideo#56e9f0e4 = MessagesFilter;\ninputMessagesFilterDocument#9eddf188 = MessagesFilter;\ninputMessagesFilterUrl#7ef0dd87 = MessagesFilter;\ninputMessagesFilterGif#ffc86587 = MessagesFilter;\ninputMessagesFilterVoice#50f5c392 = MessagesFilter;\ninputMessagesFilterMusic#3751b49e = MessagesFilter;\ninputMessagesFilterChatPhotos#3a20ecb8 = MessagesFilter;\ninputMessagesFilterPhoneCalls#80c99768 flags:# missed:flags.0?true = MessagesFilter;\ninputMessagesFilterRoundVoice#7a7c17a4 = MessagesFilter;\ninputMessagesFilterRoundVideo#b549da53 = MessagesFilter;\ninputMessagesFilterMyMentions#c1f8e69a = MessagesFilter;\ninputMessagesFilterGeo#e7026d0d = MessagesFilter;\ninputMessagesFilterContacts#e062db83 = MessagesFilter;\ninputMessagesFilterPinned#1bb00451 = MessagesFilter;\nupdateNewMessage#1f2b0afd message:Message pts:int pts_count:int = Update;\nupdateMessageID#4e90bfd6 id:int random_id:long = Update;\nupdateDeleteMessages#a20db0e5 messages:Vector<int> pts:int pts_count:int = Update;\nupdateUserTyping#2a17bf5c flags:# user_id:long top_msg_id:flags.0?int action:SendMessageAction = Update;\nupdateChatUserTyping#83487af0 chat_id:long from_id:Peer action:SendMessageAction = Update;\nupdateChatParticipants#7761198 participants:ChatParticipants = Update;\nupdateUserStatus#e5bdf8de user_id:long status:UserStatus = Update;\nupdateUserName#a7848924 user_id:long first_name:string last_name:string usernames:Vector<Username> = Update;\nupdateNewAuthorization#8951abef flags:# unconfirmed:flags.0?true hash:long date:flags.0?int device:flags.0?string location:flags.0?string = Update;\nupdateNewEncryptedMessage#12bcbd9a message:EncryptedMessage qts:int = Update;\nupdateEncryptedChatTyping#1710f156 chat_id:int = Update;\nupdateEncryption#b4a2e88d chat:EncryptedChat date:int = Update;\nupdateEncryptedMessagesRead#38fe25b7 chat_id:int max_date:int date:int = Update;\nupdateChatParticipantAdd#3dda5451 chat_id:long user_id:long inviter_id:long date:int version:int = Update;\nupdateChatParticipantDelete#e32f3d77 chat_id:long user_id:long version:int = Update;\nupdateDcOptions#8e5e9873 dc_options:Vector<DcOption> = Update;\nupdateNotifySettings#bec268ef peer:NotifyPeer notify_settings:PeerNotifySettings = Update;\nupdateServiceNotification#ebe46819 flags:# popup:flags.0?true invert_media:flags.2?true inbox_date:flags.1?int type:string message:string media:MessageMedia entities:Vector<MessageEntity> = Update;\nupdatePrivacy#ee3b272a key:PrivacyKey rules:Vector<PrivacyRule> = Update;\nupdateUserPhone#5492a13 user_id:long phone:string = Update;\nupdateReadHistoryInbox#9e84bc99 flags:# folder_id:flags.0?int peer:Peer top_msg_id:flags.1?int max_id:int still_unread_count:int pts:int pts_count:int = Update;\nupdateReadHistoryOutbox#2f2f21bf peer:Peer max_id:int pts:int pts_count:int = Update;\nupdateWebPage#7f891213 webpage:WebPage pts:int pts_count:int = Update;\nupdateReadMessagesContents#f8227181 flags:# messages:Vector<int> pts:int pts_count:int date:flags.0?int = Update;\nupdateChannelTooLong#108d941f flags:# channel_id:long pts:flags.0?int = Update;\nupdateChannel#635b4c09 channel_id:long = Update;\nupdateNewChannelMessage#62ba04d9 message:Message pts:int pts_count:int = Update;\nupdateReadChannelInbox#922e6e10 flags:# folder_id:flags.0?int channel_id:long max_id:int still_unread_count:int pts:int = Update;\nupdateDeleteChannelMessages#c32d5b12 channel_id:long messages:Vector<int> pts:int pts_count:int = Update;\nupdateChannelMessageViews#f226ac08 channel_id:long id:int views:int = Update;\nupdateChatParticipantAdmin#d7ca61a2 chat_id:long user_id:long is_admin:Bool version:int = Update;\nupdateNewStickerSet#688a30aa stickerset:messages.StickerSet = Update;\nupdateStickerSetsOrder#bb2d201 flags:# masks:flags.0?true emojis:flags.1?true order:Vector<long> = Update;\nupdateStickerSets#31c24808 flags:# masks:flags.0?true emojis:flags.1?true = Update;\nupdateSavedGifs#9375341e = Update;\nupdateBotInlineQuery#496f379c flags:# query_id:long user_id:long query:string geo:flags.0?GeoPoint peer_type:flags.1?InlineQueryPeerType offset:string = Update;\nupdateBotInlineSend#12f12a07 flags:# user_id:long query:string geo:flags.0?GeoPoint id:string msg_id:flags.1?InputBotInlineMessageID = Update;\nupdateEditChannelMessage#1b3f4df7 message:Message pts:int pts_count:int = Update;\nupdateBotCallbackQuery#b9cfc48d flags:# query_id:long user_id:long peer:Peer msg_id:int chat_instance:long data:flags.0?bytes game_short_name:flags.1?string = Update;\nupdateEditMessage#e40370a3 message:Message pts:int pts_count:int = Update;\nupdateInlineBotCallbackQuery#691e9052 flags:# query_id:long user_id:long msg_id:InputBotInlineMessageID chat_instance:long data:flags.0?bytes game_short_name:flags.1?string = Update;\nupdateReadChannelOutbox#b75f99a9 channel_id:long max_id:int = Update;\nupdateDraftMessage#edfc111e flags:# peer:Peer top_msg_id:flags.0?int saved_peer_id:flags.1?Peer draft:DraftMessage = Update;\nupdateReadFeaturedStickers#571d2742 = Update;\nupdateRecentStickers#9a422c20 = Update;\nupdateConfig#a229dd06 = Update;\nupdatePtsChanged#3354678f = Update;\nupdateChannelWebPage#2f2ba99f channel_id:long webpage:WebPage pts:int pts_count:int = Update;\nupdateDialogPinned#6e6fe51c flags:# pinned:flags.0?true folder_id:flags.1?int peer:DialogPeer = Update;\nupdatePinnedDialogs#fa0f3ca2 flags:# folder_id:flags.1?int order:flags.0?Vector<DialogPeer> = Update;\nupdateBotWebhookJSON#8317c0c3 data:DataJSON = Update;\nupdateBotWebhookJSONQuery#9b9240a6 query_id:long data:DataJSON timeout:int = Update;\nupdateBotShippingQuery#b5aefd7d query_id:long user_id:long payload:bytes shipping_address:PostAddress = Update;\nupdateBotPrecheckoutQuery#8caa9a96 flags:# query_id:long user_id:long payload:bytes info:flags.0?PaymentRequestedInfo shipping_option_id:flags.1?string currency:string total_amount:long = Update;\nupdatePhoneCall#ab0f6b1e phone_call:PhoneCall = Update;\nupdateLangPackTooLong#46560264 lang_code:string = Update;\nupdateLangPack#56022f4d difference:LangPackDifference = Update;\nupdateFavedStickers#e511996d = Update;\nupdateChannelReadMessagesContents#25f324f7 flags:# channel_id:long top_msg_id:flags.0?int saved_peer_id:flags.1?Peer messages:Vector<int> = Update;\nupdateContactsReset#7084a7be = Update;\nupdateChannelAvailableMessages#b23fc698 channel_id:long available_min_id:int = Update;\nupdateDialogUnreadMark#b658f23e flags:# unread:flags.0?true peer:DialogPeer saved_peer_id:flags.1?Peer = Update;\nupdateMessagePoll#aca1657b flags:# poll_id:long poll:flags.0?Poll results:PollResults = Update;\nupdateChatDefaultBannedRights#54c01850 peer:Peer default_banned_rights:ChatBannedRights version:int = Update;\nupdateFolderPeers#19360dc0 folder_peers:Vector<FolderPeer> pts:int pts_count:int = Update;\nupdatePeerSettings#6a7e7366 peer:Peer settings:PeerSettings = Update;\nupdatePeerLocated#b4afcfb0 peers:Vector<PeerLocated> = Update;\nupdateNewScheduledMessage#39a51dfb message:Message = Update;\nupdateDeleteScheduledMessages#f2a71983 flags:# peer:Peer messages:Vector<int> sent_messages:flags.0?Vector<int> = Update;\nupdateTheme#8216fba3 theme:Theme = Update;\nupdateGeoLiveViewed#871fb939 peer:Peer msg_id:int = Update;\nupdateLoginToken#564fe691 = Update;\nupdateMessagePollVote#24f40e77 poll_id:long peer:Peer options:Vector<bytes> qts:int = Update;\nupdateDialogFilter#26ffde7d flags:# id:int filter:flags.0?DialogFilter = Update;\nupdateDialogFilterOrder#a5d72105 order:Vector<int> = Update;\nupdateDialogFilters#3504914f = Update;\nupdatePhoneCallSignalingData#2661bf09 phone_call_id:long data:bytes = Update;\nupdateChannelMessageForwards#d29a27f4 channel_id:long id:int forwards:int = Update;\nupdateReadChannelDiscussionInbox#d6b19546 flags:# channel_id:long top_msg_id:int read_max_id:int broadcast_id:flags.0?long broadcast_post:flags.0?int = Update;\nupdateReadChannelDiscussionOutbox#695c9e7c channel_id:long top_msg_id:int read_max_id:int = Update;\nupdatePeerBlocked#ebe07752 flags:# blocked:flags.0?true blocked_my_stories_from:flags.1?true peer_id:Peer = Update;\nupdateChannelUserTyping#8c88c923 flags:# channel_id:long top_msg_id:flags.0?int from_id:Peer action:SendMessageAction = Update;\nupdatePinnedMessages#ed85eab5 flags:# pinned:flags.0?true peer:Peer messages:Vector<int> pts:int pts_count:int = Update;\nupdatePinnedChannelMessages#5bb98608 flags:# pinned:flags.0?true channel_id:long messages:Vector<int> pts:int pts_count:int = Update;\nupdateChat#f89a6a4e chat_id:long = Update;\nupdateGroupCallParticipants#f2ebdb4e call:InputGroupCall participants:Vector<GroupCallParticipant> version:int = Update;\nupdateGroupCall#9d2216e0 flags:# live_story:flags.2?true peer:flags.1?Peer call:GroupCall = Update;\nupdatePeerHistoryTTL#bb9bb9a5 flags:# peer:Peer ttl_period:flags.0?int = Update;\nupdateChatParticipant#d087663a flags:# chat_id:long date:int actor_id:long user_id:long prev_participant:flags.0?ChatParticipant new_participant:flags.1?ChatParticipant invite:flags.2?ExportedChatInvite qts:int = Update;\nupdateChannelParticipant#985d3abb flags:# via_chatlist:flags.3?true channel_id:long date:int actor_id:long user_id:long prev_participant:flags.0?ChannelParticipant new_participant:flags.1?ChannelParticipant invite:flags.2?ExportedChatInvite qts:int = Update;\nupdateBotStopped#c4870a49 user_id:long date:int stopped:Bool qts:int = Update;\nupdateGroupCallConnection#b783982 flags:# presentation:flags.0?true params:DataJSON = Update;\nupdateBotCommands#4d712f2e peer:Peer bot_id:long commands:Vector<BotCommand> = Update;\nupdatePendingJoinRequests#7063c3db peer:Peer requests_pending:int recent_requesters:Vector<long> = Update;\nupdateBotChatInviteRequester#11dfa986 peer:Peer date:int user_id:long about:string invite:ExportedChatInvite qts:int = Update;\nupdateMessageReactions#1e297bfa flags:# peer:Peer msg_id:int top_msg_id:flags.0?int saved_peer_id:flags.1?Peer reactions:MessageReactions = Update;\nupdateAttachMenuBots#17b7a20b = Update;\nupdateWebViewResultSent#1592b79d query_id:long = Update;\nupdateBotMenuButton#14b85813 bot_id:long button:BotMenuButton = Update;\nupdateSavedRingtones#74d8be99 = Update;\nupdateTranscribedAudio#84cd5a flags:# pending:flags.0?true peer:Peer msg_id:int transcription_id:long text:string = Update;\nupdateReadFeaturedEmojiStickers#fb4c496c = Update;\nupdateUserEmojiStatus#28373599 user_id:long emoji_status:EmojiStatus = Update;\nupdateRecentEmojiStatuses#30f443db = Update;\nupdateRecentReactions#6f7863f4 = Update;\nupdateMoveStickerSetToTop#86fccf85 flags:# masks:flags.0?true emojis:flags.1?true stickerset:long = Update;\nupdateMessageExtendedMedia#d5a41724 peer:Peer msg_id:int extended_media:Vector<MessageExtendedMedia> = Update;\nupdateUser#20529438 user_id:long = Update;\nupdateAutoSaveSettings#ec05b097 = Update;\nupdateStory#75b3b798 peer:Peer story:StoryItem = Update;\nupdateReadStories#f74e932b peer:Peer max_id:int = Update;\nupdateStoryID#1bf335b9 id:int random_id:long = Update;\nupdateStoriesStealthMode#2c084dc1 stealth_mode:StoriesStealthMode = Update;\nupdateSentStoryReaction#7d627683 peer:Peer story_id:int reaction:Reaction = Update;\nupdateBotChatBoost#904dd49c peer:Peer boost:Boost qts:int = Update;\nupdateChannelViewForumAsMessages#7b68920 channel_id:long enabled:Bool = Update;\nupdatePeerWallpaper#ae3f101d flags:# wallpaper_overridden:flags.1?true peer:Peer wallpaper:flags.0?WallPaper = Update;\nupdateBotMessageReaction#ac21d3ce peer:Peer msg_id:int date:int actor:Peer old_reactions:Vector<Reaction> new_reactions:Vector<Reaction> qts:int = Update;\nupdateBotMessageReactions#9cb7759 peer:Peer msg_id:int date:int reactions:Vector<ReactionCount> qts:int = Update;\nupdateSavedDialogPinned#aeaf9e74 flags:# pinned:flags.0?true peer:DialogPeer = Update;\nupdatePinnedSavedDialogs#686c85a6 flags:# order:flags.0?Vector<DialogPeer> = Update;\nupdateSavedReactionTags#39c67432 = Update;\nupdateSmsJob#f16269d4 job_id:string = Update;\nupdateQuickReplies#f9470ab2 quick_replies:Vector<QuickReply> = Update;\nupdateNewQuickReply#f53da717 quick_reply:QuickReply = Update;\nupdateDeleteQuickReply#53e6f1ec shortcut_id:int = Update;\nupdateQuickReplyMessage#3e050d0f message:Message = Update;\nupdateDeleteQuickReplyMessages#566fe7cd shortcut_id:int messages:Vector<int> = Update;\nupdateBotBusinessConnect#8ae5c97a connection:BotBusinessConnection qts:int = Update;\nupdateBotNewBusinessMessage#9ddb347c flags:# connection_id:string message:Message reply_to_message:flags.0?Message qts:int = Update;\nupdateBotEditBusinessMessage#7df587c flags:# connection_id:string message:Message reply_to_message:flags.0?Message qts:int = Update;\nupdateBotDeleteBusinessMessage#a02a982e connection_id:string peer:Peer messages:Vector<int> qts:int = Update;\nupdateNewStoryReaction#1824e40b story_id:int peer:Peer reaction:Reaction = Update;\nupdateStarsBalance#4e80a379 balance:StarsAmount = Update;\nupdateBusinessBotCallbackQuery#1ea2fda7 flags:# query_id:long user_id:long connection_id:string message:Message reply_to_message:flags.2?Message chat_instance:long data:flags.0?bytes = Update;\nupdateStarsRevenueStatus#a584b019 peer:Peer status:StarsRevenueStatus = Update;\nupdateBotPurchasedPaidMedia#283bd312 user_id:long payload:string qts:int = Update;\nupdatePaidReactionPrivacy#8b725fce private:PaidReactionPrivacy = Update;\nupdateSentPhoneCode#504aa18f sent_code:auth.SentCode = Update;\nupdateGroupCallChainBlocks#a477288f call:InputGroupCall sub_chain_id:int blocks:Vector<bytes> next_offset:int = Update;\nupdateReadMonoForumInbox#77b0e372 channel_id:long saved_peer_id:Peer read_max_id:int = Update;\nupdateReadMonoForumOutbox#a4a79376 channel_id:long saved_peer_id:Peer read_max_id:int = Update;\nupdateMonoForumNoPaidException#9f812b08 flags:# exception:flags.0?true channel_id:long saved_peer_id:Peer = Update;\nupdateGroupCallMessage#d8326f0d call:InputGroupCall message:GroupCallMessage = Update;\nupdateGroupCallEncryptedMessage#c957a766 call:InputGroupCall from_id:Peer encrypted_message:bytes = Update;\nupdatePinnedForumTopic#683b2c52 flags:# pinned:flags.0?true peer:Peer topic_id:int = Update;\nupdatePinnedForumTopics#def143d0 flags:# peer:Peer order:flags.0?Vector<int> = Update;\nupdateDeleteGroupCallMessages#3e85e92c call:InputGroupCall messages:Vector<int> = Update;\nupdateStarGiftAuctionState#48e246c2 gift_id:long state:StarGiftAuctionState = Update;\nupdateStarGiftAuctionUserState#dc58f31e gift_id:long user_state:StarGiftAuctionUserState = Update;\nupdateEmojiGameInfo#fb9c547a info:messages.EmojiGameInfo = Update;\nupdateStarGiftCraftFail#ac072444 = Update;\nupdates.state#a56c2a3e pts:int qts:int date:int seq:int unread_count:int = updates.State;\nupdates.differenceEmpty#5d75a138 date:int seq:int = updates.Difference;\nupdates.difference#f49ca0 new_messages:Vector<Message> new_encrypted_messages:Vector<EncryptedMessage> other_updates:Vector<Update> chats:Vector<Chat> users:Vector<User> state:updates.State = updates.Difference;\nupdates.differenceSlice#a8fb1981 new_messages:Vector<Message> new_encrypted_messages:Vector<EncryptedMessage> other_updates:Vector<Update> chats:Vector<Chat> users:Vector<User> intermediate_state:updates.State = updates.Difference;\nupdates.differenceTooLong#4afe8f6d pts:int = updates.Difference;\nupdatesTooLong#e317af7e = Updates;\nupdateShortMessage#313bc7f8 flags:# out:flags.1?true mentioned:flags.4?true media_unread:flags.5?true silent:flags.13?true id:int user_id:long message:string pts:int pts_count:int date:int fwd_from:flags.2?MessageFwdHeader via_bot_id:flags.11?long reply_to:flags.3?MessageReplyHeader entities:flags.7?Vector<MessageEntity> ttl_period:flags.25?int = Updates;\nupdateShortChatMessage#4d6deea5 flags:# out:flags.1?true mentioned:flags.4?true media_unread:flags.5?true silent:flags.13?true id:int from_id:long chat_id:long message:string pts:int pts_count:int date:int fwd_from:flags.2?MessageFwdHeader via_bot_id:flags.11?long reply_to:flags.3?MessageReplyHeader entities:flags.7?Vector<MessageEntity> ttl_period:flags.25?int = Updates;\nupdateShort#78d4dec1 update:Update date:int = Updates;\nupdatesCombined#725b04c3 updates:Vector<Update> users:Vector<User> chats:Vector<Chat> date:int seq_start:int seq:int = Updates;\nupdates#74ae4240 updates:Vector<Update> users:Vector<User> chats:Vector<Chat> date:int seq:int = Updates;\nupdateShortSentMessage#9015e101 flags:# out:flags.1?true id:int pts:int pts_count:int date:int media:flags.9?MessageMedia entities:flags.7?Vector<MessageEntity> ttl_period:flags.25?int = Updates;\nphotos.photos#8dca6aa5 photos:Vector<Photo> users:Vector<User> = photos.Photos;\nphotos.photosSlice#15051f54 count:int photos:Vector<Photo> users:Vector<User> = photos.Photos;\nphotos.photo#20212ca8 photo:Photo users:Vector<User> = photos.Photo;\nupload.file#96a18d5 type:storage.FileType mtime:int bytes:bytes = upload.File;\nupload.fileCdnRedirect#f18cda44 dc_id:int file_token:bytes encryption_key:bytes encryption_iv:bytes file_hashes:Vector<FileHash> = upload.File;\ndcOption#18b7a10d flags:# ipv6:flags.0?true media_only:flags.1?true tcpo_only:flags.2?true cdn:flags.3?true static:flags.4?true this_port_only:flags.5?true id:int ip_address:string port:int secret:flags.10?bytes = DcOption;\nconfig#cc1a241e flags:# default_p2p_contacts:flags.3?true preload_featured_stickers:flags.4?true revoke_pm_inbox:flags.6?true blocked_mode:flags.8?true force_try_ipv6:flags.14?true date:int expires:int test_mode:Bool this_dc:int dc_options:Vector<DcOption> dc_txt_domain_name:string chat_size_max:int megagroup_size_max:int forwarded_count_max:int online_update_period_ms:int offline_blur_timeout_ms:int offline_idle_timeout_ms:int online_cloud_timeout_ms:int notify_cloud_delay_ms:int notify_default_delay_ms:int push_chat_period_ms:int push_chat_limit:int edit_time_limit:int revoke_time_limit:int revoke_pm_time_limit:int rating_e_decay:int stickers_recent_limit:int channels_read_media_period:int tmp_sessions:flags.0?int call_receive_timeout_ms:int call_ring_timeout_ms:int call_connect_timeout_ms:int call_packet_timeout_ms:int me_url_prefix:string autoupdate_url_prefix:flags.7?string gif_search_username:flags.9?string venue_search_username:flags.10?string img_search_username:flags.11?string static_maps_provider:flags.12?string caption_length_max:int message_length_max:int webfile_dc_id:int suggested_lang_code:flags.2?string lang_pack_version:flags.2?int base_lang_pack_version:flags.2?int reactions_default:flags.15?Reaction autologin_token:flags.16?string = Config;\nnearestDc#8e1a1775 country:string this_dc:int nearest_dc:int = NearestDc;\nhelp.appUpdate#ccbbce30 flags:# can_not_skip:flags.0?true id:int version:string text:string entities:Vector<MessageEntity> document:flags.1?Document url:flags.2?string sticker:flags.3?Document = help.AppUpdate;\nhelp.noAppUpdate#c45a6536 = help.AppUpdate;\nhelp.inviteText#18cb9f78 message:string = help.InviteText;\nencryptedChatEmpty#ab7ec0a0 id:int = EncryptedChat;\nencryptedChatWaiting#66b25953 id:int access_hash:long date:int admin_id:long participant_id:long = EncryptedChat;\nencryptedChatRequested#48f1d94c flags:# folder_id:flags.0?int id:int access_hash:long date:int admin_id:long participant_id:long g_a:bytes = EncryptedChat;\nencryptedChat#61f0d4c7 id:int access_hash:long date:int admin_id:long participant_id:long g_a_or_b:bytes key_fingerprint:long = EncryptedChat;\nencryptedChatDiscarded#1e1c7c45 flags:# history_deleted:flags.0?true id:int = EncryptedChat;\ninputEncryptedChat#f141b5e1 chat_id:int access_hash:long = InputEncryptedChat;\nencryptedFileEmpty#c21f497e = EncryptedFile;\nencryptedFile#a8008cd8 id:long access_hash:long size:long dc_id:int key_fingerprint:int = EncryptedFile;\ninputEncryptedFileEmpty#1837c364 = InputEncryptedFile;\ninputEncryptedFileUploaded#64bd0306 id:long parts:int md5_checksum:string key_fingerprint:int = InputEncryptedFile;\ninputEncryptedFile#5a17b5e5 id:long access_hash:long = InputEncryptedFile;\ninputEncryptedFileBigUploaded#2dc173c8 id:long parts:int key_fingerprint:int = InputEncryptedFile;\nencryptedMessage#ed18c118 random_id:long chat_id:int date:int bytes:bytes file:EncryptedFile = EncryptedMessage;\nencryptedMessageService#23734b06 random_id:long chat_id:int date:int bytes:bytes = EncryptedMessage;\nmessages.dhConfigNotModified#c0e24635 random:bytes = messages.DhConfig;\nmessages.dhConfig#2c221edd g:int p:bytes version:int random:bytes = messages.DhConfig;\nmessages.sentEncryptedMessage#560f8935 date:int = messages.SentEncryptedMessage;\nmessages.sentEncryptedFile#9493ff32 date:int file:EncryptedFile = messages.SentEncryptedMessage;\ninputDocumentEmpty#72f0eaae = InputDocument;\ninputDocument#1abfb575 id:long access_hash:long file_reference:bytes = InputDocument;\ndocumentEmpty#36f8c871 id:long = Document;\ndocument#8fd4c4d8 flags:# id:long access_hash:long file_reference:bytes date:int mime_type:string size:long thumbs:flags.0?Vector<PhotoSize> video_thumbs:flags.1?Vector<VideoSize> dc_id:int attributes:Vector<DocumentAttribute> = Document;\nhelp.support#17c6b5f6 phone_number:string user:User = help.Support;\nnotifyPeer#9fd40bd8 peer:Peer = NotifyPeer;\nnotifyUsers#b4c83b4c = NotifyPeer;\nnotifyChats#c007cec3 = NotifyPeer;\nnotifyBroadcasts#d612e8ef = NotifyPeer;\nnotifyForumTopic#226e6308 peer:Peer top_msg_id:int = NotifyPeer;\nsendMessageTypingAction#16bf744e = SendMessageAction;\nsendMessageCancelAction#fd5ec8f5 = SendMessageAction;\nsendMessageRecordVideoAction#a187d66f = SendMessageAction;\nsendMessageUploadVideoAction#e9763aec progress:int = SendMessageAction;\nsendMessageRecordAudioAction#d52f73f7 = SendMessageAction;\nsendMessageUploadAudioAction#f351d7ab progress:int = SendMessageAction;\nsendMessageUploadPhotoAction#d1d34a26 progress:int = SendMessageAction;\nsendMessageUploadDocumentAction#aa0cd9e4 progress:int = SendMessageAction;\nsendMessageGeoLocationAction#176f8ba1 = SendMessageAction;\nsendMessageChooseContactAction#628cbc6f = SendMessageAction;\nsendMessageGamePlayAction#dd6a8f48 = SendMessageAction;\nsendMessageRecordRoundAction#88f27fbc = SendMessageAction;\nsendMessageUploadRoundAction#243e1c66 progress:int = SendMessageAction;\nspeakingInGroupCallAction#d92c2285 = SendMessageAction;\nsendMessageHistoryImportAction#dbda9246 progress:int = SendMessageAction;\nsendMessageChooseStickerAction#b05ac6b1 = SendMessageAction;\nsendMessageEmojiInteraction#25972bcb emoticon:string msg_id:int interaction:DataJSON = SendMessageAction;\nsendMessageEmojiInteractionSeen#b665902e emoticon:string = SendMessageAction;\nsendMessageTextDraftAction#376d975c random_id:long text:TextWithEntities = SendMessageAction;\ncontacts.found#b3134d9d my_results:Vector<Peer> results:Vector<Peer> chats:Vector<Chat> users:Vector<User> = contacts.Found;\ninputPrivacyKeyStatusTimestamp#4f96cb18 = InputPrivacyKey;\ninputPrivacyKeyChatInvite#bdfb0426 = InputPrivacyKey;\ninputPrivacyKeyPhoneCall#fabadc5f = InputPrivacyKey;\ninputPrivacyKeyPhoneP2P#db9e70d2 = InputPrivacyKey;\ninputPrivacyKeyForwards#a4dd4c08 = InputPrivacyKey;\ninputPrivacyKeyProfilePhoto#5719bacc = InputPrivacyKey;\ninputPrivacyKeyPhoneNumber#352dafa = InputPrivacyKey;\ninputPrivacyKeyAddedByPhone#d1219bdd = InputPrivacyKey;\ninputPrivacyKeyVoiceMessages#aee69d68 = InputPrivacyKey;\ninputPrivacyKeyAbout#3823cc40 = InputPrivacyKey;\ninputPrivacyKeyBirthday#d65a11cc = InputPrivacyKey;\ninputPrivacyKeyStarGiftsAutoSave#e1732341 = InputPrivacyKey;\ninputPrivacyKeyNoPaidMessages#bdc597b4 = InputPrivacyKey;\ninputPrivacyKeySavedMusic#4dbe9226 = InputPrivacyKey;\nprivacyKeyStatusTimestamp#bc2eab30 = PrivacyKey;\nprivacyKeyChatInvite#500e6dfa = PrivacyKey;\nprivacyKeyPhoneCall#3d662b7b = PrivacyKey;\nprivacyKeyPhoneP2P#39491cc8 = PrivacyKey;\nprivacyKeyForwards#69ec56a3 = PrivacyKey;\nprivacyKeyProfilePhoto#96151fed = PrivacyKey;\nprivacyKeyPhoneNumber#d19ae46d = PrivacyKey;\nprivacyKeyAddedByPhone#42ffd42b = PrivacyKey;\nprivacyKeyVoiceMessages#697f414 = PrivacyKey;\nprivacyKeyAbout#a486b761 = PrivacyKey;\nprivacyKeyBirthday#2000a518 = PrivacyKey;\nprivacyKeyStarGiftsAutoSave#2ca4fdf8 = PrivacyKey;\nprivacyKeyNoPaidMessages#17d348d2 = PrivacyKey;\nprivacyKeySavedMusic#ff7a571b = PrivacyKey;\ninputPrivacyValueAllowContacts#d09e07b = InputPrivacyRule;\ninputPrivacyValueAllowAll#184b35ce = InputPrivacyRule;\ninputPrivacyValueAllowUsers#131cc67f users:Vector<InputUser> = InputPrivacyRule;\ninputPrivacyValueDisallowContacts#ba52007 = InputPrivacyRule;\ninputPrivacyValueDisallowAll#d66b66c9 = InputPrivacyRule;\ninputPrivacyValueDisallowUsers#90110467 users:Vector<InputUser> = InputPrivacyRule;\ninputPrivacyValueAllowChatParticipants#840649cf chats:Vector<long> = InputPrivacyRule;\ninputPrivacyValueDisallowChatParticipants#e94f0f86 chats:Vector<long> = InputPrivacyRule;\ninputPrivacyValueAllowCloseFriends#2f453e49 = InputPrivacyRule;\ninputPrivacyValueAllowPremium#77cdc9f1 = InputPrivacyRule;\ninputPrivacyValueAllowBots#5a4fcce5 = InputPrivacyRule;\ninputPrivacyValueDisallowBots#c4e57915 = InputPrivacyRule;\nprivacyValueAllowContacts#fffe1bac = PrivacyRule;\nprivacyValueAllowAll#65427b82 = PrivacyRule;\nprivacyValueAllowUsers#b8905fb2 users:Vector<long> = PrivacyRule;\nprivacyValueDisallowContacts#f888fa1a = PrivacyRule;\nprivacyValueDisallowAll#8b73e763 = PrivacyRule;\nprivacyValueDisallowUsers#e4621141 users:Vector<long> = PrivacyRule;\nprivacyValueAllowChatParticipants#6b134e8e chats:Vector<long> = PrivacyRule;\nprivacyValueDisallowChatParticipants#41c87565 chats:Vector<long> = PrivacyRule;\nprivacyValueAllowCloseFriends#f7e8d89b = PrivacyRule;\nprivacyValueAllowPremium#ece9814b = PrivacyRule;\nprivacyValueAllowBots#21461b5d = PrivacyRule;\nprivacyValueDisallowBots#f6a5f82f = PrivacyRule;\naccount.privacyRules#50a04e45 rules:Vector<PrivacyRule> chats:Vector<Chat> users:Vector<User> = account.PrivacyRules;\naccountDaysTTL#b8d0afdf days:int = AccountDaysTTL;\ndocumentAttributeImageSize#6c37c15c w:int h:int = DocumentAttribute;\ndocumentAttributeAnimated#11b58939 = DocumentAttribute;\ndocumentAttributeSticker#6319d612 flags:# mask:flags.1?true alt:string stickerset:InputStickerSet mask_coords:flags.0?MaskCoords = DocumentAttribute;\ndocumentAttributeVideo#43c57c48 flags:# round_message:flags.0?true supports_streaming:flags.1?true nosound:flags.3?true duration:double w:int h:int preload_prefix_size:flags.2?int video_start_ts:flags.4?double video_codec:flags.5?string = DocumentAttribute;\ndocumentAttributeAudio#9852f9c6 flags:# voice:flags.10?true duration:int title:flags.0?string performer:flags.1?string waveform:flags.2?bytes = DocumentAttribute;\ndocumentAttributeFilename#15590068 file_name:string = DocumentAttribute;\ndocumentAttributeHasStickers#9801d2f7 = DocumentAttribute;\ndocumentAttributeCustomEmoji#fd149899 flags:# free:flags.0?true text_color:flags.1?true alt:string stickerset:InputStickerSet = DocumentAttribute;\nmessages.stickersNotModified#f1749a22 = messages.Stickers;\nmessages.stickers#30a6ec7e hash:long stickers:Vector<Document> = messages.Stickers;\nstickerPack#12b299d4 emoticon:string documents:Vector<long> = StickerPack;\nmessages.allStickersNotModified#e86602c3 = messages.AllStickers;\nmessages.allStickers#cdbbcebb hash:long sets:Vector<StickerSet> = messages.AllStickers;\nmessages.affectedMessages#84d19185 pts:int pts_count:int = messages.AffectedMessages;\nwebPageEmpty#211a1788 flags:# id:long url:flags.0?string = WebPage;\nwebPagePending#b0d13e47 flags:# id:long url:flags.0?string date:int = WebPage;\nwebPage#e89c45b2 flags:# has_large_media:flags.13?true video_cover_photo:flags.14?true id:long url:string display_url:string hash:int type:flags.0?string site_name:flags.1?string title:flags.2?string description:flags.3?string photo:flags.4?Photo embed_url:flags.5?string embed_type:flags.5?string embed_width:flags.6?int embed_height:flags.6?int duration:flags.7?int author:flags.8?string document:flags.9?Document cached_page:flags.10?Page attributes:flags.12?Vector<WebPageAttribute> = WebPage;\nwebPageNotModified#7311ca11 flags:# cached_page_views:flags.0?int = WebPage;\nauthorization#ad01d61d flags:# current:flags.0?true official_app:flags.1?true password_pending:flags.2?true encrypted_requests_disabled:flags.3?true call_requests_disabled:flags.4?true unconfirmed:flags.5?true hash:long device_model:string platform:string system_version:string api_id:int app_name:string app_version:string date_created:int date_active:int ip:string country:string region:string = Authorization;\naccount.authorizations#4bff8ea0 authorization_ttl_days:int authorizations:Vector<Authorization> = account.Authorizations;\naccount.password#957b50fb flags:# has_recovery:flags.0?true has_secure_values:flags.1?true has_password:flags.2?true current_algo:flags.2?PasswordKdfAlgo srp_B:flags.2?bytes srp_id:flags.2?long hint:flags.3?string email_unconfirmed_pattern:flags.4?string new_algo:PasswordKdfAlgo new_secure_algo:SecurePasswordKdfAlgo secure_random:bytes pending_reset_date:flags.5?int login_email_pattern:flags.6?string = account.Password;\naccount.passwordSettings#9a5c33e5 flags:# email:flags.0?string secure_settings:flags.1?SecureSecretSettings = account.PasswordSettings;\naccount.passwordInputSettings#c23727c9 flags:# new_algo:flags.0?PasswordKdfAlgo new_password_hash:flags.0?bytes hint:flags.0?string email:flags.1?string new_secure_settings:flags.2?SecureSecretSettings = account.PasswordInputSettings;\nauth.passwordRecovery#137948a5 email_pattern:string = auth.PasswordRecovery;\nreceivedNotifyMessage#a384b779 id:int flags:int = ReceivedNotifyMessage;\nchatInviteExported#a22cbd96 flags:# revoked:flags.0?true permanent:flags.5?true request_needed:flags.6?true link:string admin_id:long date:int start_date:flags.4?int expire_date:flags.1?int usage_limit:flags.2?int usage:flags.3?int requested:flags.7?int subscription_expired:flags.10?int title:flags.8?string subscription_pricing:flags.9?StarsSubscriptionPricing = ExportedChatInvite;\nchatInvitePublicJoinRequests#ed107ab7 = ExportedChatInvite;\nchatInviteAlready#5a686d7c chat:Chat = ChatInvite;\nchatInvite#5c9d3702 flags:# channel:flags.0?true broadcast:flags.1?true public:flags.2?true megagroup:flags.3?true request_needed:flags.6?true verified:flags.7?true scam:flags.8?true fake:flags.9?true can_refulfill_subscription:flags.11?true title:string about:flags.5?string photo:Photo participants_count:int participants:flags.4?Vector<User> color:int subscription_pricing:flags.10?StarsSubscriptionPricing subscription_form_id:flags.12?long bot_verification:flags.13?BotVerification = ChatInvite;\nchatInvitePeek#61695cb0 chat:Chat expires:int = ChatInvite;\ninputStickerSetEmpty#ffb62b95 = InputStickerSet;\ninputStickerSetID#9de7a269 id:long access_hash:long = InputStickerSet;\ninputStickerSetShortName#861cc8a0 short_name:string = InputStickerSet;\ninputStickerSetAnimatedEmoji#28703c8 = InputStickerSet;\ninputStickerSetDice#e67f520e emoticon:string = InputStickerSet;\ninputStickerSetAnimatedEmojiAnimations#cde3739 = InputStickerSet;\ninputStickerSetPremiumGifts#c88b3b02 = InputStickerSet;\ninputStickerSetEmojiGenericAnimations#4c4d4ce = InputStickerSet;\ninputStickerSetEmojiDefaultStatuses#29d0f5ee = InputStickerSet;\ninputStickerSetEmojiDefaultTopicIcons#44c1f8e9 = InputStickerSet;\ninputStickerSetEmojiChannelDefaultStatuses#49748553 = InputStickerSet;\ninputStickerSetTonGifts#1cf671a0 = InputStickerSet;\nstickerSet#2dd14edc flags:# archived:flags.1?true official:flags.2?true masks:flags.3?true emojis:flags.7?true text_color:flags.9?true channel_emoji_status:flags.10?true creator:flags.11?true installed_date:flags.0?int id:long access_hash:long title:string short_name:string thumbs:flags.4?Vector<PhotoSize> thumb_dc_id:flags.4?int thumb_version:flags.4?int thumb_document_id:flags.8?long count:int hash:int = StickerSet;\nmessages.stickerSet#6e153f16 set:StickerSet packs:Vector<StickerPack> keywords:Vector<StickerKeyword> documents:Vector<Document> = messages.StickerSet;\nmessages.stickerSetNotModified#d3f924eb = messages.StickerSet;\nbotCommand#c27ac8c7 command:string description:string = BotCommand;\nbotInfo#4d8a0299 flags:# has_preview_medias:flags.6?true user_id:flags.0?long description:flags.1?string description_photo:flags.4?Photo description_document:flags.5?Document commands:flags.2?Vector<BotCommand> menu_button:flags.3?BotMenuButton privacy_policy_url:flags.7?string app_settings:flags.8?BotAppSettings verifier_settings:flags.9?BotVerifierSettings = BotInfo;\nkeyboardButton#7d170cff flags:# style:flags.10?KeyboardButtonStyle text:string = KeyboardButton;\nkeyboardButtonUrl#d80c25ec flags:# style:flags.10?KeyboardButtonStyle text:string url:string = KeyboardButton;\nkeyboardButtonCallback#e62bc960 flags:# requires_password:flags.0?true style:flags.10?KeyboardButtonStyle text:string data:bytes = KeyboardButton;\nkeyboardButtonRequestPhone#417efd8f flags:# style:flags.10?KeyboardButtonStyle text:string = KeyboardButton;\nkeyboardButtonRequestGeoLocation#aa40f94d flags:# style:flags.10?KeyboardButtonStyle text:string = KeyboardButton;\nkeyboardButtonSwitchInline#991399fc flags:# same_peer:flags.0?true style:flags.10?KeyboardButtonStyle text:string query:string peer_types:flags.1?Vector<InlineQueryPeerType> = KeyboardButton;\nkeyboardButtonGame#89c590f9 flags:# style:flags.10?KeyboardButtonStyle text:string = KeyboardButton;\nkeyboardButtonBuy#3fa53905 flags:# style:flags.10?KeyboardButtonStyle text:string = KeyboardButton;\nkeyboardButtonUrlAuth#f51006f9 flags:# style:flags.10?KeyboardButtonStyle text:string fwd_text:flags.0?string url:string button_id:int = KeyboardButton;\ninputKeyboardButtonUrlAuth#68013e72 flags:# request_write_access:flags.0?true style:flags.10?KeyboardButtonStyle text:string fwd_text:flags.1?string url:string bot:InputUser = KeyboardButton;\nkeyboardButtonRequestPoll#7a11d782 flags:# style:flags.10?KeyboardButtonStyle quiz:flags.0?Bool text:string = KeyboardButton;\ninputKeyboardButtonUserProfile#7d5e07c7 flags:# style:flags.10?KeyboardButtonStyle text:string user_id:InputUser = KeyboardButton;\nkeyboardButtonUserProfile#c0fd5d09 flags:# style:flags.10?KeyboardButtonStyle text:string user_id:long = KeyboardButton;\nkeyboardButtonWebView#e846b1a0 flags:# style:flags.10?KeyboardButtonStyle text:string url:string = KeyboardButton;\nkeyboardButtonSimpleWebView#e15c4370 flags:# style:flags.10?KeyboardButtonStyle text:string url:string = KeyboardButton;\nkeyboardButtonRequestPeer#5b0f15f5 flags:# style:flags.10?KeyboardButtonStyle text:string button_id:int peer_type:RequestPeerType max_quantity:int = KeyboardButton;\ninputKeyboardButtonRequestPeer#2b78156 flags:# name_requested:flags.0?true username_requested:flags.1?true photo_requested:flags.2?true style:flags.10?KeyboardButtonStyle text:string button_id:int peer_type:RequestPeerType max_quantity:int = KeyboardButton;\nkeyboardButtonCopy#bcc4af10 flags:# style:flags.10?KeyboardButtonStyle text:string copy_text:string = KeyboardButton;\nkeyboardButtonRow#77608b83 buttons:Vector<KeyboardButton> = KeyboardButtonRow;\nreplyKeyboardHide#a03e5b85 flags:# selective:flags.2?true = ReplyMarkup;\nreplyKeyboardForceReply#86b40b08 flags:# single_use:flags.1?true selective:flags.2?true placeholder:flags.3?string = ReplyMarkup;\nreplyKeyboardMarkup#85dd99d1 flags:# resize:flags.0?true single_use:flags.1?true selective:flags.2?true persistent:flags.4?true rows:Vector<KeyboardButtonRow> placeholder:flags.3?string = ReplyMarkup;\nreplyInlineMarkup#48a30254 rows:Vector<KeyboardButtonRow> = ReplyMarkup;\nmessageEntityUnknown#bb92ba95 offset:int length:int = MessageEntity;\nmessageEntityMention#fa04579d offset:int length:int = MessageEntity;\nmessageEntityHashtag#6f635b0d offset:int length:int = MessageEntity;\nmessageEntityBotCommand#6cef8ac7 offset:int length:int = MessageEntity;\nmessageEntityUrl#6ed02538 offset:int length:int = MessageEntity;\nmessageEntityEmail#64e475c2 offset:int length:int = MessageEntity;\nmessageEntityBold#bd610bc9 offset:int length:int = MessageEntity;\nmessageEntityItalic#826f8b60 offset:int length:int = MessageEntity;\nmessageEntityCode#28a20571 offset:int length:int = MessageEntity;\nmessageEntityPre#73924be0 offset:int length:int language:string = MessageEntity;\nmessageEntityTextUrl#76a6d327 offset:int length:int url:string = MessageEntity;\nmessageEntityMentionName#dc7b1140 offset:int length:int user_id:long = MessageEntity;\ninputMessageEntityMentionName#208e68c9 offset:int length:int user_id:InputUser = MessageEntity;\nmessageEntityPhone#9b69e34b offset:int length:int = MessageEntity;\nmessageEntityCashtag#4c4e743f offset:int length:int = MessageEntity;\nmessageEntityUnderline#9c4e7e8b offset:int length:int = MessageEntity;\nmessageEntityStrike#bf0693d4 offset:int length:int = MessageEntity;\nmessageEntityBankCard#761e6af4 offset:int length:int = MessageEntity;\nmessageEntitySpoiler#32ca960f offset:int length:int = MessageEntity;\nmessageEntityCustomEmoji#c8cf05f8 offset:int length:int document_id:long = MessageEntity;\nmessageEntityBlockquote#f1ccaaac flags:# collapsed:flags.0?true offset:int length:int = MessageEntity;\ninputChannelEmpty#ee8c1e86 = InputChannel;\ninputChannel#f35aec28 channel_id:long access_hash:long = InputChannel;\ninputChannelFromMessage#5b934f9d peer:InputPeer msg_id:int channel_id:long = InputChannel;\ncontacts.resolvedPeer#7f077ad9 peer:Peer chats:Vector<Chat> users:Vector<User> = contacts.ResolvedPeer;\nmessageRange#ae30253 min_id:int max_id:int = MessageRange;\nupdates.channelDifferenceEmpty#3e11affb flags:# final:flags.0?true pts:int timeout:flags.1?int = updates.ChannelDifference;\nupdates.channelDifferenceTooLong#a4bcc6fe flags:# final:flags.0?true timeout:flags.1?int dialog:Dialog messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = updates.ChannelDifference;\nupdates.channelDifference#2064674e flags:# final:flags.0?true pts:int timeout:flags.1?int new_messages:Vector<Message> other_updates:Vector<Update> chats:Vector<Chat> users:Vector<User> = updates.ChannelDifference;\nchannelMessagesFilterEmpty#94d42ee7 = ChannelMessagesFilter;\nchannelMessagesFilter#cd77d957 flags:# exclude_new_messages:flags.1?true ranges:Vector<MessageRange> = ChannelMessagesFilter;\nchannelParticipant#cb397619 flags:# user_id:long date:int subscription_until_date:flags.0?int = ChannelParticipant;\nchannelParticipantSelf#4f607bef flags:# via_request:flags.0?true user_id:long inviter_id:long date:int subscription_until_date:flags.1?int = ChannelParticipant;\nchannelParticipantCreator#2fe601d3 flags:# user_id:long admin_rights:ChatAdminRights rank:flags.0?string = ChannelParticipant;\nchannelParticipantAdmin#34c3bb53 flags:# can_edit:flags.0?true self:flags.1?true user_id:long inviter_id:flags.1?long promoted_by:long date:int admin_rights:ChatAdminRights rank:flags.2?string = ChannelParticipant;\nchannelParticipantBanned#6df8014e flags:# left:flags.0?true peer:Peer kicked_by:long date:int banned_rights:ChatBannedRights = ChannelParticipant;\nchannelParticipantLeft#1b03f006 peer:Peer = ChannelParticipant;\nchannelParticipantsRecent#de3f3c79 = ChannelParticipantsFilter;\nchannelParticipantsAdmins#b4608969 = ChannelParticipantsFilter;\nchannelParticipantsKicked#a3b54985 q:string = ChannelParticipantsFilter;\nchannelParticipantsBots#b0d1865b = ChannelParticipantsFilter;\nchannelParticipantsBanned#1427a5e1 q:string = ChannelParticipantsFilter;\nchannelParticipantsSearch#656ac4b q:string = ChannelParticipantsFilter;\nchannelParticipantsContacts#bb6ae88d q:string = ChannelParticipantsFilter;\nchannelParticipantsMentions#e04b5ceb flags:# q:flags.0?string top_msg_id:flags.1?int = ChannelParticipantsFilter;\nchannels.channelParticipants#9ab0feaf count:int participants:Vector<ChannelParticipant> chats:Vector<Chat> users:Vector<User> = channels.ChannelParticipants;\nchannels.channelParticipantsNotModified#f0173fe9 = channels.ChannelParticipants;\nchannels.channelParticipant#dfb80317 participant:ChannelParticipant chats:Vector<Chat> users:Vector<User> = channels.ChannelParticipant;\nhelp.termsOfService#780a0310 flags:# popup:flags.0?true id:DataJSON text:string entities:Vector<MessageEntity> min_age_confirm:flags.1?int = help.TermsOfService;\nmessages.savedGifsNotModified#e8025ca2 = messages.SavedGifs;\nmessages.savedGifs#84a02a0d hash:long gifs:Vector<Document> = messages.SavedGifs;\ninputBotInlineMessageMediaAuto#3380c786 flags:# invert_media:flags.3?true message:string entities:flags.1?Vector<MessageEntity> reply_markup:flags.2?ReplyMarkup = InputBotInlineMessage;\ninputBotInlineMessageText#3dcd7a87 flags:# no_webpage:flags.0?true invert_media:flags.3?true message:string entities:flags.1?Vector<MessageEntity> reply_markup:flags.2?ReplyMarkup = InputBotInlineMessage;\ninputBotInlineMessageMediaGeo#96929a85 flags:# geo_point:InputGeoPoint heading:flags.0?int period:flags.1?int proximity_notification_radius:flags.3?int reply_markup:flags.2?ReplyMarkup = InputBotInlineMessage;\ninputBotInlineMessageMediaVenue#417bbf11 flags:# geo_point:InputGeoPoint title:string address:string provider:string venue_id:string venue_type:string reply_markup:flags.2?ReplyMarkup = InputBotInlineMessage;\ninputBotInlineMessageMediaContact#a6edbffd flags:# phone_number:string first_name:string last_name:string vcard:string reply_markup:flags.2?ReplyMarkup = InputBotInlineMessage;\ninputBotInlineMessageGame#4b425864 flags:# reply_markup:flags.2?ReplyMarkup = InputBotInlineMessage;\ninputBotInlineMessageMediaInvoice#d7e78225 flags:# title:string description:string photo:flags.0?InputWebDocument invoice:Invoice payload:bytes provider:string provider_data:DataJSON reply_markup:flags.2?ReplyMarkup = InputBotInlineMessage;\ninputBotInlineMessageMediaWebPage#bddcc510 flags:# invert_media:flags.3?true force_large_media:flags.4?true force_small_media:flags.5?true optional:flags.6?true message:string entities:flags.1?Vector<MessageEntity> url:string reply_markup:flags.2?ReplyMarkup = InputBotInlineMessage;\ninputBotInlineResult#88bf9319 flags:# id:string type:string title:flags.1?string description:flags.2?string url:flags.3?string thumb:flags.4?InputWebDocument content:flags.5?InputWebDocument send_message:InputBotInlineMessage = InputBotInlineResult;\ninputBotInlineResultPhoto#a8d864a7 id:string type:string photo:InputPhoto send_message:InputBotInlineMessage = InputBotInlineResult;\ninputBotInlineResultDocument#fff8fdc4 flags:# id:string type:string title:flags.1?string description:flags.2?string document:InputDocument send_message:InputBotInlineMessage = InputBotInlineResult;\ninputBotInlineResultGame#4fa417f2 id:string short_name:string send_message:InputBotInlineMessage = InputBotInlineResult;\nbotInlineMessageMediaAuto#764cf810 flags:# invert_media:flags.3?true message:string entities:flags.1?Vector<MessageEntity> reply_markup:flags.2?ReplyMarkup = BotInlineMessage;\nbotInlineMessageText#8c7f65e2 flags:# no_webpage:flags.0?true invert_media:flags.3?true message:string entities:flags.1?Vector<MessageEntity> reply_markup:flags.2?ReplyMarkup = BotInlineMessage;\nbotInlineMessageMediaGeo#51846fd flags:# geo:GeoPoint heading:flags.0?int period:flags.1?int proximity_notification_radius:flags.3?int reply_markup:flags.2?ReplyMarkup = BotInlineMessage;\nbotInlineMessageMediaVenue#8a86659c flags:# geo:GeoPoint title:string address:string provider:string venue_id:string venue_type:string reply_markup:flags.2?ReplyMarkup = BotInlineMessage;\nbotInlineMessageMediaContact#18d1cdc2 flags:# phone_number:string first_name:string last_name:string vcard:string reply_markup:flags.2?ReplyMarkup = BotInlineMessage;\nbotInlineMessageMediaInvoice#354a9b09 flags:# shipping_address_requested:flags.1?true test:flags.3?true title:string description:string photo:flags.0?WebDocument currency:string total_amount:long reply_markup:flags.2?ReplyMarkup = BotInlineMessage;\nbotInlineMessageMediaWebPage#809ad9a6 flags:# invert_media:flags.3?true force_large_media:flags.4?true force_small_media:flags.5?true manual:flags.7?true safe:flags.8?true message:string entities:flags.1?Vector<MessageEntity> url:string reply_markup:flags.2?ReplyMarkup = BotInlineMessage;\nbotInlineResult#11965f3a flags:# id:string type:string title:flags.1?string description:flags.2?string url:flags.3?string thumb:flags.4?WebDocument content:flags.5?WebDocument send_message:BotInlineMessage = BotInlineResult;\nbotInlineMediaResult#17db940b flags:# id:string type:string photo:flags.0?Photo document:flags.1?Document title:flags.2?string description:flags.3?string send_message:BotInlineMessage = BotInlineResult;\nmessages.botResults#e021f2f6 flags:# gallery:flags.0?true query_id:long next_offset:flags.1?string switch_pm:flags.2?InlineBotSwitchPM switch_webview:flags.3?InlineBotWebView results:Vector<BotInlineResult> cache_time:int users:Vector<User> = messages.BotResults;\nexportedMessageLink#5dab1af4 link:string html:string = ExportedMessageLink;\nmessageFwdHeader#4e4df4bb flags:# imported:flags.7?true saved_out:flags.11?true from_id:flags.0?Peer from_name:flags.5?string date:int channel_post:flags.2?int post_author:flags.3?string saved_from_peer:flags.4?Peer saved_from_msg_id:flags.4?int saved_from_id:flags.8?Peer saved_from_name:flags.9?string saved_date:flags.10?int psa_type:flags.6?string = MessageFwdHeader;\nauth.codeTypeSms#72a3158c = auth.CodeType;\nauth.codeTypeCall#741cd3e3 = auth.CodeType;\nauth.codeTypeFlashCall#226ccefb = auth.CodeType;\nauth.codeTypeMissedCall#d61ad6ee = auth.CodeType;\nauth.codeTypeFragmentSms#6ed998c = auth.CodeType;\nauth.sentCodeTypeApp#3dbb5986 length:int = auth.SentCodeType;\nauth.sentCodeTypeSms#c000bba2 length:int = auth.SentCodeType;\nauth.sentCodeTypeCall#5353e5a7 length:int = auth.SentCodeType;\nauth.sentCodeTypeFlashCall#ab03c6d9 pattern:string = auth.SentCodeType;\nauth.sentCodeTypeMissedCall#82006484 prefix:string length:int = auth.SentCodeType;\nauth.sentCodeTypeEmailCode#f450f59b flags:# apple_signin_allowed:flags.0?true google_signin_allowed:flags.1?true email_pattern:string length:int reset_available_period:flags.3?int reset_pending_date:flags.4?int = auth.SentCodeType;\nauth.sentCodeTypeSetUpEmailRequired#a5491dea flags:# apple_signin_allowed:flags.0?true google_signin_allowed:flags.1?true = auth.SentCodeType;\nauth.sentCodeTypeFragmentSms#d9565c39 url:string length:int = auth.SentCodeType;\nauth.sentCodeTypeFirebaseSms#9fd736 flags:# nonce:flags.0?bytes play_integrity_project_id:flags.2?long play_integrity_nonce:flags.2?bytes receipt:flags.1?string push_timeout:flags.1?int length:int = auth.SentCodeType;\nauth.sentCodeTypeSmsWord#a416ac81 flags:# beginning:flags.0?string = auth.SentCodeType;\nauth.sentCodeTypeSmsPhrase#b37794af flags:# beginning:flags.0?string = auth.SentCodeType;\nmessages.botCallbackAnswer#36585ea4 flags:# alert:flags.1?true has_url:flags.3?true native_ui:flags.4?true message:flags.0?string url:flags.2?string cache_time:int = messages.BotCallbackAnswer;\nmessages.messageEditData#26b5dde6 flags:# caption:flags.0?true = messages.MessageEditData;\ninputBotInlineMessageID#890c3d89 dc_id:int id:long access_hash:long = InputBotInlineMessageID;\ninputBotInlineMessageID64#b6d915d7 dc_id:int owner_id:long id:int access_hash:long = InputBotInlineMessageID;\ninlineBotSwitchPM#3c20629f text:string start_param:string = InlineBotSwitchPM;\nmessages.peerDialogs#3371c354 dialogs:Vector<Dialog> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> state:updates.State = messages.PeerDialogs;\ntopPeer#edcdc05b peer:Peer rating:double = TopPeer;\ntopPeerCategoryBotsPM#ab661b5b = TopPeerCategory;\ntopPeerCategoryBotsInline#148677e2 = TopPeerCategory;\ntopPeerCategoryCorrespondents#637b7ed = TopPeerCategory;\ntopPeerCategoryGroups#bd17a14a = TopPeerCategory;\ntopPeerCategoryChannels#161d9628 = TopPeerCategory;\ntopPeerCategoryPhoneCalls#1e76a78c = TopPeerCategory;\ntopPeerCategoryForwardUsers#a8406ca9 = TopPeerCategory;\ntopPeerCategoryForwardChats#fbeec0f0 = TopPeerCategory;\ntopPeerCategoryBotsApp#fd9e7bec = TopPeerCategory;\ntopPeerCategoryPeers#fb834291 category:TopPeerCategory count:int peers:Vector<TopPeer> = TopPeerCategoryPeers;\ncontacts.topPeersNotModified#de266ef5 = contacts.TopPeers;\ncontacts.topPeers#70b772a8 categories:Vector<TopPeerCategoryPeers> chats:Vector<Chat> users:Vector<User> = contacts.TopPeers;\ncontacts.topPeersDisabled#b52c939d = contacts.TopPeers;\ndraftMessageEmpty#1b0c841a flags:# date:flags.0?int = DraftMessage;\ndraftMessage#96eaa5eb flags:# no_webpage:flags.1?true invert_media:flags.6?true reply_to:flags.4?InputReplyTo message:string entities:flags.3?Vector<MessageEntity> media:flags.5?InputMedia date:int effect:flags.7?long suggested_post:flags.8?SuggestedPost = DraftMessage;\nmessages.featuredStickersNotModified#c6dc0c66 count:int = messages.FeaturedStickers;\nmessages.featuredStickers#be382906 flags:# premium:flags.0?true hash:long count:int sets:Vector<StickerSetCovered> unread:Vector<long> = messages.FeaturedStickers;\nmessages.recentStickersNotModified#b17f890 = messages.RecentStickers;\nmessages.recentStickers#88d37c56 hash:long packs:Vector<StickerPack> stickers:Vector<Document> dates:Vector<int> = messages.RecentStickers;\nmessages.archivedStickers#4fcba9c8 count:int sets:Vector<StickerSetCovered> = messages.ArchivedStickers;\nmessages.stickerSetInstallResultSuccess#38641628 = messages.StickerSetInstallResult;\nmessages.stickerSetInstallResultArchive#35e410a8 sets:Vector<StickerSetCovered> = messages.StickerSetInstallResult;\nstickerSetCovered#6410a5d2 set:StickerSet cover:Document = StickerSetCovered;\nstickerSetMultiCovered#3407e51b set:StickerSet covers:Vector<Document> = StickerSetCovered;\nstickerSetFullCovered#40d13c0e set:StickerSet packs:Vector<StickerPack> keywords:Vector<StickerKeyword> documents:Vector<Document> = StickerSetCovered;\nstickerSetNoCovered#77b15d1c set:StickerSet = StickerSetCovered;\nmaskCoords#aed6dbb2 n:int x:double y:double zoom:double = MaskCoords;\ninputStickeredMediaPhoto#4a992157 id:InputPhoto = InputStickeredMedia;\ninputStickeredMediaDocument#438865b id:InputDocument = InputStickeredMedia;\ngame#bdf9653b flags:# id:long access_hash:long short_name:string title:string description:string photo:Photo document:flags.0?Document = Game;\ninputGameID#32c3e77 id:long access_hash:long = InputGame;\ninputGameShortName#c331e80a bot_id:InputUser short_name:string = InputGame;\nhighScore#73a379eb pos:int user_id:long score:int = HighScore;\nmessages.highScores#9a3bfd99 scores:Vector<HighScore> users:Vector<User> = messages.HighScores;\ntextEmpty#dc3d824f = RichText;\ntextPlain#744694e0 text:string = RichText;\ntextBold#6724abc4 text:RichText = RichText;\ntextItalic#d912a59c text:RichText = RichText;\ntextUnderline#c12622c4 text:RichText = RichText;\ntextStrike#9bf8bb95 text:RichText = RichText;\ntextFixed#6c3f19b9 text:RichText = RichText;\ntextUrl#3c2884c1 text:RichText url:string webpage_id:long = RichText;\ntextEmail#de5a0dd6 text:RichText email:string = RichText;\ntextConcat#7e6260d7 texts:Vector<RichText> = RichText;\ntextSubscript#ed6a8504 text:RichText = RichText;\ntextSuperscript#c7fb5e01 text:RichText = RichText;\ntextMarked#34b8621 text:RichText = RichText;\ntextPhone#1ccb966a text:RichText phone:string = RichText;\ntextImage#81ccf4f document_id:long w:int h:int = RichText;\ntextAnchor#35553762 text:RichText name:string = RichText;\npageBlockUnsupported#13567e8a = PageBlock;\npageBlockTitle#70abc3fd text:RichText = PageBlock;\npageBlockSubtitle#8ffa9a1f text:RichText = PageBlock;\npageBlockAuthorDate#baafe5e0 author:RichText published_date:int = PageBlock;\npageBlockHeader#bfd064ec text:RichText = PageBlock;\npageBlockSubheader#f12bb6e1 text:RichText = PageBlock;\npageBlockParagraph#467a0766 text:RichText = PageBlock;\npageBlockPreformatted#c070d93e text:RichText language:string = PageBlock;\npageBlockFooter#48870999 text:RichText = PageBlock;\npageBlockDivider#db20b188 = PageBlock;\npageBlockAnchor#ce0d37b0 name:string = PageBlock;\npageBlockList#e4e88011 items:Vector<PageListItem> = PageBlock;\npageBlockBlockquote#263d7c26 text:RichText caption:RichText = PageBlock;\npageBlockPullquote#4f4456d3 text:RichText caption:RichText = PageBlock;\npageBlockPhoto#1759c560 flags:# photo_id:long caption:PageCaption url:flags.0?string webpage_id:flags.0?long = PageBlock;\npageBlockVideo#7c8fe7b6 flags:# autoplay:flags.0?true loop:flags.1?true video_id:long caption:PageCaption = PageBlock;\npageBlockCover#39f23300 cover:PageBlock = PageBlock;\npageBlockEmbed#a8718dc5 flags:# full_width:flags.0?true allow_scrolling:flags.3?true url:flags.1?string html:flags.2?string poster_photo_id:flags.4?long w:flags.5?int h:flags.5?int caption:PageCaption = PageBlock;\npageBlockEmbedPost#f259a80b url:string webpage_id:long author_photo_id:long author:string date:int blocks:Vector<PageBlock> caption:PageCaption = PageBlock;\npageBlockCollage#65a0fa4d items:Vector<PageBlock> caption:PageCaption = PageBlock;\npageBlockSlideshow#31f9590 items:Vector<PageBlock> caption:PageCaption = PageBlock;\npageBlockChannel#ef1751b5 channel:Chat = PageBlock;\npageBlockAudio#804361ea audio_id:long caption:PageCaption = PageBlock;\npageBlockKicker#1e148390 text:RichText = PageBlock;\npageBlockTable#bf4dea82 flags:# bordered:flags.0?true striped:flags.1?true title:RichText rows:Vector<PageTableRow> = PageBlock;\npageBlockOrderedList#9a8ae1e1 items:Vector<PageListOrderedItem> = PageBlock;\npageBlockDetails#76768bed flags:# open:flags.0?true blocks:Vector<PageBlock> title:RichText = PageBlock;\npageBlockRelatedArticles#16115a96 title:RichText articles:Vector<PageRelatedArticle> = PageBlock;\npageBlockMap#a44f3ef6 geo:GeoPoint zoom:int w:int h:int caption:PageCaption = PageBlock;\nphoneCallDiscardReasonMissed#85e42301 = PhoneCallDiscardReason;\nphoneCallDiscardReasonDisconnect#e095c1a0 = PhoneCallDiscardReason;\nphoneCallDiscardReasonHangup#57adc690 = PhoneCallDiscardReason;\nphoneCallDiscardReasonBusy#faf7e8c9 = PhoneCallDiscardReason;\nphoneCallDiscardReasonMigrateConferenceCall#9fbbf1f7 slug:string = PhoneCallDiscardReason;\ndataJSON#7d748d04 data:string = DataJSON;\nlabeledPrice#cb296bf8 label:string amount:long = LabeledPrice;\ninvoice#49ee584 flags:# test:flags.0?true name_requested:flags.1?true phone_requested:flags.2?true email_requested:flags.3?true shipping_address_requested:flags.4?true flexible:flags.5?true phone_to_provider:flags.6?true email_to_provider:flags.7?true recurring:flags.9?true currency:string prices:Vector<LabeledPrice> max_tip_amount:flags.8?long suggested_tip_amounts:flags.8?Vector<long> terms_url:flags.10?string subscription_period:flags.11?int = Invoice;\npaymentCharge#ea02c27e id:string provider_charge_id:string = PaymentCharge;\npostAddress#1e8caaeb street_line1:string street_line2:string city:string state:string country_iso2:string post_code:string = PostAddress;\npaymentRequestedInfo#909c3f94 flags:# name:flags.0?string phone:flags.1?string email:flags.2?string shipping_address:flags.3?PostAddress = PaymentRequestedInfo;\npaymentSavedCredentialsCard#cdc27a1f id:string title:string = PaymentSavedCredentials;\nwebDocument#1c570ed1 url:string access_hash:long size:int mime_type:string attributes:Vector<DocumentAttribute> = WebDocument;\nwebDocumentNoProxy#f9c8bcc6 url:string size:int mime_type:string attributes:Vector<DocumentAttribute> = WebDocument;\ninputWebDocument#9bed434d url:string size:int mime_type:string attributes:Vector<DocumentAttribute> = InputWebDocument;\ninputWebFileLocation#c239d686 url:string access_hash:long = InputWebFileLocation;\ninputWebFileGeoPointLocation#9f2221c9 geo_point:InputGeoPoint access_hash:long w:int h:int zoom:int scale:int = InputWebFileLocation;\ninputWebFileAudioAlbumThumbLocation#f46fe924 flags:# small:flags.2?true document:flags.0?InputDocument title:flags.1?string performer:flags.1?string = InputWebFileLocation;\nupload.webFile#21e753bc size:int mime_type:string file_type:storage.FileType mtime:int bytes:bytes = upload.WebFile;\npayments.paymentForm#a0058751 flags:# can_save_credentials:flags.2?true password_missing:flags.3?true form_id:long bot_id:long title:string description:string photo:flags.5?WebDocument invoice:Invoice provider_id:long url:string native_provider:flags.4?string native_params:flags.4?DataJSON additional_methods:flags.6?Vector<PaymentFormMethod> saved_info:flags.0?PaymentRequestedInfo saved_credentials:flags.1?Vector<PaymentSavedCredentials> users:Vector<User> = payments.PaymentForm;\npayments.paymentFormStars#7bf6b15c flags:# form_id:long bot_id:long title:string description:string photo:flags.5?WebDocument invoice:Invoice users:Vector<User> = payments.PaymentForm;\npayments.paymentFormStarGift#b425cfe1 form_id:long invoice:Invoice = payments.PaymentForm;\npayments.validatedRequestedInfo#d1451883 flags:# id:flags.0?string shipping_options:flags.1?Vector<ShippingOption> = payments.ValidatedRequestedInfo;\npayments.paymentResult#4e5f810d updates:Updates = payments.PaymentResult;\npayments.paymentVerificationNeeded#d8411139 url:string = payments.PaymentResult;\npayments.paymentReceipt#70c4fe03 flags:# date:int bot_id:long provider_id:long title:string description:string photo:flags.2?WebDocument invoice:Invoice info:flags.0?PaymentRequestedInfo shipping:flags.1?ShippingOption tip_amount:flags.3?long currency:string total_amount:long credentials_title:string users:Vector<User> = payments.PaymentReceipt;\npayments.paymentReceiptStars#dabbf83a flags:# date:int bot_id:long title:string description:string photo:flags.2?WebDocument invoice:Invoice currency:string total_amount:long transaction_id:string users:Vector<User> = payments.PaymentReceipt;\npayments.savedInfo#fb8fe43c flags:# has_saved_credentials:flags.1?true saved_info:flags.0?PaymentRequestedInfo = payments.SavedInfo;\ninputPaymentCredentialsSaved#c10eb2cf id:string tmp_password:bytes = InputPaymentCredentials;\ninputPaymentCredentials#3417d728 flags:# save:flags.0?true data:DataJSON = InputPaymentCredentials;\ninputPaymentCredentialsApplePay#aa1c39f payment_data:DataJSON = InputPaymentCredentials;\ninputPaymentCredentialsGooglePay#8ac32801 payment_token:DataJSON = InputPaymentCredentials;\naccount.tmpPassword#db64fd34 tmp_password:bytes valid_until:int = account.TmpPassword;\nshippingOption#b6213cdf id:string title:string prices:Vector<LabeledPrice> = ShippingOption;\ninputStickerSetItem#32da9e9c flags:# document:InputDocument emoji:string mask_coords:flags.0?MaskCoords keywords:flags.1?string = InputStickerSetItem;\ninputPhoneCall#1e36fded id:long access_hash:long = InputPhoneCall;\nphoneCallEmpty#5366c915 id:long = PhoneCall;\nphoneCallWaiting#c5226f17 flags:# video:flags.6?true id:long access_hash:long date:int admin_id:long participant_id:long protocol:PhoneCallProtocol receive_date:flags.0?int = PhoneCall;\nphoneCallRequested#14b0ed0c flags:# video:flags.6?true id:long access_hash:long date:int admin_id:long participant_id:long g_a_hash:bytes protocol:PhoneCallProtocol = PhoneCall;\nphoneCallAccepted#3660c311 flags:# video:flags.6?true id:long access_hash:long date:int admin_id:long participant_id:long g_b:bytes protocol:PhoneCallProtocol = PhoneCall;\nphoneCall#30535af5 flags:# p2p_allowed:flags.5?true video:flags.6?true conference_supported:flags.8?true id:long access_hash:long date:int admin_id:long participant_id:long g_a_or_b:bytes key_fingerprint:long protocol:PhoneCallProtocol connections:Vector<PhoneConnection> start_date:int custom_parameters:flags.7?DataJSON = PhoneCall;\nphoneCallDiscarded#50ca4de1 flags:# need_rating:flags.2?true need_debug:flags.3?true video:flags.6?true id:long reason:flags.0?PhoneCallDiscardReason duration:flags.1?int = PhoneCall;\nphoneConnection#9cc123c7 flags:# tcp:flags.0?true id:long ip:string ipv6:string port:int peer_tag:bytes = PhoneConnection;\nphoneConnectionWebrtc#635fe375 flags:# turn:flags.0?true stun:flags.1?true id:long ip:string ipv6:string port:int username:string password:string = PhoneConnection;\nphoneCallProtocol#fc878fc8 flags:# udp_p2p:flags.0?true udp_reflector:flags.1?true min_layer:int max_layer:int library_versions:Vector<string> = PhoneCallProtocol;\nphone.phoneCall#ec82e140 phone_call:PhoneCall users:Vector<User> = phone.PhoneCall;\nupload.cdnFileReuploadNeeded#eea8e46e request_token:bytes = upload.CdnFile;\nupload.cdnFile#a99fca4f bytes:bytes = upload.CdnFile;\ncdnPublicKey#c982eaba dc_id:int public_key:string = CdnPublicKey;\ncdnConfig#5725e40a public_keys:Vector<CdnPublicKey> = CdnConfig;\nlangPackString#cad181f6 key:string value:string = LangPackString;\nlangPackStringPluralized#6c47ac9f flags:# key:string zero_value:flags.0?string one_value:flags.1?string two_value:flags.2?string few_value:flags.3?string many_value:flags.4?string other_value:string = LangPackString;\nlangPackStringDeleted#2979eeb2 key:string = LangPackString;\nlangPackDifference#f385c1f6 lang_code:string from_version:int version:int strings:Vector<LangPackString> = LangPackDifference;\nlangPackLanguage#eeca5ce3 flags:# official:flags.0?true rtl:flags.2?true beta:flags.3?true name:string native_name:string lang_code:string base_lang_code:flags.1?string plural_code:string strings_count:int translated_count:int translations_url:string = LangPackLanguage;\nchannelAdminLogEventActionChangeTitle#e6dfb825 prev_value:string new_value:string = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeAbout#55188a2e prev_value:string new_value:string = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeUsername#6a4afc38 prev_value:string new_value:string = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangePhoto#434bd2af prev_photo:Photo new_photo:Photo = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleInvites#1b7907ae new_value:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleSignatures#26ae0971 new_value:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEventActionUpdatePinned#e9e82c18 message:Message = ChannelAdminLogEventAction;\nchannelAdminLogEventActionEditMessage#709b2405 prev_message:Message new_message:Message = ChannelAdminLogEventAction;\nchannelAdminLogEventActionDeleteMessage#42e047bb message:Message = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantJoin#183040d3 = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantLeave#f89777f2 = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantInvite#e31c34d8 participant:ChannelParticipant = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantToggleBan#e6d83d7e prev_participant:ChannelParticipant new_participant:ChannelParticipant = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantToggleAdmin#d5676710 prev_participant:ChannelParticipant new_participant:ChannelParticipant = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeStickerSet#b1c3caa7 prev_stickerset:InputStickerSet new_stickerset:InputStickerSet = ChannelAdminLogEventAction;\nchannelAdminLogEventActionTogglePreHistoryHidden#5f5c95f1 new_value:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEventActionDefaultBannedRights#2df5fc0a prev_banned_rights:ChatBannedRights new_banned_rights:ChatBannedRights = ChannelAdminLogEventAction;\nchannelAdminLogEventActionStopPoll#8f079643 message:Message = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeLinkedChat#50c7ac8 prev_value:long new_value:long = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeLocation#e6b76ae prev_value:ChannelLocation new_value:ChannelLocation = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleSlowMode#53909779 prev_value:int new_value:int = ChannelAdminLogEventAction;\nchannelAdminLogEventActionStartGroupCall#23209745 call:InputGroupCall = ChannelAdminLogEventAction;\nchannelAdminLogEventActionDiscardGroupCall#db9f9140 call:InputGroupCall = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantMute#f92424d2 participant:GroupCallParticipant = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantUnmute#e64429c0 participant:GroupCallParticipant = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleGroupCallSetting#56d6a247 join_muted:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantJoinByInvite#fe9fc158 flags:# via_chatlist:flags.0?true invite:ExportedChatInvite = ChannelAdminLogEventAction;\nchannelAdminLogEventActionExportedInviteDelete#5a50fca4 invite:ExportedChatInvite = ChannelAdminLogEventAction;\nchannelAdminLogEventActionExportedInviteRevoke#410a134e invite:ExportedChatInvite = ChannelAdminLogEventAction;\nchannelAdminLogEventActionExportedInviteEdit#e90ebb59 prev_invite:ExportedChatInvite new_invite:ExportedChatInvite = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantVolume#3e7f6847 participant:GroupCallParticipant = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeHistoryTTL#6e941a38 prev_value:int new_value:int = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantJoinByRequest#afb6144a invite:ExportedChatInvite approved_by:long = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleNoForwards#cb2ac766 new_value:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEventActionSendMessage#278f2868 message:Message = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeAvailableReactions#be4e0ef8 prev_value:ChatReactions new_value:ChatReactions = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeUsernames#f04fb3a9 prev_value:Vector<string> new_value:Vector<string> = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleForum#2cc6383 new_value:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEventActionCreateTopic#58707d28 topic:ForumTopic = ChannelAdminLogEventAction;\nchannelAdminLogEventActionEditTopic#f06fe208 prev_topic:ForumTopic new_topic:ForumTopic = ChannelAdminLogEventAction;\nchannelAdminLogEventActionDeleteTopic#ae168909 topic:ForumTopic = ChannelAdminLogEventAction;\nchannelAdminLogEventActionPinTopic#5d8d353b flags:# prev_topic:flags.0?ForumTopic new_topic:flags.1?ForumTopic = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleAntiSpam#64f36dfc new_value:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangePeerColor#5796e780 prev_value:PeerColor new_value:PeerColor = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeProfilePeerColor#5e477b25 prev_value:PeerColor new_value:PeerColor = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeWallpaper#31bb5d52 prev_value:WallPaper new_value:WallPaper = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeEmojiStatus#3ea9feb1 prev_value:EmojiStatus new_value:EmojiStatus = ChannelAdminLogEventAction;\nchannelAdminLogEventActionChangeEmojiStickerSet#46d840ab prev_stickerset:InputStickerSet new_stickerset:InputStickerSet = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleSignatureProfiles#60a79c79 new_value:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEventActionParticipantSubExtend#64642db3 prev_participant:ChannelParticipant new_participant:ChannelParticipant = ChannelAdminLogEventAction;\nchannelAdminLogEventActionToggleAutotranslation#c517f77e new_value:Bool = ChannelAdminLogEventAction;\nchannelAdminLogEvent#1fad68cd id:long date:int user_id:long action:ChannelAdminLogEventAction = ChannelAdminLogEvent;\nchannels.adminLogResults#ed8af74d events:Vector<ChannelAdminLogEvent> chats:Vector<Chat> users:Vector<User> = channels.AdminLogResults;\nchannelAdminLogEventsFilter#ea107ae4 flags:# join:flags.0?true leave:flags.1?true invite:flags.2?true ban:flags.3?true unban:flags.4?true kick:flags.5?true unkick:flags.6?true promote:flags.7?true demote:flags.8?true info:flags.9?true settings:flags.10?true pinned:flags.11?true edit:flags.12?true delete:flags.13?true group_call:flags.14?true invites:flags.15?true send:flags.16?true forums:flags.17?true sub_extend:flags.18?true = ChannelAdminLogEventsFilter;\npopularContact#5ce14175 client_id:long importers:int = PopularContact;\nmessages.favedStickersNotModified#9e8fa6d3 = messages.FavedStickers;\nmessages.favedStickers#2cb51097 hash:long packs:Vector<StickerPack> stickers:Vector<Document> = messages.FavedStickers;\nrecentMeUrlUnknown#46e1d13d url:string = RecentMeUrl;\nrecentMeUrlUser#b92c09e2 url:string user_id:long = RecentMeUrl;\nrecentMeUrlChat#b2da71d2 url:string chat_id:long = RecentMeUrl;\nrecentMeUrlChatInvite#eb49081d url:string chat_invite:ChatInvite = RecentMeUrl;\nrecentMeUrlStickerSet#bc0a57dc url:string set:StickerSetCovered = RecentMeUrl;\nhelp.recentMeUrls#e0310d7 urls:Vector<RecentMeUrl> chats:Vector<Chat> users:Vector<User> = help.RecentMeUrls;\ninputSingleMedia#1cc6e91f flags:# media:InputMedia random_id:long message:string entities:flags.0?Vector<MessageEntity> = InputSingleMedia;\nwebAuthorization#a6f8f452 hash:long bot_id:long domain:string browser:string platform:string date_created:int date_active:int ip:string region:string = WebAuthorization;\naccount.webAuthorizations#ed56c9fc authorizations:Vector<WebAuthorization> users:Vector<User> = account.WebAuthorizations;\ninputMessageID#a676a322 id:int = InputMessage;\ninputMessageReplyTo#bad88395 id:int = InputMessage;\ninputMessagePinned#86872538 = InputMessage;\ninputMessageCallbackQuery#acfa1a7e id:int query_id:long = InputMessage;\ninputDialogPeer#fcaafeb7 peer:InputPeer = InputDialogPeer;\ninputDialogPeerFolder#64600527 folder_id:int = InputDialogPeer;\ndialogPeer#e56dbf05 peer:Peer = DialogPeer;\ndialogPeerFolder#514519e2 folder_id:int = DialogPeer;\nmessages.foundStickerSetsNotModified#d54b65d = messages.FoundStickerSets;\nmessages.foundStickerSets#8af09dd2 hash:long sets:Vector<StickerSetCovered> = messages.FoundStickerSets;\nfileHash#f39b035c offset:long limit:int hash:bytes = FileHash;\ninputClientProxy#75588b3f address:string port:int = InputClientProxy;\nhelp.termsOfServiceUpdateEmpty#e3309f7f expires:int = help.TermsOfServiceUpdate;\nhelp.termsOfServiceUpdate#28ecf961 expires:int terms_of_service:help.TermsOfService = help.TermsOfServiceUpdate;\ninputSecureFileUploaded#3334b0f0 id:long parts:int md5_checksum:string file_hash:bytes secret:bytes = InputSecureFile;\ninputSecureFile#5367e5be id:long access_hash:long = InputSecureFile;\nsecureFileEmpty#64199744 = SecureFile;\nsecureFile#7d09c27e id:long access_hash:long size:long dc_id:int date:int file_hash:bytes secret:bytes = SecureFile;\nsecureData#8aeabec3 data:bytes data_hash:bytes secret:bytes = SecureData;\nsecurePlainPhone#7d6099dd phone:string = SecurePlainData;\nsecurePlainEmail#21ec5a5f email:string = SecurePlainData;\nsecureValueTypePersonalDetails#9d2a81e3 = SecureValueType;\nsecureValueTypePassport#3dac6a00 = SecureValueType;\nsecureValueTypeDriverLicense#6e425c4 = SecureValueType;\nsecureValueTypeIdentityCard#a0d0744b = SecureValueType;\nsecureValueTypeInternalPassport#99a48f23 = SecureValueType;\nsecureValueTypeAddress#cbe31e26 = SecureValueType;\nsecureValueTypeUtilityBill#fc36954e = SecureValueType;\nsecureValueTypeBankStatement#89137c0d = SecureValueType;\nsecureValueTypeRentalAgreement#8b883488 = SecureValueType;\nsecureValueTypePassportRegistration#99e3806a = SecureValueType;\nsecureValueTypeTemporaryRegistration#ea02ec33 = SecureValueType;\nsecureValueTypePhone#b320aadb = SecureValueType;\nsecureValueTypeEmail#8e3ca7ee = SecureValueType;\nsecureValue#187fa0ca flags:# type:SecureValueType data:flags.0?SecureData front_side:flags.1?SecureFile reverse_side:flags.2?SecureFile selfie:flags.3?SecureFile translation:flags.6?Vector<SecureFile> files:flags.4?Vector<SecureFile> plain_data:flags.5?SecurePlainData hash:bytes = SecureValue;\ninputSecureValue#db21d0a7 flags:# type:SecureValueType data:flags.0?SecureData front_side:flags.1?InputSecureFile reverse_side:flags.2?InputSecureFile selfie:flags.3?InputSecureFile translation:flags.6?Vector<InputSecureFile> files:flags.4?Vector<InputSecureFile> plain_data:flags.5?SecurePlainData = InputSecureValue;\nsecureValueHash#ed1ecdb0 type:SecureValueType hash:bytes = SecureValueHash;\nsecureValueErrorData#e8a40bd9 type:SecureValueType data_hash:bytes field:string text:string = SecureValueError;\nsecureValueErrorFrontSide#be3dfa type:SecureValueType file_hash:bytes text:string = SecureValueError;\nsecureValueErrorReverseSide#868a2aa5 type:SecureValueType file_hash:bytes text:string = SecureValueError;\nsecureValueErrorSelfie#e537ced6 type:SecureValueType file_hash:bytes text:string = SecureValueError;\nsecureValueErrorFile#7a700873 type:SecureValueType file_hash:bytes text:string = SecureValueError;\nsecureValueErrorFiles#666220e9 type:SecureValueType file_hash:Vector<bytes> text:string = SecureValueError;\nsecureValueError#869d758f type:SecureValueType hash:bytes text:string = SecureValueError;\nsecureValueErrorTranslationFile#a1144770 type:SecureValueType file_hash:bytes text:string = SecureValueError;\nsecureValueErrorTranslationFiles#34636dd8 type:SecureValueType file_hash:Vector<bytes> text:string = SecureValueError;\nsecureCredentialsEncrypted#33f0ea47 data:bytes hash:bytes secret:bytes = SecureCredentialsEncrypted;\naccount.authorizationForm#ad2e1cd8 flags:# required_types:Vector<SecureRequiredType> values:Vector<SecureValue> errors:Vector<SecureValueError> users:Vector<User> privacy_policy_url:flags.0?string = account.AuthorizationForm;\naccount.sentEmailCode#811f854f email_pattern:string length:int = account.SentEmailCode;\nhelp.deepLinkInfoEmpty#66afa166 = help.DeepLinkInfo;\nhelp.deepLinkInfo#6a4ee832 flags:# update_app:flags.0?true message:string entities:flags.1?Vector<MessageEntity> = help.DeepLinkInfo;\nsavedPhoneContact#1142bd56 phone:string first_name:string last_name:string date:int = SavedContact;\naccount.takeout#4dba4501 id:long = account.Takeout;\npasswordKdfAlgoUnknown#d45ab096 = PasswordKdfAlgo;\npasswordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow#3a912d4a salt1:bytes salt2:bytes g:int p:bytes = PasswordKdfAlgo;\nsecurePasswordKdfAlgoUnknown#4a8537 = SecurePasswordKdfAlgo;\nsecurePasswordKdfAlgoPBKDF2HMACSHA512iter100000#bbf2dda0 salt:bytes = SecurePasswordKdfAlgo;\nsecurePasswordKdfAlgoSHA512#86471d92 salt:bytes = SecurePasswordKdfAlgo;\nsecureSecretSettings#1527bcac secure_algo:SecurePasswordKdfAlgo secure_secret:bytes secure_secret_id:long = SecureSecretSettings;\ninputCheckPasswordEmpty#9880f658 = InputCheckPasswordSRP;\ninputCheckPasswordSRP#d27ff082 srp_id:long A:bytes M1:bytes = InputCheckPasswordSRP;\nsecureRequiredType#829d99da flags:# native_names:flags.0?true selfie_required:flags.1?true translation_required:flags.2?true type:SecureValueType = SecureRequiredType;\nsecureRequiredTypeOneOf#27477b4 types:Vector<SecureRequiredType> = SecureRequiredType;\nhelp.passportConfigNotModified#bfb9f457 = help.PassportConfig;\nhelp.passportConfig#a098d6af hash:int countries_langs:DataJSON = help.PassportConfig;\ninputAppEvent#1d1b1245 time:double type:string peer:long data:JSONValue = InputAppEvent;\njsonObjectValue#c0de1bd9 key:string value:JSONValue = JSONObjectValue;\njsonNull#3f6d7b68 = JSONValue;\njsonBool#c7345e6a value:Bool = JSONValue;\njsonNumber#2be0dfa4 value:double = JSONValue;\njsonString#b71e767a value:string = JSONValue;\njsonArray#f7444763 value:Vector<JSONValue> = JSONValue;\njsonObject#99c1d49d value:Vector<JSONObjectValue> = JSONValue;\npageTableCell#34566b6a flags:# header:flags.0?true align_center:flags.3?true align_right:flags.4?true valign_middle:flags.5?true valign_bottom:flags.6?true text:flags.7?RichText colspan:flags.1?int rowspan:flags.2?int = PageTableCell;\npageTableRow#e0c0c5e5 cells:Vector<PageTableCell> = PageTableRow;\npageCaption#6f747657 text:RichText credit:RichText = PageCaption;\npageListItemText#b92fb6cd text:RichText = PageListItem;\npageListItemBlocks#25e073fc blocks:Vector<PageBlock> = PageListItem;\npageListOrderedItemText#5e068047 num:string text:RichText = PageListOrderedItem;\npageListOrderedItemBlocks#98dd8936 num:string blocks:Vector<PageBlock> = PageListOrderedItem;\npageRelatedArticle#b390dc08 flags:# url:string webpage_id:long title:flags.0?string description:flags.1?string photo_id:flags.2?long author:flags.3?string published_date:flags.4?int = PageRelatedArticle;\npage#98657f0d flags:# part:flags.0?true rtl:flags.1?true v2:flags.2?true url:string blocks:Vector<PageBlock> photos:Vector<Photo> documents:Vector<Document> views:flags.3?int = Page;\nhelp.supportName#8c05f1c9 name:string = help.SupportName;\nhelp.userInfoEmpty#f3ae2eed = help.UserInfo;\nhelp.userInfo#1eb3758 message:string entities:Vector<MessageEntity> author:string date:int = help.UserInfo;\npollAnswer#ff16e2ca text:TextWithEntities option:bytes = PollAnswer;\npoll#58747131 id:long flags:# closed:flags.0?true public_voters:flags.1?true multiple_choice:flags.2?true quiz:flags.3?true question:TextWithEntities answers:Vector<PollAnswer> close_period:flags.4?int close_date:flags.5?int = Poll;\npollAnswerVoters#3b6ddad2 flags:# chosen:flags.0?true correct:flags.1?true option:bytes voters:int = PollAnswerVoters;\npollResults#7adf2420 flags:# min:flags.0?true results:flags.1?Vector<PollAnswerVoters> total_voters:flags.2?int recent_voters:flags.3?Vector<Peer> solution:flags.4?string solution_entities:flags.4?Vector<MessageEntity> = PollResults;\nchatOnlines#f041e250 onlines:int = ChatOnlines;\nstatsURL#47a971e0 url:string = StatsURL;\nchatAdminRights#5fb224d5 flags:# change_info:flags.0?true post_messages:flags.1?true edit_messages:flags.2?true delete_messages:flags.3?true ban_users:flags.4?true invite_users:flags.5?true pin_messages:flags.7?true add_admins:flags.9?true anonymous:flags.10?true manage_call:flags.11?true other:flags.12?true manage_topics:flags.13?true post_stories:flags.14?true edit_stories:flags.15?true delete_stories:flags.16?true manage_direct_messages:flags.17?true = ChatAdminRights;\nchatBannedRights#9f120418 flags:# view_messages:flags.0?true send_messages:flags.1?true send_media:flags.2?true send_stickers:flags.3?true send_gifs:flags.4?true send_games:flags.5?true send_inline:flags.6?true embed_links:flags.7?true send_polls:flags.8?true change_info:flags.10?true invite_users:flags.15?true pin_messages:flags.17?true manage_topics:flags.18?true send_photos:flags.19?true send_videos:flags.20?true send_roundvideos:flags.21?true send_audios:flags.22?true send_voices:flags.23?true send_docs:flags.24?true send_plain:flags.25?true until_date:int = ChatBannedRights;\ninputWallPaper#e630b979 id:long access_hash:long = InputWallPaper;\ninputWallPaperSlug#72091c80 slug:string = InputWallPaper;\ninputWallPaperNoFile#967a462e id:long = InputWallPaper;\naccount.wallPapersNotModified#1c199183 = account.WallPapers;\naccount.wallPapers#cdc3858c hash:long wallpapers:Vector<WallPaper> = account.WallPapers;\ncodeSettings#ad253d78 flags:# allow_flashcall:flags.0?true current_number:flags.1?true allow_app_hash:flags.4?true allow_missed_call:flags.5?true allow_firebase:flags.7?true unknown_number:flags.9?true logout_tokens:flags.6?Vector<bytes> token:flags.8?string app_sandbox:flags.8?Bool = CodeSettings;\nwallPaperSettings#372efcd0 flags:# blur:flags.1?true motion:flags.2?true background_color:flags.0?int second_background_color:flags.4?int third_background_color:flags.5?int fourth_background_color:flags.6?int intensity:flags.3?int rotation:flags.4?int emoticon:flags.7?string = WallPaperSettings;\nautoDownloadSettings#baa57628 flags:# disabled:flags.0?true video_preload_large:flags.1?true audio_preload_next:flags.2?true phonecalls_less_data:flags.3?true stories_preload:flags.4?true photo_size_max:int video_size_max:long file_size_max:long video_upload_maxbitrate:int small_queue_active_operations_max:int large_queue_active_operations_max:int = AutoDownloadSettings;\naccount.autoDownloadSettings#63cacf26 low:AutoDownloadSettings medium:AutoDownloadSettings high:AutoDownloadSettings = account.AutoDownloadSettings;\nemojiKeyword#d5b3b9f9 keyword:string emoticons:Vector<string> = EmojiKeyword;\nemojiKeywordDeleted#236df622 keyword:string emoticons:Vector<string> = EmojiKeyword;\nemojiKeywordsDifference#5cc761bd lang_code:string from_version:int version:int keywords:Vector<EmojiKeyword> = EmojiKeywordsDifference;\nemojiURL#a575739d url:string = EmojiURL;\nemojiLanguage#b3fb5361 lang_code:string = EmojiLanguage;\nfolder#ff544e65 flags:# autofill_new_broadcasts:flags.0?true autofill_public_groups:flags.1?true autofill_new_correspondents:flags.2?true id:int title:string photo:flags.3?ChatPhoto = Folder;\ninputFolderPeer#fbd2c296 peer:InputPeer folder_id:int = InputFolderPeer;\nfolderPeer#e9baa668 peer:Peer folder_id:int = FolderPeer;\nmessages.searchCounter#e844ebff flags:# inexact:flags.1?true filter:MessagesFilter count:int = messages.SearchCounter;\nurlAuthResultRequest#32fabf1a flags:# request_write_access:flags.0?true request_phone_number:flags.1?true bot:User domain:string browser:flags.2?string platform:flags.2?string ip:flags.2?string region:flags.2?string = UrlAuthResult;\nurlAuthResultAccepted#623a8fa0 flags:# url:flags.0?string = UrlAuthResult;\nurlAuthResultDefault#a9d6db1f = UrlAuthResult;\nchannelLocationEmpty#bfb5ad8b = ChannelLocation;\nchannelLocation#209b82db geo_point:GeoPoint address:string = ChannelLocation;\npeerLocated#ca461b5d peer:Peer expires:int distance:int = PeerLocated;\npeerSelfLocated#f8ec284b expires:int = PeerLocated;\nrestrictionReason#d072acb4 platform:string reason:string text:string = RestrictionReason;\ninputTheme#3c5693e9 id:long access_hash:long = InputTheme;\ninputThemeSlug#f5890df1 slug:string = InputTheme;\ntheme#a00e67d6 flags:# creator:flags.0?true default:flags.1?true for_chat:flags.5?true id:long access_hash:long slug:string title:string document:flags.2?Document settings:flags.3?Vector<ThemeSettings> emoticon:flags.6?string installs_count:flags.4?int = Theme;\naccount.themesNotModified#f41eb622 = account.Themes;\naccount.themes#9a3d8c6d hash:long themes:Vector<Theme> = account.Themes;\nauth.loginToken#629f1980 expires:int token:bytes = auth.LoginToken;\nauth.loginTokenMigrateTo#68e9916 dc_id:int token:bytes = auth.LoginToken;\nauth.loginTokenSuccess#390d5c5e authorization:auth.Authorization = auth.LoginToken;\naccount.contentSettings#57e28221 flags:# sensitive_enabled:flags.0?true sensitive_can_change:flags.1?true = account.ContentSettings;\nmessages.inactiveChats#a927fec5 dates:Vector<int> chats:Vector<Chat> users:Vector<User> = messages.InactiveChats;\nbaseThemeClassic#c3a12462 = BaseTheme;\nbaseThemeDay#fbd81688 = BaseTheme;\nbaseThemeNight#b7b31ea8 = BaseTheme;\nbaseThemeTinted#6d5f77ee = BaseTheme;\nbaseThemeArctic#5b11125a = BaseTheme;\ninputThemeSettings#8fde504f flags:# message_colors_animated:flags.2?true base_theme:BaseTheme accent_color:int outbox_accent_color:flags.3?int message_colors:flags.0?Vector<int> wallpaper:flags.1?InputWallPaper wallpaper_settings:flags.1?WallPaperSettings = InputThemeSettings;\nthemeSettings#fa58b6d4 flags:# message_colors_animated:flags.2?true base_theme:BaseTheme accent_color:int outbox_accent_color:flags.3?int message_colors:flags.0?Vector<int> wallpaper:flags.1?WallPaper = ThemeSettings;\nwebPageAttributeTheme#54b56617 flags:# documents:flags.0?Vector<Document> settings:flags.1?ThemeSettings = WebPageAttribute;\nwebPageAttributeStory#2e94c3e7 flags:# peer:Peer id:int story:flags.0?StoryItem = WebPageAttribute;\nwebPageAttributeStickerSet#50cc03d3 flags:# emojis:flags.0?true text_color:flags.1?true stickers:Vector<Document> = WebPageAttribute;\nwebPageAttributeUniqueStarGift#cf6f6db8 gift:StarGift = WebPageAttribute;\nwebPageAttributeStarGiftCollection#31cad303 icons:Vector<Document> = WebPageAttribute;\nwebPageAttributeStarGiftAuction#1c641c2 gift:StarGift end_date:int = WebPageAttribute;\nmessages.votesList#4899484e flags:# count:int votes:Vector<MessagePeerVote> chats:Vector<Chat> users:Vector<User> next_offset:flags.0?string = messages.VotesList;\nbankCardOpenUrl#f568028a url:string name:string = BankCardOpenUrl;\npayments.bankCardData#3e24e573 title:string open_urls:Vector<BankCardOpenUrl> = payments.BankCardData;\ndialogFilter#aa472651 flags:# contacts:flags.0?true non_contacts:flags.1?true groups:flags.2?true broadcasts:flags.3?true bots:flags.4?true exclude_muted:flags.11?true exclude_read:flags.12?true exclude_archived:flags.13?true title_noanimate:flags.28?true id:int title:TextWithEntities emoticon:flags.25?string color:flags.27?int pinned_peers:Vector<InputPeer> include_peers:Vector<InputPeer> exclude_peers:Vector<InputPeer> = DialogFilter;\ndialogFilterDefault#363293ae = DialogFilter;\ndialogFilterChatlist#96537bd7 flags:# has_my_invites:flags.26?true title_noanimate:flags.28?true id:int title:TextWithEntities emoticon:flags.25?string color:flags.27?int pinned_peers:Vector<InputPeer> include_peers:Vector<InputPeer> = DialogFilter;\ndialogFilterSuggested#77744d4a filter:DialogFilter description:string = DialogFilterSuggested;\nstatsDateRangeDays#b637edaf min_date:int max_date:int = StatsDateRangeDays;\nstatsAbsValueAndPrev#cb43acde current:double previous:double = StatsAbsValueAndPrev;\nstatsPercentValue#cbce2fe0 part:double total:double = StatsPercentValue;\nstatsGraphAsync#4a27eb2d token:string = StatsGraph;\nstatsGraphError#bedc9822 error:string = StatsGraph;\nstatsGraph#8ea464b6 flags:# json:DataJSON zoom_token:flags.0?string = StatsGraph;\nstats.broadcastStats#396ca5fc period:StatsDateRangeDays followers:StatsAbsValueAndPrev views_per_post:StatsAbsValueAndPrev shares_per_post:StatsAbsValueAndPrev reactions_per_post:StatsAbsValueAndPrev views_per_story:StatsAbsValueAndPrev shares_per_story:StatsAbsValueAndPrev reactions_per_story:StatsAbsValueAndPrev enabled_notifications:StatsPercentValue growth_graph:StatsGraph followers_graph:StatsGraph mute_graph:StatsGraph top_hours_graph:StatsGraph interactions_graph:StatsGraph iv_interactions_graph:StatsGraph views_by_source_graph:StatsGraph new_followers_by_source_graph:StatsGraph languages_graph:StatsGraph reactions_by_emotion_graph:StatsGraph story_interactions_graph:StatsGraph story_reactions_by_emotion_graph:StatsGraph recent_posts_interactions:Vector<PostInteractionCounters> = stats.BroadcastStats;\nhelp.promoDataEmpty#98f6ac75 expires:int = help.PromoData;\nhelp.promoData#8a4d87a flags:# proxy:flags.0?true expires:int peer:flags.3?Peer psa_type:flags.1?string psa_message:flags.2?string pending_suggestions:Vector<string> dismissed_suggestions:Vector<string> custom_pending_suggestion:flags.4?PendingSuggestion chats:Vector<Chat> users:Vector<User> = help.PromoData;\nvideoSize#de33b094 flags:# type:string w:int h:int size:int video_start_ts:flags.0?double = VideoSize;\nvideoSizeEmojiMarkup#f85c413c emoji_id:long background_colors:Vector<int> = VideoSize;\nvideoSizeStickerMarkup#da082fe stickerset:InputStickerSet sticker_id:long background_colors:Vector<int> = VideoSize;\nstatsGroupTopPoster#9d04af9b user_id:long messages:int avg_chars:int = StatsGroupTopPoster;\nstatsGroupTopAdmin#d7584c87 user_id:long deleted:int kicked:int banned:int = StatsGroupTopAdmin;\nstatsGroupTopInviter#535f779d user_id:long invitations:int = StatsGroupTopInviter;\nstats.megagroupStats#ef7ff916 period:StatsDateRangeDays members:StatsAbsValueAndPrev messages:StatsAbsValueAndPrev viewers:StatsAbsValueAndPrev posters:StatsAbsValueAndPrev growth_graph:StatsGraph members_graph:StatsGraph new_members_by_source_graph:StatsGraph languages_graph:StatsGraph messages_graph:StatsGraph actions_graph:StatsGraph top_hours_graph:StatsGraph weekdays_graph:StatsGraph top_posters:Vector<StatsGroupTopPoster> top_admins:Vector<StatsGroupTopAdmin> top_inviters:Vector<StatsGroupTopInviter> users:Vector<User> = stats.MegagroupStats;\nglobalPrivacySettings#fe41b34f flags:# archive_and_mute_new_noncontact_peers:flags.0?true keep_archived_unmuted:flags.1?true keep_archived_folders:flags.2?true hide_read_marks:flags.3?true new_noncontact_peers_require_premium:flags.4?true display_gifts_button:flags.7?true noncontact_peers_paid_stars:flags.5?long disallowed_gifts:flags.6?DisallowedGiftsSettings = GlobalPrivacySettings;\nhelp.countryCode#4203c5ef flags:# country_code:string prefixes:flags.0?Vector<string> patterns:flags.1?Vector<string> = help.CountryCode;\nhelp.country#c3878e23 flags:# hidden:flags.0?true iso2:string default_name:string name:flags.1?string country_codes:Vector<help.CountryCode> = help.Country;\nhelp.countriesListNotModified#93cc1f32 = help.CountriesList;\nhelp.countriesList#87d0759e countries:Vector<help.Country> hash:int = help.CountriesList;\nmessageViews#455b853d flags:# views:flags.0?int forwards:flags.1?int replies:flags.2?MessageReplies = MessageViews;\nmessages.messageViews#b6c4f543 views:Vector<MessageViews> chats:Vector<Chat> users:Vector<User> = messages.MessageViews;\nmessages.discussionMessage#a6341782 flags:# messages:Vector<Message> max_id:flags.0?int read_inbox_max_id:flags.1?int read_outbox_max_id:flags.2?int unread_count:int chats:Vector<Chat> users:Vector<User> = messages.DiscussionMessage;\nmessageReplyHeader#6917560b flags:# reply_to_scheduled:flags.2?true forum_topic:flags.3?true quote:flags.9?true reply_to_msg_id:flags.4?int reply_to_peer_id:flags.0?Peer reply_from:flags.5?MessageFwdHeader reply_media:flags.8?MessageMedia reply_to_top_id:flags.1?int quote_text:flags.6?string quote_entities:flags.7?Vector<MessageEntity> quote_offset:flags.10?int todo_item_id:flags.11?int = MessageReplyHeader;\nmessageReplyStoryHeader#e5af939 peer:Peer story_id:int = MessageReplyHeader;\nmessageReplies#83d60fc2 flags:# comments:flags.0?true replies:int replies_pts:int recent_repliers:flags.1?Vector<Peer> channel_id:flags.0?long max_id:flags.2?int read_max_id:flags.3?int = MessageReplies;\npeerBlocked#e8fd8014 peer_id:Peer date:int = PeerBlocked;\nstats.messageStats#7fe91c14 views_graph:StatsGraph reactions_by_emotion_graph:StatsGraph = stats.MessageStats;\ngroupCallDiscarded#7780bcb4 id:long access_hash:long duration:int = GroupCall;\ngroupCall#efb2b617 flags:# join_muted:flags.1?true can_change_join_muted:flags.2?true join_date_asc:flags.6?true schedule_start_subscribed:flags.8?true can_start_video:flags.9?true record_video_active:flags.11?true rtmp_stream:flags.12?true listeners_hidden:flags.13?true conference:flags.14?true creator:flags.15?true messages_enabled:flags.17?true can_change_messages_enabled:flags.18?true min:flags.19?true id:long access_hash:long participants_count:int title:flags.3?string stream_dc_id:flags.4?int record_start_date:flags.5?int schedule_date:flags.7?int unmuted_video_count:flags.10?int unmuted_video_limit:int version:int invite_link:flags.16?string send_paid_messages_stars:flags.20?long default_send_as:flags.21?Peer = GroupCall;\ninputGroupCall#d8aa840f id:long access_hash:long = InputGroupCall;\ninputGroupCallSlug#fe06823f slug:string = InputGroupCall;\ninputGroupCallInviteMessage#8c10603f msg_id:int = InputGroupCall;\ngroupCallParticipant#2a3dc7ac flags:# muted:flags.0?true left:flags.1?true can_self_unmute:flags.2?true just_joined:flags.4?true versioned:flags.5?true min:flags.8?true muted_by_you:flags.9?true volume_by_admin:flags.10?true self:flags.12?true video_joined:flags.15?true peer:Peer date:int active_date:flags.3?int source:int volume:flags.7?int about:flags.11?string raise_hand_rating:flags.13?long video:flags.6?GroupCallParticipantVideo presentation:flags.14?GroupCallParticipantVideo paid_stars_total:flags.16?long = GroupCallParticipant;\nphone.groupCall#9e727aad call:GroupCall participants:Vector<GroupCallParticipant> participants_next_offset:string chats:Vector<Chat> users:Vector<User> = phone.GroupCall;\nphone.groupParticipants#f47751b6 count:int participants:Vector<GroupCallParticipant> next_offset:string chats:Vector<Chat> users:Vector<User> version:int = phone.GroupParticipants;\ninlineQueryPeerTypeSameBotPM#3081ed9d = InlineQueryPeerType;\ninlineQueryPeerTypePM#833c0fac = InlineQueryPeerType;\ninlineQueryPeerTypeChat#d766c50a = InlineQueryPeerType;\ninlineQueryPeerTypeMegagroup#5ec4be43 = InlineQueryPeerType;\ninlineQueryPeerTypeBroadcast#6334ee9a = InlineQueryPeerType;\ninlineQueryPeerTypeBotPM#e3b2d0c = InlineQueryPeerType;\nmessages.historyImport#1662af0b id:long = messages.HistoryImport;\nmessages.historyImportParsed#5e0fb7b9 flags:# pm:flags.0?true group:flags.1?true title:flags.2?string = messages.HistoryImportParsed;\nmessages.affectedFoundMessages#ef8d3e6c pts:int pts_count:int offset:int messages:Vector<int> = messages.AffectedFoundMessages;\nchatInviteImporter#8c5adfd9 flags:# requested:flags.0?true via_chatlist:flags.3?true user_id:long date:int about:flags.2?string approved_by:flags.1?long = ChatInviteImporter;\nmessages.exportedChatInvites#bdc62dcc count:int invites:Vector<ExportedChatInvite> users:Vector<User> = messages.ExportedChatInvites;\nmessages.exportedChatInvite#1871be50 invite:ExportedChatInvite users:Vector<User> = messages.ExportedChatInvite;\nmessages.exportedChatInviteReplaced#222600ef invite:ExportedChatInvite new_invite:ExportedChatInvite users:Vector<User> = messages.ExportedChatInvite;\nmessages.chatInviteImporters#81b6b00a count:int importers:Vector<ChatInviteImporter> users:Vector<User> = messages.ChatInviteImporters;\nchatAdminWithInvites#f2ecef23 admin_id:long invites_count:int revoked_invites_count:int = ChatAdminWithInvites;\nmessages.chatAdminsWithInvites#b69b72d7 admins:Vector<ChatAdminWithInvites> users:Vector<User> = messages.ChatAdminsWithInvites;\nmessages.checkedHistoryImportPeer#a24de717 confirm_text:string = messages.CheckedHistoryImportPeer;\nphone.joinAsPeers#afe5623f peers:Vector<Peer> chats:Vector<Chat> users:Vector<User> = phone.JoinAsPeers;\nphone.exportedGroupCallInvite#204bd158 link:string = phone.ExportedGroupCallInvite;\ngroupCallParticipantVideoSourceGroup#dcb118b7 semantics:string sources:Vector<int> = GroupCallParticipantVideoSourceGroup;\ngroupCallParticipantVideo#67753ac8 flags:# paused:flags.0?true endpoint:string source_groups:Vector<GroupCallParticipantVideoSourceGroup> audio_source:flags.1?int = GroupCallParticipantVideo;\nstickers.suggestedShortName#85fea03f short_name:string = stickers.SuggestedShortName;\nbotCommandScopeDefault#2f6cb2ab = BotCommandScope;\nbotCommandScopeUsers#3c4f04d8 = BotCommandScope;\nbotCommandScopeChats#6fe1a881 = BotCommandScope;\nbotCommandScopeChatAdmins#b9aa606a = BotCommandScope;\nbotCommandScopePeer#db9d897d peer:InputPeer = BotCommandScope;\nbotCommandScopePeerAdmins#3fd863d1 peer:InputPeer = BotCommandScope;\nbotCommandScopePeerUser#a1321f3 peer:InputPeer user_id:InputUser = BotCommandScope;\naccount.resetPasswordFailedWait#e3779861 retry_date:int = account.ResetPasswordResult;\naccount.resetPasswordRequestedWait#e9effc7d until_date:int = account.ResetPasswordResult;\naccount.resetPasswordOk#e926d63e = account.ResetPasswordResult;\nchatTheme#c3dffc04 emoticon:string = ChatTheme;\nchatThemeUniqueGift#3458f9c8 gift:StarGift theme_settings:Vector<ThemeSettings> = ChatTheme;\naccount.chatThemesNotModified#e011e1c4 = account.ChatThemes;\naccount.chatThemes#be098173 flags:# hash:long themes:Vector<ChatTheme> chats:Vector<Chat> users:Vector<User> next_offset:flags.0?string = account.ChatThemes;\nsponsoredMessage#7dbf8673 flags:# recommended:flags.5?true can_report:flags.12?true random_id:bytes url:string title:string message:string entities:flags.1?Vector<MessageEntity> photo:flags.6?Photo media:flags.14?MessageMedia color:flags.13?PeerColor button_text:string sponsor_info:flags.7?string additional_info:flags.8?string min_display_duration:flags.15?int max_display_duration:flags.15?int = SponsoredMessage;\nmessages.sponsoredMessages#ffda656d flags:# posts_between:flags.0?int start_delay:flags.1?int between_delay:flags.2?int messages:Vector<SponsoredMessage> chats:Vector<Chat> users:Vector<User> = messages.SponsoredMessages;\nmessages.sponsoredMessagesEmpty#1839490f = messages.SponsoredMessages;\nsearchResultsCalendarPeriod#c9b0539f date:int min_msg_id:int max_msg_id:int count:int = SearchResultsCalendarPeriod;\nmessages.searchResultsCalendar#147ee23c flags:# inexact:flags.0?true count:int min_date:int min_msg_id:int offset_id_offset:flags.1?int periods:Vector<SearchResultsCalendarPeriod> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.SearchResultsCalendar;\nsearchResultPosition#7f648b67 msg_id:int date:int offset:int = SearchResultsPosition;\nmessages.searchResultsPositions#53b22baf count:int positions:Vector<SearchResultsPosition> = messages.SearchResultsPositions;\nchannels.sendAsPeers#f496b0c6 peers:Vector<SendAsPeer> chats:Vector<Chat> users:Vector<User> = channels.SendAsPeers;\nusers.userFull#3b6d152e full_user:UserFull chats:Vector<Chat> users:Vector<User> = users.UserFull;\nmessages.peerSettings#6880b94d settings:PeerSettings chats:Vector<Chat> users:Vector<User> = messages.PeerSettings;\nauth.loggedOut#c3a2835f flags:# future_auth_token:flags.0?bytes = auth.LoggedOut;\nreactionCount#a3d1cb80 flags:# chosen_order:flags.0?int reaction:Reaction count:int = ReactionCount;\nmessageReactions#a339f0b flags:# min:flags.0?true can_see_list:flags.2?true reactions_as_tags:flags.3?true results:Vector<ReactionCount> recent_reactions:flags.1?Vector<MessagePeerReaction> top_reactors:flags.4?Vector<MessageReactor> = MessageReactions;\nmessages.messageReactionsList#31bd492d flags:# count:int reactions:Vector<MessagePeerReaction> chats:Vector<Chat> users:Vector<User> next_offset:flags.0?string = messages.MessageReactionsList;\navailableReaction#c077ec01 flags:# inactive:flags.0?true premium:flags.2?true reaction:string title:string static_icon:Document appear_animation:Document select_animation:Document activate_animation:Document effect_animation:Document around_animation:flags.1?Document center_icon:flags.1?Document = AvailableReaction;\nmessages.availableReactionsNotModified#9f071957 = messages.AvailableReactions;\nmessages.availableReactions#768e3aad hash:int reactions:Vector<AvailableReaction> = messages.AvailableReactions;\nmessagePeerReaction#8c79b63c flags:# big:flags.0?true unread:flags.1?true my:flags.2?true peer_id:Peer date:int reaction:Reaction = MessagePeerReaction;\ngroupCallStreamChannel#80eb48af channel:int scale:int last_timestamp_ms:long = GroupCallStreamChannel;\nphone.groupCallStreamChannels#d0e482b2 channels:Vector<GroupCallStreamChannel> = phone.GroupCallStreamChannels;\nphone.groupCallStreamRtmpUrl#2dbf3432 url:string key:string = phone.GroupCallStreamRtmpUrl;\nattachMenuBotIconColor#4576f3f0 name:string color:int = AttachMenuBotIconColor;\nattachMenuBotIcon#b2a7386b flags:# name:string icon:Document colors:flags.0?Vector<AttachMenuBotIconColor> = AttachMenuBotIcon;\nattachMenuBot#d90d8dfe flags:# inactive:flags.0?true has_settings:flags.1?true request_write_access:flags.2?true show_in_attach_menu:flags.3?true show_in_side_menu:flags.4?true side_menu_disclaimer_needed:flags.5?true bot_id:long short_name:string peer_types:flags.3?Vector<AttachMenuPeerType> icons:Vector<AttachMenuBotIcon> = AttachMenuBot;\nattachMenuBotsNotModified#f1d88a5c = AttachMenuBots;\nattachMenuBots#3c4301c0 hash:long bots:Vector<AttachMenuBot> users:Vector<User> = AttachMenuBots;\nattachMenuBotsBot#93bf667f bot:AttachMenuBot users:Vector<User> = AttachMenuBotsBot;\nwebViewResultUrl#4d22ff98 flags:# fullsize:flags.1?true fullscreen:flags.2?true query_id:flags.0?long url:string = WebViewResult;\nwebViewMessageSent#c94511c flags:# msg_id:flags.0?InputBotInlineMessageID = WebViewMessageSent;\nbotMenuButtonDefault#7533a588 = BotMenuButton;\nbotMenuButtonCommands#4258c205 = BotMenuButton;\nbotMenuButton#c7b57ce6 text:string url:string = BotMenuButton;\naccount.savedRingtonesNotModified#fbf6e8b1 = account.SavedRingtones;\naccount.savedRingtones#c1e92cc5 hash:long ringtones:Vector<Document> = account.SavedRingtones;\nnotificationSoundDefault#97e8bebe = NotificationSound;\nnotificationSoundNone#6f0c34df = NotificationSound;\nnotificationSoundLocal#830b9ae4 title:string data:string = NotificationSound;\nnotificationSoundRingtone#ff6c8049 id:long = NotificationSound;\naccount.savedRingtone#b7263f6d = account.SavedRingtone;\naccount.savedRingtoneConverted#1f307eb7 document:Document = account.SavedRingtone;\nattachMenuPeerTypeSameBotPM#7d6be90e = AttachMenuPeerType;\nattachMenuPeerTypeBotPM#c32bfa1a = AttachMenuPeerType;\nattachMenuPeerTypePM#f146d31f = AttachMenuPeerType;\nattachMenuPeerTypeChat#509113f = AttachMenuPeerType;\nattachMenuPeerTypeBroadcast#7bfbdefc = AttachMenuPeerType;\ninputInvoiceMessage#c5b56859 peer:InputPeer msg_id:int = InputInvoice;\ninputInvoiceSlug#c326caef slug:string = InputInvoice;\ninputInvoicePremiumGiftCode#98986c0d purpose:InputStorePaymentPurpose option:PremiumGiftCodeOption = InputInvoice;\ninputInvoiceStars#65f00ce3 purpose:InputStorePaymentPurpose = InputInvoice;\ninputInvoiceChatInviteSubscription#34e793f1 hash:string = InputInvoice;\ninputInvoiceStarGift#e8625e92 flags:# hide_name:flags.0?true include_upgrade:flags.2?true peer:InputPeer gift_id:long message:flags.1?TextWithEntities = InputInvoice;\ninputInvoiceStarGiftUpgrade#4d818d5d flags:# keep_original_details:flags.0?true stargift:InputSavedStarGift = InputInvoice;\ninputInvoiceStarGiftTransfer#4a5f5bd9 stargift:InputSavedStarGift to_id:InputPeer = InputInvoice;\ninputInvoicePremiumGiftStars#dabab2ef flags:# user_id:InputUser months:int message:flags.0?TextWithEntities = InputInvoice;\ninputInvoiceBusinessBotTransferStars#f4997e42 bot:InputUser stars:long = InputInvoice;\ninputInvoiceStarGiftResale#c39f5324 flags:# ton:flags.0?true slug:string to_id:InputPeer = InputInvoice;\ninputInvoiceStarGiftPrepaidUpgrade#9a0b48b8 peer:InputPeer hash:string = InputInvoice;\ninputInvoicePremiumAuthCode#3e77f614 purpose:InputStorePaymentPurpose = InputInvoice;\ninputInvoiceStarGiftDropOriginalDetails#923d8d1 stargift:InputSavedStarGift = InputInvoice;\ninputInvoiceStarGiftAuctionBid#1ecafa10 flags:# hide_name:flags.0?true update_bid:flags.2?true peer:flags.3?InputPeer gift_id:long bid_amount:long message:flags.1?TextWithEntities = InputInvoice;\npayments.exportedInvoice#aed0cbd9 url:string = payments.ExportedInvoice;\nmessages.transcribedAudio#cfb9d957 flags:# pending:flags.0?true transcription_id:long text:string trial_remains_num:flags.1?int trial_remains_until_date:flags.1?int = messages.TranscribedAudio;\nhelp.premiumPromo#5334759c status_text:string status_entities:Vector<MessageEntity> video_sections:Vector<string> videos:Vector<Document> period_options:Vector<PremiumSubscriptionOption> users:Vector<User> = help.PremiumPromo;\ninputStorePaymentPremiumSubscription#a6751e66 flags:# restore:flags.0?true upgrade:flags.1?true = InputStorePaymentPurpose;\ninputStorePaymentGiftPremium#616f7fe8 user_id:InputUser currency:string amount:long = InputStorePaymentPurpose;\ninputStorePaymentPremiumGiftCode#fb790393 flags:# users:Vector<InputUser> boost_peer:flags.0?InputPeer currency:string amount:long message:flags.1?TextWithEntities = InputStorePaymentPurpose;\ninputStorePaymentPremiumGiveaway#160544ca flags:# only_new_subscribers:flags.0?true winners_are_visible:flags.3?true boost_peer:InputPeer additional_peers:flags.1?Vector<InputPeer> countries_iso2:flags.2?Vector<string> prize_description:flags.4?string random_id:long until_date:int currency:string amount:long = InputStorePaymentPurpose;\ninputStorePaymentStarsTopup#f9a2a6cb flags:# stars:long currency:string amount:long spend_purpose_peer:flags.0?InputPeer = InputStorePaymentPurpose;\ninputStorePaymentStarsGift#1d741ef7 user_id:InputUser stars:long currency:string amount:long = InputStorePaymentPurpose;\ninputStorePaymentStarsGiveaway#751f08fa flags:# only_new_subscribers:flags.0?true winners_are_visible:flags.3?true stars:long boost_peer:InputPeer additional_peers:flags.1?Vector<InputPeer> countries_iso2:flags.2?Vector<string> prize_description:flags.4?string random_id:long until_date:int currency:string amount:long users:int = InputStorePaymentPurpose;\ninputStorePaymentAuthCode#9bb2636d flags:# restore:flags.0?true phone_number:string phone_code_hash:string currency:string amount:long = InputStorePaymentPurpose;\npaymentFormMethod#88f8f21b url:string title:string = PaymentFormMethod;\nemojiStatusEmpty#2de11aae = EmojiStatus;\nemojiStatus#e7ff068a flags:# document_id:long until:flags.0?int = EmojiStatus;\nemojiStatusCollectible#7184603b flags:# collectible_id:long document_id:long title:string slug:string pattern_document_id:long center_color:int edge_color:int pattern_color:int text_color:int until:flags.0?int = EmojiStatus;\ninputEmojiStatusCollectible#7141dbf flags:# collectible_id:long until:flags.0?int = EmojiStatus;\naccount.emojiStatusesNotModified#d08ce645 = account.EmojiStatuses;\naccount.emojiStatuses#90c467d1 hash:long statuses:Vector<EmojiStatus> = account.EmojiStatuses;\nreactionEmpty#79f5d419 = Reaction;\nreactionEmoji#1b2286b8 emoticon:string = Reaction;\nreactionCustomEmoji#8935fc73 document_id:long = Reaction;\nreactionPaid#523da4eb = Reaction;\nchatReactionsNone#eafc32bc = ChatReactions;\nchatReactionsAll#52928bca flags:# allow_custom:flags.0?true = ChatReactions;\nchatReactionsSome#661d4037 reactions:Vector<Reaction> = ChatReactions;\nmessages.reactionsNotModified#b06fdbdf = messages.Reactions;\nmessages.reactions#eafdf716 hash:long reactions:Vector<Reaction> = messages.Reactions;\nemailVerifyPurposeLoginSetup#4345be73 phone_number:string phone_code_hash:string = EmailVerifyPurpose;\nemailVerifyPurposeLoginChange#527d22eb = EmailVerifyPurpose;\nemailVerifyPurposePassport#bbf51685 = EmailVerifyPurpose;\nemailVerificationCode#922e55a9 code:string = EmailVerification;\nemailVerificationGoogle#db909ec2 token:string = EmailVerification;\nemailVerificationApple#96d074fd token:string = EmailVerification;\naccount.emailVerified#2b96cd1b email:string = account.EmailVerified;\naccount.emailVerifiedLogin#e1bb0d61 email:string sent_code:auth.SentCode = account.EmailVerified;\npremiumSubscriptionOption#5f2d1df2 flags:# current:flags.1?true can_purchase_upgrade:flags.2?true transaction:flags.3?string months:int currency:string amount:long bot_url:string store_product:flags.0?string = PremiumSubscriptionOption;\nsendAsPeer#b81c7034 flags:# premium_required:flags.0?true peer:Peer = SendAsPeer;\nmessageExtendedMediaPreview#ad628cc8 flags:# w:flags.0?int h:flags.0?int thumb:flags.1?PhotoSize video_duration:flags.2?int = MessageExtendedMedia;\nmessageExtendedMedia#ee479c64 media:MessageMedia = MessageExtendedMedia;\nstickerKeyword#fcfeb29c document_id:long keyword:Vector<string> = StickerKeyword;\nusername#b4073647 flags:# editable:flags.0?true active:flags.1?true username:string = Username;\nforumTopicDeleted#23f109b id:int = ForumTopic;\nforumTopic#cdff0eca flags:# my:flags.1?true closed:flags.2?true pinned:flags.3?true short:flags.5?true hidden:flags.6?true title_missing:flags.7?true id:int date:int peer:Peer title:string icon_color:int icon_emoji_id:flags.0?long top_message:int read_inbox_max_id:int read_outbox_max_id:int unread_count:int unread_mentions_count:int unread_reactions_count:int from_id:Peer notify_settings:PeerNotifySettings draft:flags.4?DraftMessage = ForumTopic;\nmessages.forumTopics#367617d3 flags:# order_by_create_date:flags.0?true count:int topics:Vector<ForumTopic> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> pts:int = messages.ForumTopics;\ndefaultHistoryTTL#43b46b20 period:int = DefaultHistoryTTL;\nexportedContactToken#41bf109b url:string expires:int = ExportedContactToken;\nrequestPeerTypeUser#5f3b8a00 flags:# bot:flags.0?Bool premium:flags.1?Bool = RequestPeerType;\nrequestPeerTypeChat#c9f06e1b flags:# creator:flags.0?true bot_participant:flags.5?true has_username:flags.3?Bool forum:flags.4?Bool user_admin_rights:flags.1?ChatAdminRights bot_admin_rights:flags.2?ChatAdminRights = RequestPeerType;\nrequestPeerTypeBroadcast#339bef6c flags:# creator:flags.0?true has_username:flags.3?Bool user_admin_rights:flags.1?ChatAdminRights bot_admin_rights:flags.2?ChatAdminRights = RequestPeerType;\nemojiListNotModified#481eadfa = EmojiList;\nemojiList#7a1e11d1 hash:long document_id:Vector<long> = EmojiList;\nemojiGroup#7a9abda9 title:string icon_emoji_id:long emoticons:Vector<string> = EmojiGroup;\nemojiGroupGreeting#80d26cc7 title:string icon_emoji_id:long emoticons:Vector<string> = EmojiGroup;\nemojiGroupPremium#93bcf34 title:string icon_emoji_id:long = EmojiGroup;\nmessages.emojiGroupsNotModified#6fb4ad87 = messages.EmojiGroups;\nmessages.emojiGroups#881fb94b hash:int groups:Vector<EmojiGroup> = messages.EmojiGroups;\ntextWithEntities#751f3146 text:string entities:Vector<MessageEntity> = TextWithEntities;\nmessages.translateResult#33db32f8 result:Vector<TextWithEntities> = messages.TranslatedText;\nautoSaveSettings#c84834ce flags:# photos:flags.0?true videos:flags.1?true video_max_size:flags.2?long = AutoSaveSettings;\nautoSaveException#81602d47 peer:Peer settings:AutoSaveSettings = AutoSaveException;\naccount.autoSaveSettings#4c3e069d users_settings:AutoSaveSettings chats_settings:AutoSaveSettings broadcasts_settings:AutoSaveSettings exceptions:Vector<AutoSaveException> chats:Vector<Chat> users:Vector<User> = account.AutoSaveSettings;\nhelp.appConfigNotModified#7cde641d = help.AppConfig;\nhelp.appConfig#dd18782e hash:int config:JSONValue = help.AppConfig;\ninputBotAppID#a920bd7a id:long access_hash:long = InputBotApp;\ninputBotAppShortName#908c0407 bot_id:InputUser short_name:string = InputBotApp;\nbotAppNotModified#5da674b7 = BotApp;\nbotApp#95fcd1d6 flags:# id:long access_hash:long short_name:string title:string description:string photo:Photo document:flags.0?Document hash:long = BotApp;\nmessages.botApp#eb50adf5 flags:# inactive:flags.0?true request_write_access:flags.1?true has_settings:flags.2?true app:BotApp = messages.BotApp;\ninlineBotWebView#b57295d5 text:string url:string = InlineBotWebView;\nreadParticipantDate#4a4ff172 user_id:long date:int = ReadParticipantDate;\ninputChatlistDialogFilter#f3e0da33 filter_id:int = InputChatlist;\nexportedChatlistInvite#c5181ac flags:# title:string url:string peers:Vector<Peer> = ExportedChatlistInvite;\nchatlists.exportedChatlistInvite#10e6e3a6 filter:DialogFilter invite:ExportedChatlistInvite = chatlists.ExportedChatlistInvite;\nchatlists.exportedInvites#10ab6dc7 invites:Vector<ExportedChatlistInvite> chats:Vector<Chat> users:Vector<User> = chatlists.ExportedInvites;\nchatlists.chatlistInviteAlready#fa87f659 filter_id:int missing_peers:Vector<Peer> already_peers:Vector<Peer> chats:Vector<Chat> users:Vector<User> = chatlists.ChatlistInvite;\nchatlists.chatlistInvite#f10ece2f flags:# title_noanimate:flags.1?true title:TextWithEntities emoticon:flags.0?string peers:Vector<Peer> chats:Vector<Chat> users:Vector<User> = chatlists.ChatlistInvite;\nchatlists.chatlistUpdates#93bd878d missing_peers:Vector<Peer> chats:Vector<Chat> users:Vector<User> = chatlists.ChatlistUpdates;\nbots.botInfo#e8a775b0 name:string about:string description:string = bots.BotInfo;\nmessagePeerVote#b6cc2d5c peer:Peer option:bytes date:int = MessagePeerVote;\nmessagePeerVoteInputOption#74cda504 peer:Peer date:int = MessagePeerVote;\nmessagePeerVoteMultiple#4628f6e6 peer:Peer options:Vector<bytes> date:int = MessagePeerVote;\nstoryViews#8d595cd6 flags:# has_viewers:flags.1?true views_count:int forwards_count:flags.2?int reactions:flags.3?Vector<ReactionCount> reactions_count:flags.4?int recent_viewers:flags.0?Vector<long> = StoryViews;\nstoryItemDeleted#51e6ee4f id:int = StoryItem;\nstoryItemSkipped#ffadc913 flags:# close_friends:flags.8?true live:flags.9?true id:int date:int expire_date:int = StoryItem;\nstoryItem#edf164f1 flags:# pinned:flags.5?true public:flags.7?true close_friends:flags.8?true min:flags.9?true noforwards:flags.10?true edited:flags.11?true contacts:flags.12?true selected_contacts:flags.13?true out:flags.16?true id:int date:int from_id:flags.18?Peer fwd_from:flags.17?StoryFwdHeader expire_date:int caption:flags.0?string entities:flags.1?Vector<MessageEntity> media:MessageMedia media_areas:flags.14?Vector<MediaArea> privacy:flags.2?Vector<PrivacyRule> views:flags.3?StoryViews sent_reaction:flags.15?Reaction albums:flags.19?Vector<int> = StoryItem;\nstories.allStoriesNotModified#1158fe3e flags:# state:string stealth_mode:StoriesStealthMode = stories.AllStories;\nstories.allStories#6efc5e81 flags:# has_more:flags.0?true count:int state:string peer_stories:Vector<PeerStories> chats:Vector<Chat> users:Vector<User> stealth_mode:StoriesStealthMode = stories.AllStories;\nstories.stories#63c3dd0a flags:# count:int stories:Vector<StoryItem> pinned_to_top:flags.0?Vector<int> chats:Vector<Chat> users:Vector<User> = stories.Stories;\nstoryView#b0bdeac5 flags:# blocked:flags.0?true blocked_my_stories_from:flags.1?true user_id:long date:int reaction:flags.2?Reaction = StoryView;\nstoryViewPublicForward#9083670b flags:# blocked:flags.0?true blocked_my_stories_from:flags.1?true message:Message = StoryView;\nstoryViewPublicRepost#bd74cf49 flags:# blocked:flags.0?true blocked_my_stories_from:flags.1?true peer_id:Peer story:StoryItem = StoryView;\nstories.storyViewsList#59d78fc5 flags:# count:int views_count:int forwards_count:int reactions_count:int views:Vector<StoryView> chats:Vector<Chat> users:Vector<User> next_offset:flags.0?string = stories.StoryViewsList;\nstories.storyViews#de9eed1d views:Vector<StoryViews> users:Vector<User> = stories.StoryViews;\ninputReplyToMessage#869fbe10 flags:# reply_to_msg_id:int top_msg_id:flags.0?int reply_to_peer_id:flags.1?InputPeer quote_text:flags.2?string quote_entities:flags.3?Vector<MessageEntity> quote_offset:flags.4?int monoforum_peer_id:flags.5?InputPeer todo_item_id:flags.6?int = InputReplyTo;\ninputReplyToStory#5881323a peer:InputPeer story_id:int = InputReplyTo;\ninputReplyToMonoForum#69d66c45 monoforum_peer_id:InputPeer = InputReplyTo;\nexportedStoryLink#3fc9053b link:string = ExportedStoryLink;\nstoriesStealthMode#712e27fd flags:# active_until_date:flags.0?int cooldown_until_date:flags.1?int = StoriesStealthMode;\nmediaAreaCoordinates#cfc9e002 flags:# x:double y:double w:double h:double rotation:double radius:flags.0?double = MediaAreaCoordinates;\nmediaAreaVenue#be82db9c coordinates:MediaAreaCoordinates geo:GeoPoint title:string address:string provider:string venue_id:string venue_type:string = MediaArea;\ninputMediaAreaVenue#b282217f coordinates:MediaAreaCoordinates query_id:long result_id:string = MediaArea;\nmediaAreaGeoPoint#cad5452d flags:# coordinates:MediaAreaCoordinates geo:GeoPoint address:flags.0?GeoPointAddress = MediaArea;\nmediaAreaSuggestedReaction#14455871 flags:# dark:flags.0?true flipped:flags.1?true coordinates:MediaAreaCoordinates reaction:Reaction = MediaArea;\nmediaAreaChannelPost#770416af coordinates:MediaAreaCoordinates channel_id:long msg_id:int = MediaArea;\ninputMediaAreaChannelPost#2271f2bf coordinates:MediaAreaCoordinates channel:InputChannel msg_id:int = MediaArea;\nmediaAreaUrl#37381085 coordinates:MediaAreaCoordinates url:string = MediaArea;\nmediaAreaWeather#49a6549c coordinates:MediaAreaCoordinates emoji:string temperature_c:double color:int = MediaArea;\nmediaAreaStarGift#5787686d coordinates:MediaAreaCoordinates slug:string = MediaArea;\npeerStories#9a35e999 flags:# peer:Peer max_read_id:flags.0?int stories:Vector<StoryItem> = PeerStories;\nstories.peerStories#cae68768 stories:PeerStories chats:Vector<Chat> users:Vector<User> = stories.PeerStories;\nmessages.webPage#fd5e12bd webpage:WebPage chats:Vector<Chat> users:Vector<User> = messages.WebPage;\npremiumGiftCodeOption#257e962b flags:# users:int months:int store_product:flags.0?string store_quantity:flags.1?int currency:string amount:long = PremiumGiftCodeOption;\npayments.checkedGiftCode#eb983f8f flags:# via_giveaway:flags.2?true from_id:flags.4?Peer giveaway_msg_id:flags.3?int to_id:flags.0?long date:int days:int used_date:flags.1?int chats:Vector<Chat> users:Vector<User> = payments.CheckedGiftCode;\npayments.giveawayInfo#4367daa0 flags:# participating:flags.0?true preparing_results:flags.3?true start_date:int joined_too_early_date:flags.1?int admin_disallowed_chat_id:flags.2?long disallowed_country:flags.4?string = payments.GiveawayInfo;\npayments.giveawayInfoResults#e175e66f flags:# winner:flags.0?true refunded:flags.1?true start_date:int gift_code_slug:flags.3?string stars_prize:flags.4?long finish_date:int winners_count:int activated_count:flags.2?int = payments.GiveawayInfo;\nprepaidGiveaway#b2539d54 id:long months:int quantity:int date:int = PrepaidGiveaway;\nprepaidStarsGiveaway#9a9d77e0 id:long stars:long quantity:int boosts:int date:int = PrepaidGiveaway;\nboost#4b3e14d6 flags:# gift:flags.1?true giveaway:flags.2?true unclaimed:flags.3?true id:string user_id:flags.0?long giveaway_msg_id:flags.2?int date:int expires:int used_gift_slug:flags.4?string multiplier:flags.5?int stars:flags.6?long = Boost;\npremium.boostsList#86f8613c flags:# count:int boosts:Vector<Boost> next_offset:flags.0?string users:Vector<User> = premium.BoostsList;\nmyBoost#c448415c flags:# slot:int peer:flags.0?Peer date:int expires:int cooldown_until_date:flags.1?int = MyBoost;\npremium.myBoosts#9ae228e2 my_boosts:Vector<MyBoost> chats:Vector<Chat> users:Vector<User> = premium.MyBoosts;\npremium.boostsStatus#4959427a flags:# my_boost:flags.2?true level:int current_level_boosts:int boosts:int gift_boosts:flags.4?int next_level_boosts:flags.0?int premium_audience:flags.1?StatsPercentValue boost_url:string prepaid_giveaways:flags.3?Vector<PrepaidGiveaway> my_boost_slots:flags.2?Vector<int> = premium.BoostsStatus;\nstoryFwdHeader#b826e150 flags:# modified:flags.3?true from:flags.0?Peer from_name:flags.1?string story_id:flags.2?int = StoryFwdHeader;\npostInteractionCountersMessage#e7058e7f msg_id:int views:int forwards:int reactions:int = PostInteractionCounters;\npostInteractionCountersStory#8a480e27 story_id:int views:int forwards:int reactions:int = PostInteractionCounters;\nstats.storyStats#50cd067c views_graph:StatsGraph reactions_by_emotion_graph:StatsGraph = stats.StoryStats;\npublicForwardMessage#1f2bf4a message:Message = PublicForward;\npublicForwardStory#edf3add0 peer:Peer story:StoryItem = PublicForward;\nstats.publicForwards#93037e20 flags:# count:int forwards:Vector<PublicForward> next_offset:flags.0?string chats:Vector<Chat> users:Vector<User> = stats.PublicForwards;\npeerColor#b54b5acf flags:# color:flags.0?int background_emoji_id:flags.1?long = PeerColor;\npeerColorCollectible#b9c0639a flags:# collectible_id:long gift_emoji_id:long background_emoji_id:long accent_color:int colors:Vector<int> dark_accent_color:flags.0?int dark_colors:flags.1?Vector<int> = PeerColor;\ninputPeerColorCollectible#b8ea86a9 collectible_id:long = PeerColor;\nhelp.peerColorSet#26219a58 colors:Vector<int> = help.PeerColorSet;\nhelp.peerColorProfileSet#767d61eb palette_colors:Vector<int> bg_colors:Vector<int> story_colors:Vector<int> = help.PeerColorSet;\nhelp.peerColorOption#adec6ebe flags:# hidden:flags.0?true color_id:int colors:flags.1?help.PeerColorSet dark_colors:flags.2?help.PeerColorSet channel_min_level:flags.3?int group_min_level:flags.4?int = help.PeerColorOption;\nhelp.peerColorsNotModified#2ba1f5ce = help.PeerColors;\nhelp.peerColors#f8ed08 hash:int colors:Vector<help.PeerColorOption> = help.PeerColors;\nstoryReaction#6090d6d5 peer_id:Peer date:int reaction:Reaction = StoryReaction;\nstoryReactionPublicForward#bbab2643 message:Message = StoryReaction;\nstoryReactionPublicRepost#cfcd0f13 peer_id:Peer story:StoryItem = StoryReaction;\nstories.storyReactionsList#aa5f789c flags:# count:int reactions:Vector<StoryReaction> chats:Vector<Chat> users:Vector<User> next_offset:flags.0?string = stories.StoryReactionsList;\nsavedDialog#bd87cb6c flags:# pinned:flags.2?true peer:Peer top_message:int = SavedDialog;\nmonoForumDialog#64407ea7 flags:# unread_mark:flags.3?true nopaid_messages_exception:flags.4?true peer:Peer top_message:int read_inbox_max_id:int read_outbox_max_id:int unread_count:int unread_reactions_count:int draft:flags.1?DraftMessage = SavedDialog;\nmessages.savedDialogs#f83ae221 dialogs:Vector<SavedDialog> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.SavedDialogs;\nmessages.savedDialogsSlice#44ba9dd9 count:int dialogs:Vector<SavedDialog> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.SavedDialogs;\nmessages.savedDialogsNotModified#c01f6fe8 count:int = messages.SavedDialogs;\nsavedReactionTag#cb6ff828 flags:# reaction:Reaction title:flags.0?string count:int = SavedReactionTag;\nmessages.savedReactionTagsNotModified#889b59ef = messages.SavedReactionTags;\nmessages.savedReactionTags#3259950a tags:Vector<SavedReactionTag> hash:long = messages.SavedReactionTags;\noutboxReadDate#3bb842ac date:int = OutboxReadDate;\nsmsjobs.eligibleToJoin#dc8b44cf terms_url:string monthly_sent_sms:int = smsjobs.EligibilityToJoin;\nsmsjobs.status#2aee9191 flags:# allow_international:flags.0?true recent_sent:int recent_since:int recent_remains:int total_sent:int total_since:int last_gift_slug:flags.1?string terms_url:string = smsjobs.Status;\nsmsJob#e6a1eeb8 job_id:string phone_number:string text:string = SmsJob;\nbusinessWeeklyOpen#120b1ab9 start_minute:int end_minute:int = BusinessWeeklyOpen;\nbusinessWorkHours#8c92b098 flags:# open_now:flags.0?true timezone_id:string weekly_open:Vector<BusinessWeeklyOpen> = BusinessWorkHours;\nbusinessLocation#ac5c1af7 flags:# geo_point:flags.0?GeoPoint address:string = BusinessLocation;\ninputBusinessRecipients#6f8b32aa flags:# existing_chats:flags.0?true new_chats:flags.1?true contacts:flags.2?true non_contacts:flags.3?true exclude_selected:flags.5?true users:flags.4?Vector<InputUser> = InputBusinessRecipients;\nbusinessRecipients#21108ff7 flags:# existing_chats:flags.0?true new_chats:flags.1?true contacts:flags.2?true non_contacts:flags.3?true exclude_selected:flags.5?true users:flags.4?Vector<long> = BusinessRecipients;\nbusinessAwayMessageScheduleAlways#c9b9e2b9 = BusinessAwayMessageSchedule;\nbusinessAwayMessageScheduleOutsideWorkHours#c3f2f501 = BusinessAwayMessageSchedule;\nbusinessAwayMessageScheduleCustom#cc4d9ecc start_date:int end_date:int = BusinessAwayMessageSchedule;\ninputBusinessGreetingMessage#194cb3b shortcut_id:int recipients:InputBusinessRecipients no_activity_days:int = InputBusinessGreetingMessage;\nbusinessGreetingMessage#e519abab shortcut_id:int recipients:BusinessRecipients no_activity_days:int = BusinessGreetingMessage;\ninputBusinessAwayMessage#832175e0 flags:# offline_only:flags.0?true shortcut_id:int schedule:BusinessAwayMessageSchedule recipients:InputBusinessRecipients = InputBusinessAwayMessage;\nbusinessAwayMessage#ef156a5c flags:# offline_only:flags.0?true shortcut_id:int schedule:BusinessAwayMessageSchedule recipients:BusinessRecipients = BusinessAwayMessage;\ntimezone#ff9289f5 id:string name:string utc_offset:int = Timezone;\nhelp.timezonesListNotModified#970708cc = help.TimezonesList;\nhelp.timezonesList#7b74ed71 timezones:Vector<Timezone> hash:int = help.TimezonesList;\nquickReply#697102b shortcut_id:int shortcut:string top_message:int count:int = QuickReply;\ninputQuickReplyShortcut#24596d41 shortcut:string = InputQuickReplyShortcut;\ninputQuickReplyShortcutId#1190cf1 shortcut_id:int = InputQuickReplyShortcut;\nmessages.quickReplies#c68d6695 quick_replies:Vector<QuickReply> messages:Vector<Message> chats:Vector<Chat> users:Vector<User> = messages.QuickReplies;\nmessages.quickRepliesNotModified#5f91eb5b = messages.QuickReplies;\nconnectedBot#cd64636c flags:# bot_id:long recipients:BusinessBotRecipients rights:BusinessBotRights = ConnectedBot;\naccount.connectedBots#17d7f87b connected_bots:Vector<ConnectedBot> users:Vector<User> = account.ConnectedBots;\nmessages.dialogFilters#2ad93719 flags:# tags_enabled:flags.0?true filters:Vector<DialogFilter> = messages.DialogFilters;\nbirthday#6c8e1e06 flags:# day:int month:int year:flags.0?int = Birthday;\nbotBusinessConnection#8f34b2f5 flags:# disabled:flags.1?true connection_id:string user_id:long dc_id:int date:int rights:flags.2?BusinessBotRights = BotBusinessConnection;\ninputBusinessIntro#9c469cd flags:# title:string description:string sticker:flags.0?InputDocument = InputBusinessIntro;\nbusinessIntro#5a0a066d flags:# title:string description:string sticker:flags.0?Document = BusinessIntro;\nmessages.myStickers#faff629d count:int sets:Vector<StickerSetCovered> = messages.MyStickers;\ninputCollectibleUsername#e39460a9 username:string = InputCollectible;\ninputCollectiblePhone#a2e214a4 phone:string = InputCollectible;\nfragment.collectibleInfo#6ebdff91 purchase_date:int currency:string amount:long crypto_currency:string crypto_amount:long url:string = fragment.CollectibleInfo;\ninputBusinessBotRecipients#c4e5921e flags:# existing_chats:flags.0?true new_chats:flags.1?true contacts:flags.2?true non_contacts:flags.3?true exclude_selected:flags.5?true users:flags.4?Vector<InputUser> exclude_users:flags.6?Vector<InputUser> = InputBusinessBotRecipients;\nbusinessBotRecipients#b88cf373 flags:# existing_chats:flags.0?true new_chats:flags.1?true contacts:flags.2?true non_contacts:flags.3?true exclude_selected:flags.5?true users:flags.4?Vector<long> exclude_users:flags.6?Vector<long> = BusinessBotRecipients;\ncontactBirthday#1d998733 contact_id:long birthday:Birthday = ContactBirthday;\ncontacts.contactBirthdays#114ff30d contacts:Vector<ContactBirthday> users:Vector<User> = contacts.ContactBirthdays;\nmissingInvitee#628c9224 flags:# premium_would_allow_invite:flags.0?true premium_required_for_pm:flags.1?true user_id:long = MissingInvitee;\nmessages.invitedUsers#7f5defa6 updates:Updates missing_invitees:Vector<MissingInvitee> = messages.InvitedUsers;\ninputBusinessChatLink#11679fa7 flags:# message:string entities:flags.0?Vector<MessageEntity> title:flags.1?string = InputBusinessChatLink;\nbusinessChatLink#b4ae666f flags:# link:string message:string entities:flags.0?Vector<MessageEntity> title:flags.1?string views:int = BusinessChatLink;\naccount.businessChatLinks#ec43a2d1 links:Vector<BusinessChatLink> chats:Vector<Chat> users:Vector<User> = account.BusinessChatLinks;\naccount.resolvedBusinessChatLinks#9a23af21 flags:# peer:Peer message:string entities:flags.0?Vector<MessageEntity> chats:Vector<Chat> users:Vector<User> = account.ResolvedBusinessChatLinks;\nrequestedPeerUser#d62ff46a flags:# user_id:long first_name:flags.0?string last_name:flags.0?string username:flags.1?string photo:flags.2?Photo = RequestedPeer;\nrequestedPeerChat#7307544f flags:# chat_id:long title:flags.0?string photo:flags.2?Photo = RequestedPeer;\nrequestedPeerChannel#8ba403e4 flags:# channel_id:long title:flags.0?string username:flags.1?string photo:flags.2?Photo = RequestedPeer;\nsponsoredMessageReportOption#430d3150 text:string option:bytes = SponsoredMessageReportOption;\nchannels.sponsoredMessageReportResultChooseOption#846f9e42 title:string options:Vector<SponsoredMessageReportOption> = channels.SponsoredMessageReportResult;\nchannels.sponsoredMessageReportResultAdsHidden#3e3bcf2f = channels.SponsoredMessageReportResult;\nchannels.sponsoredMessageReportResultReported#ad798849 = channels.SponsoredMessageReportResult;\nreactionNotificationsFromContacts#bac3a61a = ReactionNotificationsFrom;\nreactionNotificationsFromAll#4b9e22a0 = ReactionNotificationsFrom;\nreactionsNotifySettings#56e34970 flags:# messages_notify_from:flags.0?ReactionNotificationsFrom stories_notify_from:flags.1?ReactionNotificationsFrom sound:NotificationSound show_previews:Bool = ReactionsNotifySettings;\navailableEffect#93c3e27e flags:# premium_required:flags.2?true id:long emoticon:string static_icon_id:flags.0?long effect_sticker_id:long effect_animation_id:flags.1?long = AvailableEffect;\nmessages.availableEffectsNotModified#d1ed9a5b = messages.AvailableEffects;\nmessages.availableEffects#bddb616e hash:int effects:Vector<AvailableEffect> documents:Vector<Document> = messages.AvailableEffects;\nfactCheck#b89bfccf flags:# need_check:flags.0?true country:flags.1?string text:flags.1?TextWithEntities hash:long = FactCheck;\nstarsTransactionPeerUnsupported#95f2bfe4 = StarsTransactionPeer;\nstarsTransactionPeerAppStore#b457b375 = StarsTransactionPeer;\nstarsTransactionPeerPlayMarket#7b560a0b = StarsTransactionPeer;\nstarsTransactionPeerPremiumBot#250dbaf8 = StarsTransactionPeer;\nstarsTransactionPeerFragment#e92fd902 = StarsTransactionPeer;\nstarsTransactionPeer#d80da15d peer:Peer = StarsTransactionPeer;\nstarsTransactionPeerAds#60682812 = StarsTransactionPeer;\nstarsTransactionPeerAPI#f9677aad = StarsTransactionPeer;\nstarsTopupOption#bd915c0 flags:# extended:flags.1?true stars:long store_product:flags.0?string currency:string amount:long = StarsTopupOption;\nstarsTransaction#13659eb0 flags:# refund:flags.3?true pending:flags.4?true failed:flags.6?true gift:flags.10?true reaction:flags.11?true stargift_upgrade:flags.18?true business_transfer:flags.21?true stargift_resale:flags.22?true posts_search:flags.24?true stargift_prepaid_upgrade:flags.25?true stargift_drop_original_details:flags.26?true phonegroup_message:flags.27?true stargift_auction_bid:flags.28?true offer:flags.29?true id:string amount:StarsAmount date:int peer:StarsTransactionPeer title:flags.0?string description:flags.1?string photo:flags.2?WebDocument transaction_date:flags.5?int transaction_url:flags.5?string bot_payload:flags.7?bytes msg_id:flags.8?int extended_media:flags.9?Vector<MessageMedia> subscription_period:flags.12?int giveaway_post_id:flags.13?int stargift:flags.14?StarGift floodskip_number:flags.15?int starref_commission_permille:flags.16?int starref_peer:flags.17?Peer starref_amount:flags.17?StarsAmount paid_messages:flags.19?int premium_gift_months:flags.20?int ads_proceeds_from_date:flags.23?int ads_proceeds_to_date:flags.23?int = StarsTransaction;\npayments.starsStatus#6c9ce8ed flags:# balance:StarsAmount subscriptions:flags.1?Vector<StarsSubscription> subscriptions_next_offset:flags.2?string subscriptions_missing_balance:flags.4?long history:flags.3?Vector<StarsTransaction> next_offset:flags.0?string chats:Vector<Chat> users:Vector<User> = payments.StarsStatus;\nfoundStory#e87acbc0 peer:Peer story:StoryItem = FoundStory;\nstories.foundStories#e2de7737 flags:# count:int stories:Vector<FoundStory> next_offset:flags.0?string chats:Vector<Chat> users:Vector<User> = stories.FoundStories;\ngeoPointAddress#de4c5d93 flags:# country_iso2:string state:flags.0?string city:flags.1?string street:flags.2?string = GeoPointAddress;\nstarsRevenueStatus#febe5491 flags:# withdrawal_enabled:flags.0?true current_balance:StarsAmount available_balance:StarsAmount overall_revenue:StarsAmount next_withdrawal_at:flags.1?int = StarsRevenueStatus;\npayments.starsRevenueStats#6c207376 flags:# top_hours_graph:flags.0?StatsGraph revenue_graph:StatsGraph status:StarsRevenueStatus usd_rate:double = payments.StarsRevenueStats;\npayments.starsRevenueWithdrawalUrl#1dab80b7 url:string = payments.StarsRevenueWithdrawalUrl;\npayments.starsRevenueAdsAccountUrl#394e7f21 url:string = payments.StarsRevenueAdsAccountUrl;\ninputStarsTransaction#206ae6d1 flags:# refund:flags.0?true id:string = InputStarsTransaction;\nstarsGiftOption#5e0589f1 flags:# extended:flags.1?true stars:long store_product:flags.0?string currency:string amount:long = StarsGiftOption;\nbots.popularAppBots#1991b13b flags:# next_offset:flags.0?string users:Vector<User> = bots.PopularAppBots;\nbotPreviewMedia#23e91ba3 date:int media:MessageMedia = BotPreviewMedia;\nbots.previewInfo#ca71d64 media:Vector<BotPreviewMedia> lang_codes:Vector<string> = bots.PreviewInfo;\nstarsSubscriptionPricing#5416d58 period:int amount:long = StarsSubscriptionPricing;\nstarsSubscription#2e6eab1a flags:# canceled:flags.0?true can_refulfill:flags.1?true missing_balance:flags.2?true bot_canceled:flags.7?true id:string peer:Peer until_date:int pricing:StarsSubscriptionPricing chat_invite_hash:flags.3?string title:flags.4?string photo:flags.5?WebDocument invoice_slug:flags.6?string = StarsSubscription;\nmessageReactor#4ba3a95a flags:# top:flags.0?true my:flags.1?true anonymous:flags.2?true peer_id:flags.3?Peer count:int = MessageReactor;\nstarsGiveawayOption#94ce852a flags:# extended:flags.0?true default:flags.1?true stars:long yearly_boosts:int store_product:flags.2?string currency:string amount:long winners:Vector<StarsGiveawayWinnersOption> = StarsGiveawayOption;\nstarsGiveawayWinnersOption#54236209 flags:# default:flags.0?true users:int per_user_stars:long = StarsGiveawayWinnersOption;\nstarGift#313a9547 flags:# limited:flags.0?true sold_out:flags.1?true birthday:flags.2?true require_premium:flags.7?true limited_per_user:flags.8?true peer_color_available:flags.10?true auction:flags.11?true id:long sticker:Document stars:long availability_remains:flags.0?int availability_total:flags.0?int availability_resale:flags.4?long convert_stars:long first_sale_date:flags.1?int last_sale_date:flags.1?int upgrade_stars:flags.3?long resell_min_stars:flags.4?long title:flags.5?string released_by:flags.6?Peer per_user_total:flags.8?int per_user_remains:flags.8?int locked_until_date:flags.9?int auction_slug:flags.11?string gifts_per_round:flags.11?int auction_start_date:flags.11?int upgrade_variants:flags.12?int background:flags.13?StarGiftBackground = StarGift;\nstarGiftUnique#85f0a9cd flags:# require_premium:flags.6?true resale_ton_only:flags.7?true theme_available:flags.9?true burned:flags.14?true crafted:flags.15?true id:long gift_id:long title:string slug:string num:int owner_id:flags.0?Peer owner_name:flags.1?string owner_address:flags.2?string attributes:Vector<StarGiftAttribute> availability_issued:int availability_total:int gift_address:flags.3?string resell_amount:flags.4?Vector<StarsAmount> released_by:flags.5?Peer value_amount:flags.8?long value_currency:flags.8?string value_usd_amount:flags.8?long theme_peer:flags.10?Peer peer_color:flags.11?PeerColor host_id:flags.12?Peer offer_min_stars:flags.13?int craft_chance_permille:flags.16?int = StarGift;\npayments.starGiftsNotModified#a388a368 = payments.StarGifts;\npayments.starGifts#2ed82995 hash:int gifts:Vector<StarGift> chats:Vector<Chat> users:Vector<User> = payments.StarGifts;\nmessageReportOption#7903e3d9 text:string option:bytes = MessageReportOption;\nreportResultChooseOption#f0e4e0b6 title:string options:Vector<MessageReportOption> = ReportResult;\nreportResultAddComment#6f09ac31 flags:# optional:flags.0?true option:bytes = ReportResult;\nreportResultReported#8db33c4b = ReportResult;\nmessages.botPreparedInlineMessage#8ecf0511 id:string expire_date:int = messages.BotPreparedInlineMessage;\nmessages.preparedInlineMessage#ff57708d query_id:long result:BotInlineResult peer_types:Vector<InlineQueryPeerType> cache_time:int users:Vector<User> = messages.PreparedInlineMessage;\nbotAppSettings#c99b1950 flags:# placeholder_path:flags.0?bytes background_color:flags.1?int background_dark_color:flags.2?int header_color:flags.3?int header_dark_color:flags.4?int = BotAppSettings;\nstarRefProgram#dd0c66f2 flags:# bot_id:long commission_permille:int duration_months:flags.0?int end_date:flags.1?int daily_revenue_per_user:flags.2?StarsAmount = StarRefProgram;\nconnectedBotStarRef#19a13f71 flags:# revoked:flags.1?true url:string date:int bot_id:long commission_permille:int duration_months:flags.0?int participants:long revenue:long = ConnectedBotStarRef;\npayments.connectedStarRefBots#98d5ea1d count:int connected_bots:Vector<ConnectedBotStarRef> users:Vector<User> = payments.ConnectedStarRefBots;\npayments.suggestedStarRefBots#b4d5d859 flags:# count:int suggested_bots:Vector<StarRefProgram> users:Vector<User> next_offset:flags.0?string = payments.SuggestedStarRefBots;\nstarsAmount#bbb6b4a3 amount:long nanos:int = StarsAmount;\nstarsTonAmount#74aee3e0 amount:long = StarsAmount;\nmessages.foundStickersNotModified#6010c534 flags:# next_offset:flags.0?int = messages.FoundStickers;\nmessages.foundStickers#82c9e290 flags:# next_offset:flags.0?int hash:long stickers:Vector<Document> = messages.FoundStickers;\nbotVerifierSettings#b0cd6617 flags:# can_modify_custom_description:flags.1?true icon:long company:string custom_description:flags.0?string = BotVerifierSettings;\nbotVerification#f93cd45c bot_id:long icon:long description:string = BotVerification;\nstarGiftAttributeModel#565251e2 flags:# crafted:flags.0?true name:string document:Document rarity:StarGiftAttributeRarity = StarGiftAttribute;\nstarGiftAttributePattern#4e7085ea name:string document:Document rarity:StarGiftAttributeRarity = StarGiftAttribute;\nstarGiftAttributeBackdrop#9f2504e4 name:string backdrop_id:int center_color:int edge_color:int pattern_color:int text_color:int rarity:StarGiftAttributeRarity = StarGiftAttribute;\nstarGiftAttributeOriginalDetails#e0bff26c flags:# sender_id:flags.0?Peer recipient_id:Peer date:int message:flags.1?TextWithEntities = StarGiftAttribute;\npayments.starGiftUpgradePreview#3de1dfed sample_attributes:Vector<StarGiftAttribute> prices:Vector<StarGiftUpgradePrice> next_prices:Vector<StarGiftUpgradePrice> = payments.StarGiftUpgradePreview;\nusers.users#62d706b8 users:Vector<User> = users.Users;\nusers.usersSlice#315a4974 count:int users:Vector<User> = users.Users;\npayments.uniqueStarGift#416c56e8 gift:StarGift chats:Vector<Chat> users:Vector<User> = payments.UniqueStarGift;\nmessages.webPagePreview#8c9a88ac media:MessageMedia chats:Vector<Chat> users:Vector<User> = messages.WebPagePreview;\nsavedStarGift#41df43fc flags:# name_hidden:flags.0?true unsaved:flags.5?true refunded:flags.9?true can_upgrade:flags.10?true pinned_to_top:flags.12?true upgrade_separate:flags.17?true from_id:flags.1?Peer date:int gift:StarGift message:flags.2?TextWithEntities msg_id:flags.3?int saved_id:flags.11?long convert_stars:flags.4?long upgrade_stars:flags.6?long can_export_at:flags.7?int transfer_stars:flags.8?long can_transfer_at:flags.13?int can_resell_at:flags.14?int collection_id:flags.15?Vector<int> prepaid_upgrade_hash:flags.16?string drop_original_details_stars:flags.18?long gift_num:flags.19?int can_craft_at:flags.20?int = SavedStarGift;\npayments.savedStarGifts#95f389b1 flags:# count:int chat_notifications_enabled:flags.1?Bool gifts:Vector<SavedStarGift> next_offset:flags.0?string chats:Vector<Chat> users:Vector<User> = payments.SavedStarGifts;\ninputSavedStarGiftUser#69279795 msg_id:int = InputSavedStarGift;\ninputSavedStarGiftChat#f101aa7f peer:InputPeer saved_id:long = InputSavedStarGift;\ninputSavedStarGiftSlug#2085c238 slug:string = InputSavedStarGift;\npayments.starGiftWithdrawalUrl#84aa3a9c url:string = payments.StarGiftWithdrawalUrl;\npaidReactionPrivacyDefault#206ad49e = PaidReactionPrivacy;\npaidReactionPrivacyAnonymous#1f0c1ad9 = PaidReactionPrivacy;\npaidReactionPrivacyPeer#dc6cfcf0 peer:InputPeer = PaidReactionPrivacy;\naccount.paidMessagesRevenue#1e109708 stars_amount:long = account.PaidMessagesRevenue;\nrequirementToContactEmpty#50a9839 = RequirementToContact;\nrequirementToContactPremium#e581e4e9 = RequirementToContact;\nrequirementToContactPaidMessages#b4f67e93 stars_amount:long = RequirementToContact;\nbusinessBotRights#a0624cf7 flags:# reply:flags.0?true read_messages:flags.1?true delete_sent_messages:flags.2?true delete_received_messages:flags.3?true edit_name:flags.4?true edit_bio:flags.5?true edit_profile_photo:flags.6?true edit_username:flags.7?true view_gifts:flags.8?true sell_gifts:flags.9?true change_gift_settings:flags.10?true transfer_and_upgrade_gifts:flags.11?true transfer_stars:flags.12?true manage_stories:flags.13?true = BusinessBotRights;\ndisallowedGiftsSettings#71f276c4 flags:# disallow_unlimited_stargifts:flags.0?true disallow_limited_stargifts:flags.1?true disallow_unique_stargifts:flags.2?true disallow_premium_gifts:flags.3?true disallow_stargifts_from_channels:flags.4?true = DisallowedGiftsSettings;\nsponsoredPeer#c69708d3 flags:# random_id:bytes peer:Peer sponsor_info:flags.0?string additional_info:flags.1?string = SponsoredPeer;\ncontacts.sponsoredPeersEmpty#ea32b4b1 = contacts.SponsoredPeers;\ncontacts.sponsoredPeers#eb032884 peers:Vector<SponsoredPeer> chats:Vector<Chat> users:Vector<User> = contacts.SponsoredPeers;\nstarGiftAttributeIdModel#48aaae3c document_id:long = StarGiftAttributeId;\nstarGiftAttributeIdPattern#4a162433 document_id:long = StarGiftAttributeId;\nstarGiftAttributeIdBackdrop#1f01c757 backdrop_id:int = StarGiftAttributeId;\nstarGiftAttributeCounter#2eb1b658 attribute:StarGiftAttributeId count:int = StarGiftAttributeCounter;\npayments.resaleStarGifts#947a12df flags:# count:int gifts:Vector<StarGift> next_offset:flags.0?string attributes:flags.1?Vector<StarGiftAttribute> attributes_hash:flags.1?long chats:Vector<Chat> counters:flags.2?Vector<StarGiftAttributeCounter> users:Vector<User> = payments.ResaleStarGifts;\nstories.canSendStoryCount#c387c04e count_remains:int = stories.CanSendStoryCount;\npendingSuggestion#e7e82e12 suggestion:string title:TextWithEntities description:TextWithEntities url:string = PendingSuggestion;\ntodoItem#cba9a52f id:int title:TextWithEntities = TodoItem;\ntodoList#49b92a26 flags:# others_can_append:flags.0?true others_can_complete:flags.1?true title:TextWithEntities list:Vector<TodoItem> = TodoList;\ntodoCompletion#221bb5e4 id:int completed_by:Peer date:int = TodoCompletion;\nsuggestedPost#e8e37e5 flags:# accepted:flags.1?true rejected:flags.2?true price:flags.3?StarsAmount schedule_date:flags.0?int = SuggestedPost;\nstarsRating#1b0e4f07 flags:# level:int current_level_stars:long stars:long next_level_stars:flags.0?long = StarsRating;\nstarGiftCollection#9d6b13b0 flags:# collection_id:int title:string icon:flags.0?Document gifts_count:int hash:long = StarGiftCollection;\npayments.starGiftCollectionsNotModified#a0ba4f17 = payments.StarGiftCollections;\npayments.starGiftCollections#8a2932f3 collections:Vector<StarGiftCollection> = payments.StarGiftCollections;\nstoryAlbum#9325705a flags:# album_id:int title:string icon_photo:flags.0?Photo icon_video:flags.1?Document = StoryAlbum;\nstories.albumsNotModified#564edaeb = stories.Albums;\nstories.albums#c3987a3a hash:long albums:Vector<StoryAlbum> = stories.Albums;\nsearchPostsFlood#3e0b5b6a flags:# query_is_free:flags.0?true total_daily:int remains:int wait_till:flags.1?int stars_amount:long = SearchPostsFlood;\npayments.uniqueStarGiftValueInfo#512fe446 flags:# last_sale_on_fragment:flags.1?true value_is_average:flags.6?true currency:string value:long initial_sale_date:int initial_sale_stars:long initial_sale_price:long last_sale_date:flags.0?int last_sale_price:flags.0?long floor_price:flags.2?long average_price:flags.3?long listed_count:flags.4?int fragment_listed_count:flags.5?int fragment_listed_url:flags.5?string = payments.UniqueStarGiftValueInfo;\nprofileTabPosts#b98cd696 = ProfileTab;\nprofileTabGifts#4d4bd46a = ProfileTab;\nprofileTabMedia#72c64955 = ProfileTab;\nprofileTabFiles#ab339c00 = ProfileTab;\nprofileTabMusic#9f27d26e = ProfileTab;\nprofileTabVoice#e477092e = ProfileTab;\nprofileTabLinks#d3656499 = ProfileTab;\nprofileTabGifs#a2c0f695 = ProfileTab;\nusers.savedMusicNotModified#e3878aa4 count:int = users.SavedMusic;\nusers.savedMusic#34a2f297 count:int documents:Vector<Document> = users.SavedMusic;\naccount.savedMusicIdsNotModified#4fc81d6e = account.SavedMusicIds;\naccount.savedMusicIds#998d6636 ids:Vector<long> = account.SavedMusicIds;\npayments.checkCanSendGiftResultOk#374fa7ad = payments.CheckCanSendGiftResult;\npayments.checkCanSendGiftResultFail#d5e58274 reason:TextWithEntities = payments.CheckCanSendGiftResult;\ninputChatThemeEmpty#83268483 = InputChatTheme;\ninputChatTheme#c93de95c emoticon:string = InputChatTheme;\ninputChatThemeUniqueGift#87e5dfe4 slug:string = InputChatTheme;\nstarGiftUpgradePrice#99ea331d date:int upgrade_stars:long = StarGiftUpgradePrice;\ngroupCallMessage#1a8afc7e flags:# from_admin:flags.1?true id:int from_id:Peer date:int message:TextWithEntities paid_message_stars:flags.0?long = GroupCallMessage;\ngroupCallDonor#ee430c85 flags:# top:flags.0?true my:flags.1?true peer_id:flags.3?Peer stars:long = GroupCallDonor;\nphone.groupCallStars#9d1dbd26 total_stars:long top_donors:Vector<GroupCallDonor> chats:Vector<Chat> users:Vector<User> = phone.GroupCallStars;\nrecentStory#711d692d flags:# live:flags.0?true max_id:flags.1?int = RecentStory;\nauctionBidLevel#310240cc pos:int amount:long date:int = AuctionBidLevel;\nstarGiftAuctionStateNotModified#fe333952 = StarGiftAuctionState;\nstarGiftAuctionState#771a4e66 version:int start_date:int end_date:int min_bid_amount:long bid_levels:Vector<AuctionBidLevel> top_bidders:Vector<long> next_round_at:int last_gift_num:int gifts_left:int current_round:int total_rounds:int rounds:Vector<StarGiftAuctionRound> = StarGiftAuctionState;\nstarGiftAuctionStateFinished#972dabbf flags:# start_date:int end_date:int average_price:long listed_count:flags.0?int fragment_listed_count:flags.1?int fragment_listed_url:flags.1?string = StarGiftAuctionState;\nstarGiftAuctionUserState#2eeed1c4 flags:# returned:flags.1?true bid_amount:flags.0?long bid_date:flags.0?int min_bid_amount:flags.0?long bid_peer:flags.0?Peer acquired_count:int = StarGiftAuctionUserState;\npayments.starGiftAuctionState#6b39f4ec gift:StarGift state:StarGiftAuctionState user_state:StarGiftAuctionUserState timeout:int users:Vector<User> chats:Vector<Chat> = payments.StarGiftAuctionState;\nstarGiftAuctionAcquiredGift#42b00348 flags:# name_hidden:flags.0?true peer:Peer date:int bid_amount:long round:int pos:int message:flags.1?TextWithEntities gift_num:flags.2?int = StarGiftAuctionAcquiredGift;\npayments.starGiftAuctionAcquiredGifts#7d5bd1f0 gifts:Vector<StarGiftAuctionAcquiredGift> users:Vector<User> chats:Vector<Chat> = payments.StarGiftAuctionAcquiredGifts;\nstarGiftActiveAuctionState#d31bc45d gift:StarGift state:StarGiftAuctionState user_state:StarGiftAuctionUserState = StarGiftActiveAuctionState;\npayments.starGiftActiveAuctionsNotModified#db33dad0 = payments.StarGiftActiveAuctions;\npayments.starGiftActiveAuctions#aef6abbc auctions:Vector<StarGiftActiveAuctionState> users:Vector<User> chats:Vector<Chat> = payments.StarGiftActiveAuctions;\ninputStarGiftAuction#2e16c98 gift_id:long = InputStarGiftAuction;\ninputStarGiftAuctionSlug#7ab58308 slug:string = InputStarGiftAuction;\npasskey#98613ebf flags:# id:string name:string date:int software_emoji_id:flags.0?long last_usage_date:flags.1?int = Passkey;\naccount.passkeys#f8e0aa1c passkeys:Vector<Passkey> = account.Passkeys;\naccount.passkeyRegistrationOptions#e16b5ce1 options:DataJSON = account.PasskeyRegistrationOptions;\nauth.passkeyLoginOptions#e2037789 options:DataJSON = auth.PasskeyLoginOptions;\ninputPasskeyResponseRegister#3e63935c client_data:DataJSON attestation_data:bytes = InputPasskeyResponse;\ninputPasskeyResponseLogin#c31fc14a client_data:DataJSON authenticator_data:bytes signature:bytes user_handle:string = InputPasskeyResponse;\ninputPasskeyCredentialPublicKey#3c27b78f id:string raw_id:string response:InputPasskeyResponse = InputPasskeyCredential;\ninputPasskeyCredentialFirebasePNV#5b1ccb28 pnv_token:string = InputPasskeyCredential;\nstarGiftBackground#aff56398 center_color:int edge_color:int text_color:int = StarGiftBackground;\nstarGiftAuctionRound#3aae0528 num:int duration:int = StarGiftAuctionRound;\nstarGiftAuctionRoundExtendable#aa021e5 num:int duration:int extend_top:int extend_window:int = StarGiftAuctionRound;\npayments.starGiftUpgradeAttributes#46c6e36f attributes:Vector<StarGiftAttribute> = payments.StarGiftUpgradeAttributes;\nmessages.emojiGameOutcome#da2ad647 seed:bytes stake_ton_amount:long ton_amount:long = messages.EmojiGameOutcome;\nmessages.emojiGameUnavailable#59e65335 = messages.EmojiGameInfo;\nmessages.emojiGameDiceInfo#44e56023 flags:# game_hash:string prev_stake:long current_streak:int params:Vector<int> plays_left:flags.0?int = messages.EmojiGameInfo;\nstarGiftAttributeRarity#36437737 permille:int = StarGiftAttributeRarity;\nstarGiftAttributeRarityUncommon#dbce6389 = StarGiftAttributeRarity;\nstarGiftAttributeRarityRare#f08d516b = StarGiftAttributeRarity;\nstarGiftAttributeRarityEpic#78fbf3a8 = StarGiftAttributeRarity;\nstarGiftAttributeRarityLegendary#cef7e7a8 = StarGiftAttributeRarity;\nkeyboardButtonStyle#4fdd3430 flags:# bg_primary:flags.0?true bg_danger:flags.1?true bg_success:flags.2?true icon:flags.3?long = KeyboardButtonStyle;\n---functions---\ninvokeAfterMsg#cb9f372d {X:Type} msg_id:long query:!X = X;\ninitConnection#c1cd5ea9 {X:Type} flags:# api_id:int device_model:string system_version:string app_version:string system_lang_code:string lang_pack:string lang_code:string proxy:flags.0?InputClientProxy params:flags.1?JSONValue query:!X = X;\ninvokeWithLayer#da9b0d0d {X:Type} layer:int query:!X = X;\nauth.sendCode#a677244f phone_number:string api_id:int api_hash:string settings:CodeSettings = auth.SentCode;\nauth.signUp#aac7b717 flags:# no_joined_notifications:flags.0?true phone_number:string phone_code_hash:string first_name:string last_name:string = auth.Authorization;\nauth.signIn#8d52a951 flags:# phone_number:string phone_code_hash:string phone_code:flags.0?string email_verification:flags.1?EmailVerification = auth.Authorization;\nauth.logOut#3e72ba19 = auth.LoggedOut;\nauth.resetAuthorizations#9fab0d1a = Bool;\nauth.exportAuthorization#e5bfffcd dc_id:int = auth.ExportedAuthorization;\nauth.importAuthorization#a57a7dad id:long bytes:bytes = auth.Authorization;\nauth.bindTempAuthKey#cdd42a05 perm_auth_key_id:long nonce:long expires_at:int encrypted_message:bytes = Bool;\nauth.checkPassword#d18b4d16 password:InputCheckPasswordSRP = auth.Authorization;\nauth.requestPasswordRecovery#d897bc66 = auth.PasswordRecovery;\nauth.resendCode#cae47523 flags:# phone_number:string phone_code_hash:string reason:flags.0?string = auth.SentCode;\nauth.cancelCode#1f040578 phone_number:string phone_code_hash:string = Bool;\nauth.dropTempAuthKeys#8e48a188 except_auth_keys:Vector<long> = Bool;\nauth.exportLoginToken#b7e085fe api_id:int api_hash:string except_ids:Vector<long> = auth.LoginToken;\nauth.importLoginToken#95ac5ce4 token:bytes = auth.LoginToken;\nauth.importWebTokenAuthorization#2db873a9 api_id:int api_hash:string web_auth_token:string = auth.Authorization;\nauth.initPasskeyLogin#518ad0b7 api_id:int api_hash:string = auth.PasskeyLoginOptions;\nauth.finishPasskeyLogin#9857ad07 flags:# credential:InputPasskeyCredential from_dc_id:flags.0?int from_auth_key_id:flags.0?long = auth.Authorization;\naccount.registerDevice#ec86017a flags:# no_muted:flags.0?true token_type:int token:string app_sandbox:Bool secret:bytes other_uids:Vector<long> = Bool;\naccount.unregisterDevice#6a0d3206 token_type:int token:string other_uids:Vector<long> = Bool;\naccount.updateNotifySettings#84be5b93 peer:InputNotifyPeer settings:InputPeerNotifySettings = Bool;\naccount.getNotifySettings#12b3ad31 peer:InputNotifyPeer = PeerNotifySettings;\naccount.updateProfile#78515775 flags:# first_name:flags.0?string last_name:flags.1?string about:flags.2?string = User;\naccount.updateStatus#6628562c offline:Bool = Bool;\naccount.getWallPapers#7967d36 hash:long = account.WallPapers;\naccount.reportPeer#c5ba3d86 peer:InputPeer reason:ReportReason message:string = Bool;\naccount.checkUsername#2714d86c username:string = Bool;\naccount.updateUsername#3e0bdd7c username:string = User;\naccount.getPrivacy#dadbc950 key:InputPrivacyKey = account.PrivacyRules;\naccount.setPrivacy#c9f81ce8 key:InputPrivacyKey rules:Vector<InputPrivacyRule> = account.PrivacyRules;\naccount.getAccountTTL#8fc711d = AccountDaysTTL;\naccount.setAccountTTL#2442485e ttl:AccountDaysTTL = Bool;\naccount.getAuthorizations#e320c158 = account.Authorizations;\naccount.resetAuthorization#df77f3bc hash:long = Bool;\naccount.getPassword#548a30f5 = account.Password;\naccount.getPasswordSettings#9cd4eaf9 password:InputCheckPasswordSRP = account.PasswordSettings;\naccount.updatePasswordSettings#a59b102f password:InputCheckPasswordSRP new_settings:account.PasswordInputSettings = Bool;\naccount.sendConfirmPhoneCode#1b3faa88 hash:string settings:CodeSettings = auth.SentCode;\naccount.confirmPhone#5f2178c3 phone_code_hash:string phone_code:string = Bool;\naccount.getTmpPassword#449e0b51 password:InputCheckPasswordSRP period:int = account.TmpPassword;\naccount.getWebAuthorizations#182e6d6f = account.WebAuthorizations;\naccount.resetWebAuthorization#2d01b9ef hash:long = Bool;\naccount.resetWebAuthorizations#682d2594 = Bool;\naccount.sendVerifyPhoneCode#a5a356f9 phone_number:string settings:CodeSettings = auth.SentCode;\naccount.confirmPasswordEmail#8fdf1920 code:string = Bool;\naccount.getContactSignUpNotification#9f07c728 = Bool;\naccount.setContactSignUpNotification#cff43f61 silent:Bool = Bool;\naccount.getNotifyExceptions#53577479 flags:# compare_sound:flags.1?true compare_stories:flags.2?true peer:flags.0?InputNotifyPeer = Updates;\naccount.uploadWallPaper#e39a8f03 flags:# for_chat:flags.0?true file:InputFile mime_type:string settings:WallPaperSettings = WallPaper;\naccount.setContentSettings#b574b16b flags:# sensitive_enabled:flags.0?true = Bool;\naccount.getContentSettings#8b9b4dae = account.ContentSettings;\naccount.getGlobalPrivacySettings#eb2b4cf6 = GlobalPrivacySettings;\naccount.setGlobalPrivacySettings#1edaaac2 settings:GlobalPrivacySettings = GlobalPrivacySettings;\naccount.reportProfilePhoto#fa8cc6f5 peer:InputPeer photo_id:InputPhoto reason:ReportReason message:string = Bool;\naccount.setAuthorizationTTL#bf899aa0 authorization_ttl_days:int = Bool;\naccount.changeAuthorizationSettings#40f48462 flags:# confirmed:flags.3?true hash:long encrypted_requests_disabled:flags.0?Bool call_requests_disabled:flags.1?Bool = Bool;\naccount.updateEmojiStatus#fbd3de6b emoji_status:EmojiStatus = Bool;\naccount.getRecentEmojiStatuses#f578105 hash:long = account.EmojiStatuses;\naccount.reorderUsernames#ef500eab order:Vector<string> = Bool;\naccount.toggleUsername#58d6b376 username:string active:Bool = Bool;\naccount.updateBirthday#cc6e0c11 flags:# birthday:flags.0?Birthday = Bool;\naccount.resolveBusinessChatLink#5492e5ee slug:string = account.ResolvedBusinessChatLinks;\naccount.toggleSponsoredMessages#b9d9a38d enabled:Bool = Bool;\naccount.getCollectibleEmojiStatuses#2e7b4543 hash:long = account.EmojiStatuses;\naccount.getPaidMessagesRevenue#19ba4a67 flags:# parent_peer:flags.0?InputPeer user_id:InputUser = account.PaidMessagesRevenue;\naccount.toggleNoPaidMessagesException#fe2eda76 flags:# refund_charged:flags.0?true require_payment:flags.2?true parent_peer:flags.1?InputPeer user_id:InputUser = Bool;\naccount.setMainProfileTab#5dee78b0 tab:ProfileTab = Bool;\naccount.initPasskeyRegistration#429547e8 = account.PasskeyRegistrationOptions;\naccount.registerPasskey#55b41fd6 credential:InputPasskeyCredential = Passkey;\naccount.getPasskeys#ea1f0c52 = account.Passkeys;\naccount.deletePasskey#f5b5563f id:string = Bool;\nusers.getUsers#d91a548 id:Vector<InputUser> = Vector<User>;\nusers.getFullUser#b60f5918 id:InputUser = users.UserFull;\ncontacts.getContacts#5dd69e12 hash:long = contacts.Contacts;\ncontacts.importContacts#2c800be5 contacts:Vector<InputContact> = contacts.ImportedContacts;\ncontacts.deleteContacts#96a0e00 id:Vector<InputUser> = Updates;\ncontacts.block#2e2e8734 flags:# my_stories_from:flags.0?true id:InputPeer = Bool;\ncontacts.unblock#b550d328 flags:# my_stories_from:flags.0?true id:InputPeer = Bool;\ncontacts.getBlocked#9a868f80 flags:# my_stories_from:flags.0?true offset:int limit:int = contacts.Blocked;\ncontacts.search#11f812d8 q:string limit:int = contacts.Found;\ncontacts.resolveUsername#725afbbc flags:# username:string referer:flags.0?string = contacts.ResolvedPeer;\ncontacts.getTopPeers#973478b6 flags:# correspondents:flags.0?true bots_pm:flags.1?true bots_inline:flags.2?true phone_calls:flags.3?true forward_users:flags.4?true forward_chats:flags.5?true groups:flags.10?true channels:flags.15?true bots_app:flags.16?true offset:int limit:int hash:long = contacts.TopPeers;\ncontacts.addContact#d9ba2e54 flags:# add_phone_privacy_exception:flags.0?true id:InputUser first_name:string last_name:string phone:string note:flags.1?TextWithEntities = Updates;\ncontacts.resolvePhone#8af94344 phone:string = contacts.ResolvedPeer;\ncontacts.editCloseFriends#ba6705f0 id:Vector<long> = Bool;\ncontacts.getSponsoredPeers#b6c8c393 q:string = contacts.SponsoredPeers;\ncontacts.updateContactNote#139f63fb id:InputUser note:TextWithEntities = Bool;\nmessages.getMessages#63c66506 id:Vector<InputMessage> = messages.Messages;\nmessages.getDialogs#a0f4cb4f flags:# exclude_pinned:flags.0?true folder_id:flags.1?int offset_date:int offset_id:int offset_peer:InputPeer limit:int hash:long = messages.Dialogs;\nmessages.getHistory#4423e6c5 peer:InputPeer offset_id:int offset_date:int add_offset:int limit:int max_id:int min_id:int hash:long = messages.Messages;\nmessages.search#29ee847a flags:# peer:InputPeer q:string from_id:flags.0?InputPeer saved_peer_id:flags.2?InputPeer saved_reaction:flags.3?Vector<Reaction> top_msg_id:flags.1?int filter:MessagesFilter min_date:int max_date:int offset_id:int add_offset:int limit:int max_id:int min_id:int hash:long = messages.Messages;\nmessages.readHistory#e306d3a peer:InputPeer max_id:int = messages.AffectedMessages;\nmessages.deleteHistory#b08f922a flags:# just_clear:flags.0?true revoke:flags.1?true peer:InputPeer max_id:int min_date:flags.2?int max_date:flags.3?int = messages.AffectedHistory;\nmessages.deleteMessages#e58e95d2 flags:# revoke:flags.0?true id:Vector<int> = messages.AffectedMessages;\nmessages.receivedMessages#5a954c0 max_id:int = Vector<ReceivedNotifyMessage>;\nmessages.setTyping#58943ee2 flags:# peer:InputPeer top_msg_id:flags.0?int action:SendMessageAction = Bool;\nmessages.sendMessage#545cd15a flags:# no_webpage:flags.1?true silent:flags.5?true background:flags.6?true clear_draft:flags.7?true noforwards:flags.14?true update_stickersets_order:flags.15?true invert_media:flags.16?true allow_paid_floodskip:flags.19?true peer:InputPeer reply_to:flags.0?InputReplyTo message:string random_id:long reply_markup:flags.2?ReplyMarkup entities:flags.3?Vector<MessageEntity> schedule_date:flags.10?int schedule_repeat_period:flags.24?int send_as:flags.13?InputPeer quick_reply_shortcut:flags.17?InputQuickReplyShortcut effect:flags.18?long allow_paid_stars:flags.21?long suggested_post:flags.22?SuggestedPost = Updates;\nmessages.sendMedia#330e77f flags:# silent:flags.5?true background:flags.6?true clear_draft:flags.7?true noforwards:flags.14?true update_stickersets_order:flags.15?true invert_media:flags.16?true allow_paid_floodskip:flags.19?true peer:InputPeer reply_to:flags.0?InputReplyTo media:InputMedia message:string random_id:long reply_markup:flags.2?ReplyMarkup entities:flags.3?Vector<MessageEntity> schedule_date:flags.10?int schedule_repeat_period:flags.24?int send_as:flags.13?InputPeer quick_reply_shortcut:flags.17?InputQuickReplyShortcut effect:flags.18?long allow_paid_stars:flags.21?long suggested_post:flags.22?SuggestedPost = Updates;\nmessages.forwardMessages#13704a7c flags:# silent:flags.5?true background:flags.6?true with_my_score:flags.8?true drop_author:flags.11?true drop_media_captions:flags.12?true noforwards:flags.14?true allow_paid_floodskip:flags.19?true from_peer:InputPeer id:Vector<int> random_id:Vector<long> to_peer:InputPeer top_msg_id:flags.9?int reply_to:flags.22?InputReplyTo schedule_date:flags.10?int schedule_repeat_period:flags.24?int send_as:flags.13?InputPeer quick_reply_shortcut:flags.17?InputQuickReplyShortcut effect:flags.18?long video_timestamp:flags.20?int allow_paid_stars:flags.21?long suggested_post:flags.23?SuggestedPost = Updates;\nmessages.reportSpam#cf1592db peer:InputPeer = Bool;\nmessages.getPeerSettings#efd9a6a2 peer:InputPeer = messages.PeerSettings;\nmessages.report#fc78af9b peer:InputPeer id:Vector<int> option:bytes message:string = ReportResult;\nmessages.getChats#49e9528f id:Vector<long> = messages.Chats;\nmessages.getFullChat#aeb00b34 chat_id:long = messages.ChatFull;\nmessages.editChatTitle#73783ffd chat_id:long title:string = Updates;\nmessages.editChatPhoto#35ddd674 chat_id:long photo:InputChatPhoto = Updates;\nmessages.addChatUser#cbc6d107 chat_id:long user_id:InputUser fwd_limit:int = messages.InvitedUsers;\nmessages.deleteChatUser#a2185cab flags:# revoke_history:flags.0?true chat_id:long user_id:InputUser = Updates;\nmessages.createChat#92ceddd4 flags:# users:Vector<InputUser> title:string ttl_period:flags.0?int = messages.InvitedUsers;\nmessages.getDhConfig#26cf8950 version:int random_length:int = messages.DhConfig;\nmessages.readMessageContents#36a73f77 id:Vector<int> = messages.AffectedMessages;\nmessages.getStickers#d5a5d3a1 emoticon:string hash:long = messages.Stickers;\nmessages.getAllStickers#b8a0a1a8 hash:long = messages.AllStickers;\nmessages.getWebPagePreview#570d6f6f flags:# message:string entities:flags.3?Vector<MessageEntity> = messages.WebPagePreview;\nmessages.exportChatInvite#a455de90 flags:# legacy_revoke_permanent:flags.2?true request_needed:flags.3?true peer:InputPeer expire_date:flags.0?int usage_limit:flags.1?int title:flags.4?string subscription_pricing:flags.5?StarsSubscriptionPricing = ExportedChatInvite;\nmessages.checkChatInvite#3eadb1bb hash:string = ChatInvite;\nmessages.importChatInvite#6c50051c hash:string = Updates;\nmessages.getStickerSet#c8a0ec74 stickerset:InputStickerSet hash:int = messages.StickerSet;\nmessages.installStickerSet#c78fe460 stickerset:InputStickerSet archived:Bool = messages.StickerSetInstallResult;\nmessages.uninstallStickerSet#f96e55de stickerset:InputStickerSet = Bool;\nmessages.startBot#e6df7378 bot:InputUser peer:InputPeer random_id:long start_param:string = Updates;\nmessages.getMessagesViews#5784d3e1 peer:InputPeer id:Vector<int> increment:Bool = messages.MessageViews;\nmessages.migrateChat#a2875319 chat_id:long = Updates;\nmessages.searchGlobal#4bc6589a flags:# broadcasts_only:flags.1?true groups_only:flags.2?true users_only:flags.3?true folder_id:flags.0?int q:string filter:MessagesFilter min_date:int max_date:int offset_rate:int offset_peer:InputPeer offset_id:int limit:int = messages.Messages;\nmessages.getDocumentByHash#b1f2061f sha256:bytes size:long mime_type:string = Document;\nmessages.getSavedGifs#5cf09635 hash:long = messages.SavedGifs;\nmessages.saveGif#327a30cb id:InputDocument unsave:Bool = Bool;\nmessages.getInlineBotResults#514e999d flags:# bot:InputUser peer:InputPeer geo_point:flags.0?InputGeoPoint query:string offset:string = messages.BotResults;\nmessages.sendInlineBotResult#c0cf7646 flags:# silent:flags.5?true background:flags.6?true clear_draft:flags.7?true hide_via:flags.11?true peer:InputPeer reply_to:flags.0?InputReplyTo random_id:long query_id:long id:string schedule_date:flags.10?int send_as:flags.13?InputPeer quick_reply_shortcut:flags.17?InputQuickReplyShortcut allow_paid_stars:flags.21?long = Updates;\nmessages.editMessage#51e842e1 flags:# no_webpage:flags.1?true invert_media:flags.16?true peer:InputPeer id:int message:flags.11?string media:flags.14?InputMedia reply_markup:flags.2?ReplyMarkup entities:flags.3?Vector<MessageEntity> schedule_date:flags.15?int schedule_repeat_period:flags.18?int quick_reply_shortcut_id:flags.17?int = Updates;\nmessages.getBotCallbackAnswer#9342ca07 flags:# game:flags.1?true peer:InputPeer msg_id:int data:flags.0?bytes password:flags.2?InputCheckPasswordSRP = messages.BotCallbackAnswer;\nmessages.getPeerDialogs#e470bcfd peers:Vector<InputDialogPeer> = messages.PeerDialogs;\nmessages.saveDraft#54ae308e flags:# no_webpage:flags.1?true invert_media:flags.6?true reply_to:flags.4?InputReplyTo peer:InputPeer message:string entities:flags.3?Vector<MessageEntity> media:flags.5?InputMedia effect:flags.7?long suggested_post:flags.8?SuggestedPost = Bool;\nmessages.getFeaturedStickers#64780b14 hash:long = messages.FeaturedStickers;\nmessages.readFeaturedStickers#5b118126 id:Vector<long> = Bool;\nmessages.getRecentStickers#9da9403b flags:# attached:flags.0?true hash:long = messages.RecentStickers;\nmessages.saveRecentSticker#392718f8 flags:# attached:flags.0?true id:InputDocument unsave:Bool = Bool;\nmessages.clearRecentStickers#8999602d flags:# attached:flags.0?true = Bool;\nmessages.getCommonChats#e40ca104 user_id:InputUser max_id:long limit:int = messages.Chats;\nmessages.getWebPage#8d9692a3 url:string hash:int = messages.WebPage;\nmessages.toggleDialogPin#a731e257 flags:# pinned:flags.0?true peer:InputDialogPeer = Bool;\nmessages.getPinnedDialogs#d6b94df2 folder_id:int = messages.PeerDialogs;\nmessages.uploadMedia#14967978 flags:# business_connection_id:flags.0?string peer:InputPeer media:InputMedia = MessageMedia;\nmessages.getFavedStickers#4f1aaa9 hash:long = messages.FavedStickers;\nmessages.faveSticker#b9ffc55b id:InputDocument unfave:Bool = Bool;\nmessages.getUnreadMentions#f107e790 flags:# peer:InputPeer top_msg_id:flags.0?int offset_id:int add_offset:int limit:int max_id:int min_id:int = messages.Messages;\nmessages.readMentions#36e5bf4d flags:# peer:InputPeer top_msg_id:flags.0?int = messages.AffectedHistory;\nmessages.sendMultiMedia#1bf89d74 flags:# silent:flags.5?true background:flags.6?true clear_draft:flags.7?true noforwards:flags.14?true update_stickersets_order:flags.15?true invert_media:flags.16?true allow_paid_floodskip:flags.19?true peer:InputPeer reply_to:flags.0?InputReplyTo multi_media:Vector<InputSingleMedia> schedule_date:flags.10?int send_as:flags.13?InputPeer quick_reply_shortcut:flags.17?InputQuickReplyShortcut effect:flags.18?long allow_paid_stars:flags.21?long = Updates;\nmessages.searchStickerSets#35705b8a flags:# exclude_featured:flags.0?true q:string hash:long = messages.FoundStickerSets;\nmessages.markDialogUnread#8c5006f8 flags:# unread:flags.0?true parent_peer:flags.1?InputPeer peer:InputDialogPeer = Bool;\nmessages.updatePinnedMessage#d2aaf7ec flags:# silent:flags.0?true unpin:flags.1?true pm_oneside:flags.2?true peer:InputPeer id:int = Updates;\nmessages.sendVote#10ea6184 peer:InputPeer msg_id:int options:Vector<bytes> = Updates;\nmessages.getOnlines#6e2be050 peer:InputPeer = ChatOnlines;\nmessages.editChatAbout#def60797 peer:InputPeer about:string = Bool;\nmessages.editChatDefaultBannedRights#a5866b41 peer:InputPeer banned_rights:ChatBannedRights = Updates;\nmessages.getEmojiKeywordsDifference#1508b6af lang_code:string from_version:int = EmojiKeywordsDifference;\nmessages.requestUrlAuth#198fb446 flags:# peer:flags.1?InputPeer msg_id:flags.1?int button_id:flags.1?int url:flags.2?string = UrlAuthResult;\nmessages.acceptUrlAuth#b12c7125 flags:# write_allowed:flags.0?true share_phone_number:flags.3?true peer:flags.1?InputPeer msg_id:flags.1?int button_id:flags.1?int url:flags.2?string = UrlAuthResult;\nmessages.hidePeerSettingsBar#4facb138 peer:InputPeer = Bool;\nmessages.getScheduledHistory#f516760b peer:InputPeer hash:long = messages.Messages;\nmessages.sendScheduledMessages#bd38850a peer:InputPeer id:Vector<int> = Updates;\nmessages.deleteScheduledMessages#59ae2b16 peer:InputPeer id:Vector<int> = Updates;\nmessages.getPollVotes#b86e380e flags:# peer:InputPeer id:int option:flags.0?bytes offset:flags.1?string limit:int = messages.VotesList;\nmessages.getDialogFilters#efd48c89 = messages.DialogFilters;\nmessages.getSuggestedDialogFilters#a29cd42c = Vector<DialogFilterSuggested>;\nmessages.updateDialogFilter#1ad4a04a flags:# id:int filter:flags.0?DialogFilter = Bool;\nmessages.updateDialogFiltersOrder#c563c1e4 order:Vector<int> = Bool;\nmessages.getReplies#22ddd30c peer:InputPeer msg_id:int offset_id:int offset_date:int add_offset:int limit:int max_id:int min_id:int hash:long = messages.Messages;\nmessages.getDiscussionMessage#446972fd peer:InputPeer msg_id:int = messages.DiscussionMessage;\nmessages.readDiscussion#f731a9f4 peer:InputPeer msg_id:int read_max_id:int = Bool;\nmessages.unpinAllMessages#62dd747 flags:# peer:InputPeer top_msg_id:flags.0?int saved_peer_id:flags.1?InputPeer = messages.AffectedHistory;\nmessages.deleteChat#5bd0ee50 chat_id:long = Bool;\nmessages.getExportedChatInvites#a2b5a3f6 flags:# revoked:flags.3?true peer:InputPeer admin_id:InputUser offset_date:flags.2?int offset_link:flags.2?string limit:int = messages.ExportedChatInvites;\nmessages.editExportedChatInvite#bdca2f75 flags:# revoked:flags.2?true peer:InputPeer link:string expire_date:flags.0?int usage_limit:flags.1?int request_needed:flags.3?Bool title:flags.4?string = messages.ExportedChatInvite;\nmessages.deleteRevokedExportedChatInvites#56987bd5 peer:InputPeer admin_id:InputUser = Bool;\nmessages.deleteExportedChatInvite#d464a42b peer:InputPeer link:string = Bool;\nmessages.getChatInviteImporters#df04dd4e flags:# requested:flags.0?true subscription_expired:flags.3?true peer:InputPeer link:flags.1?string q:flags.2?string offset_date:int offset_user:InputUser limit:int = messages.ChatInviteImporters;\nmessages.getMessageReadParticipants#31c1c44f peer:InputPeer msg_id:int = Vector<ReadParticipantDate>;\nmessages.hideChatJoinRequest#7fe7e815 flags:# approved:flags.0?true peer:InputPeer user_id:InputUser = Updates;\nmessages.hideAllChatJoinRequests#e085f4ea flags:# approved:flags.0?true peer:InputPeer link:flags.1?string = Updates;\nmessages.toggleNoForwards#b11eafa2 peer:InputPeer enabled:Bool = Updates;\nmessages.saveDefaultSendAs#ccfddf96 peer:InputPeer send_as:InputPeer = Bool;\nmessages.sendReaction#d30d78d4 flags:# big:flags.1?true add_to_recent:flags.2?true peer:InputPeer msg_id:int reaction:flags.0?Vector<Reaction> = Updates;\nmessages.getMessagesReactions#8bba90e6 peer:InputPeer id:Vector<int> = Updates;\nmessages.getMessageReactionsList#461b3f48 flags:# peer:InputPeer id:int reaction:flags.0?Reaction offset:flags.1?string limit:int = messages.MessageReactionsList;\nmessages.setChatAvailableReactions#864b2581 flags:# peer:InputPeer available_reactions:ChatReactions reactions_limit:flags.0?int paid_enabled:flags.1?Bool = Updates;\nmessages.getAvailableReactions#18dea0ac hash:int = messages.AvailableReactions;\nmessages.setDefaultReaction#4f47a016 reaction:Reaction = Bool;\nmessages.translateText#63183030 flags:# peer:flags.0?InputPeer id:flags.0?Vector<int> text:flags.1?Vector<TextWithEntities> to_lang:string = messages.TranslatedText;\nmessages.getUnreadReactions#bd7f90ac flags:# peer:InputPeer top_msg_id:flags.0?int saved_peer_id:flags.1?InputPeer offset_id:int add_offset:int limit:int max_id:int min_id:int = messages.Messages;\nmessages.readReactions#9ec44f93 flags:# peer:InputPeer top_msg_id:flags.0?int saved_peer_id:flags.1?InputPeer = messages.AffectedHistory;\nmessages.getAttachMenuBots#16fcc2cb hash:long = AttachMenuBots;\nmessages.getAttachMenuBot#77216192 bot:InputUser = AttachMenuBotsBot;\nmessages.toggleBotInAttachMenu#69f59d69 flags:# write_allowed:flags.0?true bot:InputUser enabled:Bool = Bool;\nmessages.requestWebView#269dc2c1 flags:# from_bot_menu:flags.4?true silent:flags.5?true compact:flags.7?true fullscreen:flags.8?true peer:InputPeer bot:InputUser url:flags.1?string start_param:flags.3?string theme_params:flags.2?DataJSON platform:string reply_to:flags.0?InputReplyTo send_as:flags.13?InputPeer = WebViewResult;\nmessages.prolongWebView#b0d81a83 flags:# silent:flags.5?true peer:InputPeer bot:InputUser query_id:long reply_to:flags.0?InputReplyTo send_as:flags.13?InputPeer = Bool;\nmessages.requestSimpleWebView#413a3e73 flags:# from_switch_webview:flags.1?true from_side_menu:flags.2?true compact:flags.7?true fullscreen:flags.8?true bot:InputUser url:flags.3?string start_param:flags.4?string theme_params:flags.0?DataJSON platform:string = WebViewResult;\nmessages.sendWebViewResultMessage#a4314f5 bot_query_id:string result:InputBotInlineResult = WebViewMessageSent;\nmessages.sendWebViewData#dc0242c8 bot:InputUser random_id:long button_text:string data:string = Updates;\nmessages.transcribeAudio#269e9a49 peer:InputPeer msg_id:int = messages.TranscribedAudio;\nmessages.getCustomEmojiDocuments#d9ab0f54 document_id:Vector<long> = Vector<Document>;\nmessages.getEmojiStickers#fbfca18f hash:long = messages.AllStickers;\nmessages.getFeaturedEmojiStickers#ecf6736 hash:long = messages.FeaturedStickers;\nmessages.getTopReactions#bb8125ba limit:int hash:long = messages.Reactions;\nmessages.getRecentReactions#39461db2 limit:int hash:long = messages.Reactions;\nmessages.clearRecentReactions#9dfeefb4 = Bool;\nmessages.getExtendedMedia#84f80814 peer:InputPeer id:Vector<int> = Updates;\nmessages.togglePeerTranslations#e47cb579 flags:# disabled:flags.0?true peer:InputPeer = Bool;\nmessages.getBotApp#34fdc5c3 app:InputBotApp hash:long = messages.BotApp;\nmessages.requestAppWebView#53618bce flags:# write_allowed:flags.0?true compact:flags.7?true fullscreen:flags.8?true peer:InputPeer app:InputBotApp start_param:flags.1?string theme_params:flags.2?DataJSON platform:string = WebViewResult;\nmessages.getSavedDialogs#1e91fc99 flags:# exclude_pinned:flags.0?true parent_peer:flags.1?InputPeer offset_date:int offset_id:int offset_peer:InputPeer limit:int hash:long = messages.SavedDialogs;\nmessages.getSavedHistory#998ab009 flags:# parent_peer:flags.0?InputPeer peer:InputPeer offset_id:int offset_date:int add_offset:int limit:int max_id:int min_id:int hash:long = messages.Messages;\nmessages.deleteSavedHistory#4dc5085f flags:# parent_peer:flags.0?InputPeer peer:InputPeer max_id:int min_date:flags.2?int max_date:flags.3?int = messages.AffectedHistory;\nmessages.getPinnedSavedDialogs#d63d94e0 = messages.SavedDialogs;\nmessages.toggleSavedDialogPin#ac81bbde flags:# pinned:flags.0?true peer:InputDialogPeer = Bool;\nmessages.getSavedReactionTags#3637e05b flags:# peer:flags.0?InputPeer hash:long = messages.SavedReactionTags;\nmessages.updateSavedReactionTag#60297dec flags:# reaction:Reaction title:flags.0?string = Bool;\nmessages.getDefaultTagReactions#bdf93428 hash:long = messages.Reactions;\nmessages.getOutboxReadDate#8c4bfe5d peer:InputPeer msg_id:int = OutboxReadDate;\nmessages.getQuickReplies#d483f2a8 hash:long = messages.QuickReplies;\nmessages.getQuickReplyMessages#94a495c3 flags:# shortcut_id:int id:flags.0?Vector<int> hash:long = messages.Messages;\nmessages.sendQuickReplyMessages#6c750de1 peer:InputPeer shortcut_id:int id:Vector<int> random_id:Vector<long> = Updates;\nmessages.toggleDialogFilterTags#fd2dda49 enabled:Bool = Bool;\nmessages.getAvailableEffects#dea20a39 hash:int = messages.AvailableEffects;\nmessages.getFactCheck#b9cdc5ee peer:InputPeer msg_id:Vector<int> = Vector<FactCheck>;\nmessages.requestMainWebView#c9e01e7b flags:# compact:flags.7?true fullscreen:flags.8?true peer:InputPeer bot:InputUser start_param:flags.1?string theme_params:flags.0?DataJSON platform:string = WebViewResult;\nmessages.sendPaidReaction#58bbcb50 flags:# peer:InputPeer msg_id:int count:int random_id:long private:flags.0?PaidReactionPrivacy = Updates;\nmessages.getPaidReactionPrivacy#472455aa = Updates;\nmessages.viewSponsoredMessage#269e3643 random_id:bytes = Bool;\nmessages.clickSponsoredMessage#8235057e flags:# media:flags.0?true fullscreen:flags.1?true random_id:bytes = Bool;\nmessages.reportSponsoredMessage#12cbf0c4 random_id:bytes option:bytes = channels.SponsoredMessageReportResult;\nmessages.getSponsoredMessages#3d6ce850 flags:# peer:InputPeer msg_id:flags.0?int = messages.SponsoredMessages;\nmessages.getPreparedInlineMessage#857ebdb8 bot:InputUser id:string = messages.PreparedInlineMessage;\nmessages.reportMessagesDelivery#5a6d7395 flags:# push:flags.0?true peer:InputPeer id:Vector<int> = Bool;\nmessages.toggleTodoCompleted#d3e03124 peer:InputPeer msg_id:int completed:Vector<int> incompleted:Vector<int> = Updates;\nmessages.appendTodoList#21a61057 peer:InputPeer msg_id:int list:Vector<TodoItem> = Updates;\nmessages.toggleSuggestedPostApproval#8107455c flags:# reject:flags.1?true peer:InputPeer msg_id:int schedule_date:flags.0?int reject_comment:flags.2?string = Updates;\nmessages.getForumTopics#3ba47bff flags:# peer:InputPeer q:flags.0?string offset_date:int offset_id:int offset_topic:int limit:int = messages.ForumTopics;\nmessages.getForumTopicsByID#af0a4a08 peer:InputPeer topics:Vector<int> = messages.ForumTopics;\nmessages.editForumTopic#cecc1134 flags:# peer:InputPeer topic_id:int title:flags.0?string icon_emoji_id:flags.1?long closed:flags.2?Bool hidden:flags.3?Bool = Updates;\nmessages.updatePinnedForumTopic#175df251 peer:InputPeer topic_id:int pinned:Bool = Updates;\nmessages.createForumTopic#2f98c3d5 flags:# title_missing:flags.4?true peer:InputPeer title:string icon_color:flags.0?int icon_emoji_id:flags.3?long random_id:long send_as:flags.2?InputPeer = Updates;\nmessages.deleteTopicHistory#d2816f10 peer:InputPeer top_msg_id:int = messages.AffectedHistory;\nmessages.summarizeText#9d4104e2 flags:# peer:InputPeer id:int to_lang:flags.0?string = TextWithEntities;\nupdates.getState#edd4882a = updates.State;\nupdates.getDifference#19c2f763 flags:# pts:int pts_limit:flags.1?int pts_total_limit:flags.0?int date:int qts:int qts_limit:flags.2?int = updates.Difference;\nupdates.getChannelDifference#3173d78 flags:# force:flags.0?true channel:InputChannel filter:ChannelMessagesFilter pts:int limit:int = updates.ChannelDifference;\nphotos.updateProfilePhoto#9e82039 flags:# fallback:flags.0?true bot:flags.1?InputUser id:InputPhoto = photos.Photo;\nphotos.uploadProfilePhoto#388a3b5 flags:# fallback:flags.3?true bot:flags.5?InputUser file:flags.0?InputFile video:flags.1?InputFile video_start_ts:flags.2?double video_emoji_markup:flags.4?VideoSize = photos.Photo;\nphotos.deletePhotos#87cf7f2f id:Vector<InputPhoto> = Vector<long>;\nphotos.getUserPhotos#91cd32a8 user_id:InputUser offset:int max_id:long limit:int = photos.Photos;\nphotos.uploadContactProfilePhoto#e14c4a71 flags:# suggest:flags.3?true save:flags.4?true user_id:InputUser file:flags.0?InputFile video:flags.1?InputFile video_start_ts:flags.2?double video_emoji_markup:flags.5?VideoSize = photos.Photo;\nupload.saveFilePart#b304a621 file_id:long file_part:int bytes:bytes = Bool;\nupload.getFile#be5335be flags:# precise:flags.0?true cdn_supported:flags.1?true location:InputFileLocation offset:long limit:int = upload.File;\nupload.saveBigFilePart#de7b673d file_id:long file_part:int file_total_parts:int bytes:bytes = Bool;\nupload.getWebFile#24e6818d location:InputWebFileLocation offset:int limit:int = upload.WebFile;\nhelp.getConfig#c4f9186b = Config;\nhelp.getNearestDc#1fb33026 = NearestDc;\nhelp.getSupport#9cdf08cd = help.Support;\nhelp.acceptTermsOfService#ee72f79a id:DataJSON = Bool;\nhelp.getAppConfig#61e3f854 hash:int = help.AppConfig;\nhelp.getPromoData#c0977421 = help.PromoData;\nhelp.dismissSuggestion#f50dbaa1 peer:InputPeer suggestion:string = Bool;\nhelp.getCountriesList#735787a8 lang_code:string hash:int = help.CountriesList;\nhelp.getPremiumPromo#b81b93d4 = help.PremiumPromo;\nhelp.getPeerColors#da80f42f hash:int = help.PeerColors;\nhelp.getPeerProfileColors#abcfa9fd hash:int = help.PeerColors;\nhelp.getTimezonesList#49b30240 hash:int = help.TimezonesList;\nchannels.readHistory#cc104937 channel:InputChannel max_id:int = Bool;\nchannels.deleteMessages#84c1fd4e channel:InputChannel id:Vector<int> = messages.AffectedMessages;\nchannels.reportSpam#f44a8315 channel:InputChannel participant:InputPeer id:Vector<int> = Bool;\nchannels.getMessages#ad8c9a23 channel:InputChannel id:Vector<InputMessage> = messages.Messages;\nchannels.getParticipants#77ced9d0 channel:InputChannel filter:ChannelParticipantsFilter offset:int limit:int hash:long = channels.ChannelParticipants;\nchannels.getParticipant#a0ab6cc6 channel:InputChannel participant:InputPeer = channels.ChannelParticipant;\nchannels.getChannels#a7f6bbb id:Vector<InputChannel> = messages.Chats;\nchannels.getFullChannel#8736a09 channel:InputChannel = messages.ChatFull;\nchannels.createChannel#91006707 flags:# broadcast:flags.0?true megagroup:flags.1?true for_import:flags.3?true forum:flags.5?true title:string about:string geo_point:flags.2?InputGeoPoint address:flags.2?string ttl_period:flags.4?int = Updates;\nchannels.editAdmin#d33c8902 channel:InputChannel user_id:InputUser admin_rights:ChatAdminRights rank:string = Updates;\nchannels.editTitle#566decd0 channel:InputChannel title:string = Updates;\nchannels.editPhoto#f12e57c9 channel:InputChannel photo:InputChatPhoto = Updates;\nchannels.checkUsername#10e6bd2c channel:InputChannel username:string = Bool;\nchannels.updateUsername#3514b3de channel:InputChannel username:string = Bool;\nchannels.joinChannel#24b524c5 channel:InputChannel = Updates;\nchannels.leaveChannel#f836aa95 channel:InputChannel = Updates;\nchannels.inviteToChannel#c9e33d54 channel:InputChannel users:Vector<InputUser> = messages.InvitedUsers;\nchannels.deleteChannel#c0111fe3 channel:InputChannel = Updates;\nchannels.exportMessageLink#e63fadeb flags:# grouped:flags.0?true thread:flags.1?true channel:InputChannel id:int = ExportedMessageLink;\nchannels.toggleSignatures#418d549c flags:# signatures_enabled:flags.0?true profiles_enabled:flags.1?true channel:InputChannel = Updates;\nchannels.editBanned#96e6cd81 channel:InputChannel participant:InputPeer banned_rights:ChatBannedRights = Updates;\nchannels.readMessageContents#eab5dc38 channel:InputChannel id:Vector<int> = Bool;\nchannels.togglePreHistoryHidden#eabbb94c channel:InputChannel enabled:Bool = Updates;\nchannels.getGroupsForDiscussion#f5dad378 = messages.Chats;\nchannels.setDiscussionGroup#40582bb2 broadcast:InputChannel group:InputChannel = Bool;\nchannels.editCreator#8f38cd1f channel:InputChannel user_id:InputUser password:InputCheckPasswordSRP = Updates;\nchannels.getSendAs#e785a43f flags:# for_paid_reactions:flags.0?true for_live_stories:flags.1?true peer:InputPeer = channels.SendAsPeers;\nchannels.deleteParticipantHistory#367544db channel:InputChannel participant:InputPeer = messages.AffectedHistory;\nchannels.toggleJoinToSend#e4cb9580 channel:InputChannel enabled:Bool = Updates;\nchannels.toggleJoinRequest#4c2985b6 channel:InputChannel enabled:Bool = Updates;\nchannels.reorderUsernames#b45ced1d channel:InputChannel order:Vector<string> = Bool;\nchannels.toggleUsername#50f24105 channel:InputChannel username:string active:Bool = Bool;\nchannels.deactivateAllUsernames#a245dd3 channel:InputChannel = Bool;\nchannels.toggleForum#3ff75734 channel:InputChannel enabled:Bool tabs:Bool = Updates;\nchannels.toggleParticipantsHidden#6a6e7854 channel:InputChannel enabled:Bool = Updates;\nchannels.toggleViewForumAsMessages#9738bb15 channel:InputChannel enabled:Bool = Updates;\nchannels.getChannelRecommendations#25a71742 flags:# channel:flags.0?InputChannel = messages.Chats;\nchannels.searchPosts#f2c4f24d flags:# hashtag:flags.0?string query:flags.1?string offset_rate:int offset_peer:InputPeer offset_id:int limit:int allow_paid_stars:flags.2?long = messages.Messages;\nchannels.updatePaidMessagesPrice#4b12327b flags:# broadcast_messages_allowed:flags.0?true channel:InputChannel send_paid_messages_stars:long = Updates;\nchannels.toggleAutotranslation#167fc0a1 channel:InputChannel enabled:Bool = Updates;\nchannels.checkSearchPostsFlood#22567115 flags:# query:flags.0?string = SearchPostsFlood;\nchannels.setMainProfileTab#3583fcb1 channel:InputChannel tab:ProfileTab = Bool;\nchannels.getFutureCreatorAfterLeave#a00918af channel:InputChannel = User;\nbots.setBotInfo#10cf3123 flags:# bot:flags.2?InputUser lang_code:string name:flags.3?string about:flags.0?string description:flags.1?string = Bool;\nbots.canSendMessage#1359f4e6 bot:InputUser = Bool;\nbots.allowSendMessage#f132e3ef bot:InputUser = Updates;\nbots.invokeWebViewCustomMethod#87fc5e7 bot:InputUser custom_method:string params:DataJSON = DataJSON;\nbots.getPopularAppBots#c2510192 offset:string limit:int = bots.PopularAppBots;\nbots.getPreviewMedias#a2a5594d bot:InputUser = Vector<BotPreviewMedia>;\nbots.toggleUserEmojiStatusPermission#6de6392 bot:InputUser enabled:Bool = Bool;\nbots.checkDownloadFileParams#50077589 bot:InputUser file_name:string url:string = Bool;\nbots.getBotRecommendations#a1b70815 bot:InputUser = users.Users;\npayments.getPaymentForm#37148dbb flags:# invoice:InputInvoice theme_params:flags.0?DataJSON = payments.PaymentForm;\npayments.getPaymentReceipt#2478d1cc peer:InputPeer msg_id:int = payments.PaymentReceipt;\npayments.validateRequestedInfo#b6c8f12b flags:# save:flags.0?true invoice:InputInvoice info:PaymentRequestedInfo = payments.ValidatedRequestedInfo;\npayments.sendPaymentForm#2d03522f flags:# form_id:long invoice:InputInvoice requested_info_id:flags.0?string shipping_option_id:flags.1?string credentials:InputPaymentCredentials tip_amount:flags.2?long = payments.PaymentResult;\npayments.getSavedInfo#227d824b = payments.SavedInfo;\npayments.getPremiumGiftCodeOptions#2757ba54 flags:# boost_peer:flags.0?InputPeer = Vector<PremiumGiftCodeOption>;\npayments.checkGiftCode#8e51b4c1 slug:string = payments.CheckedGiftCode;\npayments.applyGiftCode#f6e26854 slug:string = Updates;\npayments.getGiveawayInfo#f4239425 peer:InputPeer msg_id:int = payments.GiveawayInfo;\npayments.launchPrepaidGiveaway#5ff58f20 peer:InputPeer giveaway_id:long purpose:InputStorePaymentPurpose = Updates;\npayments.getStarsTopupOptions#c00ec7d3 = Vector<StarsTopupOption>;\npayments.getStarsStatus#4ea9b3bf flags:# ton:flags.0?true peer:InputPeer = payments.StarsStatus;\npayments.getStarsTransactions#69da4557 flags:# inbound:flags.0?true outbound:flags.1?true ascending:flags.2?true ton:flags.4?true subscription_id:flags.3?string peer:InputPeer offset:string limit:int = payments.StarsStatus;\npayments.sendStarsForm#7998c914 form_id:long invoice:InputInvoice = payments.PaymentResult;\npayments.refundStarsCharge#25ae8f4a user_id:InputUser charge_id:string = Updates;\npayments.getStarsRevenueStats#d91ffad6 flags:# dark:flags.0?true ton:flags.1?true peer:InputPeer = payments.StarsRevenueStats;\npayments.getStarsTransactionsByID#2dca16b8 flags:# ton:flags.0?true peer:InputPeer id:Vector<InputStarsTransaction> = payments.StarsStatus;\npayments.getStarsGiftOptions#d3c96bc8 flags:# user_id:flags.0?InputUser = Vector<StarsGiftOption>;\npayments.getStarsSubscriptions#32512c5 flags:# missing_balance:flags.0?true peer:InputPeer offset:string = payments.StarsStatus;\npayments.changeStarsSubscription#c7770878 flags:# peer:InputPeer subscription_id:string canceled:flags.0?Bool = Bool;\npayments.fulfillStarsSubscription#cc5bebb3 peer:InputPeer subscription_id:string = Bool;\npayments.getStarsGiveawayOptions#bd1efd3e = Vector<StarsGiveawayOption>;\npayments.getStarGifts#c4563590 hash:int = payments.StarGifts;\npayments.saveStarGift#2a2a697c flags:# unsave:flags.0?true stargift:InputSavedStarGift = Bool;\npayments.convertStarGift#74bf076b stargift:InputSavedStarGift = Bool;\npayments.getStarGiftUpgradePreview#9c9abcb1 gift_id:long = payments.StarGiftUpgradePreview;\npayments.upgradeStarGift#aed6e4f5 flags:# keep_original_details:flags.0?true stargift:InputSavedStarGift = Updates;\npayments.transferStarGift#7f18176a stargift:InputSavedStarGift to_id:InputPeer = Updates;\npayments.getUniqueStarGift#a1974d72 slug:string = payments.UniqueStarGift;\npayments.getSavedStarGifts#a319e569 flags:# exclude_unsaved:flags.0?true exclude_saved:flags.1?true exclude_unlimited:flags.2?true exclude_unique:flags.4?true sort_by_value:flags.5?true exclude_upgradable:flags.7?true exclude_unupgradable:flags.8?true peer_color_available:flags.9?true exclude_hosted:flags.10?true peer:InputPeer collection_id:flags.6?int offset:string limit:int = payments.SavedStarGifts;\npayments.getStarGiftWithdrawalUrl#d06e93a8 stargift:InputSavedStarGift password:InputCheckPasswordSRP = payments.StarGiftWithdrawalUrl;\npayments.toggleStarGiftsPinnedToTop#1513e7b0 peer:InputPeer stargift:Vector<InputSavedStarGift> = Bool;\npayments.getResaleStarGifts#7a5fa236 flags:# sort_by_price:flags.1?true sort_by_num:flags.2?true for_craft:flags.4?true attributes_hash:flags.0?long gift_id:long attributes:flags.3?Vector<StarGiftAttributeId> offset:string limit:int = payments.ResaleStarGifts;\npayments.updateStarGiftPrice#edbe6ccb stargift:InputSavedStarGift resell_amount:StarsAmount = Updates;\npayments.getStarGiftCollections#981b91dd peer:InputPeer hash:long = payments.StarGiftCollections;\npayments.getUniqueStarGiftValueInfo#4365af6b slug:string = payments.UniqueStarGiftValueInfo;\npayments.checkCanSendGift#c0c4edc9 gift_id:long = payments.CheckCanSendGiftResult;\npayments.getStarGiftAuctionState#5c9ff4d6 auction:InputStarGiftAuction version:int = payments.StarGiftAuctionState;\npayments.getStarGiftAuctionAcquiredGifts#6ba2cbec gift_id:long = payments.StarGiftAuctionAcquiredGifts;\npayments.getStarGiftActiveAuctions#a5d0514d hash:long = payments.StarGiftActiveAuctions;\npayments.resolveStarGiftOffer#e9ce781c flags:# decline:flags.0?true offer_msg_id:int = Updates;\nphone.requestCall#42ff96ed flags:# video:flags.0?true user_id:InputUser random_id:int g_a_hash:bytes protocol:PhoneCallProtocol = phone.PhoneCall;\nphone.acceptCall#3bd2b4a0 peer:InputPhoneCall g_b:bytes protocol:PhoneCallProtocol = phone.PhoneCall;\nphone.confirmCall#2efe1722 peer:InputPhoneCall g_a:bytes key_fingerprint:long protocol:PhoneCallProtocol = phone.PhoneCall;\nphone.receivedCall#17d54f61 peer:InputPhoneCall = Bool;\nphone.discardCall#b2cbc1c0 flags:# video:flags.0?true peer:InputPhoneCall duration:int reason:PhoneCallDiscardReason connection_id:long = Updates;\nphone.setCallRating#59ead627 flags:# user_initiative:flags.0?true peer:InputPhoneCall rating:int comment:string = Updates;\nphone.saveCallDebug#277add7e peer:InputPhoneCall debug:DataJSON = Bool;\nphone.sendSignalingData#ff7a9383 peer:InputPhoneCall data:bytes = Bool;\nphone.createGroupCall#48cdc6d8 flags:# rtmp_stream:flags.2?true peer:InputPeer random_id:int title:flags.0?string schedule_date:flags.1?int = Updates;\nphone.joinGroupCall#8fb53057 flags:# muted:flags.0?true video_stopped:flags.2?true call:InputGroupCall join_as:InputPeer invite_hash:flags.1?string public_key:flags.3?int256 block:flags.3?bytes params:DataJSON = Updates;\nphone.leaveGroupCall#500377f9 call:InputGroupCall source:int = Updates;\nphone.discardGroupCall#7a777135 call:InputGroupCall = Updates;\nphone.getGroupCall#41845db call:InputGroupCall limit:int = phone.GroupCall;\nphone.getGroupParticipants#c558d8ab call:InputGroupCall ids:Vector<InputPeer> sources:Vector<int> offset:string limit:int = phone.GroupParticipants;\nphone.editGroupCallParticipant#a5273abf flags:# call:InputGroupCall participant:InputPeer muted:flags.0?Bool volume:flags.1?int raise_hand:flags.2?Bool video_stopped:flags.3?Bool video_paused:flags.4?Bool presentation_paused:flags.5?Bool = Updates;\nphone.exportGroupCallInvite#e6aa647f flags:# can_self_unmute:flags.0?true call:InputGroupCall = phone.ExportedGroupCallInvite;\nphone.toggleGroupCallStartSubscription#219c34e6 call:InputGroupCall subscribed:Bool = Updates;\nphone.joinGroupCallPresentation#cbea6bc4 call:InputGroupCall params:DataJSON = Updates;\nphone.leaveGroupCallPresentation#1c50d144 call:InputGroupCall = Updates;\nlangpack.getLangPack#f2f2330a lang_pack:string lang_code:string = LangPackDifference;\nlangpack.getStrings#efea3803 lang_pack:string lang_code:string keys:Vector<string> = Vector<LangPackString>;\nlangpack.getDifference#cd984aa5 lang_pack:string lang_code:string from_version:int = LangPackDifference;\nlangpack.getLanguages#42c6978f lang_pack:string = Vector<LangPackLanguage>;\nlangpack.getLanguage#6a596502 lang_pack:string lang_code:string = LangPackLanguage;\nfolders.editPeerFolders#6847d0ab folder_peers:Vector<InputFolderPeer> = Updates;\nstats.getBroadcastStats#ab42441a flags:# dark:flags.0?true channel:InputChannel = stats.BroadcastStats;\nstats.loadAsyncGraph#621d5fa0 flags:# token:string x:flags.0?long = StatsGraph;\nstats.getMegagroupStats#dcdf8607 flags:# dark:flags.0?true channel:InputChannel = stats.MegagroupStats;\nstats.getMessagePublicForwards#5f150144 channel:InputChannel msg_id:int offset:string limit:int = stats.PublicForwards;\nstats.getMessageStats#b6e0a3f5 flags:# dark:flags.0?true channel:InputChannel msg_id:int = stats.MessageStats;\nstats.getStoryStats#374fef40 flags:# dark:flags.0?true peer:InputPeer id:int = stats.StoryStats;\nstats.getStoryPublicForwards#a6437ef6 peer:InputPeer id:int offset:string limit:int = stats.PublicForwards;\nchatlists.exportChatlistInvite#8472478e chatlist:InputChatlist title:string peers:Vector<InputPeer> = chatlists.ExportedChatlistInvite;\nchatlists.deleteExportedInvite#719c5c5e chatlist:InputChatlist slug:string = Bool;\nchatlists.editExportedInvite#653db63d flags:# chatlist:InputChatlist slug:string title:flags.1?string peers:flags.2?Vector<InputPeer> = ExportedChatlistInvite;\nchatlists.getExportedInvites#ce03da83 chatlist:InputChatlist = chatlists.ExportedInvites;\nchatlists.checkChatlistInvite#41c10fff slug:string = chatlists.ChatlistInvite;\nchatlists.joinChatlistInvite#a6b1e39a slug:string peers:Vector<InputPeer> = Updates;\nchatlists.getLeaveChatlistSuggestions#fdbcd714 chatlist:InputChatlist = Vector<Peer>;\nchatlists.leaveChatlist#74fae13a chatlist:InputChatlist peers:Vector<InputPeer> = Updates;\nstories.editStory#b583ba46 flags:# peer:InputPeer id:int media:flags.0?InputMedia media_areas:flags.3?Vector<MediaArea> caption:flags.1?string entities:flags.1?Vector<MessageEntity> privacy_rules:flags.2?Vector<InputPrivacyRule> = Updates;\nstories.deleteStories#ae59db5f peer:InputPeer id:Vector<int> = Vector<int>;\nstories.togglePinned#9a75a1ef peer:InputPeer id:Vector<int> pinned:Bool = Vector<int>;\nstories.getAllStories#eeb0d625 flags:# next:flags.1?true hidden:flags.2?true state:flags.0?string = stories.AllStories;\nstories.getPinnedStories#5821a5dc peer:InputPeer offset_id:int limit:int = stories.Stories;\nstories.getStoriesArchive#b4352016 peer:InputPeer offset_id:int limit:int = stories.Stories;\nstories.getStoriesByID#5774ca74 peer:InputPeer id:Vector<int> = stories.Stories;\nstories.readStories#a556dac8 peer:InputPeer max_id:int = Vector<int>;\nstories.incrementStoryViews#b2028afb peer:InputPeer id:Vector<int> = Bool;\nstories.getStoryViewsList#7ed23c57 flags:# just_contacts:flags.0?true reactions_first:flags.2?true forwards_first:flags.3?true peer:InputPeer q:flags.1?string id:int offset:string limit:int = stories.StoryViewsList;\nstories.getStoriesViews#28e16cc8 peer:InputPeer id:Vector<int> = stories.StoryViews;\nstories.exportStoryLink#7b8def20 peer:InputPeer id:int = ExportedStoryLink;\nstories.report#19d8eb45 peer:InputPeer id:Vector<int> option:bytes message:string = ReportResult;\nstories.activateStealthMode#57bbd166 flags:# past:flags.0?true future:flags.1?true = Updates;\nstories.sendReaction#7fd736b2 flags:# add_to_recent:flags.0?true peer:InputPeer story_id:int reaction:Reaction = Updates;\nstories.getPeerStories#2c4ada50 peer:InputPeer = stories.PeerStories;\nstories.getPeerMaxIDs#78499170 id:Vector<InputPeer> = Vector<RecentStory>;\nstories.togglePeerStoriesHidden#bd0415c4 peer:InputPeer hidden:Bool = Bool;\nstories.togglePinnedToTop#b297e9b peer:InputPeer id:Vector<int> = Bool;\nstories.getAlbums#25b3eac7 peer:InputPeer hash:long = stories.Albums;\nstories.getAlbumStories#ac806d61 peer:InputPeer album_id:int offset:int limit:int = stories.Stories;\npremium.getBoostsList#60f67660 flags:# gifts:flags.0?true peer:InputPeer offset:string limit:int = premium.BoostsList;\npremium.getMyBoosts#be77b4a = premium.MyBoosts;\npremium.applyBoost#6b7da746 flags:# slots:flags.0?Vector<int> peer:InputPeer = premium.MyBoosts;\npremium.getBoostsStatus#42f1f61 peer:InputPeer = premium.BoostsStatus;\nfragment.getCollectibleInfo#be1e85ba collectible:InputCollectible = fragment.CollectibleInfo;"),[s,n]=we("resPQ#05162463 nonce:int128 server_nonce:int128 pq:string server_public_key_fingerprints:Vector<long> = ResPQ;\np_q_inner_data#83c95aec pq:string p:string q:string nonce:int128 server_nonce:int128 new_nonce:int256 = P_Q_inner_data;\np_q_inner_data_dc#a9f55f95 pq:string p:string q:string nonce:int128 server_nonce:int128 new_nonce:int256 dc:int = P_Q_inner_data;\np_q_inner_data_temp#3c6a84d4 pq:string p:string q:string nonce:int128 server_nonce:int128 new_nonce:int256 expires_in:int = P_Q_inner_data;\np_q_inner_data_temp_dc#56fddf88 pq:string p:string q:string nonce:int128 server_nonce:int128 new_nonce:int256 dc:int expires_in:int = P_Q_inner_data;\nserver_DH_params_fail#79cb045d nonce:int128 server_nonce:int128 new_nonce_hash:int128 = Server_DH_Params;\nserver_DH_params_ok#d0e8075c nonce:int128 server_nonce:int128 encrypted_answer:string = Server_DH_Params;\nserver_DH_inner_data#b5890dba nonce:int128 server_nonce:int128 g:int dh_prime:string g_a:string server_time:int = Server_DH_inner_data;\nclient_DH_inner_data#6643b654 nonce:int128 server_nonce:int128 retry_id:long g_b:string = Client_DH_Inner_Data;\ndh_gen_ok#3bcbf734 nonce:int128 server_nonce:int128 new_nonce_hash1:int128 = Set_client_DH_params_answer;\ndh_gen_retry#46dc1fb9 nonce:int128 server_nonce:int128 new_nonce_hash2:int128 = Set_client_DH_params_answer;\ndh_gen_fail#a69dae02 nonce:int128 server_nonce:int128 new_nonce_hash3:int128 = Set_client_DH_params_answer;\ndestroy_auth_key_ok#f660e1d4 = DestroyAuthKeyRes;\ndestroy_auth_key_none#0a9f2259 = DestroyAuthKeyRes;\ndestroy_auth_key_fail#ea109b13 = DestroyAuthKeyRes;\n---functions---\nreq_pq#60469778 nonce:int128 = ResPQ;\nreq_pq_multi#be7e8ef1 nonce:int128 = ResPQ;\nreq_pq_multi_new#51b410fd nonce:int128 = ResPQ;\nreq_DH_params#d712e4be nonce:int128 server_nonce:int128 p:string q:string public_key_fingerprint:long encrypted_data:string = Server_DH_Params;\nset_client_DH_params#f5045f1f nonce:int128 server_nonce:int128 encrypted_data:string = Set_client_DH_params_answer;\ndestroy_auth_key#d1435160 = DestroyAuthKeyRes;\n---types---\nmsgs_ack#62d6b459 msg_ids:Vector<long> = MsgsAck;\nbad_msg_notification#a7eff811 bad_msg_id:long bad_msg_seqno:int error_code:int = BadMsgNotification;\nbad_server_salt#edab447b bad_msg_id:long bad_msg_seqno:int error_code:int new_server_salt:long = BadMsgNotification;\nmsgs_state_req#da69fb52 msg_ids:Vector<long> = MsgsStateReq;\nmsgs_state_info#04deb57d req_msg_id:long info:string = MsgsStateInfo;\nmsgs_all_info#8cc0d131 msg_ids:Vector<long> info:string = MsgsAllInfo;\nmsg_detailed_info#276d3ec6 msg_id:long answer_msg_id:long bytes:int status:int = MsgDetailedInfo;\nmsg_new_detailed_info#809db6df answer_msg_id:long bytes:int status:int = MsgDetailedInfo;\nmsg_resend_req#7d861a08 msg_ids:Vector<long> = MsgResendReq;\nrpc_error#2144ca19 error_code:int error_message:string = RpcError;\nrpc_answer_unknown#5e2ad36e = RpcDropAnswer;\nrpc_answer_dropped_running#cd78e586 = RpcDropAnswer;\nrpc_answer_dropped#a43ad8b7 msg_id:long seq_no:int bytes:int = RpcDropAnswer;\nfuture_salt#0949d9dc valid_since:int valid_until:int salt:long = FutureSalt;\nfuture_salts#ae500895 req_msg_id:long now:int salts:vector<FutureSalt> = FutureSalts;\npong#347773c5 msg_id:long ping_id:long = Pong;\ndestroy_session_ok#e22045fc session_id:long = DestroySessionRes;\ndestroy_session_none#62d350c9 session_id:long = DestroySessionRes;\nnew_session_created#9ec20908 first_msg_id:long unique_id:long server_salt:long = NewSession;\nhttp_wait#9299359f max_delay:int wait_after:int max_wait:int = HttpWait;\nipPort#d433ad73 ipv4:int port:int = IpPort;\nipPortSecret#37982646 ipv4:int port:int secret:bytes = IpPort;\naccessPointRule#4679b65f phone_prefix_rules:string dc_id:int ips:vector<IpPort> = AccessPointRule;\nhelp.configSimple#5a592a6c date:int expires:int rules:vector<AccessPointRule> = help.ConfigSimple;\ntlsClientHello blocks:vector<TlsBlock> = TlsClientHello;\ntlsBlockString data:string = TlsBlock;\ntlsBlockRandom length:int = TlsBlock;\ntlsBlockZero length:int = TlsBlock;\ntlsBlockDomain = TlsBlock;\ntlsBlockGrease seed:int = TlsBlock;\ntlsBlockScope entries:Vector<TlsBlock> = TlsBlock;\n---functions---\nping#7abe77ec ping_id:long = Pong;\nping_delay_disconnect#f3427b8c ping_id:long disconnect_delay:int = Pong;");return{constructors:[].concat(e,s),requests:[].concat(t,n)}}(),be&&localStorage.setItem(Se,JSON.stringify(e))),function(e,t){const s={...e};return Object.keys(t).forEach(e=>{"function"!=typeof t[e]&&s[e]?Object.assign(s[e],t[e]):s[e]=t[e]}),s}(Pe("constructor",e.constructors),Pe("request",e.requests))}();class Me extends Error{constructor(e,t,s){super("RPCError {0}: {1}{2}".replace("{0}",s?.toString()||"").replace("{1}",e).replace("{2}",Me._fmtRequest(t))),this.code=s,this.errorMessage=e}static _fmtRequest(e){return e?` (caused by ${e.className})`:""}}class Ae extends Me{constructor(e,t,s){super(e,t,s),this.code=s||303,this.errorMessage=e||"ERROR_SEE_OTHER"}}class Re extends Me{code=400;errorMessage="BAD_REQUEST"}class ke extends Me{code=420;errorMessage="FLOOD"}class Te extends Me{code=500;errorMessage="INTERNAL"}class Be extends Me{code=503;errorMessage="Timeout"}class De extends Ae{constructor(e){const t=Number(e.capture||0);super(`The user whose identity is being used to execute queries is associated with DC ${t}${Me._fmtRequest(e.request)}`,e.request),this.message=`The user whose identity is being used to execute queries is associated with DC ${t}${Me._fmtRequest(e.request)}`,this.newDc=t}}class Ue extends Ae{constructor(e){const t=Number(e.capture||0);super(`The phone number a user is trying to use for authorization is associated with DC ${t}${Me._fmtRequest(e.request)}`,e.request),this.message=`The phone number a user is trying to use for authorization is associated with DC ${t}${Me._fmtRequest(e.request)}`,this.newDc=t}}class Ee extends ke{constructor(e){const t=Number(e.capture||0);super(`A wait of ${t} seconds is required${Me._fmtRequest(e.request)}`,e.request),this.message=`A wait of ${t} seconds is required${Me._fmtRequest(e.request)}`,this.seconds=t}}class xe extends Ee{constructor(e){const t=Number(e.capture||0);super(`A wait of ${t} seconds is required${Me._fmtRequest(e.request)}`),this.message=`A wait of ${t} seconds is required${Me._fmtRequest(e.request)}`,this.seconds=t}}class Ve extends ke{constructor(e){super(`Message failed to be sent.${Me._fmtRequest(e.request)}`,e.request),this.message=`Message failed to be sent.${Me._fmtRequest(e.request)}`}}class Ge extends ke{constructor(e){const t=Number(e.capture||0);super(`A wait of ${t} seconds is required in the test servers${Me._fmtRequest(e.request)}`,e.request),this.message=`A wait of ${t} seconds is required in the test servers${Me._fmtRequest(e.request)}`,this.seconds=t}}class Fe extends Ae{constructor(e){const t=Number(e.capture||0);super(`The source IP address is associated with DC ${t}${Me._fmtRequest(e.request)}`,e.request),this.message=`The source IP address is associated with DC ${t}${Me._fmtRequest(e.request)}`,this.newDc=t}}class Ne extends Re{constructor(e){const t=Number(e.capture||0);super(`Email unconfirmed, the length of the code must be ${t}${Me._fmtRequest(e.request)}`,e.request,400),this.message=`Email unconfirmed, the length of the code must be ${t}${Me._fmtRequest(e.request)}`,this.codeLength=t}}class qe extends Re{constructor(e){const t=Number(e.capture||0);super(`The password was modified less than 24 hours ago, try again in ${t} seconds.`,e.request),this.message=`The password was modified less than 24 hours ago, try again in ${t} seconds.`,this.seconds=t}}class He extends Re{constructor(e){const t=Number(e.capture||0);super(`Session is fresh, please try again in ${t} seconds.`,e.request),this.message=`Session is fresh, please try again in ${t} seconds.`,this.seconds=t}}class Le extends Error{constructor(e){super("Passkey login requested"),this.message="RESTART_AUTH_WITH_PASSKEY",this.credentialJson=e}}class Oe extends Error{constructor(e){super("User already authorized"),this.message="USER_ALREADY_AUTHORIZED",this.userId=e}}class je extends Me{constructor(e){super("PASSKEY_CREDENTIAL_NOT_FOUND",e.request)}}const We=new Map([[/FILE_MIGRATE_(\d+)/,class extends Ae{constructor(e){const t=Number(e.capture||0);super(`The file to be accessed is currently stored in DC ${t}${Me._fmtRequest(e.request)}`,e.request),this.message=`The file to be accessed is currently stored in DC ${t}${Me._fmtRequest(e.request)}`,this.newDc=t}}],[/FLOOD_TEST_PHONE_WAIT_(\d+)/,Ge],[/FLOOD_WAIT_(\d+)/,Ee],[/FLOOD_PREMIUM_WAIT_(\d+)/,xe],[/MSG_WAIT_(.*)/,Ve],[/PHONE_MIGRATE_(\d+)/,Ue],[/SLOWMODE_WAIT_(\d+)/,class extends ke{constructor(e){const t=Number(e.capture||0);super(`A wait of ${t} seconds is required before sending another message in this chat ${Me._fmtRequest(e.request)}`,e.request),this.message=`A wait of ${t} seconds is required before sending another message in this chat${Me._fmtRequest(e.request)}`,this.seconds=t}}],[/USER_MIGRATE_(\d+)/,De],[/NETWORK_MIGRATE_(\d+)/,Fe],[/EMAIL_UNCONFIRMED_(\d+)/,Ne],[/PASSWORD_TOO_FRESH_(\d+)/,qe],[/SESSION_TOO_FRESH_(\d+)/,He],[/^Timeout$/,Be],[/PASSKEY_CREDENTIAL_NOT_FOUND/,je]]);Error;class ze extends Error{constructor(e,t){super(`Could not find a matching Constructor ID for the TLObject that was supposed to be\n        read with ID ${e}. Most likely, a TLObject was trying to be read when\n         it should not be read. Remaining bytes: ${t.length}`),"undefined"!=typeof alert&&alert(`Missing MTProto Entity: Please, make sure to add TL definition for ID ${e}`),this.invalidConstructorId=e,this.remaining=t}}Error;class Ke extends Error{constructor(e){let t;4===e.length?(t=-e.readInt32LE(0),super(`Invalid response buffer (HTTP code ${t})`)):super(`Invalid response buffer (too short ${e.toString()})`),this.code=t,this.payload=e}}class $e extends Error{constructor(...e){e.length||(e=["A security check failed."]),super(...e)}}class Je extends Error{static ErrorMessages={16:"msg_id too low (most likely, client time is wrong it would be worthwhile to synchronize it using msg_id notifications and re-send the original message with the correct msg_id or wrap it in a container with a new msg_id if the original message had waited too long on the client to be transmitted).",17:"msg_id too high (similar to the previous case, the client time has to be synchronized, and the message re-sent with the correct msg_id).",18:"Incorrect two lower order msg_id bits (the server expects client message msg_id to be divisible by 4).",19:"Container msg_id is the same as msg_id of a previously received message (this must never happen).",20:"Message too old, and it cannot be verified whether the server has received a message with this msg_id or not.",32:"msg_seqno too low (the server has already received a message with a lower msg_id but with either a higher or an equal and odd seqno).",33:"msg_seqno too high (similarly, there is a message with a higher msg_id but with either a lower or an equal and odd seqno).",34:"An even msg_seqno expected (irrelevant message), but odd received.",35:"Odd msg_seqno expected (relevant message), but even received.",48:"Incorrect server salt (in this case, the bad_server_salt response is received with the correct salt, and the message is to be re-sent with it).",64:"Invalid container."};constructor(e,t){let s=Je.ErrorMessages[t]||`Unknown error code (this should not happen): ${t}.`;s+=`  Caused by ${e.className}`,super(s),this.errorMessage=s,this.code=t}}class Qe{constructor(){this._queue=[],this.resolvePush=()=>{},this.resolveGet=()=>{},this.canGet=new Promise(e=>{this.resolveGet=e}),this.canPush=!0}async push(e){await this.canPush,this._queue.push(e),this.resolveGet(!0),this.canPush=new Promise(e=>{this.resolvePush=e})}async pop(){await this.canGet;const e=this._queue.pop();return this.resolvePush(!0),this.canGet=new Promise(e=>{this.resolveGet=e}),e}}var Xe=s(69861),Ye=s(48287).hp;class Ze{static CONSTRUCTOR_ID=812830625;static classType="constructor";constructor(e){this.data=e,this.CONSTRUCTOR_ID=812830625,this.classType="constructor"}static gzipIfNeeded(e,t){if(e&&t.length>512){const e=new Ze(t).toBytes();if(e.length<t.length)return e}return t}static gzip(e){return Ye.from((0,Xe.u3)(e))}static ungzip(e){return Ye.from((0,Xe.Wt)(e))}toBytes(){const e=Ye.alloc(4);return e.writeUInt32LE(Ze.CONSTRUCTOR_ID,0),Ye.concat([e,ye(Ze.gzip(this.data))])}static async fromReader(e){const t=e.tgReadBytes();return new Ze(Ze.ungzip(t))}}class et{static SIZE_OVERHEAD=12;static classType="constructor";constructor(e,t,s){this.msgId=e,this.seqNo=t,this.obj=s}}class tt{static CONSTRUCTOR_ID=1945237724;static classType="constructor";static MAXIMUM_SIZE=1044448;static MAXIMUM_LENGTH=100;constructor(e){this.CONSTRUCTOR_ID=1945237724,this.messages=e,this.classType="constructor"}static fromReader(e){const t=[],s=e.readInt();for(let n=0;n<s;n++){const s=e.readLong(),n=e.readInt(),a=e.readInt(),i=e.tellPosition(),o=e.tgReadObject();e.setPosition(i+a);const r=new et(s,n,o);t.push(r)}return new tt(t)}}class st{static CONSTRUCTOR_ID=4082920705;static classType="constructor";constructor(e,t,s){this.CONSTRUCTOR_ID=4082920705,this.reqMsgId=e,this.body=t,this.error=s,this.classType="constructor"}static async fromReader(e){const t=e.readLong(),s=e.readInt(!1);return s===Ce.RpcError.CONSTRUCTOR_ID?new st(t,void 0,Ce.RpcError.fromReader(e)):s===Ze.CONSTRUCTOR_ID?new st(t,(await Ze.fromReader(e)).data):(e.seek(-4),new st(t,e.read(),void 0))}}const nt=new Map([[st.CONSTRUCTOR_ID,st],[Ze.CONSTRUCTOR_ID,Ze],[tt.CONSTRUCTOR_ID,tt]]),at={};for(const e of Object.values(Ce))if("CONSTRUCTOR_ID"in e)at[e.CONSTRUCTOR_ID]=e;else for(const t of Object.values(e))at[t.CONSTRUCTOR_ID]=t;class it{constructor(e){this.stream=e,this._last=void 0,this.offset=0}readByte(){return this.read(1)[0]}readInt(e=!0){let t;return t=e?this.stream.readInt32LE(this.offset):this.stream.readUInt32LE(this.offset),this.offset+=4,t}readLong(e=!0){return this.readLargeInt(64,e)}readFloat(){return this.read(4).readFloatLE(0)}readDouble(){return this.read(8).readDoubleLE(0)}readLargeInt(e,t=!0){return q(this.read(Math.floor(e/8)),!0,t)}read(e=-1){-1===e&&(e=this.stream.length-this.offset);const t=this.stream.slice(this.offset,this.offset+e);if(this.offset+=e,t.length!==e)throw Error(`No more data left to read (need ${e}, got ${t.length}: ${t.toString()}); last read ${this._last?.toString()}`);return this._last=t,t}getBuffer(){return this.stream}tgReadBytes(){const e=this.readByte();let t,s;254===e?(s=this.readByte()|this.readByte()<<8|this.readByte()<<16,t=s%4):(s=e,t=(s+1)%4);const n=this.read(s);return t>0&&(t=4-t,this.read(t)),n}tgReadString(){return this.tgReadBytes().toString("utf-8")}tgReadBool(){const e=this.readInt(!1);if(2574415285===e)return!0;if(3162085175===e)return!1;throw new Error(`Invalid boolean code ${e.toString(16)}`)}tgReadDate(){const e=this.readInt();return new Date(1e3*e)}tgReadObject(){const e=this.readInt(!1);let t=at[e];if(void 0===t){if(2574415285===e)return!0;if(3162085175===e)return!1;if(481674261===e){const e=[],t=this.readInt();for(let s=0;s<t;s++)e.push(this.tgReadObject());return e}if(t=nt.get(e),void 0===t){this.seek(-4);const t=this.tellPosition(),s=new ze(e,this.read());throw this.setPosition(t),s}}return t.fromReader(this)}tgReadVector(){if(481674261!==this.readInt(!1))throw new Error("Invalid constructor code, vector was expected");const e=this.readInt(),t=[];for(let s=0;s<e;s++)t.push(this.tgReadObject());return t}tellPosition(){return this.offset}setPosition(e){this.offset=e}seek(e){this.offset+=e}}var ot=s(48287).hp;class rt{constructor(e){this._buffers=[e]}write(e){this._buffers.push(e)}getValue(){return ot.concat(this._buffers)}}var ct=s(48287).hp;const dt=new Error("HttpStream was closed");AbortSignal.timeout??=function(e){const t=new AbortController;return setTimeout(()=>t.abort(),e),t.signal};class ut{stream=[];canRead=Promise.resolve();constructor(e){this.isClosed=!0,this.disconnectedCallback=e}async readExactly(e){let t=ct.alloc(0);for(;;){const s=await this.read();if(t=ct.concat([t,s]),(e-=s.length)<=0)return t}}async read(){await this.canRead;const e=this.stream.shift();return 0===this.stream.length&&(this.canRead=new Promise((e,t)=>{this.resolveRead=e,this.rejectRead=t})),e}static getURL(e,t,s,n){return 443===t?`https://${e}:${t}/apiw1${s?"_test":""}${n?"_premium":""}`:`http://${e}:${t}/apiw1${s?"_test":""}${n?"_premium":""}`}async connect(e,t,s=!1,n=!1){this.stream=[],this.canRead=new Promise((e,t)=>{this.resolveRead=e,this.rejectRead=t}),this.url=ut.getURL(t,e,s,n),await fetch(this.url,{method:"POST",body:ct.from([]),mode:"cors",signal:AbortSignal.timeout(1e4)}),this.isClosed=!1}write(e){if(this.isClosed||!this.url)throw this.handleDisconnect(),dt;return fetch(this.url,{method:"POST",body:e,mode:"cors",signal:AbortSignal.timeout(1e4)}).then(async e=>{if(this.isClosed)return void this.handleDisconnect();if(200!==e.status)throw dt;const t=await e.arrayBuffer();this.stream=this.stream.concat(ct.from(t)),this.resolveRead&&!this.isClosed&&this.resolveRead()}).catch(e=>{throw this.handleDisconnect(),e})}handleDisconnect(){this.disconnectedCallback?.(),this.rejectRead&&this.rejectRead()}close(){this.isClosed=!0,this.handleDisconnect(),this.disconnectedCallback=void 0}}let lt;class ft{static LEVEL_MAP=new Map([["error",new Set(["error"])],["warn",new Set(["error","warn"])],["info",new Set(["error","warn","info"])],["debug",new Set(["error","warn","info","debug"])]]);constructor(e){lt||(lt=e||"debug"),this.colors={start:"%c",warn:"color : #ff00ff",info:"color : #ffff00",debug:"color : #00ffff",error:"color : #ff0000",end:""},this.messageFormat="[%t] [%l] - [%m]"}static setLevel(e){lt=e}canSend(e){return!!lt&&ft.LEVEL_MAP.get(lt).has(e)}warn(e){this._log("warn",e,this.colors.warn)}info(e){this._log("info",e,this.colors.info)}debug(e){this._log("debug",e,this.colors.debug)}error(e){this._log("error",e,this.colors.error)}format(e,t){return this.messageFormat.replace("%t",(new Date).toISOString()).replace("%l",t.toUpperCase()).replace("%m",e)}_log(e,t,s){lt&&this.canSend(e)&&console.log(this.colors.start+this.format(t,e),s)}}var gt=s(48287).hp;const pt=new Set(["messages.SendMessage","messages.SendMedia","messages.SendMultiMedia","messages.ForwardMessages","messages.SendInlineBotResult"]);class ht{constructor(e,t){this._state=e,this._queue=[],this._pendingStates=[],this._ready=new Promise(e=>{this.setReady=e}),this._log=t}values(){return this._queue}clear(){this._queue=[],this.append(void 0)}append(e,t=!0,s=!1){if(e&&pt.has(e.request.className))if(s){for(let t=0;t<this._queue.length;t++)if(pt.has(this._queue[t]?.request.className)){this._queue[t].after=e;break}}else for(let t=this._queue.length-1;t>=0;t--)if(pt.has(this._queue[t]?.request.className)){e.after=this._queue[t];break}s?this._queue.unshift(e):this._queue.push(e),t&&this.setReady?.(!0),e&&1658238041!==e.request.CONSTRUCTOR_ID&&(this._pendingStates.push(e),e.promise?.catch(()=>{}).finally(()=>{this._pendingStates=this._pendingStates.filter(t=>t!==e)}))}prepend(e){e.reverse().forEach(e=>{this.append(e,!1,!0)}),this.setReady?.(!0)}extend(e){e.forEach(e=>{this.append(e,!1)}),this.setReady?.(!0)}getBeacon(e){const t=new rt(gt.alloc(0));if(e.data.length+et.SIZE_OVERHEAD<=tt.MAXIMUM_SIZE){let s;return e.after&&(s=e.after.msgId),e.msgId=this._state.writeDataAsMessage(t,e.data,"request"===e.request.classType,s),this._log.debug(`Assigned msgId = ${e.msgId.toString()} to ${e.request.className||e.request.constructor.name}`),t.getValue()}this._log.warn(`Message payload for ${e.request.className||e.request.constructor.name} is too long ${e.data.length} and cannot be sent`),e.reject?.(new Error("Request Payload is too big"))}async wait(){this._queue.length||(this._ready=new Promise(e=>{this.setReady=e}),await this._ready)}get(){if(!this._queue[this._queue.length-1])return void(this._queue=this._queue.filter(Boolean));let e,t=new rt(gt.alloc(0));const s=[];let n=0;for(;this._queue.length&&s.length<=tt.MAXIMUM_LENGTH;){const e=this._queue.shift();if(e)if(e.abortSignal?.aborted)e.reject?.(new Error("Request aborted"));else{if(n+=e.data.length+et.SIZE_OVERHEAD,n<=tt.MAXIMUM_SIZE){let n;e.after&&(n=e.after.msgId),e.msgId=this._state.writeDataAsMessage(t,e.data,"request"===e.request.classType,n),this._log.debug(`Assigned msgId = ${e.msgId.toString()} to ${e.request.className||e.request.constructor.name}`),s.push(e);continue}if(s.length){this._queue.unshift(e);break}this._log.warn(`Message payload for ${e.request.className||e.request.constructor.name} is too long ${e.data.length} and cannot be sent`),e.reject?.(new Error("Request Payload is too big")),n=0}}if(s.length){if(s.length>1){const n=gt.alloc(8);n.writeUInt32LE(tt.CONSTRUCTOR_ID,0),n.writeInt32LE(s.length,4),e=gt.concat([n,t.getValue()]),t=new rt(gt.alloc(0));const a=this._state.writeDataAsMessage(t,e,!1);for(const e of s)e.containerId=a}return e=t.getValue(),{batch:s,data:e}}}}var mt=s(80129),yt=s(48287).hp;const _t=new mt.eu,bt=new Error("WebSocket was closed");class St{constructor(e){this.client=void 0,this.closed=!0,this.stream=yt.alloc(0),this.disconnectedCallback=e,this.timeout=3e3}async readExactly(e){let t=yt.alloc(0);for(;;){const s=await this.read(e);if(t=yt.concat([t,s]),!(e-=s.length))return t}}async read(e){if(this.closed)throw bt;if(await this.canRead,this.closed)throw bt;const t=this.stream.slice(0,e);return this.stream=this.stream.slice(e),0===this.stream.length&&(this.canRead=new Promise(e=>{this.resolveRead=e})),t}async readAll(){if(this.closed||!await this.canRead)throw bt;const e=this.stream;return this.stream=yt.alloc(0),this.canRead=new Promise(e=>{this.resolveRead=e}),e}getWebSocketLink(e,t,s,n){return 443===t?`wss://${e}:${t}/apiws${s?"_test":""}${n?"_premium":""}`:`ws://${e}:${t}/apiws${s?"_test":""}${n?"_premium":""}`}connect(e,t,s=!1,n=!1){return this.stream=yt.alloc(0),this.canRead=new Promise(e=>{this.resolveRead=e}),this.closed=!1,this.website=this.getWebSocketLink(t,e,s,n),this.client=new WebSocket(this.website,"binary"),new Promise((e,s)=>{if(!this.client)return;let n,a=!1;this.client.onopen=()=>{this.receive(),e(this),a=!0,n&&clearTimeout(n)},this.client.onerror=e=>{console.error("WebSocket error",e),s(e),a=!0,n&&clearTimeout(n)},this.client.onclose=e=>{const{code:s,reason:i,wasClean:o}=e;1e3!==s&&console.error(`Socket ${t} closed. Code: ${s}, reason: ${i}, was clean: ${o}`),this.resolveRead?.(!1),this.closed=!0,this.disconnectedCallback&&this.disconnectedCallback(),a=!0,n&&clearTimeout(n)},n=setTimeout(()=>{a||(s(new Error("WebSocket connection timeout")),this.resolveRead?.(!1),this.closed=!0,this.disconnectedCallback&&this.disconnectedCallback(),this.client?.close(),this.timeout*=2,this.timeout=Math.min(this.timeout,3e4),n=void 0)},this.timeout),self.addEventListener("offline",()=>{this.close(),this.resolveRead?.(!1)})})}write(e){if(this.closed)throw bt;this.client?.send(e)}close(){this.client?.close(),this.closed=!0}receive(){this.client&&(this.client.onmessage=async e=>{await _t.runExclusive(async()=>{const t=e.data instanceof ArrayBuffer?yt.from(e.data):yt.from(await new Response(e.data).arrayBuffer());this.stream=yt.concat([this.stream,t]),this.resolveRead?.(!0)})})}}class wt{constructor({ip:e,port:t,dcId:s,loggers:n,isPremium:a,isTestServer:i}){this._ip=e,this._port=t,this._dcId=s,this._log=n,this._isTestServer=i,this._isPremium=a,this._connected=!1,this._sendTask=void 0,this._recvTask=void 0,this._codec=void 0,this._obfuscation=void 0,this._sendArray=new Qe,this._recvArray=new Qe,this.shouldLongPoll=!1,this.socket=new St(this.disconnectCallback.bind(this))}isConnected(){return this._connected}disconnectCallback(){this.disconnect(!0)}async _connect(){this._log.debug("Connecting"),this._codec=new this.PacketCodecClass(this),await this.socket.connect(this._port,this._ip,this._isTestServer,this._isPremium),this._log.debug("Finished connecting"),await this._initConn()}async connect(){await this._connect(),this._connected=!0,this._sendTask||(this._sendTask=this._sendLoop()),this._recvTask=this._recvLoop()}disconnect(e=!1){this._connected&&(this._connected=!1,this._recvArray.push(void 0),e||this.socket.close())}async send(e){if(!this._connected)throw new Error("Not connected");await this._sendArray.push(e)}async recv(){for(;this._connected;){const e=await this._recvArray.pop();if(e)return e}throw new Error("Not connected")}async _sendLoop(){try{for(;this._connected;){const e=await this._sendArray.pop();if(!e)return void(this._sendTask=void 0);this._send(e)}}catch(e){this._log.info("The server closed the connection while sending")}}async _recvLoop(){let e;for(;this._connected;){try{if(e=await this._recv(),!e)throw new Error("no data received")}catch(e){return this._log.info("connection closed"),void this.disconnect()}await this._recvArray.push(e)}}async _initConn(){this._codec.tag&&await this.socket.write(this._codec.tag)}_send(e){const t=this._codec.encodePacket(e);this.socket.write(t)}_recv(){return this._codec.readPacket(this.socket)}toString(){return`${this._ip}:${this._port}/${this.constructor.name.replace("Connection","")}`}}class It extends wt{ObfuscatedIO=void 0;async _initConn(){this._obfuscation=new this.ObfuscatedIO(this),await this.socket.write(this._obfuscation.header)}_send(e){this._obfuscation.write(this._codec.encodePacket(e))}_recv(){return this._codec.readPacket(this._obfuscation)}}class vt{constructor(e){this._conn=e}encodePacket(e){throw new Error("Not Implemented")}readPacket(e){throw new Error("Not Implemented")}}class Pt extends wt{constructor(e){super(e),this.shouldLongPoll=!0,this.socket=new ut(this.disconnectCallback.bind(this)),this.href=ut.getURL(this._ip,this._port,this._isTestServer,this._isPremium)}send(e){return this.socket.write(e)}recv(){return this.socket.read()}async _connect(){this._log.debug("Connecting"),await this.socket.connect(this._port,this._ip,this._isTestServer,this._isPremium),this._log.debug("Finished connecting")}async connect(){await this._connect(),this._connected=!0}}var Ct=s(48287).hp;class Mt extends vt{static tag=Ct.from("ef","hex");static obfuscateTag=Ct.from("efefefef","hex");constructor(e){super(e),this.tag=Mt.tag,this.obfuscateTag=Mt.obfuscateTag}encodePacket(e){const t=e.length>>2;let s;if(t<127){const e=Ct.alloc(1);e.writeUInt8(t,0),s=e}else s=Ct.concat([Ct.from("7f","hex"),L(BigInt(t),3)]);return Ct.concat([s,e])}async readPacket(e){let t=(await e.read(1))[0];return t>=127&&(t=Ct.concat([await e.read(3),Ct.alloc(1)]).readInt32LE(0)),e.read(t<<2)}}var At=s(48287).hp;class Rt{constructor(e,t){if(!At.isBuffer(e)||!At.isBuffer(t)||16!==t.length)throw new Error("Key and iv need to be a buffer");this.cipher=function(e,t,s){if("AES-256-CTR".includes("ECB"))throw new Error("Not supported");return new E(t,s)}(0,e,t),this.decipher=function(e,t,s){if("AES-256-CTR".includes("ECB"))throw new Error("Not supported");return new E(t,s)}(0,e,t)}encrypt(e){return At.from(this.cipher.update(e))}decrypt(e){return At.from(this.decipher.update(e))}}var kt=s(48287).hp;class Tt{header=void 0;constructor(e){this.connection=e.socket;const t=this.initHeader(e.PacketCodecClass);this.header=t.random,this._encrypt=t.encryptor,this._decrypt=t.decryptor}initHeader(e){const t=[kt.from("50567247","hex"),kt.from("474554","hex"),kt.from("504f5354","hex"),kt.from("eeeeeeee","hex")];let s;for(;;)if(s=j(64),239!==s[0]&&!s.slice(4,8).equals(kt.alloc(4))){let e=!0;for(const n of t)if(n.equals(s.slice(0,4))){e=!1;break}if(e)break}s=s.toJSON().data;const n=kt.from(s.slice(8,56)).reverse(),a=kt.from(s.slice(8,40)),i=kt.from(s.slice(40,56)),o=kt.from(n.slice(0,32)),r=kt.from(n.slice(32,48)),c=new Rt(a,i),d=new Rt(o,r);return s=kt.concat([kt.from(s.slice(0,56)),e.obfuscateTag,kt.from(s.slice(60))]),s=kt.concat([kt.from(s.slice(0,56)),kt.from(c.encrypt(s).slice(56,64)),kt.from(s.slice(64))]),{random:s,encryptor:c,decryptor:d}}async read(e){const t=await this.connection.readExactly(e);return this._decrypt.encrypt(t)}write(e){this.connection.write(this._encrypt.encrypt(e))}}class Bt extends It{ObfuscatedIO=Tt;PacketCodecClass=Mt}class Dt{static disconnected=-1;static connected=1;static broken=0;constructor(e){this.state=e}}class Ut{constructor(e){this.timeOffset=e}}var Et=s(48287).hp;class xt{constructor(e,t){this.ige=new B.gj(e,t)}decryptIge(e){return K(this.ige.decrypt(e))}encryptIge(e){const t=e.length%16;return t&&(e=Et.concat([e,j(16-t)])),K(this.ige.encrypt(e))}}var Vt=s(48287).hp;class Gt{constructor(e,t,s=!1,n=!1){this.authKey=e,this._log=t,this._isCall=s,this._isOutgoing=n,this.timeOffset=0,this.salt=0n,this.id=0n,this._sequence=0,this._lastMsgId=0n,this.msgIds=[],this.reset()}reset(){this.id=function(e=!0){return q(j(8),!0,e)}(!0),this._sequence=0,this._lastMsgId=0n,this.msgIds=[]}updateMessageId(e){e.msgId=this._getNewMsgId()}async _calcKey(e,t,s){const n=this._isCall?128+(this._isOutgoing!==s?8:0):s?0:8,[a,i]=await Promise.all([J(Vt.concat([t,e.slice(n,n+36)])),J(Vt.concat([e.slice(n+40,n+76),t]))]),o=Vt.concat([a.slice(0,8),i.slice(8,24),a.slice(24,32)]);return this._isCall?{key:o,iv:Vt.concat([i.slice(0,4),a.slice(8,16),i.slice(24,28)])}:{key:o,iv:Vt.concat([i.slice(0,8),a.slice(8,24),i.slice(24,32)])}}writeDataAsMessage(e,t,s,n){const a=this._getNewMsgId(),i=this._getSeqNo(s);let o;o=void 0===n?Ze.gzipIfNeeded(s,t):Ze.gzipIfNeeded(s,new Ce.InvokeAfterMsg({msgId:n,query:{getBytes:()=>t}}).getBytes());const r=Vt.alloc(4);r.writeInt32LE(i,0);const c=Vt.alloc(4);c.writeInt32LE(o.length,0);const d=H(a,8);return e.write(Vt.concat([d,r,c])),e.write(o),a}async encryptMessageData(e){if(!this.authKey)throw new Error("Auth key unset");await this.authKey.waitForKey();const t=this.authKey.getKey();if(!t)throw new Error("Auth key unset");if(void 0===this.salt||void 0===this.authKey.keyId)throw new Error("Unset params");if(this._isCall){const s=128+(this._isOutgoing?0:8),n=e.length;e=Vt.from(e),n%4!=0&&(e=Vt.concat([e,Vt.from(new Array(4-n%4).fill(32))]));const a=(await J(Vt.concat([t.slice(88+s,88+s+32),Vt.from(e)]))).slice(8,24),{iv:i,key:o}=await this._calcKey(t,a,!0);return e=new Rt(o,i).encrypt(e),Vt.concat([a,e])}{const s=H(this.salt,8),n=H(this.id,8),a=j((-((e=Vt.concat([Vt.concat([s,n]),e])).length+12)%16+16)%16+12),i=(await J(Vt.concat([t.slice(88,120),e,a]))).slice(8,24),{iv:o,key:r}=await this._calcKey(t,i,!0),c=L(this.authKey.keyId,8);return Vt.concat([c,i,new xt(r,o).encryptIge(Vt.concat([e,a]))])}}async decryptMessageData(e){if(!this.authKey)throw new Error("Auth key unset");if(e.length<8)throw new Ke(e);if(e.length<0)throw new $e("Server replied with negative length");if(e.length%4!=0&&!this._isCall)throw new $e("Server replied with length not divisible by 4");if(!this._isCall&&q(e.slice(0,8))!==this.authKey.keyId)throw new $e("Server replied with an invalid auth key");const t=this.authKey.getKey();if(!t)throw new $e("Unset AuthKey");const s=this._isCall?e.slice(0,16):e.slice(8,24),n=this._isCall?128+(this._isOutgoing?8:0):0,{iv:a,key:i}=await this._calcKey(t,s,!1);if(this._isCall){const t=(e=e.slice(16)).length;e=Vt.concat([e,Vt.from(new Array(4-t%4).fill(0))]),e=(e=new Rt(i,a).decrypt(e)).slice(0,t)}else e=new xt(i,a).decryptIge(this._isCall?e.slice(16):e.slice(24));const o=this._isCall?await J(Vt.concat([t.slice(88+n,88+n+32),e])):await J(Vt.concat([t.slice(96,128),e]));if(!this._isCall&&!s.equals(o.slice(8,24)))throw new $e("Received msg_key doesn't match with expected one");const r=new it(e);if(this._isCall)return r.readInt(!1),r.read(e.length-4);{if(r.readLong(),r.readLong()!==this.id)throw new $e("Server replied with a wrong session ID");const t=r.readLong();if(this.msgIds.includes(t.toString()))throw new $e("Duplicate msgIds");this.msgIds.length>500&&this.msgIds.shift();const s=r.readInt(),n=r.readInt(),a=e.length-n;if(a<12||a>1024)throw new $e("Server replied with the wrong message padding");const i=await r.tgReadObject();if(i?.className?.startsWith("Update")){const e=Math.floor(Date.now()/1e3),s=this.getMsgIdTimeLocal(t);if(s&&(s-e>30||e-s>300))throw new $e("The message time is incorrect.")}return i&&!("errorCode"in i)&&this.msgIds.push(t.toString()),new et(t,s,i)}}_getNewMsgId(){const e=Date.now()/1e3+this.timeOffset,t=Math.floor(1e9*(e-Math.floor(e)));let s=BigInt(Math.floor(e))<<32n|BigInt(t)<<2n;return this._lastMsgId>=s&&(s=this._lastMsgId+4n),this._lastMsgId=s,s}getMsgIdTimeLocal(e){if(0n!==this._lastMsgId)return Number(e>>32n)-this.timeOffset}updateTimeOffset(e){const t=this._getNewMsgId(),s=this.timeOffset,n=Math.floor(Date.now()/1e3),a=Number(e>>32n);return this.timeOffset=a-n,this.timeOffset!==s&&(this._lastMsgId=0n,this._log.debug(`Updated time offset (old offset ${s}, bad ${t.toString()}, good ${e.toString()}, new ${this.timeOffset})`)),this.timeOffset}_getSeqNo(e){if(e){const e=2*this._sequence+1;return this._sequence+=1,e}return 2*this._sequence}}var Ft=s(48287).hp;class Nt{constructor(e,t){this._state=new Gt(void 0,t),this._connection=e}async send(e){let t=e.getBytes(),s=this._state._getNewMsgId();const n=H(s,8),a=Ft.alloc(4);a.writeInt32LE(t.length,0);const i=Ft.concat([Ft.concat([Ft.alloc(8),n,a]),t]);if(await this._connection.send(i),t=await this._connection.recv(),t.length<8)throw new Ke(t);const o=new it(t);if(0n!==o.readLong())throw new Error("Bad authKeyId");if(s=o.readLong(),0n===s)throw new Error("Bad msgId");if(o.readInt()<=0)throw new Error("Bad length");return o.tgReadObject()}}var qt=s(48287).hp;class Ht{constructor(e,t){if(!t||!e)return;this._key=e,this._hash=t;const s=new it(t);this.auxHash=s.readLong(!1),s.read(4),this.keyId=s.readLong(!1)}async setKey(e){if(!e)return this._key=void 0,this.auxHash=void 0,this.keyId=void 0,void(this._hash=void 0);if(e instanceof Ht)return this._key=e._key,this.auxHash=e.auxHash,this.keyId=e.keyId,void(this._hash=e._hash);this._key=e,this._hash=await $(this._key);const t=new it(this._hash);this.auxHash=t.readLong(!1),t.read(4),this.keyId=t.readLong(!1)}async waitForKey(){for(;void 0===this.keyId;)await ee(20)}getKey(){return this._key}async calcNewNonceHash(e,t){if(void 0===this.auxHash)throw new Error("Auth key not set");const s=H(e,32),n=qt.alloc(1);n.writeUInt8(t,0);const a=qt.concat([s,qt.concat([n,L(this.auxHash,8,!0)])]);return q((await $(a)).slice(4,20),!0,!0)}equals(e){return e instanceof this.constructor&&this._key&&qt.isBuffer(e.getKey())&&e.getKey()?.equals(this._key)}}class Lt{constructor(){this._pending=new Map}set(e,t){this._pending.set(e,t)}get(e){return this._pending.get(e)}getAndDelete(e){const t=this.get(e);return this.delete(e),t}values(){return Array.from(this._pending.values())}delete(e){return this._pending.delete(e)}clear(){this._pending.clear()}}s(48287).hp;const Ot=[{fingerprint:BigInt("-3414540481677951611"),n:BigInt("29379598170669337022986177149456128565388431120058863768162556424047512191330847455146576344487764408661701890505066208632169112269581063774293102577308490531282748465986139880977280302242772832972539403531316010870401287642763009136156734339538042419388722777357134487746169093539093850251243897188928735903389451772730245253062963384108812842079887538976360465290946139638691491496062099570836476454855996319192747663615955633778034897140982517446405334423701359108810182097749467210509584293428076654573384828809574217079944388301239431309115013843331317877374435868468779972014486325557807783825502498215169806323"),e:65537},{fingerprint:BigInt("-5595554452916591101"),n:BigInt("25342889448840415564971689590713473206898847759084779052582026594546022463853940585885215951168491965708222649399180603818074200620463776135424884632162512403163793083921641631564740959529419359595852941166848940585952337613333022396096584117954892216031229237302943701877588456738335398602461675225081791820393153757504952636234951323237820036543581047826906120927972487366805292115792231423684261262330394324750785450942589751755390156647751460719351439969059949569615302809050721500330239005077889855323917509948255722081644689442127297605422579707142646660768825302832201908302295573257427896031830742328565032949"),e:65537}].reduce((e,{fingerprint:t,...s})=>(e.set(t,s),e),new Map);class jt{static gcd(e,t){for(;0n!==t;){const s=t;t=e%t,e=s}return e}static factorize(e){if(e%2n==0n)return{p:2n,q:e/2n};let t=Z(1n,e-1n);const s=Z(1n,e-1n),n=Z(1n,e-1n);let a,i=1n,o=1n,r=1n,c=0n,d=0n;for(;1n===i;){c=t;for(let n=0n;n<o;n++)t=(Q(t,2n,e)+s)%e;for(a=0n;a<o&&1n===i;){d=t;const u=de.min(n,o-a);for(let n=0n;n<u;n++)t=(Q(t,2n,e)+s)%e,r=r*de.abs(c-t)%e;i=jt.gcd(r,e),a+=n}o*=2n}if(i===e)for(;d=(Q(d,2n,e)+s)%e,i=jt.gcd(de.abs(c-d),e),!(i>1n););return r=e/i,i<r?{p:i,q:r}:{p:r,q:i}}}var Wt=s(48287).hp;class zt{constructor(){this.promise=new Promise((e,t)=>{this.reject=t,this.resolve=e})}static resolved(e){const t=new zt;return t.resolve(e),t}}class Kt{constructor(e,t){this.containerId=void 0,this.msgId=void 0,this.request=e,this.data=e.getBytes(),this.after=void 0,this.result=void 0,this.abortSignal=t,this.finished=new zt,this.resetPromise()}isReady(){return!this.after||this.after.finished.promise}resetPromise(){this.reject?.(),this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}var $t=s(48287).hp;class Jt{static DEFAULT_OPTIONS={logger:void 0,retries:1/0,retriesToFallback:1,delay:2e3,retryMainConnectionDelay:1e4,shouldForceHttpTransport:!1,shouldAllowHttpTransport:!1,autoReconnect:!0,connectTimeout:void 0,authKeyCallback:void 0,updateCallback:void 0,autoReconnectCallback:void 0,isMainSender:void 0,onConnectionBreak:void 0,isExported:void 0,getShouldDebugExportedSenders:void 0};_isReconnectingToMain=!1;isConnecting=!1;_authenticated=!1;constructor(e,t){const s={...Jt.DEFAULT_OPTIONS,...t};this._connection=void 0,this._fallbackConnection=void 0,this._shouldForceHttpTransport=s.shouldForceHttpTransport,this._shouldAllowHttpTransport=s.shouldAllowHttpTransport,this._log=s.logger,this._dcId=s.dcId,this._senderIndex=s.senderIndex||0,this._retries=s.retries,this._retriesToFallback=s.retriesToFallback,this._delay=s.delay,this._retryMainConnectionDelay=s.retryMainConnectionDelay,this._authKeyCallback=s.authKeyCallback,this._updateCallback=s.updateCallback,this._autoReconnectCallback=s.autoReconnectCallback,this._isMainSender=Boolean(s.isMainSender),this._isExported=Boolean(s.isExported),this._onConnectionBreak=s.onConnectionBreak,this._isFallback=!1,this._getShouldDebugExportedSenders=s.getShouldDebugExportedSenders,this.userDisconnected=!1,this._userConnected=!1,this.isReconnecting=!1,this._disconnected=!0,this._sendLoopHandle=void 0,this._longPollLoopHandle=void 0,this._recvLoopHandle=void 0,this.authKey=e||new Ht,this._state=new Gt(this.authKey,this._log),this._sendQueue=new ht(this._state,this._log),this._sendQueueLongPoll=new ht(this._state,this._log),this._pendingState=new Lt,this._pendingAck=new Set,this._lastAcks=[],this._handlers={[st.CONSTRUCTOR_ID]:this._handleRPCResult.bind(this),[tt.CONSTRUCTOR_ID]:this._handleContainer.bind(this),[Ze.CONSTRUCTOR_ID]:this._handleGzipPacked.bind(this),[Ce.Pong.CONSTRUCTOR_ID]:this._handlePong.bind(this),[Ce.BadServerSalt.CONSTRUCTOR_ID]:this._handleBadServerSalt.bind(this),[Ce.BadMsgNotification.CONSTRUCTOR_ID]:this._handleBadNotification.bind(this),[Ce.MsgDetailedInfo.CONSTRUCTOR_ID]:this._handleDetailedInfo.bind(this),[Ce.MsgNewDetailedInfo.CONSTRUCTOR_ID]:this._handleNewDetailedInfo.bind(this),[Ce.NewSessionCreated.CONSTRUCTOR_ID]:this._handleNewSessionCreated.bind(this),[Ce.MsgsAck.CONSTRUCTOR_ID]:this._handleAck.bind(this),[Ce.FutureSalts.CONSTRUCTOR_ID]:this._handleFutureSalts.bind(this),[Ce.MsgsStateReq.CONSTRUCTOR_ID]:this._handleStateForgotten.bind(this),[Ce.MsgResendReq.CONSTRUCTOR_ID]:this._handleStateForgotten.bind(this),[Ce.MsgsAllInfo.CONSTRUCTOR_ID]:this._handleMsgAll.bind(this)}}logWithIndexCallback(e){return(...t)=>{this._getShouldDebugExportedSenders&&this._getShouldDebugExportedSenders()&&console[e](`[${this._isExported?`idx=${this._senderIndex} `:"M "}dcId=${this._dcId}]`,...t)}}logWithIndex={debug:this.logWithIndexCallback("debug"),log:this.logWithIndexCallback("log"),warn:this.logWithIndexCallback("warn"),error:this.logWithIndexCallback("error")};getConnection(){return this._isFallback?this._fallbackConnection:this._connection}async connect(e,t,s){if(this.userDisconnected=!1,this._userConnected&&!t)return this._log.info("User is already connected!"),!1;this.isConnecting=!0,this._isFallback=this._shouldForceHttpTransport&&this._shouldAllowHttpTransport,this._connection=e,this._fallbackConnection=s;for(let e=0;e<this._retries+this._retriesToFallback;e++)try{e>=this._retriesToFallback&&this._shouldAllowHttpTransport&&(this._isFallback=!0,this.logWithIndex.warn("Using fallback connection"),this._log.warn("Using fallback connection")),this.logWithIndex.warn("Connecting..."),await this._connect(this.getConnection()),this.logWithIndex.warn("Connected!"),this._isExported||this._updateCallback?.(new Dt(Dt.connected));break}catch(t){this._isExported||0!==e||this._updateCallback?.(new Dt(Dt.disconnected)),this._log.error(`${this._isFallback?"HTTP":"WebSocket"} connection failed attempt: ${e+1}`),console.error(t),await ee(this._delay)}return this.isConnecting=!1,this._isFallback&&!this._shouldForceHttpTransport&&this.tryReconnectToMain(),!0}async tryReconnectToMain(){if(this.isConnecting||!this._isFallback||this._isReconnectingToMain||this.isReconnecting||this._shouldForceHttpTransport||this._isExported)await ee(this._retryMainConnectionDelay);else{this._log.debug("Trying to reconnect to main connection"),this._isReconnectingToMain=!0;try{await this._connection.connect(),this._log.info("Reconnected to main connection"),this.logWithIndex.warn("Reconnected to main connection"),this.isReconnecting=!0,this._fallbackConnection&&this._disconnect(this._fallbackConnection),await this.connect(this._connection,!0,this._fallbackConnection),this.isReconnecting=!1,this._isReconnectingToMain=!1}catch(e){this.isReconnecting=!1,this._isReconnectingToMain=!1,this._log.error(`Failed to reconnect to main connection, retrying in ${this._retryMainConnectionDelay}ms`),await ee(this._retryMainConnectionDelay),this.tryReconnectToMain()}}}isConnected(){return this._userConnected}disconnect(){this.userDisconnected=!0,this.logWithIndex.warn("Disconnecting...");const e=this.getConnection();e&&this._disconnect(e)}destroy(){this._sendQueue.clear()}send(e,t,s=!1){const n=new Kt(e,t);return s?this._sendQueueLongPoll.append(n):(this.logWithIndex.debug(`Send ${e.className}`),this._sendQueue.append(n)),n.promise}addStateToQueue(e){this._sendQueue.append(e)}async sendBeacon(e){if(!(this._userConnected&&this._fallbackConnection instanceof Pt))throw new Error("Cannot send requests while disconnected");const t=new Kt(e,void 0),s=this._sendQueue.getBeacon(t);if(!s)return;const n=await this._state.encryptMessageData(s);postMessage({type:"sendBeacon",data:n,url:this._fallbackConnection.href})}async _connect(e){if(e.isConnected()||(this._log.info("Connecting to {0}...".replace("{0}",e._ip)),await e.connect(),this._log.debug("Connection success!")),this.authKey.getKey())this._authenticated=!0,this._log.debug("Already have an auth key ...");else{const t=new Nt(e,this._log);this._log.debug("New auth_key attempt ...");const s=await async function(e,t){let s=j(16);const n=q(s,!1,!0),a=await e.send(new Ce.ReqPqMulti({nonce:n}));if(t.debug("Starting authKey generation step 1"),!(a instanceof Ce.ResPQ))throw new $e(`Step 1 answer was ${a}`);if(a.nonce!==n)throw new $e("Step 1 invalid nonce from server");const i=q(a.pq,!1,!0);t.debug("Finished authKey generation step 1");const{p:o,q:r}=jt.factorize(i),c=X(o),d=X(r);s=j(32);const u=q(s,!0,!0),l=new Ce.PQInnerData({pq:X(i),p:c,q:d,nonce:a.nonce,serverNonce:a.serverNonce,newNonce:u}).getBytes();if(l.length>144)throw new $e("Step 1 invalid nonce from server");let f,g;for(const e of a.serverPublicKeyFingerprints)if(g=Ot.get(e),void 0!==g){f=e;break}if(void 0===f||void 0===g)throw new $e("Step 2 could not find a valid key for fingerprints");const p=j(192-l.length),h=Wt.concat([l,p]),m=Wt.from(h).reverse();let y;for(let e=0;e<20;e++){const e=j(32),s=await J(Wt.concat([e,h])),n=Wt.concat([m,s]),a=new xt(e,Wt.alloc(32)).encryptIge(n),i=te(e,await J(a)),o=q(Wt.concat([i,a]),!1,!1);if(!(o>=g.n)){y=L(Q(o,BigInt(g.e),g.n),256,!1,!1);break}t.debug("Aes key greater than RSA. retrying")}if(void 0===y)throw new $e("Step 2 could create a secure encrypted key");t.debug("Step 2 : Generated a secure aes encrypted data");const _=await e.send(new Ce.ReqDHParams({nonce:a.nonce,serverNonce:a.serverNonce,p:c,q:d,publicKeyFingerprint:f,encryptedData:y}));if(!(_ instanceof Ce.ServerDHParamsOk||_ instanceof Ce.ServerDHParamsFail))throw new Error(`Step 2.1 answer was ${_}`);if(_.nonce!==a.nonce)throw new $e("Step 2 invalid nonce from server");if(_.serverNonce!==a.serverNonce)throw new $e("Step 2 invalid server nonce from server");if(_ instanceof Ce.ServerDHParamsFail){const e=q(await $(H(u,32).slice(4,20)),!0,!0);if(_.newNonceHash!==e)throw new $e("Step 2 invalid DH fail nonce from server")}if(!(_ instanceof Ce.ServerDHParamsOk))throw new Error(`Step 2.2 answer was ${_.className}`);t.debug("Finished authKey generation step 2"),t.debug("Starting authKey generation step 3");const{key:b,iv:S}=await async function(e,t){const s=H(e,16),n=H(t,32),[a,i,o]=await Promise.all([$(N.concat([n,s])),$(N.concat([s,n])),$(N.concat([n,n]))]);return{key:N.concat([a,i.slice(0,12)]),iv:N.concat([i.slice(12,20),o,n.slice(0,4)])}}(a.serverNonce,u);if(_.encryptedAnswer.length%16!=0)throw new $e("Step 3 AES block size mismatch");const w=new xt(b,S),I=w.decryptIge(_.encryptedAnswer),v=new it(I),P=v.read(20),C=v.tgReadObject();if(!(C instanceof Ce.ServerDHInnerData))throw new Error(`Step 3 answer was ${C}`);const M=await $(C.getBytes());if(!P.equals(M))throw new $e("Step 3 Invalid hash answer");if(C.nonce!==a.nonce)throw new $e("Step 3 Invalid nonce in encrypted answer");if(C.serverNonce!==a.serverNonce)throw new $e("Step 3 Invalid server nonce in encrypted answer");if(3!==C.g||"c71caeb9c6b1c9048e6c522f70f13f73980d40238e3e21c14934d037563d930f48198a0aa7c14058229493d22530f4dbfa336f6e0ac925139543aed44cce7c3720fd51f69458705ac68cd4fe6b6b13abdc9746512969328454f18faf8c595f642477fe96bb2a941d5bcd1d4ac8cc49880708fa9b378e3c4f3a9060bee67cf9a4a4a695811051907e162753b56b0f6b410dba74d8a84b2a14b3144e0ef1284754fd17ed950d5965b4b9dd46582db1178d169c6bc465b0d6ff9ca3928fef5b9ae4e418fc15e83ebea0f87fa9ff5eed70050ded2849f47bf959d956850ce929851f0d8115f635b105ee2e4e15d04b2454bf6f4fadf034b10403119cd8e3b92fcc5b"!==C.dhPrime.toString("hex"))throw new $e("Step 3 invalid dhPrime or g");const A=q(C.dhPrime,!1,!1),R=q(C.gA,!1,!1),k=C.serverTime-Math.floor(Date.now()/1e3),T=q(j(256),!1,!1),B=Q(BigInt(C.g),T,A),D=Q(R,T,A);if(R<=1n)throw new $e("Step 3 failed ga > 1 check");if(B<=1n)throw new $e("Step 3 failed gb > 1 check");if(R>=A-1n)throw new $e("Step 3 failed ga < dh_prime - 1 check");const U=2n**1984n;if(!(R>U&&R<A-U))throw new $e("Step 3 failed dh_prime - 2^{2048-64} < ga < 2^{2048-64} check");if(!(B>U&&B<A-U))throw new $e("Step 3 failed dh_prime - 2^{2048-64} < gb < 2^{2048-64} check");const E=new Ce.ClientDHInnerData({nonce:a.nonce,serverNonce:a.serverNonce,retryId:0n,gB:X(B,!1)}).getBytes(),x=Wt.concat([await $(E),E]),V=w.encryptIge(x),G=await e.send(new Ce.SetClientDHParams({nonce:a.nonce,serverNonce:a.serverNonce,encryptedData:V})),F=[Ce.DhGenOk,Ce.DhGenRetry,Ce.DhGenFail];if(!(G instanceof F[0]||G instanceof F[1]||G instanceof F[2]))throw new Error(`Step 3.1 answer was ${G}`);const{name:O}=G.constructor;if(G.nonce!==a.nonce)throw new $e(`Step 3 invalid ${O} nonce from server`);if(G.serverNonce!==a.serverNonce)throw new $e(`Step 3 invalid ${O} server nonce from server`);const W=new Ht;await W.setKey(X(D));const z=1+["DhGenOk","DhGenRetry","DhGenFail"].indexOf(G.className),K=await W.calcNewNonceHash(u,z);if(G[`newNonceHash${z}`]!==K)throw new $e("Step 3 invalid new nonce hash");if(!(G instanceof Ce.DhGenOk))throw new Error(`Step 3.2 answer was ${G.className}`);return t.debug("Finished authKey generation step 3"),{authKey:W,timeOffset:k}}(t,this._log);this._log.debug("Generated new auth_key successfully"),await this.authKey.setKey(s.authKey),this._state.timeOffset=s.timeOffset,this._isExported||this._updateCallback?.(new Ut(this._state.timeOffset)),this._authKeyCallback&&await this._authKeyCallback(this.authKey,this._dcId)}this._userConnected=!0,this.isReconnecting=!1,this._sendLoopHandle||(this._log.debug("Starting send loop"),this._sendLoopHandle=this._sendLoop()),this._recvLoopHandle||(this._log.debug("Starting receive loop"),this._recvLoopHandle=this._recvLoop()),!this._longPollLoopHandle&&e.shouldLongPoll&&(this._log.debug("Starting long-poll loop"),this._longPollLoopHandle=this._longPollLoop()),this._log.info("Connection to %s complete!".replace("%s",e.toString()))}_disconnect(e){this._isExported||this._updateCallback?.(new Dt(Dt.disconnected)),void 0!==e?(this._log.info("Disconnecting from %s...".replace("%s",e.toString())),this._userConnected=!1,this._log.debug("Closing current connection..."),this.logWithIndex.warn("Disconnecting"),e.disconnect()):this._log.info("Not disconnecting (already have no connection)")}async _longPollLoop(){for(;this._userConnected&&!this.isReconnecting&&this._isFallback&&this.getConnection().shouldLongPoll;){await this._sendQueueLongPoll.wait();const e=this._sendQueueLongPoll.get();if(this.isReconnecting||!this._isFallback)return void(this._longPollLoopHandle=void 0);if(!e)continue;let{data:t}=e;const{batch:s}=e;this._log.debug(`Encrypting ${s.length} message(s) in ${t.length} bytes for sending`),t=await this._state.encryptMessageData(t);try{await(this._fallbackConnection?.send(t))}catch(e){return this._log.info("Connection closed while sending data"),console.error(e),this._longPollLoopHandle=void 0,this.isSendingLongPoll=!1,void(this.userDisconnected||this.reconnect())}this.isSendingLongPoll=!1,this.checkLongPoll()}this._longPollLoopHandle=void 0}async _sendLoop(){for(this._sendQueue.prepend(this._pendingState.values()),this._pendingState.clear();this._userConnected&&!this.isReconnecting;){const e=()=>{if(this._pendingAck.size){const e=new Kt(new Ce.MsgsAck({msgIds:Array(...this._pendingAck)}));this._sendQueue.append(e),this._lastAcks.push(e),this._lastAcks.length>=10&&this._lastAcks.shift(),this._pendingAck.clear()}};e(),this.logWithIndex.debug(`Waiting for messages to send... ${this.isReconnecting}`),this._log.debug(`Waiting for messages to send... ${this.isReconnecting}`),await this._sendQueue.wait(),this._isFallback&&this.send(new Ce.HttpWait({maxDelay:0,waitAfter:0,maxWait:0})),e();const t=this._sendQueue.get();if(this.logWithIndex.debug(`Got ${t?.batch.length} message(s) to send`),!t)continue;let{data:s}=t;const{batch:n}=t;for(const e of n)if(Array.isArray(e))for(const t of e)"request"===t.request.classType&&"HttpWait"!==t.request.className&&this._pendingState.set(t.msgId,t);else"request"===e.request.classType&&"HttpWait"!==e.request.className&&this._pendingState.set(e.msgId,e);if(this.isReconnecting)return this.logWithIndex.debug("Reconnecting :("),void(this._sendLoopHandle=void 0);this._log.debug(`Encrypting ${n.length} message(s) in ${s.length} bytes for sending`),this.logWithIndex.debug("Sending",n.map(e=>e.request.className)),s=await this._state.encryptMessageData(s);try{await this.getConnection().send(s)}catch(e){return this.logWithIndex.debug(`Connection closed while sending data ${e}`),this._log.info("Connection closed while sending data"),console.error(e),this._sendLoopHandle=void 0,void(this.userDisconnected||this.reconnect())}finally{for(const e of n)if(Array.isArray(e))for(const t of e)"HttpWait"===t.request.className&&e.resolve?.();else"HttpWait"===e.request.className&&e.resolve?.();this.logWithIndex.debug("Encrypted messages put in a queue to be sent"),this._log.debug("Encrypted messages put in a queue to be sent")}}this._sendLoopHandle=void 0}async _recvLoop(){let e,t;for(;this._userConnected&&!this.isReconnecting;){this._log.debug("Receiving items from the network..."),this.logWithIndex.debug("Receiving items from the network...");try{e=await this.getConnection().recv()}catch(e){return this.userDisconnected||(this._log.warn("Connection closed while receiving data"),console.error(e),this.reconnect()),void(this._recvLoopHandle=void 0)}try{t=await this._state.decryptMessageData(e)}catch(e){if(this.logWithIndex.debug(`Error while receiving items from the network ${e.toString()}`),e instanceof ze){this._log.info(`Type ${e.invalidConstructorId} not found, remaining data ${e.remaining.length} bytes`);continue}if(e instanceof $e){this._log.warn(`Security error while unpacking a received message: ${e.message}`);continue}return e instanceof Ke?(404===e.code?this._handleBadAuthKey():(this._log.warn(`Invalid buffer ${e.code} for dc ${this._dcId}`),this.reconnect()),void(this._recvLoopHandle=void 0)):(this._log.error("Unhandled error while receiving data"),console.error(e),this.reconnect(),void(this._recvLoopHandle=void 0))}try{await this._processMessage(t)}catch(e){e instanceof Me?"AUTH_KEY_UNREGISTERED"!==e.errorMessage&&"SESSION_REVOKED"!==e.errorMessage&&"USER_DEACTIVATED"!==e.errorMessage||this._handleBadAuthKey(!0):(this._log.error("Unhandled error while receiving data"),console.error(e))}this.checkLongPoll()}this._recvLoopHandle=void 0}checkLongPoll(){!this.isSendingLongPoll&&this._isFallback&&(this.isSendingLongPoll=!0,this.send(new Ce.HttpWait({maxDelay:500,waitAfter:150,maxWait:3e3}),void 0,!0))}_handleBadAuthKey(e){e&&this._isMainSender||(this._log.warn(`Broken authorization key for dc ${this._dcId}, resetting...`),this._isMainSender&&!this._isExported?this._updateCallback?.(new Dt(Dt.broken)):!this._isMainSender&&this._onConnectionBreak&&this._onConnectionBreak(this._dcId))}async _processMessage(e){if("MsgsAck"===e.obj.className)return;this.logWithIndex.debug(`Process message ${e.obj.className}`),this._pendingAck.add(e.msgId),this.getConnection().shouldLongPoll&&this._sendQueue.setReady?.(!0),e.obj=await e.obj;let t=this._handlers[e.obj.CONSTRUCTOR_ID];t||(t=this._handleUpdate.bind(this)),await t(e)}_popStates(e){const t=this._pendingState.getAndDelete(e);if(t)return[t];const s=[];for(const t of this._pendingState.values())t.containerId===e&&s.push(t.msgId);if(s.length){const e=[];for(const t of s)e.push(this._pendingState.getAndDelete(t));return e}for(const t of this._lastAcks)if(t.msgId===e)return[t];return[]}_handleRPCResult(e){const t=e.obj,s=this._pendingState.getAndDelete(t.reqMsgId);if(this._log.debug(`Handling RPC result for message ${t.reqMsgId}`),s){if(t.error){const e=function(e,t){for(const[s,n]of We){const a=e.errorMessage.match(s);if(a)return new n({request:t,capture:2===a.length?parseInt(a[1],10):void 0})}return new Me(e.errorMessage,t,e.errorCode)}(t.error,s.request);throw this._sendQueue.append(new Kt(new Ce.MsgsAck({msgIds:[s.msgId]}))),s.reject?.(e),e}try{const e=new it(t.body),n=s.request.readResult(e);this.logWithIndex.debug("Handling RPC result",n),s.resolve?.(n)}catch(e){throw s.reject?.(e),e}}else try{if(!(new it(t.body).tgReadObject()instanceof Ce.upload.File))throw new ze(0,$t.alloc(0))}catch(e){if(e instanceof ze)return void this._log.info(`Received response without parent request: ${t.body}`);if(this._isFallback)return;throw e}}async _handleContainer(e){this._log.debug("Handling container");for(const t of e.obj.messages)await this._processMessage(t)}async _handleGzipPacked(e){this._log.debug("Handling gzipped data");const t=new it(e.obj.data);e.obj=t.tgReadObject(),await this._processMessage(e)}_handleUpdate(e){2331323052===e.obj.SUBCLASS_OF_ID?(this._log.debug(`Handling update ${e.obj.className}`),this._isExported||this._updateCallback?.(e.obj)):this._log.warn(`Note: ${e.obj.className} is not an update, not dispatching it`)}_handlePong(e){const t=e.obj,s=this._state.updateTimeOffset(e.msgId);this._isExported||this._updateCallback?.(new Ut(s)),this._log.debug(`Handling pong for message ${t.msgId}`);const n=this._pendingState.getAndDelete(t.msgId);n&&n.resolve?.(t)}_handleBadServerSalt(e){const t=e.obj;this._log.debug(`Handling bad salt for message ${t.badMsgId}`),this._state.salt=t.newServerSalt;const s=this._popStates(t.badMsgId);this._sendQueue.extend(s),this._log.debug(`${s.length} message(s) will be resent`)}_handleBadNotification(e){const t=e.obj,s=this._popStates(t.badMsgId);var n;if(this._log.debug(`Handling bad msg ${n=t,JSON.stringify(n,(e,t)=>"bigint"==typeof t?t.toString():t)}`),[16,17].includes(t.errorCode)){const t=this._state.updateTimeOffset(e.msgId);this._isExported||this._updateCallback?.(new Ut(t)),this._log.info(`System clock is wrong, set time offset to ${t}s`)}else if(32===t.errorCode)this._state._sequence+=64;else{if(33!==t.errorCode){for(const e of s)e.reject(new Je(e.request,t.errorCode));return}this._state._sequence-=16}this._sendQueue.extend(s),this._log.debug(`${s.length} messages will be resent due to bad msg`)}_handleDetailedInfo(e){const t=e.obj.answerMsgId;this._log.debug(`Handling detailed info for message ${t}`),this._pendingAck.add(t)}_handleNewDetailedInfo(e){const t=e.obj.answerMsgId;this._log.debug(`Handling new detailed info for message ${t}`),this._pendingAck.add(t)}_handleNewSessionCreated(e){this._log.debug("Handling new session created"),this._state.salt=e.obj.serverSalt}_handleAck(){}_handleFutureSalts(e){this._log.debug(`Handling future salts for message ${e.msgId.toString()}`);const t=this._pendingState.getAndDelete(e.msgId);t&&t.resolve?.(e.obj)}_handleStateForgotten(e){this._sendQueue.append(new Kt(new Ce.MsgsStateInfo({reqMsgId:e.msgId,info:String.fromCharCode(1).repeat(e.obj.msgIds)})))}_handleMsgAll(e){}reconnect(){this._userConnected&&!this.isReconnecting&&(this.isReconnecting=!0,ee(1e3).then(()=>{this.logWithIndex.log("Reconnecting..."),this._log.info("Started reconnecting"),this._reconnect()}))}async _reconnect(){const e=this._connection,t=this._fallbackConnection;this._log.debug("Closing current connection...");try{this.logWithIndex.warn("[Reconnect] Closing current connection..."),e&&this._disconnect(e),t&&this._disconnect(t)}catch(e){this._log.warn(e)}this._sendQueue.append(void 0),this._state.reset();const s=new e.constructor({ip:e._ip,port:e._port,dcId:e._dcId,loggers:e._log,isTestServer:e._isTestServer,isPremium:e._isPremium}),n=new this._fallbackConnection.constructor({ip:e._ip,port:e._port,dcId:e._dcId,loggers:e._log,isTestServer:e._isTestServer,isPremium:e._isPremium});await this.connect(s,!0,n),this.isReconnecting=!1,this._sendQueue.prepend(this._pendingState.values()),this._pendingState.clear(),this._autoReconnectCallback&&await this._autoReconnectCallback()}}var Qt=s(48287).hp;const Xt=Qt.from("ffd8ffe000104a46494600010100000100010000ffdb004300281c1e231e19282321232d2b28303c64413c37373c7b585d4964918099968f808c8aa0b4e6c3a0aadaad8a8cc8ffcbdaeef5ffffff9bc1fffffffaffe6fdfff8ffdb0043012b2d2d3c353c76414176f8a58ca5f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8ffc00011080000000003012200021101031101ffc4001f0000010501010101010100000000000000000102030405060708090a0bffc400b5100002010303020403050504040000017d01020300041105122131410613516107227114328191a1082342b1c11552d1f02433627282090a161718191a25262728292a3435363738393a434445464748494a535455565758595a636465666768696a737475767778797a838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae1e2e3e4e5e6e7e8e9eaf1f2f3f4f5f6f7f8f9faffc4001f0100030101010101010101010000000000000102030405060708090a0bffc400b51100020102040403040705040400010277000102031104052131061241510761711322328108144291a1b1c109233352f0156272d10a162434e125f11718191a262728292a35363738393a434445464748494a535455565758595a636465666768696a737475767778797a82838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae2e3e4e5e6e7e8e9eaf2f3f4f5f6f7f8f9faffda000c03010002110311003f00","hex"),Yt=Qt.from("ffd9","hex");function Zt(e,t=!0,s=!0){if(e instanceof Ce.User){if(e.self&&t)return new Ce.InputPeerSelf;if(void 0===e.accessHash&&s)throw new Error("User without accessHash or min info cannot be input");return new Ce.InputPeerUser({userId:e.id,accessHash:e.accessHash})}if(e instanceof Ce.Chat||e instanceof Ce.ChatEmpty||e instanceof Ce.ChatForbidden)return new Ce.InputPeerChat({chatId:e.id});if(e instanceof Ce.Channel){if(void 0===e.accessHash&&s)throw new TypeError("Channel without accessHash or min info cannot be input");return new Ce.InputPeerChannel({channelId:e.id,accessHash:e.accessHash})}return e instanceof Ce.ChannelForbidden?new Ce.InputPeerChannel({channelId:e.id,accessHash:e.accessHash}):(e instanceof Ce.UserEmpty||function(e){throw new Error(`Cannot cast ${e.className} to any kind of InputPeer`)}(e),new Ce.InputPeerEmpty)}function es(e){if(e.length<3||1!==e[0])return e;const t=Qt.from(Xt);return t[164]=e[1],t[166]=e[2],Qt.concat([t,e.slice(3),Yt])}function ts(e,t=!1){switch(e){case 1:return{id:1,ipAddress:`zws1${t?"-1":""}.web.telegram.org`,port:443};case 2:return{id:2,ipAddress:`zws2${t?"-1":""}.web.telegram.org`,port:443};case 3:return{id:3,ipAddress:`zws3${t?"-1":""}.web.telegram.org`,port:443};case 4:return{id:4,ipAddress:`zws4${t?"-1":""}.web.telegram.org`,port:443};case 5:return{id:5,ipAddress:`zws5${t?"-1":""}.web.telegram.org`,port:443};default:throw new Error(`Cannot find the DC with the ID of ${e}`)}}class ss{}class ns extends ss{constructor(){super(),this._serverAddress=void 0,this._dcId=0,this._port=void 0,this._takeoutId=void 0,this._isTestServer=!1,this._entities=new Set}get dcId(){return this._dcId}get serverAddress(){return this._serverAddress}get port(){return this._port}get isTestServer(){return this._isTestServer}setDC(e,t,s,n){this._dcId=0|e,this._serverAddress=t,this._port=s,this._isTestServer=n}getAuthKey(e){return new Ht}setAuthKey(e,t){}async load(){}save(){}delete(){}}var as=s(48287).hp;class is extends ns{constructor(e,t){super(),this._sessionData=e,this._callback=t,this._authKeys={}}async load(){if(!this._sessionData)return;const{mainDcId:e,keys:t,isTest:s}=this._sessionData,{ipAddress:n,port:a}=ts(e);this.setDC(e,n,a,s,!0),await Promise.all(Object.keys(t).map(async e=>{const s=Number(e),n=as.from(t[s],"hex");this._authKeys[s]=new Ht,await this._authKeys[s].setKey(n)}))}setDC(e,t,s,n,a=!1){this._dcId=e,this._serverAddress=t,this._port=s,this._isTestServer=n,delete this._authKeys[e],a||this._onUpdate()}getAuthKey(e=this._dcId){return this._authKeys[e]}setAuthKey(e,t=this._dcId){this._authKeys[t]=e,this._onUpdate()}getSessionData(){const e={mainDcId:this._dcId,keys:{},isTest:this._isTestServer||void 0};return Object.keys(this._authKeys).forEach(t=>{const s=Number(t),n=this._authKeys[s];n?._key&&(e.keys[s]=n._key.toString("hex"))}),e}_onUpdate(){this._callback(this.getSessionData())}delete(){this._callback(void 0)}}var os=s(51072);function rs(e){if(void 0!==e)return Number(e)}var cs=s(48287).hp;function ds(e,t){if(!cs.from([199,28,174,185,198,177,201,4,142,108,82,47,112,241,63,115,152,13,64,35,142,62,33,193,73,52,208,55,86,61,147,15,72,25,138,10,167,193,64,88,34,148,147,210,37,48,244,219,250,51,111,110,10,201,37,19,149,67,174,212,76,206,124,55,32,253,81,246,148,88,112,90,198,140,212,254,107,107,19,171,220,151,70,81,41,105,50,132,84,241,143,175,140,89,95,100,36,119,254,150,187,42,148,29,91,205,29,74,200,204,73,136,7,8,250,155,55,142,60,79,58,144,96,190,230,124,249,164,164,166,149,129,16,81,144,126,22,39,83,181,107,15,107,65,13,186,116,216,168,75,42,20,179,20,78,14,241,40,71,84,253,23,237,149,13,89,101,180,185,221,70,88,45,177,23,141,22,156,107,196,101,176,214,255,156,163,146,143,239,91,154,228,228,24,252,21,232,62,190,160,248,127,169,255,94,237,112,5,13,237,40,73,244,123,249,89,217,86,133,12,233,41,133,31,13,129,21,246,53,177,5,238,46,78,21,208,75,36,84,191,111,79,173,240,52,177,4,3,17,156,216,227,185,47,204,91]).equals(e)||![3,4,5,7].includes(t))throw new Error("Changing passwords unsupported")}function us(e){return cs.concat([cs.alloc(256-e.length),e])}function ls(e){return L(e,256,!1)}function fs(e,t){const s=t-e;return!(s<0n||ce(s)<1984||ce(e)<1984||Math.floor((ce(e)+7)/8)>256)}function gs(e,t){const s=Math.min(e.length,t.length);for(let n=0;n<s;n++)e[n]^=t[n];return e}async function ps(e,t){const s=await J(cs.concat([e.salt1,cs.from(t,"utf-8"),e.salt1])),n=await J(cs.concat([e.salt2,s,e.salt2])),a=await function(e,t,s){return async function(e,t,s){const n=await crypto.subtle.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]);return D.from(await crypto.subtle.deriveBits({name:"PBKDF2",hash:"SHA-512",salt:t,iterations:s},n,512))}(e,t,s)}(n,e.salt1,1e5);return J(cs.concat([e.salt2,a,e.salt2]))}async function hs(e,t){try{ds(e.p,e.g)}catch(e){throw new Error("bad p/g in password")}return ls(Q(BigInt(e.g),q(await ps(e,t),!1),q(e.p,!1)))}async function ms(e,t){const s=e.currentAlgo;if(!(s instanceof Ce.PasswordKdfAlgoSHA256SHA256PBKDF2HMACSHA512iter100000SHA256ModPow))throw new Error(`Unsupported password algorithm ${s?.className}`);const n=e.srp_B,a=e.srpId;if(!n||!a)throw new Error(`Undefined srp_b  ${e.className}`);const i=await ps(s,t),o=q(s.p,!1),{g:r}=s,c=q(n,!1);try{ds(s.p,r)}catch(e){throw new Error("bad p/g in password")}if(!function(e,t){return e>0n&&e<t}(c,o))throw new Error("bad b in check");const d=q(i,!1),u=us(s.p),l=ls(BigInt(r)),f=us(n),g=Q(BigInt(r),d,o),p=O(q(await J(cs.concat([u,l])),!1)*g,o),{a:h,aForHash:m,u:y}=await(async()=>{for(;;){const e=q(j(256),!1),t=Q(BigInt(r),e,o);if(fs(t,o)){const s=ls(t),n=q(await J(cs.concat([s,f])),!1);if(n>0n)return{a:e,aForHash:s,u:n}}}})(),_=O(c-p,o);if(!fs(_,o))throw new Error("bad gB");const b=Q(_,h+y*d,o),[S,w,I,v,P]=await Promise.all([J(ls(b)),J(u),J(l),J(s.salt1),J(s.salt2)]),C=await J(cs.concat([gs(w,I),v,P,m,f,S]));return new Ce.InputCheckPasswordSRP({srpId:a,A:m,M1:C})}var ys=s(48287).hp,_s=s(48287).hp;function bs(e){const t=function(e){return e.replace(/-/g,"+").replace(/_/g,"/")+(e.length%4==0?"":"=".repeat(4-e.length%4))}(e);return _s.from(t,"base64")}function Ss(e){return bs(e).toString("utf-8")}let ws=0;function Is(){return ws}function vs(){return Math.floor(Date.now()/1e3)+ws}let Ps=function(e){return e.Bold="MessageEntityBold",e.Blockquote="MessageEntityBlockquote",e.BotCommand="MessageEntityBotCommand",e.Cashtag="MessageEntityCashtag",e.Code="MessageEntityCode",e.Email="MessageEntityEmail",e.Hashtag="MessageEntityHashtag",e.Italic="MessageEntityItalic",e.MentionName="MessageEntityMentionName",e.Mention="MessageEntityMention",e.Phone="MessageEntityPhone",e.Pre="MessageEntityPre",e.Strike="MessageEntityStrike",e.TextUrl="MessageEntityTextUrl",e.Url="MessageEntityUrl",e.Underline="MessageEntityUnderline",e.Spoiler="MessageEntitySpoiler",e.CustomEmoji="MessageEntityCustomEmoji",e.Timestamp="MessageEntityTimestamp",e.QuoteFocus="MessageEntityQuoteFocus",e.Unknown="MessageEntityUnknown",e}({});const Cs=-1;let Ms=function(e){return e[e.BlobUrl=0]="BlobUrl",e[e.Progressive=1]="Progressive",e[e.DownloadUrl=2]="DownloadUrl",e[e.Text=3]="Text",e}({});function As(e,t){return e.reduce((e,s)=>(e[s[t]]=s,e),{})}function Rs(e,t){return e.reduce((e,s)=>{const[n,a]=t(s);return e[n]=a,e},{})}function ks(e,t){return t.reduce((t,s)=>(t[s]=e[s],t),{})}function Ts(e,t){return t.reduce((t,s)=>(e[s]&&(t[s]=e[s]),t),{})}function Bs(e,t){const s=new Set(t.map(String));return ks(e,Object.keys(e).filter(e=>!s.has(e)))}function Ds(e){return Object.keys(e).reduce((t,s)=>{const n=s;return void 0!==e[n]&&(t[n]=e[n]),t},{})}function Us(e){return e.filter(Boolean)}function Es(e,t){const s=[];for(let n=0;n<e.length;n+=t)s.push(e.slice(n,n+t));return s}var xs=s(55962);const Vs="SharedWorker"in globalThis,Gs=(Intl,new URL("tg://host").host,(0,xs.isTauri)(),Boolean(globalThis.electron),"undefined"!=typeof WorkerGlobalScope&&globalThis.self instanceof WorkerGlobalScope?globalThis.self.name:void 0),Fs=(Gs?Number(new URLSearchParams(Gs).get(i)):void 0)||(Vs?function(e){const t=new URL(e).searchParams.get(i),s=t?Number(t):1;return!s||Number.isNaN(s)||1===s?void 0:s}(globalThis.location.href):void 0),Ns=`tt-global_${Fs||1}`;if("object"==typeof window){const e=new BroadcastChannel("tt-version");e.postMessage({version:"12.0.18"}),e.addEventListener("message",t=>{const{version:s}=t.data;s&&(-1===qs("12.0.18",s)&&window.location.reload(),1===qs("12.0.18",s)&&e.postMessage({version:"12.0.18"}))})}function qs(e,t){return e.startsWith(`${t}-`)?-1:t.startsWith(`${e}-`)?1:e.localeCompare(t,void 0,{numeric:!0,sensitivity:"case",caseFirst:"upper"})}function Hs(e,t=!1,s="image/jpeg"){return`${t?"":`data:${s};base64,`}${btoa(String.fromCharCode(...e))}`}function Ls(e){const{flags:t,CONSTRUCTOR_ID:s,SUBCLASS_OF_ID:n,className:a,classType:i,getBytes:o,...r}=e;return r}var Os=s(48287).hp;const js=new BroadcastChannel(Ns);let Ws=[];const zs=A(()=>{js.postMessage({type:"localDbUpdate",batchedUpdates:Ws}),Ws=[]},100);function Ks(e){if(e instanceof Uint8Array)return Os.from(e);if("object"==typeof e&&1===Object.keys(e).length&&"value"===Object.keys(e)[0])return BigInt(e.value);if(Array.isArray(e))return e.map(Ks);if("object"!=typeof e||!("CONSTRUCTOR_ID"in e))return e;const t=e.className.split(".").reduce((e,t)=>e[t],Ce),s=Ls(e);return new t(Object.keys(s).reduce((e,t)=>(e[t]=Ks(s[t]),e),{}))}function $s(e){return["localMessages","chats","users","messages","documents","stickerSets","photos","webDocuments","stories","commonBoxState","channelPtsById"].reduce((t,s)=>{const n=e?.[s]??{},a=Object.keys(n).reduce((e,t)=>{if("commonBoxState"===s||"channelPtsById"===s){const s=n;return e[t]=s[t],e}return e[t]=Ks(n[t]),e},{});var i;return t[s]=(i=s,new Proxy(a,{get:(e,t,s)=>Reflect.get(e,t,s),set:(e,t,s)=>(Ws.push({name:i,prop:t,value:s}),zs(),Reflect.set(e,t,s))})),t},{})}const Js=$s(),Qs=Js;function Xs(){js&&js.postMessage({type:"localDbUpdateFull",localDb:Object.keys(Js).reduce((e,t)=>(e[t]={...Js[t]},e),{})})}var Ys=s(48287).hp;const Zs="";function en(e){const t=BigInt(e);return t>0n?"user":t<-1000000000000n?"channel":"chat"}function tn(e){const t=en(e);return"user"===t?new Ce.PeerUser({userId:Cn(e,"user")}):"channel"===t?new Ce.PeerChannel({channelId:Cn(e,"channel")}):new Ce.PeerChat({chatId:Cn(e,"chat")})}function sn(e,t){const s=en(e);return"user"===s?new Ce.InputPeerUser({userId:Cn(e,"user"),accessHash:BigInt(t)}):"channel"===s?new Ce.InputPeerChannel({channelId:Cn(e,"channel"),accessHash:BigInt(t)}):new Ce.InputPeerChat({chatId:Cn(e,"chat")})}function nn(e,t){return t?new Ce.InputUser({userId:Cn(e,"user"),accessHash:BigInt(t)}):new Ce.InputUserEmpty}function an(e,t){return t?new Ce.InputChannel({channelId:Cn(e,"channel"),accessHash:BigInt(t)}):new Ce.InputChannelEmpty}function on(e){return BigInt(e.slice(1))}function rn(e,t){if(e)return new Ce.PaidReactionPrivacyAnonymous;if(t){const e=cn(t);if(e)return new Ce.PaidReactionPrivacyPeer({peer:e})}return new Ce.PaidReactionPrivacyDefault}function cn(e){const t=en(e);let s;if("user"===t){if(s=Qs.users[e]?.accessHash,!s)return}else if("channel"===t&&(s=Qs.chats[e]?.accessHash,!s))return;return sn(e,String(s))}function dn(e,t){return new Ce.InputStickerSetID({id:BigInt(e),accessHash:BigInt(t)})}function un(e){const t=Qs.documents[e.id];if(t)return new Ce.InputDocument(ks(t,["id","accessHash","fileReference"]))}function ln(e){const t=un(e);if(t)return new Ce.InputMediaDocument({id:t})}function fn(e,t=!1){return new Ce.InputMediaPoll({poll:new Ce.Poll({id:BigInt(e.id),publicVoters:e.summary.isPublic,question:Un(e.summary.question),answers:e.summary.answers.map(({text:e,option:t})=>new Ce.PollAnswer({text:Un(e),option:Ga(t)})),quiz:e.summary.quiz,multipleChoice:e.summary.multipleChoice,closeDate:e.summary.closeDate,closePeriod:e.summary.closePeriod,closed:!!t||e.summary.closed}),correctAnswers:e.results.results?.filter(e=>e.isCorrect).map(e=>Ga(e.option)),solution:e.results.solution,solutionEntities:e.results.solutionEntities?.map(mn)})}function gn(e){const{title:t,items:s}=e.todo,n=s.map(e=>new Ce.TodoItem({id:e.id,title:Un(e.title)})),a=new Ce.TodoList({title:Un(t),list:n,othersCanAppend:e.todo.othersCanAppend||void 0,othersCanComplete:e.todo.othersCanComplete||void 0});return new Ce.InputMediaTodo({todo:a})}function pn(){const e=j(8),t=Ys.allocUnsafe(4);return t.writeUInt32LE(Math.floor(Date.now()/1e3),0),e.set(t,4),q(e,!0,!0)}function hn(e,t,s){return new Ce.Message({id:e,peerId:tn(t),fromId:tn(t),media:s.media})}function mn(e){const{type:t,offset:s,length:n}=e,a="userId"in e?Qs.users[e.userId]:void 0;switch(t){case Ps.Bold:return new Ce.MessageEntityBold({offset:s,length:n});case Ps.Italic:return new Ce.MessageEntityItalic({offset:s,length:n});case Ps.Underline:return new Ce.MessageEntityUnderline({offset:s,length:n});case Ps.Strike:return new Ce.MessageEntityStrike({offset:s,length:n});case Ps.Code:return new Ce.MessageEntityCode({offset:s,length:n});case Ps.Pre:return new Ce.MessageEntityPre({offset:s,length:n,language:e.language||""});case Ps.Blockquote:return new Ce.MessageEntityBlockquote({offset:s,length:n});case Ps.TextUrl:return new Ce.MessageEntityTextUrl({offset:s,length:n,url:e.url});case Ps.Url:return new Ce.MessageEntityUrl({offset:s,length:n});case Ps.Hashtag:return new Ce.MessageEntityHashtag({offset:s,length:n});case Ps.MentionName:return new Ce.InputMessageEntityMentionName({offset:s,length:n,userId:new Ce.InputUser({userId:BigInt(a.id),accessHash:a.accessHash})});case Ps.Spoiler:return new Ce.MessageEntitySpoiler({offset:s,length:n});case Ps.CustomEmoji:return new Ce.MessageEntityCustomEmoji({offset:s,length:n,documentId:BigInt(e.documentId)});default:return new Ce.MessageEntityUnknown({offset:s,length:n})}}function yn(e){const t=Qs.photos[e?.id];if(t)return new Ce.InputPhoto(ks(t,["id","accessHash","fileReference"]))}function _n({phone:e,firstName:t,lastName:s}){return new Ce.InputPhoneContact({clientId:1n,phone:e,firstName:t,lastName:s})}function bn(e,t=0){return new Ce.ChatBannedRights({...e,untilDate:t})}function Sn(e){return new Ce.ChatAdminRights(e)}function wn(e){const{shippingAddress:t}=e;return new Ce.PaymentRequestedInfo({...e,shippingAddress:t?new Ce.PostAddress(t):void 0})}function In(e){switch(e){case"phoneNumber":return new Ce.InputPrivacyKeyPhoneNumber;case"addByPhone":return new Ce.InputPrivacyKeyAddedByPhone;case"lastSeen":return new Ce.InputPrivacyKeyStatusTimestamp;case"profilePhoto":return new Ce.InputPrivacyKeyProfilePhoto;case"forwards":return new Ce.InputPrivacyKeyForwards;case"chatInvite":return new Ce.InputPrivacyKeyChatInvite;case"phoneCall":return new Ce.InputPrivacyKeyPhoneCall;case"phoneP2P":return new Ce.InputPrivacyKeyPhoneP2P;case"voiceMessages":return new Ce.InputPrivacyKeyVoiceMessages;case"bio":return new Ce.InputPrivacyKeyAbout;case"birthday":return new Ce.InputPrivacyKeyBirthday;case"gifts":return new Ce.InputPrivacyKeyStarGiftsAutoSave;case"noPaidMessages":return new Ce.InputPrivacyKeyNoPaidMessages}}function vn(e){switch(e){case"spam":return new Ce.InputReportReasonSpam;case"violence":return new Ce.InputReportReasonViolence;case"childAbuse":return new Ce.InputReportReasonChildAbuse;case"pornography":return new Ce.InputReportReasonPornography;case"copyright":return new Ce.InputReportReasonCopyright;case"fake":return new Ce.InputReportReasonFake;case"geoIrrelevant":return new Ce.InputReportReasonGeoIrrelevant;case"illegalDrugs":return new Ce.InputReportReasonIllegalDrugs;case"personalDetails":return new Ce.InputReportReasonPersonalDetails;default:return new Ce.InputReportReasonOther}}function Pn(e){return new Ce.DataJSON({data:JSON.stringify(e)})}function Cn(e,t){const s=BigInt(e);return"user"===t?s:"channel"===t?-s-P:-1n*s}function Mn(e){return new Ce.InputGroupCall({id:BigInt(e.id),accessHash:BigInt(e.accessHash)})}function An({id:e,accessHash:t}){return new Ce.InputPhoneCall({id:BigInt(e),accessHash:BigInt(t)})}function Rn(e){if("stars"===e.type)return new Ce.InputStorePaymentStarsTopup({stars:BigInt(e.stars),currency:e.currency,amount:BigInt(e.amount),spendPurposePeer:e.spendPurposePeer?sn(e.spendPurposePeer.id,e.spendPurposePeer.accessHash):void 0});if("starsgift"===e.type)return new Ce.InputStorePaymentStarsGift({userId:nn(e.user.id,e.user.accessHash),stars:BigInt(e.stars),currency:e.currency,amount:BigInt(e.amount)});if("giftcode"===e.type)return new Ce.InputStorePaymentPremiumGiftCode({users:e.users.map(e=>nn(e.id,e.accessHash)),boostPeer:e.boostChannel?sn(e.boostChannel.id,e.boostChannel.accessHash):void 0,currency:e.currency,amount:BigInt(e.amount),message:e.message&&Un(e.message)});const t=W();return"starsgiveaway"===e.type?new Ce.InputStorePaymentStarsGiveaway({boostPeer:sn(e.chat.id,e.chat.accessHash),additionalPeers:e.additionalChannels?.map(e=>sn(e.id,e.accessHash)),stars:BigInt(e.stars),countriesIso2:e.countries,prizeDescription:e.prizeDescription,onlyNewSubscribers:e.isOnlyForNewSubscribers||void 0,winnersAreVisible:e.areWinnersVisible||void 0,untilDate:e.untilDate,currency:e.currency,amount:BigInt(e.amount),users:e.users,randomId:t}):new Ce.InputStorePaymentPremiumGiveaway({boostPeer:sn(e.chat.id,e.chat.accessHash),additionalPeers:e.additionalChannels?.map(e=>sn(e.id,e.accessHash)),countriesIso2:e.countries,prizeDescription:e.prizeDescription,onlyNewSubscribers:e.isOnlyForNewSubscribers||void 0,winnersAreVisible:e.areWinnersVisible||void 0,untilDate:e.untilDate,currency:e.currency,amount:BigInt(e.amount),randomId:t})}function kn(e){return new Ce.DisallowedGiftsSettings({disallowUnlimitedStargifts:e.shouldDisallowLimitedStarGifts,disallowLimitedStargifts:e.shouldDisallowUnlimitedStarGifts,disallowUniqueStargifts:e.shouldDisallowUniqueStarGifts,disallowPremiumGifts:e.shouldDisallowPremiumGifts})}function Tn(e){switch(e.type){case"message":return new Ce.InputInvoiceMessage({peer:sn(e.chat.id,e.chat.accessHash),msgId:e.messageId});case"slug":return new Ce.InputInvoiceSlug({slug:e.slug});case"stargiftResale":{const{peer:t,slug:s}=e;return new Ce.InputInvoiceStarGiftResale({toId:sn(t.id,t.accessHash),slug:s,ton:"TON"===e.currency||void 0})}case"stargift":{const{peer:t,shouldHideName:s,giftId:n,message:a,shouldUpgrade:i}=e;return new Ce.InputInvoiceStarGift({peer:sn(t.id,t.accessHash),hideName:s||void 0,giftId:BigInt(n),message:a&&Un(a),includeUpgrade:i})}case"stars":{const t=Rn(e.purpose);return new Ce.InputInvoiceStars({purpose:t})}case"premiumGiftStars":{const{user:t,message:s,months:n}=e;return new Ce.InputInvoicePremiumGiftStars({months:n,userId:nn(t.id,t.accessHash),message:s&&Un(s)})}case"starsgiveaway":{const t=Rn(e.purpose);return new Ce.InputInvoiceStars({purpose:t})}case"chatInviteSubscription":return new Ce.InputInvoiceChatInviteSubscription({hash:e.hash});case"stargiftUpgrade":return new Ce.InputInvoiceStarGiftUpgrade({stargift:Nn(e.inputSavedGift),keepOriginalDetails:e.shouldKeepOriginalDetails});case"stargiftTransfer":return new Ce.InputInvoiceStarGiftTransfer({stargift:Nn(e.inputSavedGift),toId:sn(e.recipient.id,e.recipient.accessHash)});case"stargiftDropOriginalDetails":return new Ce.InputInvoiceStarGiftDropOriginalDetails({stargift:Nn(e.inputSavedGift)});case"stargiftPrepaidUpgrade":return new Ce.InputInvoiceStarGiftPrepaidUpgrade({peer:sn(e.peer.id,e.peer.accessHash),hash:e.hash});case"stargiftAuctionBid":{const{giftId:t,bidAmount:s,peer:n,message:a,shouldHideName:i,isUpdateBid:o}=e;return new Ce.InputInvoiceStarGiftAuctionBid({giftId:BigInt(t),bidAmount:BigInt(s),peer:n&&sn(n.id,n.accessHash||""),message:a&&Un(a),hideName:i||void 0,updateBid:o||void 0})}default:{const s=Rn(e.purpose),n=(t=e.option,new Ce.PremiumGiftCodeOption({users:t.users,months:t.months,currency:t.currency,amount:BigInt(t.amount)}));return new Ce.InputInvoicePremiumGiftCode({purpose:s,option:n})}}var t}function Bn(e){switch(e?.type){case"emoji":return new Ce.ReactionEmoji({emoticon:e.emoticon});case"custom":return new Ce.ReactionCustomEmoji({documentId:BigInt(e.documentId)});case"paid":return new Ce.ReactionPaid;default:return new Ce.ReactionEmpty}}function Dn(e){return"collectible"===e.type?new Ce.InputEmojiStatusCollectible({collectibleId:BigInt(e.collectibleId),until:e.until}):"status-default-icon"===e.documentId?new Ce.EmojiStatusEmpty:new Ce.EmojiStatus({documentId:BigInt(e.documentId),until:e.until})}function Un(e){return new Ce.TextWithEntities({text:e.text,entities:e.entities?.map(mn)||[]})}function En(e){return new Ce.InputBotAppID({id:BigInt(e.id),accessHash:BigInt(e.accessHash)})}function xn(e){if("story"===e.type)return new Ce.InputReplyToStory({peer:cn(e.peerId),storyId:e.storyId});if("message"===e.type){const{replyToMsgId:t,replyToTopId:s,replyToPeerId:n,quoteText:a,quoteOffset:i,monoforumPeerId:o}=e;return new Ce.InputReplyToMessage({replyToMsgId:t,topMsgId:s,replyToPeerId:n?cn(n):void 0,monoforumPeerId:o?cn(o):void 0,quoteText:a?.text,quoteEntities:a?.entities?.map(mn),quoteOffset:i})}}function Vn(e){return"XTR"===e.currency?new Ce.StarsAmount({amount:BigInt(e.amount),nanos:e.nanos}):new Ce.StarsTonAmount({amount:BigInt(e.amount)})}function Gn(e){return new Ce.SuggestedPost({price:e.price&&Vn(e.price),scheduleDate:e.scheduleDate})}function Fn(e){const t=[];if(e.allowedUsers?.length&&t.push(new Ce.InputPrivacyValueAllowUsers({users:e.allowedUsers.map(({id:e,accessHash:t})=>nn(e,t))})),e.allowedChats?.length&&t.push(new Ce.InputPrivacyValueAllowChatParticipants({chats:e.allowedChats.map(({id:e,type:t})=>Cn(e,"chatTypeBasicGroup"===t?"chat":"channel"))})),e.blockedUsers?.length&&t.push(new Ce.InputPrivacyValueDisallowUsers({users:e.blockedUsers.map(({id:e,accessHash:t})=>nn(e,t))})),e.blockedChats?.length&&t.push(new Ce.InputPrivacyValueDisallowChatParticipants({chats:e.blockedChats.map(({id:e,type:t})=>Cn(e,"chatTypeBasicGroup"===t?"chat":"channel"))})),e.shouldAllowPremium&&t.push(new Ce.InputPrivacyValueAllowPremium),"allow"===e.botsPrivacy&&t.push(new Ce.InputPrivacyValueAllowBots),"disallow"===e.botsPrivacy&&t.push(new Ce.InputPrivacyValueDisallowBots),!e.isUnspecified)switch(e.visibility){case"everybody":t.push(new Ce.InputPrivacyValueAllowAll);break;case"contacts":t.push(new Ce.InputPrivacyValueAllowContacts);break;case"nonContacts":t.push(new Ce.InputPrivacyValueDisallowContacts);break;case"nobody":t.push(new Ce.InputPrivacyValueDisallowAll)}return t}function Nn(e){return"user"===e.type?new Ce.InputSavedStarGiftUser({msgId:e.messageId}):new Ce.InputSavedStarGiftChat({peer:sn(e.chat.id,e.chat.accessHash),savedId:BigInt(e.savedId)})}function qn(e){switch(e){case"stories":return new Ce.ProfileTabPosts;case"gifts":return new Ce.ProfileTabGifts;case"media":return new Ce.ProfileTabMedia;case"documents":return new Ce.ProfileTabFiles;case"audio":return new Ce.ProfileTabMusic;case"voice":return new Ce.ProfileTabVoice;case"links":return new Ce.ProfileTabLinks;case"gif":return new Ce.ProfileTabGifs;default:return e}}function Hn(e){let t;const s=Ss(e.response.clientDataJSON);if(e.response.attestationObject)t=new Ce.InputPasskeyResponseRegister({clientData:new Ce.DataJSON({data:s}),attestationData:bs(e.response.attestationObject)});else{const n=Ss(e.response.userHandle);t=new Ce.InputPasskeyResponseLogin({clientData:new Ce.DataJSON({data:s}),authenticatorData:bs(e.response.authenticatorData),signature:bs(e.response.signature),userHandle:n})}return new Ce.InputPasskeyCredentialPublicKey({id:e.id,rawId:e.rawId,response:t})}const Ln="phoneNumber";let On=Ln;function jn(e,t,s){const{initialMethod:n=Ln}=s;return Wn(e,t,s),"phoneNumber"===n?Kn(e,t,s):$n(e,t,s)}function Wn(e,t,s){s.hasPasskeySupport&&async function(e,t){const{apiId:s,apiHash:n}=t,a=await e.invoke(new Ce.auth.InitPasskeyLogin({apiId:s,apiHash:n}));if(a)try{return JSON.parse(a.options.data)}catch(e){}}(e,t).then(e=>{e&&s.onPasskeyOption(e)}).catch(e=>{})}async function zn(e,t=!1){try{return await e.invoke(new Ce.updates.GetState),!0}catch(e){if(e instanceof Error&&"Disconnect"===e.message||t)throw e;return!1}}async function Kn(e,t,s){let n,a,i,o=!1;for(On="phoneNumber";;)try{if("function"==typeof s.phoneNumber)try{n=await s.phoneNumber()}catch(n){if(n instanceof Error&&"RESTART_AUTH_WITH_QR"===n.message)return await $n(e,t,s);if(n instanceof Le)return await Jn(e,t,s,n.credentialJson);throw n}else n=s.phoneNumber;const i=await Qn(e,t,n,s.forceSMS);if(a=i.phoneCodeHash,o=i.isCodeViaApp,"string"!=typeof a)throw new Error("Failed to retrieve phone code hash");break}catch(e){if("function"!=typeof s.phoneNumber)throw e;s.onError(e)}let r,c=!1;for(;;)try{try{i=await s.phoneCode(o)}catch(n){if(n instanceof Error&&"RESTART_AUTH"===n.message)return Kn(e,t,s)}if(!i)throw new Error("Code is empty");const d=await e.invoke(new Ce.auth.SignIn({phoneNumber:n,phoneCodeHash:a,phoneCode:i}));if(d instanceof Ce.auth.AuthorizationSignUpRequired){c=!0,r=d.termsOfService;break}return d.user}catch(t){if(t instanceof Me&&"SESSION_PASSWORD_NEEDED"===t.errorMessage)return Xn(e,0,s);t instanceof Error?s.onError(t):console.warn("Unexpected error:",t)}if(c)for(;;)try{const[t,i]=await s.firstAndLastNames();if(!t)throw new Error("First name is required");const{user:o}=await e.invoke(new Ce.auth.SignUp({phoneNumber:n,phoneCodeHash:a,firstName:t,lastName:i||Zs}));return r&&await e.invoke(new Ce.help.AcceptTermsOfService({id:r.id})),o}catch(e){s.onError(e)}return s.onError(new Error("Auth failed")),Kn(e,t,s)}async function $n(e,t,s){let n=!1;const{apiId:a,apiHash:i}=t,o=s.accountIds?.map(e=>function(e){try{return BigInt(e)}catch(e){return}}(e)).filter(Boolean)||[];On="qrCode";const r=(async()=>{for(;!n;){const t=await e.invoke(new Ce.auth.ExportLoginToken({apiId:a,apiHash:i,exceptIds:o}));if(!(t instanceof Ce.auth.LoginToken))throw new Error("Unexpected");const{token:n,expires:r}=t;await Promise.race([s.qrCode({token:n,expires:r}),ee(1e3*(r-vs()))])}})(),c=new Promise(t=>{e.addEventHandler(e=>{e instanceof Ce.UpdateLoginToken&&t()},{build:e=>e})});try{await Promise.race([c,r])}catch(n){if(n instanceof Error&&"RESTART_AUTH"===n.message)return await Kn(e,t,s);if(n instanceof Le)return await Jn(e,t,s,n.credentialJson);throw n}finally{n=!0}try{const t=await e.invoke(new Ce.auth.ExportLoginToken({apiId:a,apiHash:i,exceptIds:o}));if(t instanceof Ce.auth.LoginTokenSuccess&&t.authorization instanceof Ce.auth.Authorization)return t.authorization.user;if(t instanceof Ce.auth.LoginTokenMigrateTo){await e._switchDC(t.dcId);const s=await e.invoke(new Ce.auth.ImportLoginToken({token:t.token}));if(s instanceof Ce.auth.LoginTokenSuccess&&s.authorization instanceof Ce.auth.Authorization)return s.authorization.user}}catch(t){if(t instanceof Me&&"SESSION_PASSWORD_NEEDED"===t.errorMessage)return Xn(e,0,s);throw t}throw void 0}async function Jn(e,t,s,n){try{if(!n.response.userHandle)throw new Error("User handle is empty");const t=Ss(n.response.userHandle),[a,i]=t.split(":");if(!a||!i||isNaN(Number(a)))throw new Error("Unexpected user handle format");const o=Number(a);if(s.accountIds?.includes(i))throw new Oe(i);const r=e.session.dcId,c=e.session.getAuthKey(r).keyId,d=c?BigInt.asIntN(64,c):void 0,u=r!==o;u&&await e._switchDC(o);const l=await e.invoke(new Ce.auth.FinishPasskeyLogin({credential:Hn(n),fromDcId:u?r:void 0,fromAuthKeyId:u?d:void 0}));if(l instanceof Ce.auth.Authorization)return l.user;throw new Error("Unexpected sign up in passkey login")}catch(n){Wn(e,t,s);const a=n instanceof je;if(a&&s.onError(n),n instanceof Error){if("RESTART_AUTH"===n.message||a&&"phoneNumber"===On)return Kn(e,t,s);if("RESTART_AUTH_WITH_QR"===n.message||a&&"qrCode"===On)return $n(e,t,s)}if(n instanceof Me&&"SESSION_PASSWORD_NEEDED"===n.errorMessage)return Xn(e,0,s);throw n instanceof Error&&s.onError(n),n}}async function Qn(e,t,s,n=!1){try{const{apiId:a,apiHash:i}=t,o=await e.invoke(new Ce.auth.SendCode({phoneNumber:s,apiId:a,apiHash:i,settings:new Ce.CodeSettings}));if(!(o instanceof Ce.auth.SentCode))throw Error("Unexpected SentCodeSuccess");if(!n||o.type instanceof Ce.auth.SentCodeTypeSms)return{phoneCodeHash:o.phoneCodeHash,isCodeViaApp:o.type instanceof Ce.auth.SentCodeTypeApp};const r=await e.invoke(new Ce.auth.ResendCode({phoneNumber:s,phoneCodeHash:o.phoneCodeHash}));if(!(r instanceof Ce.auth.SentCode))throw Error("Unexpected SentCodeSuccess");return{phoneCodeHash:r.phoneCodeHash,isCodeViaApp:r.type instanceof Ce.auth.SentCodeTypeApp}}catch(a){if(a instanceof Me&&"AUTH_RESTART"===a.errorMessage)return Qn(e,t,s,n);throw a}}async function Xn(e,t,s,n=!1){for(;;)try{const t=await e.invoke(new Ce.account.GetPassword),a=await s.password(t.hint,n);if(!a)throw new Error("Password is empty");const i=await ms(t,a),{user:o}=await e.invoke(new Ce.auth.CheckPassword({password:i}));return o}catch(e){s.onError(e)}}const Yn=9437184,Zn={};function ea(e,t){Zn[e]||(Zn[e]=new sa);const s=Zn[e];return s.updateIsPremium(t),s}class ta{queuedRequests=[];priorityQueuedRequests=[];activeRequestHeapSize=0;queuedRequestHeapSize=0;constructor(e){this.maxRequestHeapSize=e}requestWorker(e,t){if(this.activeRequestHeapSize+e>this.maxRequestHeapSize){const s=new zt,n={deferred:s,requestSize:e};return t?this.priorityQueuedRequests.push(n):this.queuedRequests.push(n),this.queuedRequestHeapSize+=e,s.promise}return this.activeRequestHeapSize+=e,Promise.resolve()}releaseWorker(e){for(this.activeRequestHeapSize-=e;this.queueLength>0;){const e=this.priorityQueuedRequests[0]||this.queuedRequests[0];if(!e)break;if(!(this.activeRequestHeapSize+e.requestSize<=this.maxRequestHeapSize))break;{const e=this.priorityQueuedRequests.shift()||this.queuedRequests.shift();this.queuedRequestHeapSize-=e.requestSize,this.activeRequestHeapSize+=e.requestSize,e.deferred.resolve()}}}canAccept(e){return this.activeRequestHeapSize+e<=this.maxRequestHeapSize}get queueLength(){return this.queuedRequests.length+this.priorityQueuedRequests.length}}class sa{foremans=[];maxConnections=3;maxActiveSize=Yn;queuedRequests=[];priorityQueuedRequests=[];activeRequestSize=0;constructor(){const e=Math.max(3,6);this.foremans=Array(e).fill(void 0).map(()=>new ta(3495253.3333333335))}updateIsPremium(e){this.maxConnections=e?6:3,this.maxActiveSize=e?20971520:Yn}async requestWorker(e,t){if(this.activeRequestSize+t>this.maxActiveSize){const s=new zt,n={deferred:s,requestSize:t};e?this.priorityQueuedRequests.push(n):this.queuedRequests.push(n),await s.promise;const a=this.getFreeForemanIndex(t),i=this.foremans[a];return await i.requestWorker(t,e),a}const s=this.getFreeForemanIndex(t),n=this.foremans[s];return await n.requestWorker(t,e),this.activeRequestSize+=t,s}releaseWorker(e,t){this.activeRequestSize-=t,this.foremans[e].releaseWorker(t),this.processQueue()}processQueue(){for(;;){const e=this.priorityQueuedRequests[0]||this.queuedRequests[0];if(!e)return;if(this.activeRequestSize+e.requestSize>this.maxActiveSize)return;const t=this.priorityQueuedRequests.shift()||this.queuedRequests.shift();this.activeRequestSize+=t.requestSize,t.deferred.resolve()}}getFreeForemanIndex(e){let t=1/0,s=0;for(let n=0;n<this.maxConnections;n++){const a=this.foremans[n];if(a.canAccept(e))return n;const i=a.activeRequestHeapSize+a.queuedRequestHeapSize;i<t&&(t=i,s=n)}return s}getForeman(e){return this.foremans[e]}get queueLength(){return this.queuedRequests.length+this.priorityQueuedRequests.length}}class na{constructor(e){this.isUpload=e}}var aa=s(48287).hp;const ia=4096,oa=1048576;class ra{constructor(e){this.size=e,this.type=e&&e>self.maxBufferSize?"opfs":"memory"}async init(){if("opfs"===this.type){if(!FileSystemFileHandle?.prototype.createSyncAccessHandle)throw new Error("`createSyncAccessHandle` is not available. Cannot download files larger than 2GB.");const e=await navigator.storage.getDirectory(),t=await e.getDirectoryHandle("downloads",{create:!0});this.largeFile=await t.getFileHandle(Math.random().toString(),{create:!0}),this.largeFileAccessHandle=await this.largeFile.createSyncAccessHandle()}else this.buffer=this.size?aa.alloc(this.size):aa.alloc(0)}write(e,t){if("opfs"!==this.type){if(this.size){if(t+e.length>this.buffer.length){if(t>=this.buffer.length)return;const s=this.buffer.length-t;return void this.buffer.set(e.subarray(0,s),t)}return void this.buffer.set(e,t)}this.buffer=aa.concat([this.buffer,e])}else this.largeFileAccessHandle.write(e,{at:t})}async getData(){return"opfs"===this.type?this.largeFile.getFile():Promise.resolve(this.buffer)}}async function ca(e,t,s,n){let{partSizeKb:a,end:i=0}=s;const{fileSize:o,dcId:r,progressCallback:c,isPriority:d,start:u=0}=s,l="id"in t?t.id:void 0,f=(...e)=>{n&&console.log(` [${l?.toString()}/${s.dcId}]`,...e)};f("Downloading file...");const g=Boolean(e.isPremium);o&&(i=i&&i<o?i:o-1);const p=i?i-u+1:void 0;a||(a=o?function(e){if(e<=65536)return 64;if(e<=104857600)return 128;if(e<=786432e3)return 256;if(e<=2097152e3)return 512;if(e<=4194304e3)return 1024;throw new Error("File size too large")}(p||o):64);const h=1024*a,m=p?Math.ceil(p/h):1,y=!i;let _;if(h%ia!==0)throw new Error("The part size must be evenly divisible by 4096");e._log.info(`Downloading file in chunks of ${h} bytes`);const b=new ra(p),S=[];let w=u,I=!1,v=0;c?.(v);let P=!1;await b.init();const C=ea(r,g);for(;;){let s=h,a=!1;if(Math.floor(w/oa)!==Math.floor((w+s-1)/oa)&&(s=oa-w%oa,a=!0),w%ia===0&&s%ia===0||(a=!0),_&&await _.promise,y&&(_=new zt),I)break;const o=await C.requestWorker(Boolean(d),s),l=(...e)=>{f(`[${o}/${r}]`,...e)};if(c?.isCanceled){I=!0,C.releaseWorker(o,s),_?.resolve();break}if(S.push((async(s,o,d)=>{for(;;){let f;try{let p=!1;n&&setTimeout(()=>{p||l(` getSender took too long ${s}`)},8e3),f=await e.getSender(r,d,g),p=!0;let h=!1;n&&setTimeout(()=>{h||l(` sender.send took too long ${s}`)},6e3);const y=await Promise.race([f.send(new Ce.upload.GetFile({location:t,offset:BigInt(s),limit:o,precise:a||void 0})),ee(6e4).then(()=>r===e.session.dcId?(l(`Download timed out ${s}`),Promise.reject(new Error("USER_CANCELED"))):(l(`Download timed out [not main] ${s}`),Promise.reject(new Error("SESSION_REVOKED"))))]);if(e.releaseExportedSender(f),y instanceof Ce.upload.FileCdnRedirect)throw new Error("CDN download not supported");if(h=!0,c){if(c.isCanceled)throw new Error("USER_CANCELED");v+=1/m,l(` ${100*v}%`),c(v)}return!i&&y.bytes.length<o&&(I=!0),C.releaseWorker(d,o),_&&_.resolve(),void b.write(y.bytes,s-u)}catch(t){if(f&&!f.isConnected()){await ee(1e3);continue}if(t instanceof Ee){t instanceof xe&&!P&&(f?._updateCallback(new na(!1)),P=!0),await ee(1e3*t.seconds);continue}throw l(`Ended not gracefully ${s}`),C.releaseWorker(d,o),_&&_.resolve(),I=!0,f&&e.releaseExportedSender(f),t}}})(w,s,o)),w+=s,i&&w>i)break}return await Promise.all(S),b.getData()}var da=s(48287).hp;var ua=s(48287).hp;const la=131072,fa=["u","v","w","y","d","x","c","m","b","a","s","f","i","j"];class ga{static DEFAULT_OPTIONS={connection:Bt,fallbackConnection:Pt,useIPV6:!1,timeout:10,requestRetries:5,connectionRetries:1/0,connectionRetriesToFallback:1,retryDelay:1e3,retryMainConnectionDelay:1e4,autoReconnect:!0,sequentialUpdates:!1,floodSleepLimit:60,deviceModel:void 0,systemVersion:void 0,appVersion:void 0,langCode:"en",langPack:"weba",systemLangCode:"en",baseLogger:"gramjs",useWSS:!1,additionalDcsDisabled:!1,dcId:2,isTestServerRequested:!1,shouldAllowHttpTransport:!1,shouldForceHttpTransport:!1,shouldDebugExportedSenders:!1};_exportedSenderPromises={};_exportedSenderRefCounter={};_waitingForAuthKey={};_exportedSenderReleaseTimeouts={};_loopStarted=!1;_isSwitchingDc=!1;_destroyed=!1;_connectedDeferred=new zt;isPremium=!1;_lastRequest=Date.now();constructor(e,t,s,n=ga.DEFAULT_OPTIONS){if(!t||!s||!Number.isFinite(t))throw Error('Your API ID or Hash are invalid. Please read "Requirements" on README.md');const a={...ga.DEFAULT_OPTIONS,...n};if(this.apiId=t,this.apiHash=s,this.defaultDcId=a.dcId||2,this._useIPV6=a.useIPV6,this._shouldForceHttpTransport=a.shouldForceHttpTransport,this._shouldAllowHttpTransport=a.shouldAllowHttpTransport,this._shouldDebugExportedSenders=a.shouldDebugExportedSenders,"string"==typeof a.baseLogger?this._log=new ft:this._log=a.baseLogger,"string"!=typeof e&&e){if(!(e instanceof ss))throw new Error("The given session must be str or a session instance")}else try{throw new Error("not implemented")}catch(t){e=new ns}this.session=e,this.floodSleepLimit=a.floodSleepLimit,this._eventBuilders=[],this._requestRetries=a.requestRetries,this._connectionRetries=a.connectionRetries,this._connectionRetriesToFallback=a.connectionRetriesToFallback,this._retryDelay=a.retryDelay||0,this._retryMainConnectionDelay=a.retryMainConnectionDelay||0,this._timeout=a.timeout,this._autoReconnect=a.autoReconnect,this._connection=a.connection,this._fallbackConnection=a.fallbackConnection,this._initWith=e=>new Ce.InvokeWithLayer({layer:222,query:new Ce.InitConnection({apiId:this.apiId,deviceModel:a.deviceModel||os.type().toString()||"Unknown",systemVersion:a.systemVersion||os.release().toString()||"1.0",appVersion:a.appVersion||"1.0",langCode:a.langCode,langPack:a.langPack,systemLangCode:a.systemLangCode,query:e,proxy:void 0})}),this._args=a}async connect(){await this._initSession(),void 0===this._sender&&(this._sender=new Jt(this.session.getAuthKey(),{logger:this._log,dcId:this.session.dcId,retries:this._connectionRetries,retriesToFallback:this._connectionRetriesToFallback,shouldForceHttpTransport:this._shouldForceHttpTransport,shouldAllowHttpTransport:this._shouldAllowHttpTransport,delay:this._retryDelay,retryMainConnectionDelay:this._retryMainConnectionDelay,autoReconnect:this._autoReconnect,connectTimeout:this._timeout,authKeyCallback:this._authKeyCallback.bind(this),updateCallback:this._handleUpdate.bind(this),getShouldDebugExportedSenders:this.getShouldDebugExportedSenders.bind(this),isMainSender:!0}));const e=new this._connection({ip:this.session.serverAddress,port:this.session.port,dcId:this.session.dcId,loggers:this._log,isTestServer:this.session.isTestServer}),t=new this._fallbackConnection({ip:this.session.serverAddress,port:this.session.port,dcId:this.session.dcId,loggers:this._log,isTestServer:this.session.isTestServer});if(!await this._sender.connect(e,!1,t))return void(this._loopStarted||(this._updateLoop(),this._loopStarted=!0));this.session.setAuthKey(this._sender.authKey),await this._sender.send(this._initWith(new Ce.help.GetConfig)),this._loopStarted||(this._updateLoop(),this._loopStarted=!0),this._connectedDeferred.resolve(),this._isSwitchingDc=!1;const s=await this._borrowExportedSender(this.session.dcId,!1,void 0,0,this.isPremium);s&&this.releaseExportedSender(s)}async _initSession(){if(await this.session.load(),!this.session.serverAddress||this.session.serverAddress.includes(":")!==this._useIPV6){const e=ts(this.defaultDcId);this.session.setDC(this.defaultDcId,e.ipAddress,this._args.useWSS?443:80,this._args.isTestServerRequested)}}setPingCallback(e){this.pingCallback=e}async setForceHttpTransport(e){this._shouldForceHttpTransport=e,this.disconnect(),this._sender=void 0,await this.connect()}async setAllowHttpTransport(e){this._shouldAllowHttpTransport=e,this.disconnect(),this._sender=void 0,await this.connect()}setShouldDebugExportedSenders(e){this._shouldDebugExportedSenders=e}getShouldDebugExportedSenders(){return this._shouldDebugExportedSenders}async _updateLoop(){let e;const t=this._sender;if(!t)throw new Error("Sender is not initialized");for(;!this._destroyed;)if(await ee(3e3),t.isReconnecting||this._isSwitchingDc)e=void 0;else{try{const s=()=>{if(!this._destroyed)return t.send(new Ce.PingDelayDisconnect({pingId:W(),disconnectDelay:6e4}))},n=Date.now(),a=e?n-e:void 0;if(!a||a<5e3)await ha(()=>pa(s,5e3),3,100);else{let e=setTimeout(()=>{this._handleUpdate(new Dt(Dt.disconnected)),e=void 0},1e3);await pa(s,3e3),e&&(clearTimeout(e),e=void 0),this._handleUpdate(new Dt(Dt.connected))}e=Date.now()}catch(s){if(console.warn(s),e=void 0,t.isReconnecting||this._isSwitchingDc)continue;if(this._destroyed)break;t.reconnect()}if(Date.now()-this._lastRequest>18e5){try{await(this.pingCallback?.())}catch(e){}e=void 0}}this.disconnect()}disconnect(){this._sender?.disconnect(),Object.values(this._exportedSenderPromises).forEach(e=>{Object.values(e).forEach(e=>{e?.then(e=>e?.disconnect())})}),Object.values(this._exportedSenderReleaseTimeouts).forEach(e=>{Object.values(e).forEach(e=>{clearTimeout(e)})}),this._exportedSenderRefCounter={},this._exportedSenderPromises={},this._waitingForAuthKey={}}destroy(){this._destroyed=!0;try{this.disconnect(),this._sender?.destroy()}catch(e){}this.session.delete(),this._eventBuilders=[]}async _switchDC(e){if(!this._sender)throw new Error("Sender is not initialized");this._log.info(`Reconnecting to new data center ${e}`);const t=ts(e),s=this.session.isTestServer||this._args.isTestServerRequested;return this.session.setDC(e,t.ipAddress,t.port,s),await this._sender.authKey.setKey(void 0),this.session.setAuthKey(void 0),this._isSwitchingDc=!0,this.disconnect(),this._sender=void 0,this.connect()}_authKeyCallback(e,t){this.session.setAuthKey(e,t)}async _cleanupExportedSender(e,t){this.session.dcId!==e&&this.session.setAuthKey(void 0,e),this._shouldDebugExportedSenders&&console.log(` Cleanup idx=${t} dcId=${e}`);const s=await this._exportedSenderPromises[e][t];delete this._exportedSenderPromises[e][t],delete this._exportedSenderRefCounter[e][t],s?.disconnect()}async _cleanupExportedSenders(e){const t=Object.values(this._exportedSenderPromises[e]);t.length&&(this.session.dcId!==e&&this.session.setAuthKey(void 0,e),this._exportedSenderPromises[e]={},this._exportedSenderRefCounter[e]={},await Promise.all(t.map(async e=>{const t=await e;t?.disconnect()})))}async _connectSender(e,t,s,n=!1){let a,i=Boolean(e.authKey.getKey());if(!i)if(this._waitingForAuthKey[t]){await this._waitingForAuthKey[t];const s=this.session.getAuthKey(t);i=Boolean(e.authKey?.getKey()),i&&await e.authKey.setKey(s.getKey())}else this._waitingForAuthKey[t]=new Promise(e=>{a=e});const o=ts(t,i);for(;;)try{return await e.connect(new this._connection({ip:o.ipAddress,port:o.port,dcId:t,loggers:this._log,isTestServer:this.session.isTestServer,isPremium:!!i&&n}),!1,new this._fallbackConnection({ip:o.ipAddress,port:o.port,dcId:t,loggers:this._log,isTestServer:this.session.isTestServer,isPremium:!!i&&n})),this.session.dcId===t||e._authenticated||await navigator.locks.request("GRAMJS_AUTH_EXPORT",async()=>{this._log.info(`Exporting authorization for data center ${o.ipAddress}`);const s=await this.invoke(new Ce.auth.ExportAuthorization({dcId:t})),n=this._initWith(new Ce.auth.ImportAuthorization({id:s.id,bytes:s.bytes}));await e.send(n),e._authenticated=!0}),e._dcId=t,e.userDisconnected=!1,a&&(a(),delete this._waitingForAuthKey[t]),this._shouldDebugExportedSenders&&console.warn(` Connected to exported sender idx=${s} dc=${t}`),e}catch(n){this._shouldDebugExportedSenders&&console.error(` ERROR! idx=${s} dcId=${t} ${n.message}`),console.error(n),await ee(1e3),e.disconnect()}}releaseExportedSender(e){const t=e._dcId,s=e._senderIndex;this._exportedSenderRefCounter[t]&&this._exportedSenderRefCounter[t][s]&&(this._exportedSenderRefCounter[t][s]-=1,this._exportedSenderRefCounter[t][s]<=0&&(this._exportedSenderReleaseTimeouts[t]||(this._exportedSenderReleaseTimeouts[t]={}),this._exportedSenderReleaseTimeouts[t][s]=setTimeout(()=>{this._shouldDebugExportedSenders&&console.log(`[CC] [idx=${s} dcId=${t}]  Release`),e.disconnect(),this._exportedSenderReleaseTimeouts[t][s]=void 0,this._exportedSenderPromises[t][s]=void 0},3e4)))}async _borrowExportedSender(e,t,s,n,a){const i=n||0;let o,r=!1;this._exportedSenderPromises[e]||(this._exportedSenderPromises[e]={},r=!0),this._exportedSenderRefCounter[e]||(this._exportedSenderRefCounter[e]={}),this._exportedSenderPromises[e][i]&&!t||(this._shouldDebugExportedSenders&&console.warn(` Connecting to exported sender idx=${i} dc=${e} `+(t?"(reconnect)":"")),this._exportedSenderRefCounter[e][i]=0,this._exportedSenderPromises[e][i]=this._connectSender(s||this._createExportedSender(e,i),e,n,a));try{if(o=await this._exportedSenderPromises[e][i],!o?.isConnected())return o?.isConnecting?(await ee(1e3),this._borrowExportedSender(e,!1,o,i,a)):this._borrowExportedSender(e,!0,o,i,a)}catch(t){return console.error(t),this._borrowExportedSender(e,!0,void 0,i,a)}return this._exportedSenderRefCounter[e][i]+=1,this._exportedSenderReleaseTimeouts[e]||(this._exportedSenderReleaseTimeouts[e]={}),this._exportedSenderReleaseTimeouts[e][i]&&(clearTimeout(this._exportedSenderReleaseTimeouts[e][i]),this._exportedSenderReleaseTimeouts[e][i]=void 0),r&&o.send(this._initWith(new Ce.help.GetConfig)),o}_createExportedSender(e,t){return new Jt(this.session.getAuthKey(e),{logger:this._log,dcId:e,senderIndex:t,retries:this._connectionRetries,retriesToFallback:this._connectionRetriesToFallback,delay:this._retryDelay,retryMainConnectionDelay:this._retryMainConnectionDelay,shouldForceHttpTransport:this._shouldForceHttpTransport,shouldAllowHttpTransport:this._shouldAllowHttpTransport,autoReconnect:this._autoReconnect,connectTimeout:this._timeout,authKeyCallback:this._authKeyCallback.bind(this),isMainSender:e===this.session.dcId,isExported:!0,updateCallback:this._handleUpdate.bind(this),getShouldDebugExportedSenders:this.getShouldDebugExportedSenders.bind(this),onConnectionBreak:()=>this._cleanupExportedSender(e,t)})}getSender(e,t,s){return e?this._borrowExportedSender(e,void 0,void 0,t,s):Promise.resolve(this._sender)}downloadFile(e,t){return async function(e,t,s,n){const{dcId:a}=s;for(let i=0;i<5;i++)try{return await ca(e,t,s,n)}catch(t){if(!(t instanceof Me&&(t.errorMessage.startsWith("SESSION_REVOKED")||t.errorMessage.startsWith("CONNECTION_NOT_INITED"))&&i<4))throw t;await e._cleanupExportedSenders(a)}}(this,e,t,this._shouldDebugExportedSenders)}downloadMedia(e,t){let s;if(e instanceof Ce.Message||e instanceof Ce.StoryItem)s=e.media;else if(e instanceof Ce.MessageService){const t=e.action;"photo"in t&&(s=t.photo)}else s=e;return s instanceof Ce.MessageMediaWebPage&&s.webpage instanceof Ce.WebPage&&(s=s.webpage.document||s.webpage.photo),s instanceof Ce.MessageMediaPhoto||s instanceof Ce.Photo?this._downloadPhoto(s,t):s instanceof Ce.MessageMediaDocument||s instanceof Ce.Document?this._downloadDocument(s,t):s instanceof Ce.WebDocument||s instanceof Ce.WebDocumentNoProxy?this._downloadWebDocument(s):void 0}downloadProfilePhoto(e,t=!1){const s=e.photo;if(!(s instanceof Ce.UserProfilePhoto||s instanceof Ce.ChatPhoto))return;const n=s.dcId,a=new Ce.InputPeerPhotoFileLocation({peer:Zt(e),photoId:s.photoId,big:t||void 0});return this.downloadFile(a,{dcId:n,isPriority:!0})}downloadStickerSetThumb(e){if(!e.thumbs?.length&&!e.thumbDocumentId)return;const t=e.thumbVersion;return e.thumbDocumentId?this.invoke(new Ce.messages.GetCustomEmojiDocuments({documentId:[e.thumbDocumentId]})).then(e=>{const t=e[0];if(t&&!(t instanceof Ce.DocumentEmpty))return this.downloadFile(new Ce.InputDocumentFileLocation({id:t.id,accessHash:t.accessHash,fileReference:t.fileReference,thumbSize:""}),{fileSize:rs(t.size),dcId:t.dcId})}):this.downloadFile(new Ce.InputStickerSetThumb({stickerset:new Ce.InputStickerSetID({id:e.id,accessHash:e.accessHash}),thumbVersion:t}),{dcId:e.thumbDcId})}pickFileSize(e,t){if(!e?.length)return;if(!t)return e.reduce((e,t)=>"w"in t?e&&"w"in e&&e.w>t.w?e:t:e,void 0);let s;for(let n=fa.indexOf(t);n<fa.length;n++)if(s=e.find(e=>"type"in e&&e.type===fa[n]),s)return s}_downloadCachedPhotoSize(e){let t;return t=e instanceof Ce.PhotoStrippedSize?es(e.bytes):e.bytes,t}_downloadPhoto(e,t){let s=e;if(e instanceof Ce.MessageMediaPhoto&&e.photo instanceof Ce.Photo&&(s=e.photo),!(s instanceof Ce.Photo))return;const n="u"===t.sizeType||"v"===t.sizeType?s.videoSizes:[],a=this.pickFileSize([...n,...s.sizes],t.sizeType);if(!a||a instanceof Ce.PhotoSizeEmpty||a instanceof Ce.VideoSizeEmojiMarkup||a instanceof Ce.VideoSizeStickerMarkup)return;if(a instanceof Ce.PhotoCachedSize||a instanceof Ce.PhotoStrippedSize)return this._downloadCachedPhotoSize(a);let i;return i=a instanceof Ce.PhotoSizeProgressive?Math.max(...a.sizes):"size"in a?a.size:512,this.downloadFile(new Ce.InputPhotoFileLocation({id:s.id,accessHash:s.accessHash,fileReference:s.fileReference,thumbSize:a.type}),{dcId:s.dcId,fileSize:i,progressCallback:t.progressCallback})}_downloadDocument(e,t){let s,n=e;if(n instanceof Ce.MessageMediaDocument&&n.document instanceof Ce.Document&&(n=n.document),n instanceof Ce.Document){if(t.sizeType){if(s=this.pickFileSize([...n.thumbs||[],...n.videoThumbs||[]],t.sizeType),!s&&n.mimeType.startsWith("video/"))return;if(s&&(s instanceof Ce.PhotoCachedSize||s instanceof Ce.PhotoStrippedSize))return this._downloadCachedPhotoSize(s)}return this.downloadFile(new Ce.InputDocumentFileLocation({id:n.id,accessHash:n.accessHash,fileReference:n.fileReference,thumbSize:s&&"type"in s?s.type:""}),{fileSize:s&&"size"in s?s.size:rs(n.size),progressCallback:t.progressCallback,start:t.start,end:t.end,dcId:n.dcId,workers:t.workers})}}async _downloadWebDocument(e){if(e instanceof Ce.WebDocumentNoProxy){const t=await fetch(e.url).then(e=>e.arrayBuffer());return ua.from(t)}try{const t=[];let s=0;for(;;){const n=new Ce.upload.GetWebFile({location:new Ce.InputWebFileLocation({url:e.url,accessHash:e.accessHash}),offset:s,limit:la}),a=await this._borrowExportedSender(this._config?.webfileDcId||4);if(!a)throw new Error("Failed to obtain sender");const i=await a.send(n);if(this.releaseExportedSender(a),s+=la,!i.bytes.length)break;if(t.push(i.bytes),i.bytes.length<la)break}return ua.concat(t)}catch(e){if(e instanceof Me&&"WEBFILE_NOT_AVAILABLE"===e.errorMessage)return ua.alloc(0);throw e}}async downloadStaticMap(e,t,s,n,a,i,o,r){try{const c=[];let d=0;for(;;)try{const u=new Ce.upload.GetWebFile({location:new Ce.InputWebFileGeoPointLocation({geoPoint:new Ce.InputGeoPoint({lat:s,long:t,accuracyRadius:r}),accessHash:e,w:n,h:a,zoom:i,scale:o}),offset:d,limit:la}),l=await this._borrowExportedSender(4);if(!l)throw new Error("Failed to obtain sender");const f=await l.send(u);if(this.releaseExportedSender(l),d+=la,!f.bytes.length)break;if(c.push(f.bytes),f.bytes.length<la)break}catch(e){if(e instanceof Ee){console.warn(`getWebFile: sleeping for ${e.seconds}s on flood wait`),await ee(1e3*e.seconds);continue}}return ua.concat(c)}catch(e){if(e instanceof Me&&"WEBFILE_NOT_AVAILABLE"===e.errorMessage)return ua.alloc(0);throw e}}async invoke(e,t,s,n){if("request"!==e.classType)throw new Error("You can only invoke MTProtoRequests");const a=void 0!==t;let i=a?await this.getSender(t):this._sender;this._lastRequest=Date.now(),await this._connectedDeferred.promise;const o=new Kt(e,s);let r=0;for(r=0;r<this._requestRetries;r++){i.addStateToQueue(o);try{const e=await o.promise;return o.finished.resolve(),a&&this.releaseExportedSender(i),e}catch(e){if(e instanceof Te||e instanceof Me&&("RPC_CALL_FAIL"===e.errorMessage||"RPC_MCGET_FAIL"===e.errorMessage||e.errorMessage.match(/INTERDC_\d_CALL(_RICH)?_ERROR/)))this._log.warn(`Telegram is having internal issues ${e.constructor.name}`),await ee(2e3);else if(e instanceof Ee||e instanceof Ge){if(!(e.seconds<=this.floodSleepLimit))throw o.finished.resolve(),a&&this.releaseExportedSender(i),e;this._log.info(`Sleeping for ${e.seconds}s on flood wait`),await ee(1e3*e.seconds)}else if(e instanceof Ue||e instanceof Fe||e instanceof De){if(this._log.info(`Phone migrated to ${e.newDc}`),(e instanceof Ue||e instanceof Fe)&&await zn(this))throw o.finished.resolve(),a&&this.releaseExportedSender(i),e;await this._switchDC(e.newDc),a&&this.releaseExportedSender(i),i=void 0===t?this._sender:await this.getSender(t)}else if(e instanceof Ve)await o.isReady(),o.after=void 0;else if(e instanceof Me&&"CONNECTION_NOT_INITED"===e.errorMessage)this.disconnect(),await ee(2e3),await this.connect();else{if(!(e instanceof Be))throw o.finished.resolve(),a&&this.releaseExportedSender(i),e;if(!n)throw o.finished.resolve(),a&&this.releaseExportedSender(i),e}}o.resetPromise()}throw a&&this.releaseExportedSender(i),new Error(`Request was unsuccessful ${r} time(s)`)}async invokeBeacon(e,t){if("request"!==e.classType)throw new Error("You can only invoke MTProtoRequests");const s=void 0!==t,n=s?await this.getSender(t):this._sender;n.sendBeacon(e),s&&this.releaseExportedSender(n)}setIsPremium(e){this.isPremium=e}async getMe(){try{return(await this.invoke(new Ce.users.GetUsers({id:[new Ce.InputUserSelf]})))[0]}catch(e){this._log.warn("error while getting me"),this._log.warn(e)}}async loadConfig(){this._config||(this._config=await this.invoke(new Ce.help.GetConfig))}async start(e,t){if(this.isConnected()||await this.connect(),t?.(),this.loadConfig(),await zn(this,e.shouldThrowIfUnauthorized))return;const s={apiId:this.apiId,apiHash:this.apiHash};await async function(e,t,s){let n;var a;n="botAuthToken"in s?await async function(e,t,s){const{apiId:n,apiHash:a}=t,{botAuthToken:i}=s,{user:o}=await e.invoke(new Ce.auth.ImportBotAuthorization({apiId:n,apiHash:a,botAuthToken:i}));return o}(e,t,s):"webAuthToken"in s&&s.webAuthToken?await async function(e,t,s){try{const{apiId:n,apiHash:a}=t,i=await e.invoke(new Ce.auth.ImportWebTokenAuthorization({webAuthToken:s.webAuthToken,apiId:n,apiHash:a}));if(i instanceof Ce.auth.Authorization)return i.user;throw new Error("SIGN_UP_REQUIRED")}catch(n){return n instanceof Me&&"SESSION_PASSWORD_NEEDED"===n.errorMessage?Xn(e,0,s,!0):(e._log.error(`Failed to login with web token: ${String(n)}`),s.webAuthTokenFailed(),jn(e,t,{...s,webAuthToken:void 0}))}}(e,t,s):await jn(e,t,s),e._log.info(`Signed in successfully as ${a=n,a instanceof Ce.User?a.lastName&&a.firstName?`${a.firstName} ${a.lastName}`:a.firstName?a.firstName:a.lastName?a.lastName:"":a instanceof Ce.Chat||a instanceof Ce.Channel?a.title:""}`)}(this,s,e)}uploadFile(e){return async function(e,t,s){const{file:n,onProgress:a}=t,i=Boolean(e.isPremium),{name:o,size:r}=n,c=q(j(8),!0,!0),d=r>10485760,u=(...e)=>{s&&console.log(` [${c.toString()}]`,...e)};u("Uploading file...");const l=1024*function(e){if(e<=104857600)return 128;if(e<=786432e3)return 256;if(e<=2097152e3)return 512;if(e<=4194304e3)return 512;throw new Error("File size too large")}(r),f=Math.floor((r+l-1)/l),g=ea(e.session.dcId,i);let p=0;a&&a(p);let h=!1;const m=[];for(let t=0;t<f;t++){const o=await g.requestWorker(!1,l);if(a?.isCanceled){g.releaseWorker(o,l);break}const r=(...e)=>{u(`[${o}]`,...e)},y=n.slice(t*l,(t+1)*l);m.push((async(t,n)=>{for(;;){let u;try{let a=!1;s&&setTimeout(()=>{a||r(` getSender took too long j=${t}`)},8e3),u=await e.getSender(e.session.dcId,o,i),a=!0;let l=!1;const g=await n.arrayBuffer();s&&setTimeout(()=>{l||r(` sender.send took too long j=${t}`)},6e3),await u.send(d?new Ce.upload.SaveBigFilePart({fileId:c,filePart:t,fileTotalParts:f,bytes:da.from(g)}):new Ce.upload.SaveFilePart({fileId:c,filePart:t,bytes:da.from(g)})),e.releaseExportedSender(u),l=!0}catch(s){if(r(`Upload part failed ${s?.toString()} j=${t}`),u&&!u.isConnected()){await ee(1e3);continue}if(s instanceof Ee){s instanceof xe&&!h&&(u?._updateCallback(new na(!0)),h=!0),await ee(1e3*s.seconds);continue}throw g.releaseWorker(o,l),u&&e.releaseExportedSender(u),s}if(g.releaseWorker(o,l),a){if(a.isCanceled)throw new Error("USER_CANCELED");p+=1/f,r(100*p+"%"),a(p)}break}})(t,y))}return await Promise.all(m),d?new Ce.InputFileBig({id:c,parts:f,name:o}):new Ce.InputFile({id:c,parts:f,name:o,md5Checksum:""})}(this,e,this._shouldDebugExportedSenders)}updateTwoFaSettings(e){return async function(e,{isCheckPassword:t,currentPassword:s,newPassword:n,hint:a="",email:i,emailCodeCallback:o,onEmailCodeError:r}){if(!n&&!s)throw new Error("Neither `currentPassword` nor `newPassword` is present");if(i&&(!o||!r))throw new Error("`email` present without `emailCodeCallback` and `onEmailCodeError`");const c=await e.invoke(new Ce.account.GetPassword),d=c.newAlgo;if(d instanceof Ce.PasswordKdfAlgoUnknown)throw new Error("Password algorithm is unknown");d.salt1=ys.concat([d.salt1,j(32)]),!c.hasPassword&&s&&(s=void 0);const u=s?await ms(c,s):new Ce.InputCheckPasswordEmpty;if(t)await e.invoke(new Ce.auth.CheckPassword({password:u}));else try{await e.invoke(new Ce.account.UpdatePasswordSettings({password:u,newSettings:new Ce.account.PasswordInputSettings({newAlgo:d,newPasswordHash:n?await hs(d,n):ys.alloc(0),hint:a,email:i,newSecureSettings:void 0})}))}catch(t){if(!(t instanceof Ne))throw t;for(;;)try{const s=await o(t.codeLength);if(!s)throw new Error("Code is empty");await e.invoke(new Ce.account.ConfirmPasswordEmail({code:s}));break}catch(e){r(e)}}}(this,e)}getTmpPassword(e,t){return async function(e,t,s=60){const n=await e.invoke(new Ce.account.GetPassword);if(!n)return;const a=await ms(n,t);return await e.invoke(new Ce.account.GetTmpPassword({password:a,period:s}))}(this,e,t)}getCurrentPassword(e){return async function(e,t){const s=await e.invoke(new Ce.account.GetPassword);if(s)return t?await ms(s,t):new Ce.InputCheckPasswordEmpty}(this,e)}addEventHandler(e,t){this._eventBuilders.push([t,e])}_handleUpdate(e){if(e instanceof Ce.Updates||e instanceof Ce.UpdatesCombined){const t=[];for(const s of[...e.users,...e.chats])t.push(s);this._processUpdate(e,t)}else e instanceof Ce.UpdateShort?this._processUpdate(e.update,void 0):this._processUpdate(e,void 0)}_processUpdate(e,t){e._entities=t||[];const s={update:e};this._dispatchUpdate(s)}async _dispatchUpdate(e){for(const[t,s]of this._eventBuilders){const n=t.build(e.update);n&&await s(n)}}isConnected(){return!(!this._sender||!this._sender.isConnected())}}function pa(e,t){let s=!1;return Promise.race([e(),ee(t).then(()=>s?void 0:Promise.reject(new Error("TIMEOUT")))]).finally(()=>{s=!0})}async function ha(e,t,s){for(let n=0;n<t;n++)try{return await e()}catch(e){if(n===t-1)throw e;await ee(s)}}const ma=ga,ya=3600;function _a(e,t,s){return e*ya+60*t+s}function ba(e){return`#${e.toString(16).padStart(6,"0")}`}function Sa(e){return e.hasOwnProperty("userId")}function wa(e){return e.hasOwnProperty("chatId")}function Ia(e,t){return"user"===t?e.toString():"channel"===t?(-1n*(e+P)).toString():(-1n*e).toString()}function va(e){return Sa(e)?Ia(e.userId,"user"):wa(e)?Ia(e.chatId,"chat"):Ia(e.channelId,"channel")}function Pa(e){if(e instanceof Ce.PeerColor){const{color:t,backgroundEmojiId:s}=e;return{type:"regular",color:t,backgroundEmojiId:s?.toString()}}if(e instanceof Ce.PeerColorCollectible){const{collectibleId:t,giftEmojiId:s,backgroundEmojiId:n,accentColor:a,colors:i,darkAccentColor:o,darkColors:r}=e;return{type:"collectible",giftEmojiId:s.toString(),collectibleId:t.toString(),backgroundEmojiId:n.toString(),accentColor:ba(a),colors:i.map(e=>ba(e)),darkAccentColor:o?ba(o):void 0,darkColors:r?.map(e=>ba(e))}}}function Ca(e){return e.colors.map(e=>ba(e))}function Ma(e){return{paletteColors:e.paletteColors.map(e=>ba(e)),bgColors:e.bgColors.map(e=>ba(e)),storyColors:e.storyColors.map(e=>ba(e))}}function Aa(e){return e instanceof Ce.EmojiStatus?{type:"regular",documentId:e.documentId.toString(),until:e.until}:e instanceof Ce.EmojiStatusCollectible?{type:"collectible",collectibleId:e.collectibleId.toString(),documentId:e.documentId.toString(),title:e.title,slug:e.slug,patternDocumentId:e.patternDocumentId.toString(),centerColor:ba(e.centerColor),edgeColor:ba(e.edgeColor),patternColor:ba(e.patternColor),textColor:ba(e.textColor),until:e.until}:void 0}function Ra(e){if("photoId"in e)return e.photoId.toString()}function ka(e){return{botId:Ia(e.botId,"user"),iconId:e.icon.toString(),description:e.description}}function Ta(e){const{silent:t,muteUntil:s,showPreviews:n,otherSound:a}=e;return{hasSound:!(a instanceof Ce.NotificationSoundNone),isSilentPosting:t,mutedUntil:s,shouldShowPreviews:n}}function Ba(e){switch(e.className){case"ProfileTabPosts":return"stories";case"ProfileTabGifts":return"gifts";case"ProfileTabMedia":return"media";case"ProfileTabFiles":return"documents";case"ProfileTabMusic":return"audio";case"ProfileTabVoice":return"voice";case"ProfileTabLinks":return"links";case"ProfileTabGifs":return"gif";default:return e}}"undefined"==typeof File&&(self.File=class extends Blob{constructor(e,t,s){if(s){const{type:t,...n}=s;super(e,{type:t}),Object.assign(this,n)}else super(e);this.name=t}});var Da=s(48287).hp;const Ua={PHONE_NUMBER_INVALID:"ErrorPhoneNumberInvalid",PHONE_CODE_INVALID:"ErrorCodeInvalid",PASSWORD_HASH_INVALID:"ErrorIncorrectPassword",PHONE_PASSWORD_FLOOD:"ErrorPasswordFlood",PHONE_NUMBER_BANNED:"ErrorPhoneBanned",EMAIL_UNCONFIRMED:"ErrorEmailUnconfirmed",EMAIL_HASH_EXPIRED:"ErrorEmailHashExpired",NEW_SALT_INVALID:"ErrorNewSaltInvalid",SRP_PASSWORD_CHANGED:"ErrorPasswordChanged",CODE_INVALID:"ErrorEmailCodeInvalid",PASSWORD_MISSING:"ErrorPasswordMissing",PASSKEY_CREDENTIAL_NOT_FOUND:"ErrorPasskeyUnknown"};function Ea(e){if(e instanceof Ce.Message||e instanceof Ce.MessageService)return va(e.peerId)}function xa(e){return e instanceof Ce.DialogFilter||e instanceof Ce.DialogFilterChatlist}function Va(e){return String.fromCharCode(...e)}function Ga(e){return Da.from(e,"binary")}function Fa(e){return e instanceof Error}function Na(e){let t;const s=e instanceof Me?e.errorMessage:void 0;return e instanceof Ee?t={key:"ErrorFloodTime",variables:{time:qa(e.seconds)}}:e instanceof qe?t={key:"ErrorPasswordFresh",variables:{time:qa(e.seconds)}}:e instanceof He?t={key:"ErrorSessionFresh",variables:{time:qa(e.seconds)}}:e instanceof Me&&(t={key:Ua[e.errorMessage]}),t||(t=e.message?{key:"ErrorUnexpectedMessage",variables:{error:e.message}}:{key:"ErrorUnexpected"}),{messageKey:t,errorMessage:s,error:e}}function qa(e){if(e<60)return{key:"Seconds",variables:{count:e},options:{pluralValue:e}};if(e<ya){const t=function(e){return(0,Math.ceil)(e/60)}(e);return{key:"Minutes",variables:{count:t},options:{pluralValue:t}}}if(e<86400){const t=function(e){return(0,Math.ceil)(e/ya)}(e);return{key:"Hours",variables:{count:t},options:{pluralValue:t}}}const t=function(e){return(0,Math.ceil)(e/86400)}(e);return{key:"Days",variables:{count:t},options:{pluralValue:t}}}let Ha;function La(e){!function(e){Ka?Ka.push(e):Ka=[e],Wa&&!l.has(e["@type"])||(Wa=A(ja,u,!0),za=Math.random()),Wa(za)}(e)}function Oa(e){Ha(e)}const ja=R(function(e){if(!Ka||e!==za)return;const t=Ka;Ka=void 0,t.forEach(Ha)});let Wa,za,Ka;const $a=/\b(?:(\d{1,2}):)?([0-5]?\d):([0-5]\d)\b/g;function Ja(e){const t={...e,text:e.text,entities:e.entities?.filter(e=>e.type!==Ps.Timestamp)||[]},s=t.text;for(const e of s.matchAll($a)){const s=e[0],n=e[1],a=e[2],i=e[3],o=e.index??0,r=s.length,c=parseInt(a,10),d=parseInt(i,10);if(c>59||d>59)continue;let u;u=_a(void 0!==n?parseInt(n,10):0,c,d);let l=!1;for(const e of t.entities)if(o<e.offset+e.length&&o+r>e.offset){l=!0;break}if(l)continue;const f={type:Ps.Timestamp,offset:o,length:r,timestamp:u};let g=!1;for(let e=0;e<t.entities.length;e++)if(o<t.entities[e].offset){t.entities.splice(e,0,f),g=!0;break}g||t.entities.push(f)}return t}function Qa(e){e instanceof Ce.Message&&(e.media&&Ya(e.media,e),e.replyTo instanceof Ce.MessageReplyHeader&&e.replyTo.replyMedia&&Ya(e.replyTo.replyMedia,e)),e instanceof Ce.MessageService&&"photo"in e.action&&ei(ni(e.action.photo,e)),e instanceof Ce.SponsoredMessage&&e.photo&&ei(e.photo)}function Xa(e){e instanceof Ce.WebPage&&(e.document&&ti(ai(e.document,e)),e.photo&&ei(ai(e.photo,e)))}function Ya(e,t){if(e instanceof Ce.MessageMediaDocument&&e.document&&(ti(ni(e.document,t)),e.altDocuments))for(const s of e.altDocuments)ti(ni(s,t));e instanceof Ce.MessageMediaGame&&(e.game.document&&ti(ni(e.game.document,t)),ei(ni(e.game.photo,t))),e instanceof Ce.MessageMediaPhoto&&e.photo&&ei(ni(e.photo,t)),e instanceof Ce.MessageMediaInvoice&&(e.photo&&oi(ni(e.photo,t)),e.extendedMedia instanceof Ce.MessageExtendedMedia&&Ya(e.extendedMedia.media,t)),e instanceof Ce.MessageMediaPaidMedia&&e.extendedMedia.forEach(e=>{e instanceof Ce.MessageExtendedMedia&&Ya(e.media,t)})}function Za(e,t){if(e instanceof Ce.StoryItem&&(e.media instanceof Ce.MessageMediaPhoto&&e.media.photo&&ei(si(e.media.photo,t,e)),e.media instanceof Ce.MessageMediaDocument&&(e.media.document instanceof Ce.Document&&ti(si(e.media.document,t,e)),e.media.altDocuments)))for(const s of e.media.altDocuments)ti(si(s,t,e))}function ei(e){e instanceof Ce.Photo&&(Qs.photos[String(e.id)]=e)}function ti(e){e instanceof Ce.Document&&(Qs.documents[String(e.id)]=e)}function si(e,t,s){if(!(e instanceof Ce.Document||e instanceof Ce.Photo))return e;const n=e;return n.localRepairInfo={type:"story",peerId:t,id:s.id},n}function ni(e,t){if(!t?.peerId)return e;if(!(e instanceof Ce.Document||e instanceof Ce.Photo||e instanceof Ce.WebDocument))return e;const s=e;return s.localRepairInfo={type:"message",peerId:va(t.peerId),id:t.id},s}function ai(e,t){if(!(t instanceof Ce.WebPage))return e;if(!(e instanceof Ce.Document||e instanceof Ce.Photo||e instanceof Ce.WebDocument))return e;const s=e;return s.localRepairInfo={type:"webPage",url:t.url},s}function ii(e){if(e instanceof Ce.UserEmpty)return;const t=Ia(e.id,"user"),s=Qs.users[t];e.photo instanceof Ce.Photo&&ei(e.photo),s&&!s.min&&e.min||(Qs.users[t]=e)}function oi(e){Qs.webDocuments[e.url]=e}function ri(e){let t="M";const s=e.length;for(let n=0;n<s;n++){const s=e[n];s>=192?t+="AACAAAAHAAALMAAAQASTAVAAAZaacaaaahaaalmaaaqastava.az0123456789-,"[s-128-64]:(s>=128?t+=",":s>=64&&(t+="-"),t+=String(63&s))}return t+="z",t}const ci={w:100,h:100};function di(e,t){if(!e||!e.length)return;const s=e.find(e=>e instanceof Ce.PhotoStrippedSize);if(!s)return;const n=e.filter(e=>e instanceof Ce.PhotoSize),{w:a,h:i}=n.length?n[n.length-1]:ci,{bytes:o}=s;return{dataUri:Hs(t&&"image/jpeg"!==t?o:es(o),void 0,t),width:a,height:i}}function ui(e,t){const{w:s,h:n}=t;var a,i,o;return{dataUri:`data:image/svg+xml;utf8,${a=e.bytes,i=s,o=n,'<?xml version="1.0" encoding="utf-8"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 {{width}} {{height}}" xml:space="preserve"><path fill-opacity="0.1" d="{{path}}" /></svg>'.replace("{{path}}",ri(a)).replace("{{width}}",String(i)).replace("{{height}}",String(o))}`,width:s,height:n}}function li(e,t){const s=e.sizes.filter(e=>e instanceof Ce.PhotoSize||e instanceof Ce.PhotoSizeProgressive).map(pi);return{mediaType:"photo",id:String(e.id),thumbnail:di(e.sizes),sizes:s,isSpoiler:t,date:e.date,...e.videoSizes&&{videoSizes:Us(e.videoSizes.map(gi)),isVideo:!0}}}function fi(e){return e.filter(e=>e instanceof Ce.PhotoSize||e instanceof Ce.PhotoSizeProgressive).map(pi)}function gi(e){if(!(e instanceof Ce.VideoSize))return;const{videoStartTs:t,size:s,h:n,w:a,type:i}=e;return{videoStartTs:t,size:s,height:n,width:a,type:i}}function pi(e){const{w:t,h:s,type:n}=e;return{width:t,height:s,type:n}}function hi(e){if(!("usernames"in e&&e.usernames||"username"in e&&e.username))return;const t=[];return"username"in e&&e.username&&t.push({username:e.username,isActive:!0,isEditable:!0}),e.usernames&&e.usernames.forEach(({username:e,active:s,editable:n})=>{t.push({username:e,...s&&{isActive:!0},...n&&{isEditable:!0}})}),t}function mi(e){let t,s,n,a,i,o,r,c="none";const d=Qs.chats;return e.forEach(e=>{e instanceof Ce.PrivacyValueAllowAll?t||="everybody":e instanceof Ce.PrivacyValueAllowContacts?t||="contacts":e instanceof Ce.PrivacyValueAllowCloseFriends?t||="closeFriends":e instanceof Ce.PrivacyValueDisallowContacts?t||="nonContacts":e instanceof Ce.PrivacyValueDisallowAll?t||="nobody":e instanceof Ce.PrivacyValueAllowUsers?n=e.users.map(e=>Ia(e,"user")):e instanceof Ce.PrivacyValueDisallowUsers?i=e.users.map(e=>Ia(e,"user")):e instanceof Ce.PrivacyValueAllowChatParticipants?a=e.chats.map(e=>{const t=Ia(e,"chat"),s=Ia(e,"channel");return d[t]?t:s}):e instanceof Ce.PrivacyValueDisallowChatParticipants?o=e.chats.map(e=>{const t=Ia(e,"chat"),s=Ia(e,"channel");return d[t]?t:s}):e instanceof Ce.PrivacyValueAllowPremium?r=!0:e instanceof Ce.PrivacyValueAllowBots?c="allow":e instanceof Ce.PrivacyValueDisallowBots&&(c="disallow")}),t||(t="nobody",s=!0),{visibility:t,isUnspecified:s,allowUserIds:n||[],allowChatIds:a||[],blockUserIds:i||[],blockChatIds:o||[],shouldAllowPremium:r,botsPrivacy:c}}function yi(e){const{text:t,entities:s}=e;return{text:t,entities:s.map(_i)}}function _i(e){const{className:t,offset:s,length:n}=e;return e instanceof Ce.MessageEntityMentionName?{type:Ps.MentionName,offset:s,length:n,userId:Ia(e.userId,"user")}:e instanceof Ce.MessageEntityTextUrl?{type:Ps.TextUrl,offset:s,length:n,url:e.url}:e instanceof Ce.MessageEntityPre?{type:Ps.Pre,offset:s,length:n,language:e.language}:e instanceof Ce.MessageEntityCustomEmoji?{type:Ps.CustomEmoji,offset:s,length:n,documentId:e.documentId.toString()}:e instanceof Ce.MessageEntityBlockquote?{type:Ps.Blockquote,canCollapse:e.collapsed,offset:s,length:n}:{type:t,offset:s,length:n}}function bi(e){const{recentReactions:t,results:s,canSeeList:n,reactionsAsTags:a,topReactors:i}=e;return{areTags:a,canSeeList:n,results:s.map(wi).filter(Boolean).sort(Si),recentReactions:t?.map(vi).filter(Boolean),topReactors:i?.map(Ii).filter(Boolean)}}function Si(e,t){if("paid"===e.reaction.type)return-1;if("paid"===t.reaction.type)return 1;return t.count-e.count||(void 0!==e.chosenOrder&&void 0!==t.chosenOrder?e.chosenOrder-t.chosenOrder:void 0!==e.chosenOrder?1:void 0!==t.chosenOrder?-1:0)}function wi(e){const{chosenOrder:t,count:s,reaction:n}=e,a=Pi(n,!0);if(a)return{chosenOrder:t,count:s,reaction:a}}function Ii(e){const{count:t,my:s,top:n,anonymous:a,peerId:i}=e;return{peerId:i&&va(i),count:t,isMy:s,isTop:n,isAnonymous:a}}function vi(e){const{peerId:t,reaction:s,big:n,unread:a,date:i,my:o}=e,r=Pi(s);if(r)return{peerId:va(t),reaction:r,addedDate:i,isUnread:a,isBig:n,isOwn:o}}function Pi(e,t){return e instanceof Ce.ReactionEmoji?{type:"emoji",emoticon:e.emoticon}:e instanceof Ce.ReactionCustomEmoji?{type:"custom",documentId:e.documentId.toString()}:t&&e instanceof Ce.ReactionPaid?{type:"paid"}:void 0}function Ci(e){const{reaction:t,title:s,count:n}=e,a=Pi(t);if(a)return{reaction:a,title:s,count:n}}function Mi(e){const{selectAnimation:t,staticIcon:s,reaction:n,title:a,appearAnimation:i,inactive:o,aroundAnimation:r,centerIcon:c,effectAnimation:d,activateAnimation:u,premium:l}=e;return{selectAnimation:Tr(t),appearAnimation:Tr(i),activateAnimation:Tr(u),effectAnimation:Tr(d),staticIcon:Tr(s),aroundAnimation:r?Tr(r):void 0,centerIcon:c?Tr(c):void 0,reaction:{type:"emoji",emoticon:n},title:a,isInactive:o,isPremium:l}}function Ai(e){const{id:t,emoticon:s,premiumRequired:n,staticIconId:a,effectStickerId:i,effectAnimationId:o}=e;return{id:t.toString(),emoticon:s,isPremium:n,staticIconId:a?.toString(),effectStickerId:i.toString(),effectAnimationId:o?.toString()}}function Ri(e,t,s){if(e instanceof Ce.DocumentEmpty)return;const{mimeType:n,videoThumbs:a}=e,i=e.attributes.find(e=>e instanceof Ce.DocumentAttributeSticker),o=e.attributes.find(e=>e instanceof Ce.DocumentAttributeCustomEmoji);if(!i&&!o)return;const r="application/x-tgsticker"===n,c=n===p,d=Boolean(o),u=d&&o.textColor,l=e.attributes.find(e=>e instanceof Ce.DocumentAttributeImageSize),f=e.attributes.find(e=>e instanceof Ce.DocumentAttributeVideo),g=l||f,h=i||o,m=(S=h?.stickerset,S instanceof Ce.InputStickerSetID?{id:String(S.id),accessHash:String(S.accessHash)}:S instanceof Ce.InputStickerSetShortName?{shortName:S.shortName}:{isMissing:!0}),y=h?.alt,_=Boolean(o?.free??!0)&&!s,b=e.thumbs&&e.thumbs.find(e=>e instanceof Ce.PhotoCachedSize);var S;if(!(n!==p||self.isWebmSupported||b||e.thumbs&&e.thumbs.find(e=>e instanceof Ce.PhotoSize)))return;const w=e.thumbs&&e.thumbs.find(e=>e instanceof Ce.PhotoPathSize),I=b?function(e){const{w:t,h:s,bytes:n}=e;return{dataUri:Hs(n,void 0,"image/webp"),width:t,height:s}}(b):w&&g?ui(w,g):void 0,v=e.thumbs&&fi(e.thumbs),{w:P,h:C}=b||g||{},M=!t&&a&&Us(a?.filter(e=>e instanceof Ce.VideoSize)).some(({type:e})=>"f"===e);return{mediaType:"sticker",id:String(e.id),stickerSetInfo:m,emoji:y,isCustomEmoji:d,isLottie:r,isVideo:c,width:P,height:C,thumbnail:I,hasEffect:M,isFree:_,shouldUseTextColor:u,previewPhotoSizes:v}}function ki(e){const{archived:t,installedDate:s,id:n,accessHash:a,title:i,thumbs:o,count:r,shortName:c,emojis:d,thumbDocumentId:u}=e,l=o?.some(e=>"s"===e.type),f=o?.some(e=>"a"===e.type),g=o?.some(e=>"v"===e.type),p=void 0!==u?String(u):void 0,h=l||f||g||Boolean(p);return{isArchived:t,isEmoji:d,installedDate:s,id:String(n),accessHash:String(a),title:i,hasStaticThumb:l,hasAnimatedThumb:f,hasVideoThumb:g,hasThumbnail:h,thumbCustomEmojiId:p,count:r,shortName:c}}function Ti(e){const t=ki(e.set);if(e instanceof Ce.StickerSetNoCovered)return t;const s=Di(e instanceof Ce.StickerSetCovered?[e.cover]:e instanceof Ce.StickerSetMultiCovered?e.covers:e.documents);return e instanceof Ce.StickerSetFullCovered?{...t,stickers:s,packs:Bi(e.packs)}:{...t,covers:s}}function Bi(e){return e.reduce((e,{emoticon:t,documents:s})=>(e[t]=s.map(e=>{const t=Qs.documents[String(e)];if(t)return Ri(t)}).filter(Boolean),e),{})}function Di(e){return e.map(e=>{if(e instanceof Ce.Document){const t=Ri(e);if(t)return Qs.documents[String(e.id)]=e,t}}).filter(Boolean)}function Ui(e,t){if(!(e instanceof Ce.ReplyKeyboardMarkup||e instanceof Ce.ReplyInlineMarkup))return;const s=e.rows.map(({buttons:e})=>e.map(e=>{const{text:s,style:n}=e,a=Ds({style:n&&Ei(n)});return e instanceof Ce.KeyboardButton?{...a,type:"command",text:s}:e instanceof Ce.KeyboardButtonUrl?e.url.includes("?startgroup=")?{...a,type:"unsupported",text:s}:{...a,type:"url",text:s,url:e.url}:e instanceof Ce.KeyboardButtonCallback?e.requiresPassword?{...a,type:"unsupported",text:s}:{...a,type:"callback",text:s,data:Va(e.data)}:e instanceof Ce.KeyboardButtonRequestPoll?{...a,type:"requestPoll",text:s,isQuiz:e.quiz}:e instanceof Ce.KeyboardButtonRequestPhone?{...a,type:"requestPhone",text:s}:e instanceof Ce.KeyboardButtonBuy?t?{...a,type:"receipt",receiptMessageId:t}:{...a,type:"buy",text:s}:e instanceof Ce.KeyboardButtonGame?{...a,type:"game",text:s}:e instanceof Ce.KeyboardButtonSwitchInline?{...a,type:"switchBotInline",text:s,query:e.query,isSamePeer:e.samePeer}:e instanceof Ce.KeyboardButtonUserProfile?{...a,type:"userProfile",text:s,userId:e.userId.toString()}:e instanceof Ce.KeyboardButtonSimpleWebView?{...a,type:"simpleWebView",text:s,url:e.url}:e instanceof Ce.KeyboardButtonWebView?{...a,type:"webView",text:s,url:e.url}:e instanceof Ce.KeyboardButtonUrlAuth?{...a,type:"urlAuth",text:s,url:e.url,buttonId:e.buttonId}:e instanceof Ce.KeyboardButtonCopy?{...a,type:"copy",text:s,copyText:e.copyText}:{...a,type:"unsupported",text:s}}).filter(Boolean));return s.every(e=>!e.length)?void 0:{[e instanceof Ce.ReplyKeyboardMarkup?"keyboardButtons":"inlineButtons"]:s,...e instanceof Ce.ReplyKeyboardMarkup&&{keyboardPlaceholder:e.placeholder,isKeyboardSingleUse:e.singleUse,isKeyboardSelective:e.selective}}}function Ei(e){const{bgPrimary:t,bgDanger:s,bgSuccess:n,icon:a}=e;return{type:t?"primary":s?"destructive":n?"success":void 0,iconId:a?.toString()}}function xi(e,t,s,n){const a={};return e instanceof Ce.BotInlineMessageText?a.text={text:e.message,entities:e.entities?.map(_i)}:e instanceof Ce.BotInlineMessageMediaAuto?"photo"===t&&n instanceof Ce.Photo?a.photo=li(n):"audio"===t&&s instanceof Ce.Document?a.audio=Rr(s):"video"===t&&s instanceof Ce.Document?a.video=Ar(s):"sticker"===t&&s instanceof Ce.Document?a.sticker=Ri(s):"file"===t&&s instanceof Ce.Document?a.document=Tr(s):"gif"===t&&s instanceof Ce.Document?a.video=Ar(s):a.text={text:e.message,entities:e.entities?.map(_i)}:e instanceof Ce.BotInlineMessageMediaGeo?a.location={mediaType:"geo",geo:Dr(e.geo)}:e instanceof Ce.BotInlineMessageMediaVenue?a.location={mediaType:"venue",geo:Dr(e.geo),title:e.title,address:e.address,provider:e.provider,venueId:e.venueId,venueType:e.venueType}:e instanceof Ce.BotInlineMessageMediaContact?a.contact={mediaType:"contact",phoneNumber:e.phoneNumber,firstName:e.firstName,lastName:e.lastName,userId:"0"}:e instanceof Ce.BotInlineMessageMediaInvoice&&(a.invoice={mediaType:"invoice",isTest:e.test,title:e.title,description:e.description,photo:qr(e.photo),currency:e.currency,amount:rs(e.totalAmount)}),{content:a,replyMarkup:Ui(e.replyMarkup)||void 0}}function Vi(e,t){const{id:s,type:n,title:a,description:i,url:o,thumb:r,content:c,sendMessage:d}=e;return{id:s,queryId:t,type:n,sendMessage:xi(d,n),title:a,description:i,url:o,content:qr(c),webThumbnail:qr(r)}}function Gi(e,t){const{id:s,type:n,title:a,description:i,sendMessage:o,photo:r,document:c}=e;return{id:s,queryId:t,type:n,title:a,description:i,..."sticker"===n&&c instanceof Ce.Document&&{sticker:Ri(c)},...r instanceof Ce.Photo&&{photo:li(r)},..."gif"===n&&c instanceof Ce.Document&&{gif:Ar(c)},..."file"===n&&c instanceof Ce.Document&&{document:Tr(c)},..."audio"===n&&c instanceof Ce.Document&&{audio:Rr(c)},..."video"===n&&c instanceof Ce.Document&&{video:Ar(c)},sendMessage:xi(o,n,c,r)}}function Fi(e){return{id:e.botId.toString(),shouldRequestWriteAccess:e.requestWriteAccess,shortName:e.shortName,isForAttachMenu:e.showInAttachMenu,isForSideMenu:e.showInSideMenu,attachMenuPeerTypes:e.peerTypes&&(t=e.peerTypes,t.flatMap(e=>e instanceof Ce.AttachMenuPeerTypeBotPM?["bots"]:e instanceof Ce.AttachMenuPeerTypePM?["users"]:e instanceof Ce.AttachMenuPeerTypeChat?["chats","groups"]:e instanceof Ce.AttachMenuPeerTypeBroadcast?["channels"]:e instanceof Ce.AttachMenuPeerTypeSameBotPM?["self"]:[])),icons:e.icons.map(Ni).filter(Boolean),isInactive:e.inactive,isDisclaimerNeeded:e.sideMenuDisclaimerNeeded};var t}function Ni(e){if(!(e.icon instanceof Ce.Document))return;const t=Tr(e.icon);return t?(ti(e.icon),{name:e.name,document:t}):void 0}function qi(e,t){const{description:s,descriptionPhoto:n,descriptionDocument:a,userId:i,commands:o,menuButton:r,privacyPolicyUrl:c,hasPreviewMedias:d,appSettings:u}=e,l=i&&Ia(i,"user"),f=n instanceof Ce.Photo?li(n):void 0,g=a instanceof Ce.Document?Ar(a):void 0,p=o?.map(e=>Li(l||t,e));return{botId:l||t,description:s,gif:g,photo:f,menuButton:Oi(r),privacyPolicyUrl:c,commands:p?.length?p:void 0,hasPreviewMedia:d,appSettings:u&&Hi(u)}}function Hi(e){const t=e.placeholderPath&&ri(e.placeholderPath);return{backgroundColor:e.backgroundColor?ba(e.backgroundColor):void 0,backgroundDarkColor:e.backgroundDarkColor?ba(e.backgroundDarkColor):void 0,headerColor:e.headerColor?ba(e.headerColor):void 0,headerDarkColor:e.headerDarkColor?ba(e.headerDarkColor):void 0,placeholderPath:t}}function Li(e,t){return{botId:e,...Ls(t)}}function Oi(e){return e instanceof Ce.BotMenuButton?{type:"webApp",text:e.text,url:e.url}:{type:"commands"}}function ji(e){if(e instanceof Ce.BotAppNotModified)return;const{id:t,accessHash:s,title:n,description:a,shortName:i,photo:o,document:r}=e,c=o instanceof Ce.Photo?li(o):void 0,d=r instanceof Ce.Document?Tr(r):void 0;return{id:t.toString(),accessHash:s.toString(),title:n,description:a,shortName:i,photo:c,document:d}}function Wi(e){return e instanceof Ce.InlineQueryPeerTypeBotPM?"bots":e instanceof Ce.InlineQueryPeerTypePM?"users":e instanceof Ce.InlineQueryPeerTypeChat?"chats":e instanceof Ce.InlineQueryPeerTypeMegagroup?"supergroups":e instanceof Ce.InlineQueryPeerTypeBroadcast?"channels":e instanceof Ce.InlineQueryPeerTypeSameBotPM?"self":void 0}function zi(e){const{address:t,geoPoint:s}=e;return{address:t,geo:s&&Dr(s)}}function Ki(e){const{timezoneId:t,weeklyOpen:s}=e;return{timezoneId:t,workHours:s.map(({startMinute:e,endMinute:t})=>({startMinute:e,endMinute:t}))}}function $i(e){const{title:t,description:s,sticker:n}=e;return{title:t,description:s,sticker:n&&Ri(n)}}function Ji(e){const{fullUser:{about:t,commonChatsCount:s,pinnedMsgId:n,botInfo:a,blocked:i,profilePhoto:o,voiceMessagesForbidden:r,hasScheduled:c,fallbackPhoto:d,personalPhoto:u,translationsDisabled:l,storiesPinnedAvailable:f,contactRequirePremium:g,businessWorkHours:p,businessLocation:h,businessIntro:m,birthday:y,personalChannelId:_,personalChannelMessage:b,sponsoredEnabled:S,stargiftsCount:w,botVerification:I,botCanManageEmojiStatus:v,settings:P,sendPaidMessagesStars:C,displayGiftsButton:M,disallowedGifts:A,starsRating:R,starsMyPendingRating:k,starsMyPendingRatingDate:T,mainTab:B,note:D},users:U}=e,E=Ia(U[0].id,"user");return{bio:t,commonChatsCount:s,pinnedMessageId:n,isBlocked:Boolean(i),noVoiceMessages:r,hasPinnedStories:Boolean(f),isTranslationDisabled:l,profilePhoto:o instanceof Ce.Photo?li(o):void 0,fallbackPhoto:d instanceof Ce.Photo?li(d):void 0,personalPhoto:u instanceof Ce.Photo?li(u):void 0,botInfo:a&&qi(a,E),isContactRequirePremium:g,shouldDisplayGiftsButton:M,disallowedGifts:A&&hr(A),birthday:y&&eo(y),businessLocation:h&&zi(h),businessWorkHours:p&&Ki(p),businessIntro:m&&$i(m),personalChannelId:void 0!==_?Ia(_,"channel"):void 0,personalChannelMessageId:b,botVerification:I&&ka(I),areAdsEnabled:S,starGiftCount:w,starsRating:R&&to(R),starsMyPendingRating:k&&to(k),starsMyPendingRatingDate:T,isBotCanManageEmojiStatus:v,hasScheduledMessages:c,paidMessagesStars:rs(C),settings:Qi(P),mainTab:B&&Ba(B),note:D&&yi(D)}}function Qi({autoarchived:e,reportSpam:t,addContact:s,blockContact:n,registrationMonth:a,phoneCountry:i,nameChangeDate:o,photoChangeDate:r,chargePaidMessageStars:c}){return{isAutoArchived:Boolean(e),canReportSpam:Boolean(t),canAddContact:Boolean(s),canBlockContact:Boolean(n),registrationMonth:a,phoneCountry:i,nameChangeDate:o,photoChangeDate:r,chargedPaidMessageStars:rs(c)}}function Xi(e){if(!(e instanceof Ce.User))return;const{id:t,firstName:s,lastName:n,fake:a,scam:i,support:o,closeFriend:r,storiesUnavailable:c,bot:d,botActiveUsers:u,botVerificationIcon:l,botInlinePlaceholder:f,botAttachMenu:g,botCanEdit:p,sendPaidMessagesStars:h,profileColor:m,botForumView:y,botForumCanManageTopics:_}=e,b=e.storiesMaxId?.maxId,S=e.photo instanceof Ce.UserProfilePhoto?Boolean(e.photo.hasVideo):void 0,w=e.photo&&Ra(e.photo),I=(M=e).bot?"userTypeBot":M.deleted?"userTypeDeleted":"userTypeRegular",v=hi(e),P=v?.some(e=>e.isActive),C=e.emojiStatus?Aa(e.emojiStatus):void 0;var M;return{id:Ia(t,"user"),isMin:Boolean(e.min),fakeType:i?"scam":a?"fake":void 0,...e.self&&{isSelf:!0},isPremium:Boolean(e.premium),...e.verified&&{isVerified:!0},...r&&{isCloseFriend:!0},...o&&{isSupport:!0},...(e.contact||e.mutualContact)&&{isContact:!0},type:I,firstName:s,lastName:n,hasMainMiniApp:Boolean(e.botHasMainApp),canEditBot:p,..."userTypeBot"===I&&{canBeInvitedToGroup:!e.botNochats},usernames:v,hasUsername:P,phoneNumber:e.phone||"",noStatus:!e.status,...e.accessHash&&{accessHash:String(e.accessHash)},avatarPhotoId:w,emojiStatus:C,hasVideoAvatar:S,areStoriesHidden:Boolean(e.storiesHidden),maxStoryId:b,hasStories:Boolean(b)&&!c,...d&&f&&{botPlaceholder:f},...d&&g&&{isAttachBot:g},botActiveUsers:u,botVerificationIconId:l?.toString(),color:e.color&&Pa(e.color),profileColor:m&&Pa(m),paidMessagesStars:rs(h),isBotForum:y,canManageBotForumTopics:_}}function Yi(e){return!e||e instanceof Ce.UserStatusEmpty?{type:"userStatusEmpty"}:e instanceof Ce.UserStatusOnline?{type:"userStatusOnline",expires:e.expires}:e instanceof Ce.UserStatusOffline?{type:"userStatusOffline",wasOnline:e.wasOnline}:e instanceof Ce.UserStatusRecently?{type:"userStatusRecently",isReadDateRestrictedByMe:e.byMe}:e instanceof Ce.UserStatusLastWeek?{type:"userStatusLastWeek",isReadDateRestrictedByMe:e.byMe}:{type:"userStatusLastMonth",isReadDateRestrictedByMe:e.byMe}}function Zi(e){const t={};return e.forEach(e=>{if("status"in e){const s=Ia(e.id,"user");t[s]=Yi(e.status)}}),t}function eo(e){return Ls(e)}function to(e){return{level:e.level,currentLevelStars:rs(e.currentLevelStars),stars:rs(e.stars),nextLevelStars:rs(e.nextLevelStars)}}function so(e){if(e instanceof Ce.WallPaperNoFile)return;const{slug:t}=e,s=Tr(e.document);return s?{slug:t,document:s}:void 0}function no(e){return{isCurrent:Boolean(e.current),isOfficialApp:Boolean(e.officialApp),isPasswordPending:Boolean(e.passwordPending),hash:String(e.hash),areCallsEnabled:!e.callRequestsDisabled,areSecretChatsEnabled:!e.encryptedRequestsDisabled,isUnconfirmed:e.unconfirmed,...ks(e,["deviceModel","platform","systemVersion","appName","appVersion","dateCreated","dateActive","ip","country","region"])}}function ao(e){return{hash:String(e.hash),botId:Ia(e.botId,"user"),...ks(e,["platform","browser","dateCreated","dateActive","ip","region","domain"])}}function io(e,t){const{hidden:s,iso2:n,defaultName:a,name:i}=e,{countryCode:o,prefixes:r,patterns:c}=t||{};return{isHidden:s,iso2:n,defaultName:a,name:i,countryCode:o,prefixes:r,patterns:c}}function oo(e){if(!(e instanceof Ce.JsonNull))return e instanceof Ce.JsonString||e instanceof Ce.JsonBool||e instanceof Ce.JsonNumber?e.value:e instanceof Ce.JsonArray?e.value.map(oo):e.value.reduce((e,t)=>(e[t.key]=oo(t.value),e),{})}function ro(e){if(e instanceof Ce.UrlAuthResultRequest){const{bot:t,domain:s,requestWriteAccess:n}=e,a=Xi(t);if(!a)return;return ii(t),{type:"request",domain:s,shouldRequestWriteAccess:n,bot:a}}return e instanceof Ce.UrlAuthResultAccepted?{type:"accepted",url:e.url}:e instanceof Ce.UrlAuthResultDefault?{type:"default"}:void 0}function co(e){const{suggestion:t,title:s,description:n,url:a}=e;return{suggestion:t,title:yi(s),description:yi(n),url:a}}function uo(e){return e.strings.reduce((e,t)=>(e[t.key]=function(e){return e instanceof Ce.LangPackString?e.value:e instanceof Ce.LangPackStringPluralized?Bs(Ls(e),["key"]):void 0}(t),e),{})}function lo(e){const t=[],s=e.reduce((e,s)=>(s instanceof Ce.LangPackStringDeleted&&t.push(s.key),s instanceof Ce.LangPackString&&(e[s.key]=s.value),s instanceof Ce.LangPackStringPluralized&&(e[s.key]=Ds({zero:s.zeroValue,one:s.oneValue,two:s.twoValue,few:s.fewValue,many:s.manyValue,other:s.otherValue})),e),{});return{keysToRemove:t,strings:s}}function fo(e){const{name:t,nativeName:s,langCode:n,pluralCode:a,rtl:i,stringsCount:o,translatedCount:r,translationsUrl:c,beta:d,official:u}=e;return{name:t,nativeName:s,langCode:n,pluralCode:a,isRtl:i,isBeta:d,isOfficial:u,stringsCount:o,translatedCount:r,translationsUrl:c}}function go(e){const{id:t,name:s,utcOffset:n}=e;return{id:t,name:s,utcOffset:n}}function po(e){if(e)return e.map(({reason:e,text:t,platform:s})=>({reason:e,text:t,platform:s}))}function ho(e){const{id:t,name:s,date:n,softwareEmojiId:a,lastUsageDate:i}=e;return{id:t,name:s,date:n,softwareEmojiId:a?.toString(),lastUsageDate:i}}function mo(e,t=!1){const s=e instanceof Ce.User?e:void 0,n=e instanceof Ce.Channel?e:void 0,a=s||n,i=Boolean("min"in e&&e.min),o="accessHash"in e?String(e.accessHash):void 0,r="photo"in e&&e.photo&&"hasVideo"in e.photo&&e.photo.hasVideo,c="photo"in e&&e.photo?Ra(e.photo):void 0,d=hi(e),u=d?.some(e=>e.isActive),l="callActive"in e&&e.callActive,f="callNotEmpty"in e&&e.callNotEmpty,g="date"in e?e.date:void 0,p="participantsCount"in e?e.participantsCount:void 0,h="noforwards"in e&&e.noforwards,m="creator"in e&&e.creator,y=a?.scam,_=a?.fake,b=a?.storiesHidden,S=a?.storiesMaxId?.maxId,w=a?.botVerificationIcon?.toString(),I=a?.storiesUnavailable,v=a?.color?Pa(a.color):void 0,P=a?.profileColor?Pa(a.profileColor):void 0,C=a?.emojiStatus?Aa(a.emojiStatus):void 0,M=a?.sendPaidMessagesStars,A=a?.verified,R=n?.forum||s?.botForumView;return{isMin:i,isLinkedInDiscussion:n?.hasLink,areSignaturesShown:n?.signatures,areProfilesShown:n?.signatureProfiles,usernames:d,accessHash:o,hasVideoAvatar:r,avatarPhotoId:c,isVerified:A,isCallActive:l,isCallNotEmpty:f,creationDate:g,hasUsername:u,...void 0!==p&&{membersCount:p},isProtected:h,isSupport:t||void 0,isCreator:m,fakeType:y?"scam":_?"fake":void 0,color:v,profileColor:P,isJoinToSend:n?.joinToSend,isJoinRequest:n?.joinRequest,isForum:R,isBotForum:s?.botForumView,isMonoforum:n?.monoforum,linkedMonoforumId:void 0!==n?.linkedMonoforumId?Ia(n.linkedMonoforumId,"channel"):void 0,areChannelMessagesAllowed:n?.broadcastMessagesAllowed,areStoriesHidden:b,maxStoryId:S,hasStories:Boolean(S)&&!I,emojiStatus:C,boostLevel:n?.level,botVerificationIconId:w,hasGeo:n?.hasGeo,subscriptionUntil:n?.subscriptionUntilDate,paidMessagesStars:rs(M),level:n?.level,hasAutoTranslation:n?.autotranslation,withForumTabs:n?.forumTabs,..._o(e),...bo(e),...So(e)}}function yo(e,t){const{peer:s,folderId:n,viewForumAsMessages:a}=e;return{id:va(s),folderId:n,type:Io(t),title:Po(s,t),isForumAsMessages:a,...mo(t)}}function _o(e){return e instanceof Ce.Chat||e instanceof Ce.Channel?{adminRights:e.adminRights?Ls(e.adminRights):void 0,currentUserBannedRights:"bannedRights"in e&&e.bannedRights?Ls(e.bannedRights):void 0,defaultBannedRights:e.defaultBannedRights?Ls(e.defaultBannedRights):void 0}:{}}function bo(e){if(e instanceof Ce.ChatForbidden)return{isForbidden:!0};if(e instanceof Ce.ChannelForbidden)return{isRestricted:!0};const t={},s="min"in e&&e.min,n="restricted"in e;if(s||Object.assign(t,{isForbidden:void 0,isRestricted:void 0}),n&&!s){const s=po(e.restrictionReason);Object.assign(t,{restrictionReasons:s})}return e instanceof Ce.Chat&&Object.assign(t,{isNotJoined:e.left}),e instanceof Ce.Channel&&Object.assign(t,{isNotJoined:e.left}),t}function So(e){return!("migratedTo"in e)||!e.migratedTo||e.migratedTo instanceof Ce.InputChannelEmpty?{}:{migratedTo:{chatId:va(e.migratedTo),...e.migratedTo instanceof Ce.InputChannel&&{accessHash:String(e.migratedTo.accessHash)}}}}function wo(e,t=!1){if(!(e instanceof Ce.ChatEmpty||e instanceof Ce.UserEmpty))return{id:Ia(e.id,e instanceof Ce.User?"user":e instanceof Ce.Chat||e instanceof Ce.ChatForbidden?"chat":"channel"),type:Io(e),title:e instanceof Ce.User?Co(e):e.title,...mo(e,t)}}function Io(e){return e instanceof Ce.User||e instanceof Ce.UserEmpty?"chatTypePrivate":e instanceof Ce.Chat||e instanceof Ce.ChatForbidden||e instanceof Ce.ChatEmpty?"chatTypeBasicGroup":e.megagroup?"chatTypeSuperGroup":"chatTypeChannel"}function vo(e){return Sa(e)?`user${e.userId.toString()}`:wa(e)?`chat${e.chatId.toString()}`:`chat${e.channelId.toString()}`}function Po(e,t){return Sa(e)?Co(t):t.title}function Co(e){return e.firstName?`${e.firstName}${e.lastName?` ${e.lastName}`:""}`:e.lastName||""}function Mo(e){return{userId:e instanceof Ce.ChannelParticipantBanned||e instanceof Ce.ChannelParticipantLeft?va(e.peer):Ia(e.userId,"user"),inviterId:"inviterId"in e&&e.inviterId?Ia(e.inviterId,"user"):void 0,joinedDate:"date"in e?e.date:void 0,kickedByUserId:"kickedBy"in e&&e.kickedBy?Ia(e.kickedBy,"user"):void 0,promotedByUserId:"promotedBy"in e&&e.promotedBy?Ia(e.promotedBy,"user"):void 0,bannedRights:"bannedRights"in e?Ls(e.bannedRights):void 0,adminRights:"adminRights"in e?Ls(e.adminRights):void 0,customTitle:"rank"in e?e.rank:void 0,isViaRequest:"viaRequest"in e?e.viaRequest:void 0,...(e instanceof Ce.ChannelParticipantAdmin||e instanceof Ce.ChatParticipantAdmin)&&{isAdmin:!0},...(e instanceof Ce.ChannelParticipantCreator||e instanceof Ce.ChatParticipantCreator)&&{isOwner:!0}}}function Ao(e){return e instanceof Ce.ChatParticipants||e instanceof Ce.channels.ChannelParticipants?e.participants.map(Mo).filter(Boolean):void 0}function Ro(e){let t,s="";if(!(e.action instanceof Ce.SendMessageCancelAction)){if(e.action instanceof Ce.SendMessageTypingAction)s="lng_user_typing";else if(e.action instanceof Ce.SendMessageRecordVideoAction)s="lng_send_action_record_video";else if(e.action instanceof Ce.SendMessageUploadVideoAction)s="lng_send_action_upload_video";else if(e.action instanceof Ce.SendMessageRecordAudioAction)s="lng_send_action_record_audio";else if(e.action instanceof Ce.SendMessageUploadAudioAction)s="lng_send_action_upload_audio";else if(e.action instanceof Ce.SendMessageUploadPhotoAction)s="lng_send_action_upload_photo";else if(e.action instanceof Ce.SendMessageUploadDocumentAction)s="lng_send_action_upload_file";else if(e.action instanceof Ce.SendMessageGeoLocationAction)s="selecting a location to share";else if(e.action instanceof Ce.SendMessageChooseContactAction)s="selecting a contact to share";else if(e.action instanceof Ce.SendMessageGamePlayAction)s="lng_playing_game";else if(e.action instanceof Ce.SendMessageRecordRoundAction)s="lng_send_action_record_round";else if(e.action instanceof Ce.SendMessageUploadRoundAction)s="lng_send_action_upload_round";else if(e.action instanceof Ce.SendMessageChooseStickerAction)s="lng_send_action_choose_sticker";else{if(e.action instanceof Ce.SpeakingInGroupCallAction)return;if(e.action instanceof Ce.SendMessageEmojiInteractionSeen)s="lng_user_action_watching_animations",t=e.action.emoticon;else if(e.action instanceof Ce.SendMessageEmojiInteraction)return}return{action:s,...t&&{emoji:t},...!(e instanceof Ce.UpdateUserTyping)&&{userId:va(e.fromId)},timestamp:Date.now()+1e3*Is()}}}function ko(e){return e instanceof Ce.DialogFilterChatlist?{...Ts(e,["id","emoticon"]),excludedChatIds:[],includedChatIds:e.includePeers.map(va).filter(Boolean),pinnedChatIds:e.pinnedPeers.map(va).filter(Boolean),hasMyInvites:e.hasMyInvites,isChatList:!0,noTitleAnimations:e.titleNoanimate,color:e.color,title:yi(e.title)}:{...Ts(e,["id","emoticon","contacts","nonContacts","groups","bots","excludeMuted","excludeRead","excludeArchived"]),channels:e.broadcasts,pinnedChatIds:e.pinnedPeers.map(va).filter(Boolean),includedChatIds:e.includePeers.map(va).filter(Boolean),excludedChatIds:e.excludePeers.map(va).filter(Boolean),color:e.color,title:yi(e.title),noTitleAnimations:e.titleNoanimate}}function To({filter:e,description:t}){if(e instanceof Ce.DialogFilter||e instanceof Ce.DialogFilterChatlist)return{...ko(e),description:t}}function Bo(e){return e.reduce((e,t)=>{const s=Ia(t.userId,"user");return t.commands&&(e=e.concat(t.commands.map(e=>({botId:s,...Ls(e)})))),e},[])}function Do(e){const{revoked:t,date:s,expireDate:n,link:a,permanent:i,startDate:o,usage:r,usageLimit:c,requested:d,requestNeeded:u,title:l,adminId:f}=e;return{isRevoked:t,date:s,expireDate:n,link:a,isPermanent:i,startDate:o,usage:r,usageLimit:c,isRequestNeeded:u,requested:d,title:l,adminId:Ia(f,"user")}}function Uo(e){return e instanceof Ce.ChatReactionsAll?{type:"all",areCustomAllowed:e.allowCustom}:e instanceof Ce.ChatReactionsSome?{type:"some",allowed:e.reactions.map(e=>Pi(e)).filter(Boolean)}:void 0}function Eo(e){return{id:va(e.peer),isPremium:e.premiumRequired}}function xo(e){if(!(e instanceof Ce.ExportedChatlistInvite))return;const{title:t,url:s,peers:n}=e;return{title:t,url:s,peerIds:n.map(va).filter(Boolean)}}function Vo(e){return{id:e.userId.toString(),isRequiringPremiumToMessage:e.premiumRequiredForPm,isRequiringPremiumToInvite:e.premiumWouldAllowInvite}}function Go(e){const{color:t,participants:s,participantsCount:n,photo:a,title:i,about:o,scam:r,fake:c,verified:d,megagroup:u,channel:l,broadcast:f,requestNeeded:g,subscriptionFormId:p,subscriptionPricing:h,canRefulfillSubscription:m,botVerification:y}=e;let _;return a instanceof Ce.Photo&&(ei(a),_=li(a)),s?.forEach(ii),{title:i,about:o,isFake:c,isScam:r,isVerified:d,isSuperGroup:u,isPublic:e.public,participantsCount:n,color:t,isChannel:l,isBroadcast:f,isRequestNeeded:g,photo:_,subscriptionFormId:p?.toString(),subscriptionPricing:h&&Fo(h),canRefulfillSubscription:m,participantIds:s?.map(e=>Ia(e.id,"user")).filter(Boolean),botVerification:y&&ka(y)}}function Fo(e){return{period:e.period,amount:rs(e.amount)}}function No(e){const{unreadCount:t,readInboxMaxId:s,readOutboxMaxId:n}=e,a=e instanceof Ce.Dialog?e:void 0,i=e instanceof Ce.MonoForumDialog?e:void 0,o=e instanceof Ce.ForumTopic?e:void 0,{unreadReactionsCount:r}=a||i||o||{},{unreadMentionsCount:c}=a||o||{},{unreadMark:d}=a||i||{};return Ds({unreadCount:t,lastReadInboxMessageId:s,lastReadOutboxMessageId:n,unreadReactionsCount:r,unreadMentionsCount:c,hasUnreadMark:d})}function qo(e,t){const s=t instanceof Ce.SavedDialog,{topMessage:n}=t;return{isCommentsInfo:!1,chatId:e,threadId:s?va(t.peer):Cs,lastMessageId:n}}function Ho(e){return e instanceof Ce.PostInteractionCountersMessage?{type:"message",msgId:e.msgId,forwardsCount:e.forwards,viewsCount:e.views,reactionsCount:e.reactions}:e instanceof Ce.PostInteractionCountersStory?{type:"story",storyId:e.storyId,reactionsCount:e.reactions,viewsCount:e.views,forwardsCount:e.forwards}:void 0}function Lo(e){return{viewsGraph:Wo(e.viewsGraph),reactionsGraph:Wo(e.reactionsByEmotionGraph)}}function Oo(e){if(e)return e.forwards.map(t=>{if(!(t instanceof Ce.PublicForwardStory))return Jo(t.message,e.chats)}).filter(Boolean)}function jo(e){if(e&&"forwards"in e)return e.forwards.map(t=>{if(t instanceof Ce.PublicForwardMessage)return Jo(t.message,e.chats);const{peer:s,story:n}=t;return{peerId:va(s),storyId:n.id,viewsCount:n.views?.viewsCount||0,reactionsCount:n.views?.reactionsCount||0}})}function Wo(e,t,s){if(e instanceof Ce.StatsGraphError)return{graphType:"error",error:e.error};if(e instanceof Ce.StatsGraphAsync)return{graphType:"async",token:e.token};const n=JSON.parse(e.json.data),[a,...i]=n.columns,o=n.y_scaled;return{graphType:"graph",type:t?"area":n.types.y0,zoomToken:e.zoomToken,labelFormatter:n.xTickFormatter,tooltipFormatter:n.xTooltipFormatter,labels:a.slice(1),hideCaption:!n.subchart.show,hasSecondYAxis:o,isStacked:n.stacked&&!o,isPercentage:t,secondaryYAxis:s,datasets:i.map(e=>{const t=e[0],a=e.slice(1);return{name:n.names[t],color:(i=n.colors[t],i.substring(i.indexOf("#"))),values:s?a.map(e=>e/1e9):a};var i}),...zo(n.subchart.defaultZoom,a.slice(1))}}function zo(e,t){const[s,n]=e;let a=0,i=t.length-1;return t.forEach((e,t)=>{!a&&e>=s&&(a=t),!i&&e>=n&&(i=t)}),{minimapRange:{begin:Math.max(0,a/(t.length-1)),end:Math.min(1,i/(t.length-1))},labelFromIndex:a,labelToIndex:i}}function Ko({current:e,previous:t}){const s=e-t;return{current:e,change:s,percentage:(s?Math.abs(s)/t*100:0).toFixed(2)}}function $o(e){return{part:e.part,total:e.total,percentage:(e.part/e.total*100).toFixed(2)}}function Jo(e,t){const s=va(e.peerId),n=t.find(e=>Ia(e.id,"channel")===s),a=n&&"photo"in n&&n.photo instanceof Ce.ChatPhoto?n.photo:void 0;return{messageId:e.id,views:e.views,title:n.title,chat:{id:s,type:"chatTypeChannel",title:n.title,usernames:hi(n),avatarPhotoId:a&&Ra(a),hasVideoAvatar:Boolean(a?.hasVideo)}}}function Qo(e){if(e)return e.map(e=>({id:e.id,title:e.title,amount:e.prices.reduce((e,t)=>e+rs(t.amount),0),prices:e.prices.map(({label:e,amount:t})=>({label:e,amount:rs(t)}))}))}function Xo(e){const{photo:t}=e;if(t&&oi(t),e instanceof Ce.payments.PaymentReceiptStars){const{botId:s,currency:n,date:a,description:i,title:o,totalAmount:r,transactionId:c,invoice:d}=e;return{type:"stars",currency:n,date:a,botId:Ia(s,"user"),description:i,title:o,totalAmount:-rs(r),transactionId:c,photo:qr(t),invoice:Yo(d)}}const{invoice:s,info:n,shipping:a,totalAmount:i,credentialsTitle:o,tipAmount:r,title:c,description:d,botId:u,currency:l,date:f,providerId:g}=e,{shippingAddress:p,phone:h,name:m}=n||{};let y,_;return a&&(y=a.prices.map(({label:e,amount:t})=>({label:e,amount:rs(t)})),_=a.title),{type:"regular",info:{shippingAddress:p,phone:h,name:m},totalAmount:rs(i),currency:l,date:f,credentialsTitle:o,shippingPrices:y,shippingMethod:_,tipAmount:rs(r)||0,title:c,description:d,botId:Ia(u,"user"),providerId:g.toString(),photo:t&&qr(t),invoice:Yo(s)}}function Yo(e){const{test:t,currency:s,prices:n,recurring:a,termsUrl:i,maxTipAmount:o,suggestedTipAmounts:r,emailRequested:c,emailToProvider:d,nameRequested:u,phoneRequested:l,phoneToProvider:f,shippingAddressRequested:g,flexible:p,subscriptionPeriod:h}=e,m=n.map(({label:e,amount:t})=>({label:e,amount:rs(t)}));return{totalAmount:n.reduce((e,t)=>e+rs(t.amount),0),currency:s,isTest:t,isRecurring:a,termsUrl:i,prices:m,maxTipAmount:rs(o),suggestedTipAmounts:r?.map(e=>rs(e)),isEmailRequested:c,isEmailSentToProvider:d,isNameRequested:u,isPhoneRequested:l,isPhoneSentToProvider:f,isShippingAddressRequested:g,isFlexible:p,subscriptionPeriod:h}}function Zo(e){const{statusText:t,statusEntities:s,videos:n,videoSections:a,periodOptions:i}=e;return{statusText:t,statusEntities:s.map(_i),videoSections:a,videos:n.map(Tr).filter(Boolean),options:i.map(er)}}function er(e){const{current:t,canPurchaseUpgrade:s,currency:n,amount:a,botUrl:i,months:o}=e;return{isCurrent:t,canPurchaseUpgrade:s,currency:n,amount:rs(a),botUrl:i,months:o}}function tr(e){const{userId:t,multiplier:s,expires:n,giveaway:a,gift:i,stars:o}=e;return{userId:void 0!==t?Ia(t,"user"):void 0,multiplier:s,expires:n,isFromGiveaway:a,isGift:i,stars:rs(o)}}function sr(e){const{date:t,expires:s,slot:n,cooldownUntilDate:a,peer:i}=e;return{date:t,expires:s,slot:n,cooldownUntil:a,chatId:i&&va(i)}}function nr(e){const{date:t,fromId:s,days:n,giveawayMsgId:a,toId:i,usedDate:o,viaGiveaway:r}=e;return{date:t,days:n,toId:void 0!==i?Ia(i,"user"):void 0,fromId:s&&va(s),usedAt:o,isFromGiveaway:r,giveawayMessageId:a}}function ar(e){const{amount:t,currency:s,months:n,users:a}=e;return{amount:rs(t),currency:s,months:n,users:a}}function ir(e){const{extended:t,stars:s,amount:n,currency:a}=e;return{isExtended:t,stars:rs(s),amount:rs(n),currency:a}}function or(e){return e instanceof Ce.StarsAmount?{currency:"XTR",amount:rs(e.amount),nanos:e.nanos}:e instanceof Ce.StarsTonAmount?{currency:"TON",amount:rs(e.amount)}:e}function rr(e){const{extended:t,default:s,stars:n,yearlyBoosts:a,amount:i,winners:o,currency:r}=e,c=o?.map(e=>function(e){const{default:t,users:s,perUserStars:n}=e;return{isDefault:t,users:s,perUserStars:rs(n)}}(e)).filter(Boolean);return{isExtended:t,isDefault:s,yearlyBoosts:a,stars:rs(n),amount:rs(i),currency:r,winners:c}}function cr(e){return e instanceof Ce.StarsTransactionPeerAppStore?{type:"appStore"}:e instanceof Ce.StarsTransactionPeerPlayMarket?{type:"playMarket"}:e instanceof Ce.StarsTransactionPeerPremiumBot?{type:"premiumBot"}:e instanceof Ce.StarsTransactionPeerFragment?{type:"fragment"}:e instanceof Ce.StarsTransactionPeerAds?{type:"ads"}:e instanceof Ce.StarsTransactionPeerAPI?{type:"api"}:e instanceof Ce.StarsTransactionPeer?{type:"peer",id:va(e.peer)}:{type:"unsupported"}}function dr(e){const{date:t,id:s,peer:n,amount:a,description:i,photo:o,title:r,refund:c,extendedMedia:d,failed:u,msgId:l,pending:f,gift:g,reaction:p,subscriptionPeriod:h,stargift:m,giveawayPostId:y,starrefCommissionPermille:_,stargiftUpgrade:b,paidMessages:S,stargiftResale:w,postsSearch:I,stargiftPrepaidUpgrade:v,stargiftDropOriginalDetails:P,stargiftAuctionBid:C}=e;o&&oi(o);const M=d?.map(e=>Mr(e)).filter(Boolean),A=_?_/10:void 0,R=or(a);if(R)return{id:s,date:t,peer:cr(n),amount:R,title:r,description:i,photo:o&&qr(o),isRefund:c,hasFailed:u,isPending:f,messageId:l,isGift:g,extendedMedia:M,subscriptionPeriod:h,isReaction:p,starGift:m&&fr(m),giveawayPostId:y,starRefCommision:A,isGiftUpgrade:b,isGiftResale:w,paidMessages:S,isPostsSearch:I,isDropOriginalDetails:P,isPrepaidUpgrade:v,isStarGiftAuctionBid:C}}function ur(e){const{id:t,peer:s,pricing:n,untilDate:a,canRefulfill:i,canceled:o,chatInviteHash:r,missingBalance:c,botCanceled:d,photo:u,title:l,invoiceSlug:f}=e;return u&&oi(u),{id:t,peerId:va(s),until:a,pricing:Fo(n),isCancelled:o,canRefulfill:i,hasMissingBalance:c,chatInviteHash:r,hasBotCancelled:d,title:l,photo:u&&qr(u),invoiceSlug:f}}function lr(e){const{amount:t,currency:s,stars:n,extended:a}=e;return{amount:rs(t),currency:s,stars:rs(n),isExtended:a}}function fr(e){if(e instanceof Ce.StarGiftUnique){const{id:t,num:s,ownerId:n,ownerName:a,title:i,attributes:o,availabilityIssued:r,availabilityTotal:c,slug:d,ownerAddress:u,giftAddress:l,resellAmount:f,releasedBy:g,resaleTonOnly:p,requirePremium:h,valueCurrency:m,valueAmount:y,giftId:_,valueUsdAmount:b,burned:S,crafted:w}=e;return{type:"starGiftUnique",id:t.toString(),number:s,ownerId:n&&va(n),ownerName:a,ownerAddress:u,attributes:o.map(pr).filter(Boolean),title:i,totalCount:c,issuedCount:r,slug:d,giftAddress:l,resellPrice:f&&f.map(e=>or(e)).filter(Boolean),releasedByPeerId:g&&va(g),requirePremium:h,resaleTonOnly:p,valueCurrency:m,valueAmount:rs(y),valueUsdAmount:rs(b),regularGiftId:_.toString(),offerMinStars:e.offerMinStars,isBurned:S,isCrafted:w}}const{id:t,limited:s,stars:n,availabilityRemains:a,availabilityTotal:i,convertStars:o,firstSaleDate:r,lastSaleDate:c,soldOut:d,birthday:u,upgradeStars:l,resellMinStars:f,title:g,availabilityResale:p,releasedBy:h,requirePremium:m,limitedPerUser:y,perUserTotal:_,perUserRemains:b,lockedUntilDate:S,auction:w,auctionSlug:I,giftsPerRound:v,background:P}=e;ti(e.sticker);const C=Ri(e.sticker);return{type:"starGift",id:t.toString(),isLimited:s,sticker:C,stars:rs(n),availabilityRemains:a,availabilityTotal:i,starsToConvert:rs(o),firstSaleDate:r,lastSaleDate:c,isSoldOut:d,isBirthday:u,upgradeStars:void 0!==l?rs(l):void 0,title:g,resellMinStars:void 0!==f?rs(f):void 0,releasedByPeerId:h&&va(h),availabilityResale:void 0!==p?rs(p):void 0,requirePremium:m,limitedPerUser:y,perUserTotal:_,perUserRemains:b,lockedUntilDate:S,isAuction:w,auctionSlug:I,giftsPerRound:v,background:P?{centerColor:ba(P.centerColor),edgeColor:ba(P.edgeColor),textColor:ba(P.textColor)}:void 0}}function gr(e){return e instanceof Ce.StarGiftAttributeRarityUncommon?{type:"uncommon"}:e instanceof Ce.StarGiftAttributeRarityRare?{type:"rare"}:e instanceof Ce.StarGiftAttributeRarityEpic?{type:"epic"}:e instanceof Ce.StarGiftAttributeRarityLegendary?{type:"legendary"}:{type:"regular",rarityPercent:e.permille/10}}function pr(e){if(e instanceof Ce.StarGiftAttributeModel){const t=Ri(e.document);if(!t)return;return ti(e.document),{type:"model",name:e.name,sticker:t,rarity:gr(e.rarity)}}if(e instanceof Ce.StarGiftAttributePattern){const t=Ri(e.document);if(!t)return;return ti(e.document),{type:"pattern",name:e.name,sticker:t,rarity:gr(e.rarity)}}if(e instanceof Ce.StarGiftAttributeBackdrop){const{name:t,rarity:s,centerColor:n,edgeColor:a,patternColor:i,textColor:o,backdropId:r}=e;return{type:"backdrop",backdropId:r,name:t,centerColor:ba(n),edgeColor:ba(a),patternColor:ba(i),textColor:ba(o),rarity:gr(s)}}if(e instanceof Ce.StarGiftAttributeOriginalDetails){const{date:t,recipientId:s,message:n,senderId:a}=e;return{type:"originalDetails",date:t,recipientId:s&&va(s),message:n&&yi(n),senderId:a&&va(a)}}}function hr(e){const{disallowUnlimitedStargifts:t,disallowLimitedStargifts:s,disallowUniqueStargifts:n,disallowPremiumGifts:a}=e;return{shouldDisallowUnlimitedStarGifts:t,shouldDisallowLimitedStarGifts:s,shouldDisallowUniqueStarGifts:n,shouldDisallowPremiumGifts:a}}function mr(e){return e.map(e=>{switch(e.type){case"model":return new Ce.StarGiftAttributeIdModel({documentId:BigInt(e.documentId)});case"pattern":return new Ce.StarGiftAttributeIdPattern({documentId:BigInt(e.documentId)});case"backdrop":return new Ce.StarGiftAttributeIdBackdrop({backdropId:e.backdropId});default:return e}})}function yr(e){if(!e)return;const{collectionId:t,title:s,icon:n,giftsCount:a,hash:i}=e;return n&&ti(n),{collectionId:t,title:s,icon:n&&Ri(n),giftsCount:a,hash:i.toString()}}function _r(e){return{date:e.date,upgradeStars:rs(e.upgradeStars)}}function br(e){return{pos:e.pos,amount:rs(e.amount)??0,date:e.date}}function Sr(e){if(e instanceof Ce.StarGiftAuctionStateNotModified)return;if(e instanceof Ce.StarGiftAuctionStateFinished){const{startDate:t,endDate:s,averagePrice:n,listedCount:a,fragmentListedCount:i,fragmentListedUrl:o}=e;return{type:"finished",startDate:t,endDate:s,averagePrice:rs(n),listedCount:a,fragmentListedCount:i,fragmentListedUrl:o}}const{version:t,startDate:s,endDate:n,minBidAmount:a,bidLevels:i,topBidders:o,nextRoundAt:r,lastGiftNum:c,giftsLeft:d,currentRound:u,totalRounds:l}=e;return{type:"active",version:t,startDate:s,endDate:n,minBidAmount:rs(a),bidLevels:i.map(br),topBidders:o.map(e=>Ia(e,"user")),nextRoundAt:r,lastGiftNum:c,giftsLeft:d,currentRound:u,totalRounds:l}}function wr(e){const{returned:t,bidAmount:s,bidDate:n,minBidAmount:a,bidPeer:i,acquiredCount:o}=e;return{isReturned:t||void 0,bidAmount:void 0!==s?rs(s):void 0,bidDate:n,minBidAmount:void 0!==a?rs(a):void 0,bidPeerId:i&&va(i),acquiredCount:o}}function Ir(e){const t=fr(e.gift);if("starGift"!==t.type)return;const s=Sr(e.state);return s?{gift:t,state:s,userState:wr(e.userState),timeout:"timeout"in e?e.timeout:void 0}:void 0}function vr(e){return{peerId:va(e.peer),date:e.date,bidAmount:rs(e.bidAmount),round:e.round,position:e.pos,message:e.message?yi(e.message):void 0,giftNumber:e.giftNum,isNameHidden:e.nameHidden||void 0}}function Pr(e){let t={};if(e.media){const s="peerId"in e?e:void 0;t={...Mr(e.media,s)}}const s=e.media instanceof Ce.MessageMediaUnsupported;if(e.message&&!s&&!t.sticker&&!t.pollId&&!t.todo&&!t.contact&&!t.video?.isRound){const s=Ja(Cr(e.message,e.entities));t={...t,text:s}}return t}function Cr(e,t){return{text:e,...t&&{entities:t.map(_i)}}}function Mr(e,t){Ya(e,t);const s="ttlSeconds"in e?e.ttlSeconds:void 0,n=function(e){return e instanceof Ce.MessageMediaDocument&&Boolean(!e.document&&e.voice)}(e);if(n)return{action:{mediaType:"action",type:"expired",isVoice:!0}};const a=function(e){return e instanceof Ce.MessageMediaDocument&&Boolean(!e.document&&e.round)}(e);if(a)return{action:{mediaType:"action",type:"expired",isRoundVideo:!0}};const i=function(e){if(!(e instanceof Ce.MessageMediaDocument&&e.document&&e.document instanceof Ce.Document))return;const t=e.document.attributes.find(e=>e instanceof Ce.DocumentAttributeAudio);if(!t||!t.voice)return;const{duration:s,waveform:n}=t;return{mediaType:"voice",id:String(e.document.id),size:rs(e.document.size),duration:s,waveform:n?Array.from(n):void 0}}(e);if(i)return{voice:i,ttlSeconds:s};if("round"in e&&e.round){const t=kr(e);if(t)return{video:t,ttlSeconds:s}}if(void 0!==s)return;if(e instanceof Ce.MessageMediaInvoice&&e.extendedMedia instanceof Ce.MessageExtendedMedia)return Mr(e.extendedMedia.media,t);const o=function(e){if(e instanceof Ce.MessageMediaDocument&&e.document&&e.document instanceof Ce.Document)return Ri(e.document,e.nopremium)}(e);if(o)return{sticker:o};const r=function(e){if(e instanceof Ce.MessageMediaPhoto&&e.photo&&e.photo instanceof Ce.Photo)return li(e.photo,e.spoiler)}(e);if(r)return{photo:r};const c=kr(e);if(c)return{video:c};const d=function(e){if(!(e instanceof Ce.MessageMediaDocument&&e.document&&e.document instanceof Ce.Document))return;const t=e.document.attributes.find(e=>e instanceof Ce.DocumentAttributeAudio);if(!t||t.voice)return;const s=e.document.thumbs&&e.document.thumbs.filter(e=>e instanceof Ce.PhotoSize).map(e=>pi(e));return{mediaType:"audio",id:String(e.document.id),fileName:Fr(e.document,"audio"),thumbnailSizes:s,size:rs(e.document.size),...ks(e.document,["mimeType"]),...ks(t,["duration","performer","title"])}}(e);if(d)return{audio:d};const u=function(e){if(e instanceof Ce.MessageMediaDocument&&e.document)return Tr(e.document)}(e);if(u)return{document:u};const l=function(e){if(!(e instanceof Ce.MessageMediaContact))return;const{firstName:t,lastName:s,phoneNumber:n,userId:a}=e;return{mediaType:"contact",firstName:t,lastName:s,phoneNumber:n,userId:Ia(a,"user")}}(e);if(l)return{contact:l};const f=function(e){if(e instanceof Ce.MessageMediaPoll)return e.poll.id.toString()}(e);if(f)return{pollId:f};const g=function(e){if(e instanceof Ce.MessageMediaToDo)return function(e,t){const{title:s,list:n}=e,a=n.map(Er),i=t?.map(e=>({itemId:e.id,completedBy:va(e.completedBy),completedAt:e.date}));return{mediaType:"todo",todo:{title:yi(s),items:a,othersCanAppend:e.othersCanAppend,othersCanComplete:e.othersCanComplete},completions:i}}(e.todo,e.completions)}(e);if(g)return{todo:g};const p=function(e){if(!(e instanceof Ce.MessageMediaWebPage)||e.webpage instanceof Ce.WebPageNotModified)return;const{webpage:t,forceLargeMedia:s,forceSmallMedia:n,safe:a}=e;return{id:t.id.toString(),isSafe:a,mediaSize:n?"small":s?"large":void 0}}(e);if(p)return{webPage:p};const h=function(e){if(e instanceof Ce.MessageMediaInvoice)return function(e){const{description:t,title:s,photo:n,test:a,totalAmount:i,currency:o,receiptMsgId:r,extendedMedia:c}=e,d=c instanceof Ce.MessageExtendedMediaPreview?Nr(c):void 0;return{mediaType:"invoice",title:s,description:t,photo:qr(n),receiptMessageId:r,amount:rs(i),currency:o,isTest:a,extendedMedia:d}}(e)}(e);if(h)return{invoice:h};const m=function(e){return e instanceof Ce.MessageMediaGeo?function(e){const t=Dr(e.geo);return t&&{mediaType:"geo",geo:t}}(e):e instanceof Ce.MessageMediaVenue?function(e){const{geo:t,title:s,provider:n,address:a,venueId:i,venueType:o}=e,r=Dr(t);return r&&{mediaType:"venue",geo:r,title:s,provider:n,address:a,venueId:i,venueType:o}}(e):e instanceof Ce.MessageMediaGeoLive?function(e){const{geo:t,period:s,heading:n}=e,a=Dr(t);return a&&{mediaType:"geoLive",geo:a,period:s,heading:n}}(e):void 0}(e);if(m)return{location:m};const y=function(e){if(e instanceof Ce.MessageMediaGame)return function(e){const{id:t,accessHash:s,shortName:n,title:a,description:i,photo:o,document:r}=e.game,c=o instanceof Ce.Photo?li(o):void 0,d=r instanceof Ce.Document?Tr(r):void 0;return{mediaType:"game",id:t.toString(),accessHash:s.toString(),shortName:n,title:a,description:i,photo:c,document:d}}(e)}(e);if(y)return{game:y};const _=function(e){if(e instanceof Ce.MessageMediaDice)return function(e){const{value:t,emoticon:s}=e;return{mediaType:"dice",value:t,emoticon:s}}(e)}(e);if(_)return{dice:_};const b=function(e){if(!(e instanceof Ce.MessageMediaStory))return;const t=va(e.peer);return{mediaType:"storyData",id:e.id,peerId:t,...e.viaMention&&{isMention:!0}}}(e);if(b)return{storyData:b};const S=function(e){if(e instanceof Ce.MessageMediaGiveaway)return function(e){const{channels:t,months:s,stars:n,quantity:a,untilDate:i,countriesIso2:o,onlyNewSubscribers:r,prizeDescription:c}=e,d=t.map(e=>Ia(e,"channel"));return{mediaType:"giveaway",channelIds:d,months:s,stars:rs(n),quantity:a,untilDate:i,countries:o,isOnlyForNewSubscribers:r,prizeDescription:c}}(e)}(e);if(S)return{giveaway:S};const w=function(e){if(e instanceof Ce.MessageMediaGiveawayResults)return function(e){const{months:t,untilDate:s,onlyNewSubscribers:n,launchMsgId:a,unclaimedCount:i,winners:o,winnersCount:r,additionalPeersCount:c,prizeDescription:d,refunded:u,channelId:l}=e,f=o.map(e=>Ia(e,"user"));return{mediaType:"giveawayResults",months:t,untilDate:s,isOnlyForNewSubscribers:n,launchMessageId:a,channelId:Ia(l,"channel"),unclaimedCount:i,additionalPeersCount:c,isRefunded:u,prizeDescription:d,winnerIds:f,winnersCount:r}}(e)}(e);if(w)return{giveawayResults:w};const I=function(e){if(!(e instanceof Ce.MessageMediaPaidMedia))return;const{starsAmount:t,extendedMedia:s}=e,n=s[0]instanceof Ce.MessageExtendedMedia;return n?{mediaType:"paidMedia",starsAmount:rs(t),isBought:n,extendedMedia:Hr(s)}:{mediaType:"paidMedia",starsAmount:rs(t),extendedMedia:s.filter(e=>e instanceof Ce.MessageExtendedMediaPreview).map(e=>Nr(e))}}(e);return I?{paidMedia:I}:void 0}function Ar(e,t,s){if(e instanceof Ce.DocumentEmpty)return;const n=t&&function(e){const t=e.filter(e=>e instanceof Ce.Document&&e.mimeType.startsWith("video")).map(e=>Ar(e,void 0,void 0)).filter(Boolean);if(t.length)return t}(t),{isSpoiler:a,timestamp:i}=s||{},{id:o,mimeType:r,thumbs:c,size:d,videoThumbs:u,attributes:l}=e;if(r===f&&!self.isWebmSupported)return;const g=l.find(e=>e instanceof Ce.DocumentAttributeVideo);if(!g)return;const p=l.find(e=>e instanceof Ce.DocumentAttributeAnimated),h=u?.some(e=>e instanceof Ce.VideoSize&&"v"===e.type),m=c&&fi(c),{duration:y,w:b,h:S,supportsStreaming:w=!1,roundMessage:I=!1,nosound:v}=g,P=I?function(e){const t=Math.min(Math.round(e),30);return Array.from({length:t},()=>Math.floor(256*Math.random()))}(y):void 0,C=t&&function(e){const t=e.find(e=>e instanceof Ce.Document&&e.mimeType===_),s=e.find(e=>e instanceof Ce.Document&&"application/x-tgstoryboardmap"===e.mimeType),n=t&&Tr(t),a=s&&Tr(s),i=s?.attributes.find(e=>e instanceof Ce.DocumentAttributeImageSize),o=i&&{width:i.w,height:i.h};if(n&&a&&o)return{storyboardFile:n,storyboardMapFile:a,frameSize:o}}(t);return{mediaType:"video",id:String(o),mimeType:r,duration:y,fileName:Fr(e,"video"),width:b,height:S,supportsStreaming:w,isRound:I,isGif:Boolean(p),thumbnail:di(c),size:rs(d),isSpoiler:a,timestamp:i,hasVideoPreview:h,previewPhotoSizes:m,waveform:P,noSound:v,altVideos:n,storyboardInfo:C}}function Rr(e){if(e instanceof Ce.DocumentEmpty)return;const{id:t,mimeType:s,size:n,attributes:a}=e,i=a.find(e=>e instanceof Ce.DocumentAttributeAudio);if(!i)return;const{duration:o,title:r,performer:c}=i;return{mediaType:"audio",id:String(t),mimeType:s,duration:o,fileName:Fr(e,"audio"),title:r,performer:c,size:rs(n)}}function kr(e){if(e instanceof Ce.MessageMediaDocument&&e.document instanceof Ce.Document&&e.document.mimeType.startsWith("video"))return Ar(e.document,e.altDocuments,{isSpoiler:e.spoiler,timestamp:e.videoTimestamp})}function Tr(e){if(!(e instanceof Ce.Document))return;const{id:t,size:s,mimeType:n,date:a,thumbs:i,attributes:o}=e,r=i&&i.find(e=>e instanceof Ce.PhotoSize);let c=i&&di(i);if(!c&&i&&r){const e=i.find(e=>e instanceof Ce.PhotoPathSize);e&&(c=ui(e,r))}const d=i&&fi(i);let u,l;if(r)if(l={width:r.w,height:r.h},h.has(n)){u="photo";const e=o.find(e=>e instanceof Ce.DocumentAttributeImageSize);if(e){const{w:t,h:s}=e;l={width:t,height:s,fromDocumentAttribute:!0}}}else if(m.has(n)){u="video";const e=o.find(e=>e instanceof Ce.DocumentAttributeVideo);if(e){const{w:t,h:s}=e;l={width:t,height:s}}}return{mediaType:"document",id:String(t),size:rs(s),mimeType:n,timestamp:a,fileName:Fr(e),thumbnail:c,innerMediaType:u,mediaSize:l,previewPhotoSizes:d}}function Br(e){if(e instanceof Ce.MessageMediaPoll)return Ur(e.poll,e.results)}function Dr(e){if(e instanceof Ce.GeoPointEmpty)return;const{long:t,lat:s,accuracyRadius:n,accessHash:a}=e;return{long:t,lat:s,accessHash:a.toString(),accuracyRadius:n}}function Ur(e,t){const{id:s,answers:n}=e,a=n.map(e=>({text:yi(e.text),option:Va(e.option)}));return{mediaType:"poll",id:String(s),summary:{isPublic:e.publicVoters,question:yi(e.question),...ks(e,["closed","multipleChoice","quiz","closePeriod","closeDate"]),answers:a},results:xr(t)}}function Er(e){return{id:e.id,title:yi(e.title)}}function xr(e){const{results:t,totalVoters:s,recentVoters:n,solution:a,solutionEntities:i,min:o}=e,r=t?.map(({option:e,chosen:t,correct:s,voters:n})=>({isChosen:t,isCorrect:s,option:Va(e),votersCount:n}));return{isMin:o,totalVoters:s,recentVoterIds:n?.map(e=>va(e)),results:r,solution:a,...i&&{solutionEntities:i.map(_i)}}}function Vr(e){if(!(e instanceof Ce.MessageMediaWebPage))return;const{webpage:t}=e;return Gr(t)}function Gr(e){if(Xa(e),e instanceof Ce.WebPageEmpty)return{mediaType:"webpage",webpageType:"empty",id:e.id.toString(),url:e.url};if(e instanceof Ce.WebPagePending)return{mediaType:"webpage",webpageType:"pending",id:e.id.toString(),url:e.url};if(e instanceof Ce.WebPage){const{id:t,photo:s,document:n,attributes:a}=e;let i,o,r,c,d,u;n instanceof Ce.Document&&n.mimeType.startsWith("video/")&&(i=Ar(n)),n instanceof Ce.Document&&n.mimeType.startsWith("audio/")&&(o=Rr(n));const l=a?.find(e=>e instanceof Ce.WebPageAttributeStory),f=a?.find(e=>e instanceof Ce.WebPageAttributeUniqueStarGift),g=a?.find(e=>e instanceof Ce.WebPageAttributeStarGiftAuction);if(l){const e=va(l.peer);r={id:l.id,peerId:e},l.story instanceof Ce.StoryItem&&Za(l.story,e)}if(f){const e=fr(f.gift);c="starGiftUnique"===e.type?e:void 0}if(g){const e=fr(g.gift);"starGift"===e.type&&(d={gift:e,endDate:g.endDate})}const p=a?.find(e=>e instanceof Ce.WebPageAttributeStickerSet);return p&&(u={documents:Di(p.stickers),isEmoji:p.emojis,isWithTextColor:p.textColor}),{mediaType:"webpage",webpageType:"full",id:t.toString(),...ks(e,["url","displayUrl","type","siteName","title","description","duration","hasLargeMedia"]),photo:s instanceof Ce.Photo?li(s):void 0,document:i||o||!n?void 0:Tr(n),video:i,audio:o,story:r,gift:c,auction:d,stickers:u}}}function Fr(e,t="file"){const{mimeType:s,attributes:n}=e,a=n.find(e=>e instanceof Ce.DocumentAttributeFilename);if(a)return a.fileName;const i=s.split("/")[1];return`${t}${String(e.id)}.${i}`}function Nr(e){const{w:t,h:s,thumb:n,videoDuration:a}=e;return{mediaType:"extendedMediaPreview",width:t,height:s,duration:a,thumbnail:n?di([n]):void 0}}function qr(e){if(!e)return;const{url:t,size:s,mimeType:n}=e,a=e instanceof Ce.WebDocument?e.accessHash.toString():void 0,i=e.attributes.find(e=>e instanceof Ce.DocumentAttributeImageSize);return{mediaType:"webDocument",url:t,accessHash:a,size:s,mimeType:n,dimensions:i&&{width:i.w,height:i.h}}}function Hr(e){const t=e.filter(e=>e instanceof Ce.MessageExtendedMedia).map(e=>Mr(e.media)).filter(Boolean);if(t.length)return t}String.fromCharCode(8205);const Lr=/(?:\ud83c[\udd70\udd71\udd7e\udd7f]\ufe0f)|(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])(?:\u200d\u27a1\ufe0f)?|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f(?:\u200d\u27a1\ufe0f)?)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f(?:\u200d\u27a1\ufe0f)?|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83e\uddd1\u200d\ud83e\uddd1\u200d\ud83e\uddd2\u200d\ud83e\uddd2|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83e\uddd1\u200d\ud83e\uddd1\u200d\ud83e\uddd2|\ud83e\uddd1\u200d\ud83e\uddd2\u200d\ud83e\uddd2|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u26d3\ufe0f\u200d\ud83d\udca5|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udf44\u200d\ud83d\udfeb|\ud83c\udf4b\u200d\ud83d\udfe9|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc26\u200d\ud83d\udd25|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83d\ude42\u200d\u2194\ufe0f|\ud83d\ude42\u200d\u2195\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddd1\u200d\ud83e\uddd2|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|\ud83e\udef0|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c\udfc3|\ud83d\udeb6|\ud83e\uddce)(?:\ud83c[\udffb-\udfff])?(?:\u200d\u27a1\ufe0f)?|(?:\ud83c[\udf85\udfc2\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4\udeb5\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd\uddcf\uddd1-\udddd\udec3-\udec5\udef1-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude89\ude8f-\udec2\udec6\udece-\udedc\udedf-\udee9]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,Or=[[/\u{1f3f3}\u200d\u{1f308}/gu,""],[/\u{1f3f3}\u200d\u26a7\ufe0f?/gu,""],[/\u26d3\u200d\u{1f4a5}/gu,""],[/\u200d([\u2640\u2642])(?!\ufe0f)/gu,"$1"]];function jr(e){const t=e.matchAll(Lr);let s=0,n=0;for(const e of t){if(e.index!==n)return!1;s++,n=e.index+e[0].length}return n===e.length&&s}function Wr(e,t){if(e.text)return!t&&1===Object.keys(e).length&&!e.text.entities?.some(e=>e.type!==Ps.CustomEmoji)&&function(e){const t=function(e){if(!e.match(Lr))return e;for(const[t,s]of Or)e=e.replace(t,s);return e}(e).split("\n"),s=t.join("");if(s.length>800)return!1;const n=jr(s);if(!n||n>100)return!1;let a=t.length;for(const e of t){const t=jr(e);if(!1===t)return!1;t>a&&(a=t)}return a}(e.text.text)||void 0}function zr(e,t){let s=0;const n=new Array(t),a=e.length/t,i=e[0],o=e[e.length-1];for(let r=0;r<t;r++){const t=Math.floor(r*a),c=((e[t-1]??i)+(e[t]??i)+(e[t+1]??o))/3;n[r]=c,s<c&&(s=c)}return{data:n,peak:s}}const Kr={mediaType:"action",type:"unsupported"};function $r(e){return e instanceof Ce.PhoneCallDiscardReasonBusy?"busy":e instanceof Ce.PhoneCallDiscardReasonHangup?"hangup":e instanceof Ce.PhoneCallDiscardReasonMissed?"missed":"disconnect"}const Jr="temp";let Qr,Xr=0;function Yr(e=0){return e+ ++Xr/1e6}function Zr(e){const t=Ea(e);if(t&&(e instanceof Ce.Message||e instanceof Ce.MessageService))return ec(t,e)}function ec(e,t){const s="user"===en(e),n=t.fromId&&!s?va(t.fromId):void 0,a=!n&&e===Qr,i=t.fwdFrom&&sc(t.fwdFrom,a),o=Boolean(!i||i.fromId===Qr||i.isSavedOutgoing),r=a?o:Boolean(t.out&&!t.post),c=Pr(t),d=t.action&&function(e){if(e instanceof Ce.MessageActionChatCreate){const{title:t,users:s}=e;return{mediaType:"action",type:"chatCreate",title:t,userIds:s.map(e=>Ia(e,"user"))}}if(e instanceof Ce.MessageActionChatEditTitle){const{title:t}=e;return{mediaType:"action",type:"chatEditTitle",title:t}}if(e instanceof Ce.MessageActionChatEditPhoto){const{photo:t}=e;return{mediaType:"action",type:"chatEditPhoto",photo:t instanceof Ce.Photo?li(t):void 0}}if(e instanceof Ce.MessageActionChatDeletePhoto)return{mediaType:"action",type:"chatDeletePhoto"};if(e instanceof Ce.MessageActionChatAddUser){const{users:t}=e;return{mediaType:"action",type:"chatAddUser",userIds:t.map(e=>Ia(e,"user"))}}if(e instanceof Ce.MessageActionChatDeleteUser){const{userId:t}=e;return{mediaType:"action",type:"chatDeleteUser",userId:Ia(t,"user")}}if(e instanceof Ce.MessageActionChatJoinedByLink){const{inviterId:t}=e;return{mediaType:"action",type:"chatJoinedByLink",inviterId:Ia(t,"user")}}if(e instanceof Ce.MessageActionChannelCreate){const{title:t}=e;return{mediaType:"action",type:"channelCreate",title:t}}if(e instanceof Ce.MessageActionChatMigrateTo){const{channelId:t}=e;return{mediaType:"action",type:"chatMigrateTo",channelId:Ia(t,"channel")}}if(e instanceof Ce.MessageActionChannelMigrateFrom){const{title:t,chatId:s}=e;return{mediaType:"action",type:"channelMigrateFrom",title:t,chatId:Ia(s,"chat")}}if(e instanceof Ce.MessageActionPinMessage)return{mediaType:"action",type:"pinMessage"};if(e instanceof Ce.MessageActionHistoryClear)return{mediaType:"action",type:"historyClear"};if(e instanceof Ce.MessageActionGameScore){const{gameId:t,score:s}=e;return{mediaType:"action",type:"gameScore",gameId:t.toString(),score:s}}if(e instanceof Ce.MessageActionPaymentSent){const{recurringInit:t,recurringUsed:s,currency:n,totalAmount:a,invoiceSlug:i,subscriptionUntilDate:o}=e;return{mediaType:"action",type:"paymentSent",isRecurringInit:t,isRecurringUsed:s,currency:n,totalAmount:rs(a),invoiceSlug:i,subscriptionUntilDate:o}}if(e instanceof Ce.MessageActionPhoneCall){const{video:t,callId:s,reason:n,duration:a}=e;return{mediaType:"action",type:"phoneCall",isVideo:t,callId:s.toString(),reason:n&&$r(n),duration:a}}if(e instanceof Ce.MessageActionScreenshotTaken)return{mediaType:"action",type:"screenshotTaken"};if(e instanceof Ce.MessageActionCustomAction){const{message:t}=e;return{mediaType:"action",type:"customAction",message:t}}if(e instanceof Ce.MessageActionBotAllowed){const{attachMenu:t,fromRequest:s,domain:n,app:a}=e;return{mediaType:"action",type:"botAllowed",isAttachMenu:t,isFromRequest:s,domain:n,app:a&&ji(a)}}if(e instanceof Ce.MessageActionBoostApply){const{boosts:t}=e;return{mediaType:"action",type:"boostApply",boosts:t}}if(e instanceof Ce.MessageActionContactSignUp)return{mediaType:"action",type:"contactSignUp"};if(e instanceof Ce.MessageActionGroupCall){const{call:t,duration:s}=e;return t instanceof Ce.InputGroupCall?{mediaType:"action",type:"groupCall",call:{id:t.id.toString(),accessHash:t.accessHash.toString()},duration:s}:Kr}if(e instanceof Ce.MessageActionInviteToGroupCall){const{call:t,users:s}=e;return t instanceof Ce.InputGroupCall?{mediaType:"action",type:"inviteToGroupCall",call:{id:t.id.toString(),accessHash:t.accessHash.toString()},userIds:s.map(e=>Ia(e,"user"))}:Kr}if(e instanceof Ce.MessageActionGroupCallScheduled){const{call:t,scheduleDate:s}=e;return t instanceof Ce.InputGroupCall?{mediaType:"action",type:"groupCallScheduled",call:{id:t.id.toString(),accessHash:t.accessHash.toString()},scheduleDate:s}:Kr}if(e instanceof Ce.MessageActionChatJoinedByRequest)return{mediaType:"action",type:"chatJoinedByRequest"};if(e instanceof Ce.MessageActionWebViewDataSent){const{text:t}=e;return{mediaType:"action",type:"webViewDataSent",text:t}}if(e instanceof Ce.MessageActionGiftPremium){const{currency:t,amount:s,days:n,cryptoCurrency:a,cryptoAmount:i,message:o}=e;return{mediaType:"action",type:"giftPremium",currency:t,amount:rs(s),days:n,cryptoCurrency:a,cryptoAmount:rs(i),message:o&&yi(o)}}if(e instanceof Ce.MessageActionTopicCreate){const{title:t,iconColor:s,iconEmojiId:n}=e;return{mediaType:"action",type:"topicCreate",title:t,iconColor:s,iconEmojiId:n?.toString()}}if(e instanceof Ce.MessageActionTopicEdit){const{title:t,iconEmojiId:s,closed:n,hidden:a}=e;return{mediaType:"action",type:"topicEdit",title:t,iconEmojiId:s?.toString(),isClosed:n,isHidden:a}}if(e instanceof Ce.MessageActionSuggestProfilePhoto){const{photo:t}=e;return t instanceof Ce.Photo?{mediaType:"action",type:"suggestProfilePhoto",photo:li(t)}:Kr}if(e instanceof Ce.MessageActionGiftCode){const{viaGiveaway:t,unclaimed:s,boostPeer:n,days:a,slug:i,currency:o,amount:r,cryptoCurrency:c,cryptoAmount:d,message:u}=e;return{mediaType:"action",type:"giftCode",isViaGiveaway:t,isUnclaimed:s,boostPeerId:n&&va(n),days:a,slug:i,currency:o,amount:rs(r),cryptoCurrency:c,cryptoAmount:rs(d),message:u&&yi(u)}}if(e instanceof Ce.MessageActionGiveawayLaunch){const{stars:t}=e;return{mediaType:"action",type:"giveawayLaunch",stars:rs(t)}}if(e instanceof Ce.MessageActionGiveawayResults){const{stars:t,winnersCount:s,unclaimedCount:n}=e;return{mediaType:"action",type:"giveawayResults",isStars:t,winnersCount:s,unclaimedCount:n}}if(e instanceof Ce.MessageActionPaymentRefunded){const{peer:t,currency:s,totalAmount:n}=e;return{mediaType:"action",type:"paymentRefunded",peerId:va(t),currency:s,totalAmount:rs(n)}}if(e instanceof Ce.MessageActionGiftStars){const{currency:t,amount:s,stars:n,cryptoCurrency:a,cryptoAmount:i,transactionId:o}=e;return{mediaType:"action",type:"giftStars",currency:t,amount:rs(s),stars:rs(n),cryptoCurrency:a,cryptoAmount:rs(i),transactionId:o}}if(e instanceof Ce.MessageActionGiftTon){const{currency:t,amount:s,cryptoCurrency:n,cryptoAmount:a,transactionId:i}=e;return{mediaType:"action",type:"giftTon",currency:t,amount:rs(s),cryptoCurrency:n,cryptoAmount:rs(a),transactionId:i}}if(e instanceof Ce.MessageActionPrizeStars){const{unclaimed:t,stars:s,transactionId:n,boostPeer:a,giveawayMsgId:i}=e;return{mediaType:"action",type:"prizeStars",isUnclaimed:t,stars:rs(s),transactionId:n,boostPeerId:va(a),giveawayMsgId:i}}if(e instanceof Ce.MessageActionStarGift){const{nameHidden:t,saved:s,converted:n,upgraded:a,refunded:i,canUpgrade:o,prepaidUpgrade:r,auctionAcquired:c,gift:d,message:u,convertStars:l,upgradeMsgId:f,giftMsgId:g,upgradeStars:p,fromId:h,peer:m,savedId:y,prepaidUpgradeHash:_,toId:b,giftNum:S}=e,w=fr(d);return"starGift"!==w.type?Kr:{mediaType:"action",type:"starGift",isNameHidden:t,isSaved:s,isConverted:n,isUpgraded:a,isRefunded:i,canUpgrade:o,isPrepaidUpgrade:r,isAuctionAcquired:c,gift:w,message:u&&yi(u),starsToConvert:rs(l),upgradeMsgId:f,giftMsgId:g,alreadyPaidUpgradeStars:rs(p),fromId:h&&va(h),peerId:m&&va(m),savedId:void 0!==y?Ia(y,"user"):void 0,prepaidUpgradeHash:_,toId:b&&va(b),giftNumber:S}}if(e instanceof Ce.MessageActionStarGiftUnique){const{upgrade:t,transferred:s,saved:n,refunded:a,gift:i,canExportAt:o,transferStars:r,fromId:c,peer:d,savedId:u,resaleAmount:l,prepaidUpgrade:f,dropOriginalDetailsStars:g,fromOffer:p}=e,h=fr(i);return"starGiftUnique"!==h.type?Kr:{mediaType:"action",type:"starGiftUnique",isUpgrade:t,isTransferred:s,isSaved:n,isRefunded:a,isPrepaidUpgrade:f,isFromOffer:p,gift:h,canExportAt:o,transferStars:rs(r),fromId:c&&va(c),peerId:d&&va(d),savedId:void 0!==u?Ia(u,"user"):void 0,resaleAmount:l?or(l):void 0,dropOriginalDetailsStars:void 0!==g?rs(g):void 0}}if(e instanceof Ce.MessageActionPaidMessagesPrice){const{stars:t,broadcastMessagesAllowed:s}=e;return{mediaType:"action",type:"paidMessagesPrice",isAllowedInChannel:s,stars:rs(t)}}if(e instanceof Ce.MessageActionPaidMessagesRefunded){const{stars:t,count:s}=e;return{mediaType:"action",type:"paidMessagesRefunded",stars:rs(t),count:s}}if(e instanceof Ce.MessageActionSuggestedPostApproval){const{rejected:t,balanceTooLow:s,rejectComment:n,scheduleDate:a,price:i}=e;return{mediaType:"action",type:"suggestedPostApproval",isRejected:Boolean(t),isBalanceTooLow:Boolean(s),rejectComment:n,scheduleDate:a,amount:i?or(i):void 0}}if(e instanceof Ce.MessageActionSuggestedPostSuccess){const{price:t}=e;return{mediaType:"action",type:"suggestedPostSuccess",amount:or(t)}}if(e instanceof Ce.MessageActionSuggestedPostRefund){const{payerInitiated:t}=e;return{mediaType:"action",type:"suggestedPostRefund",payerInitiated:Boolean(t)}}if(e instanceof Ce.MessageActionTodoCompletions){const{completed:t,incompleted:s}=e;return{mediaType:"action",type:"todoCompletions",completedIds:t,incompletedIds:s}}if(e instanceof Ce.MessageActionTodoAppendTasks){const{list:t}=e;return{mediaType:"action",type:"todoAppendTasks",items:t.map(Er)}}if(e instanceof Ce.MessageActionStarGiftPurchaseOffer){const{accepted:t,declined:s,gift:n,price:a,expiresAt:i}=e,o=fr(n);return"starGiftUnique"!==o.type?Kr:{mediaType:"action",type:"starGiftPurchaseOffer",isAccepted:t,isDeclined:s,gift:o,price:or(a),expiresAt:i}}if(e instanceof Ce.MessageActionStarGiftPurchaseOfferDeclined){const{expired:t,gift:s,price:n}=e,a=fr(s);return"starGiftUnique"!==a.type?Kr:{mediaType:"action",type:"starGiftPurchaseOfferDeclined",isExpired:t,gift:a,price:or(n)}}if(e instanceof Ce.MessageActionNewCreatorPending){const{newCreatorId:t}=e;return{mediaType:"action",type:"newCreatorPending",newCreatorId:Ia(t,"user")}}if(e instanceof Ce.MessageActionChangeCreator){const{newCreatorId:t}=e;return{mediaType:"action",type:"changeCreator",newCreatorId:Ia(t,"user")}}return Kr}(t.action);d&&(c.action=d);const u=t.date>vs()+10,l=t.media instanceof Ce.MessageMediaInvoice&&Boolean(t.media.extendedMedia),f=Boolean(t.editDate)&&!t.editHide,{inlineButtons:g,keyboardButtons:p,keyboardPlaceholder:h,isKeyboardSingleUse:m,isKeyboardSelective:y}=Ui(t.replyMarkup,t.media instanceof Ce.MessageMediaInvoice?t.media.receiptMsgId:void 0)||{},{mediaUnread:_,postAuthor:b}=t,S=void 0!==t.groupedId?String(t.groupedId):void 0,w=Boolean(S)&&!(c.document||c.audio||c.sticker),I=t.replyMarkup instanceof Ce.ReplyKeyboardHide,v=t.replyMarkup instanceof Ce.ReplyKeyboardHide&&t.replyMarkup.selective,P=t.noforwards||l,C=!t.noforwards,M=Wr(c,S);c.text&&M&&(c.text.emojiOnlyCount=M);const A=t.replies?.comments,R=t.fromBoostsApplied,k=t.factcheck&&ac(t.factcheck),T=t.videoProcessingPending,B=t.reactionsArePossible,D=t.invertMedia,U=t.savedPeerId&&va(t.savedPeerId),E=po(t.restrictionReason);return{id:t.id,chatId:e,isOutgoing:r,content:c,date:t.date,senderId:n,viewsCount:t.views,forwardsCount:t.forwards,isScheduled:u,scheduleRepeatPeriod:t.scheduleRepeatPeriod,isFromScheduled:t.fromScheduled,isSilent:t.silent,isPinned:t.pinned,reactions:t.reactions&&bi(t.reactions),...t.replyTo&&{replyInfo:nc(t.replyTo,t)},...t.suggestedPost&&{suggestedPostInfo:(x=t.suggestedPost,{isAccepted:x.accepted,isRejected:x.rejected,price:x.price?or(x.price):void 0,scheduleDate:x.scheduleDate})},forwardInfo:i,isEdited:f,editDate:t.editDate,isMediaUnread:_,hasUnreadMention:t.mentioned&&_,areReactionsPossible:B,isMentioned:t.mentioned,...S&&{groupedId:S,isInAlbum:w},inlineButtons:g,...p&&{keyboardButtons:p,keyboardPlaceholder:h,isKeyboardSingleUse:m,isKeyboardSelective:y},...I&&{shouldHideKeyboardButtons:I,isHideKeyboardSelective:v},...t.viaBotId&&{viaBotId:Ia(t.viaBotId,"user")},postAuthorTitle:b,isProtected:P,isForwardingAllowed:C,hasComments:A,savedPeerId:U,senderBoosts:R,viaBusinessBotId:t.viaBusinessBotId?.toString(),factCheck:k,effectId:t.effect?.toString(),isInvertedMedia:D,isVideoProcessingPending:T,reportDeliveryUntilDate:t.reportDeliveryUntilDate,paidMessageStars:rs(t.paidMessageStars),restrictionReasons:E,summaryLanguageCode:t.summaryFromLanguage};var x}function tc(e){if(e instanceof Ce.DraftMessageEmpty)return;const{message:t,entities:s,replyTo:n,date:a,effect:i,suggestedPost:o}=e,r=n instanceof Ce.InputReplyToMessage?{type:"message",replyToMsgId:n.replyToMsgId,replyToTopId:n.topMsgId,replyToPeerId:n.replyToPeerId&&va(n.replyToPeerId),monoforumPeerId:n.monoforumPeerId&&va(n.monoforumPeerId),quoteText:n.quoteText?Cr(n.quoteText,n.quoteEntities):void 0,quoteOffset:n.quoteOffset}:void 0,c=o instanceof Ce.SuggestedPost?{isAccepted:o.accepted,isRejected:o.rejected,price:o.price?or(o.price):void 0,scheduleDate:o.scheduleDate}:void 0;return{text:t?Cr(t,s):void 0,replyInfo:r,suggestedPostInfo:c,date:a,effectId:i?.toString()}}function sc(e,t=!1){const s=e.savedFromPeer&&va(e.savedFromPeer),n=e.fromId&&va(e.fromId);return{date:e.date,savedDate:e.savedDate,isImported:e.imported,isChannelPost:Boolean(e.channelPost),channelPostId:e.channelPost,isLinkedChannelPost:Boolean(e.channelPost&&s===n&&e.savedFromMsgId===e.channelPost&&!t),savedFromPeerId:s,isSavedOutgoing:e.savedOut,fromId:n,fromChatId:n||s,fromMessageId:e.savedFromMsgId||e.channelPost,hiddenUserName:e.fromName,postAuthorTitle:e.postAuthor}}function nc(e,t){if(e instanceof Ce.MessageReplyStoryHeader)return{type:"story",peerId:va(e.peer),storyId:e.storyId};if(e instanceof Ce.MessageReplyHeader){const{replyFrom:s,replyToMsgId:n,replyToTopId:a,replyMedia:i,replyToPeerId:o,forumTopic:r,quote:c,quoteText:d,quoteEntities:u,quoteOffset:l}=e;return{type:"message",replyToMsgId:n,replyToTopId:a,isForumTopic:r,replyFrom:s&&sc(s),replyToPeerId:o&&va(o),replyMedia:i&&Mr(i,t),isQuote:c,quoteText:d?Cr(d,u):void 0,quoteOffset:l}}}function ac(e){return{shouldFetch:e.needCheck,hash:e.hash.toString(),text:e.text&&yi(e.text),countryCode:e.country}}function ic(e){const{filename:t,blobUrl:s,previewBlobUrl:n,mimeType:a,size:i,audio:o,shouldSendAsFile:r,shouldSendAsSpoiler:c,ttlSeconds:d}=e;if(!r){if(e.quick){if(h.has(a)){const{width:t,height:a}=e.quick;return{photo:{mediaType:"photo",id:Jr,sizes:[],thumbnail:{width:t,height:a,dataUri:n||s},blobUrl:s,date:Math.round(Date.now()/1e3),isSpoiler:c}}}if(m.has(a)){const{width:o,height:r,duration:d}=e.quick;return{video:{mediaType:"video",id:Jr,mimeType:a,duration:d||0,fileName:t,width:o,height:r,blobUrl:s,...n&&{thumbnail:{width:o,height:r,dataUri:n}},size:i,isSpoiler:c}}}}if(e.voice){const{duration:t,waveform:s}=e.voice,{data:n}=zr(s,63);return{voice:{mediaType:"voice",id:Jr,duration:t,waveform:n,size:i},ttlSeconds:d}}if(y.has(a)){const{duration:e,performer:s,title:n}=o||{};return{audio:{mediaType:"audio",id:Jr,mimeType:a,fileName:t,size:i,duration:e||0,title:n,performer:s}}}}return{document:{mediaType:"document",mimeType:a,fileName:t,size:i,...n&&{previewBlobUrl:n}}}}function oc(e){const t=Ea(e);if(t&&e instanceof Ce.Message&&e.replies)return rc(t,e.id,e.replies,e.fwdFrom)}function rc(e,t,s,n){const{channelId:a,replies:i,maxId:o=t,recentRepliers:r,comments:c,readMaxId:d}=s,{fromId:u,channelPost:l}=n||{},f=a?Ia(a,"channel"):void 0;if(f===C)return;const g={messagesCount:i,lastMessageId:o,recentReplierIds:r?.map(va)};return Ds(c?{...g,isCommentsInfo:!0,chatId:f,originChannelId:e,originMessageId:t,hasUnread:Boolean(d&&o&&d<o)}:{...g,isCommentsInfo:!1,chatId:e,threadId:t,fromChannelId:u&&l?va(u):void 0,fromMessageId:l})}function cc(e){const{shortcutId:t,shortcut:s,topMessage:n}=e;return{id:t,shortcut:s,topMessageId:n}}function dc(e){return e instanceof Ce.ReportResultReported?{type:"reported"}:e instanceof Ce.ReportResultAddComment?{type:"comment",isOptional:e.optional,option:Va(e.option)}:{type:"selectOption",title:e.title,options:e.options.map(e=>({text:e.text,option:Va(e.option)}))}}function uc(e,t){return t instanceof Ce.BotInlineMediaResult?(t.document instanceof Ce.Document&&ti(t.document),t.photo instanceof Ce.Photo&&ei(t.photo),Gi(t,e)):(t.thumb&&oi(t.thumb),Vi(t,e))}function lc(e,t){return{query:t,queryIsFree:e.queryIsFree,totalDaily:e.totalDaily,remains:e.remains,waitTill:e.waitTill,starsAmount:rs(e.starsAmount)}}function fc(e,t){if(t instanceof Ce.StoryItemDeleted)return{id:t.id,peerId:e,isDeleted:!0};if(t instanceof Ce.StoryItemSkipped){const{id:s,date:n,expireDate:a,closeFriends:i}=t;return{id:s,peerId:e,...i&&{isForCloseFriends:!0},date:n,expireDate:a}}const{edited:s,pinned:n,expireDate:a,id:i,date:o,caption:r,entities:c,media:d,privacy:u,views:l,public:f,noforwards:g,closeFriends:p,contacts:h,selectedContacts:m,mediaAreas:y,sentReaction:_,out:b,fwdFrom:S,fromId:w}=t,I={...Mr(d)};r&&(I.text=Cr(r,c));const v=_&&Pi(_);return Ds({id:i,peerId:e,date:o,expireDate:a,content:I,isPublic:f,isEdited:s,isInProfile:n,isForContacts:h,isForSelectedContacts:m,isForCloseFriends:p,noForwards:g,views:l&&gc(l),isOut:b,visibility:u&&mi(u),mediaAreas:y?.map(mc).filter(Boolean),sentReaction:v,forwardInfo:S&&yc(S),fromId:w&&va(w)})}function gc(e){return Ds({hasViewers:e.hasViewers,viewsCount:e.viewsCount,forwardsCount:e.forwardsCount,reactionsCount:e.reactionsCount,reactions:e.reactions?.map(wi).filter(Boolean),recentViewerIds:e.recentViewers?.map(e=>Ia(e,"user"))})}function pc(e){const{blockedMyStoriesFrom:t,blocked:s}=e;if(e instanceof Ce.StoryView)return Ds({type:"user",peerId:Ia(e.userId,"user"),date:e.date,reaction:e.reaction&&Pi(e.reaction),areStoriesBlocked:s||t,isUserBlocked:s});if(e instanceof Ce.StoryViewPublicForward){const n=Zr(e.message);if(!n)return;return{type:"forward",peerId:n.chatId,messageId:n.id,message:n,date:n.date,areStoriesBlocked:s||t,isUserBlocked:s}}if(e instanceof Ce.StoryViewPublicRepost){const n=va(e.peerId),a=fc(n,e.story);if(!("content"in a))return;return{type:"repost",peerId:n,storyId:e.story.id,date:a.date,story:a,areStoriesBlocked:s||t,isUserBlocked:s}}}function hc(e){return{activeUntil:e.activeUntilDate,cooldownUntil:e.cooldownUntilDate}}function mc(e){const t=function(e){const{x:t,y:s,w:n,h:a,rotation:i,radius:o}=e;return{x:t,y:s,width:n,height:a,rotation:i,radius:o}}(e.coordinates);if(e instanceof Ce.MediaAreaVenue){const{geo:s,title:n}=e,a=Dr(s);if(!a)return;return{type:"venue",coordinates:t,geo:a,title:n}}if(e instanceof Ce.MediaAreaGeoPoint){const{geo:s}=e,n=Dr(s);if(!n)return;return{type:"geoPoint",coordinates:t,geo:n}}if(e instanceof Ce.MediaAreaSuggestedReaction){const{reaction:s,dark:n,flipped:a}=e,i=Pi(s);if(!i)return;return{type:"suggestedReaction",coordinates:t,reaction:i,...n&&{isDark:!0},...a&&{isFlipped:!0}}}if(e instanceof Ce.MediaAreaChannelPost){const{channelId:s,msgId:n}=e;return{type:"channelPost",coordinates:t,channelId:Ia(s,"channel"),messageId:n}}if(e instanceof Ce.MediaAreaUrl){const{url:s}=e;return{type:"url",coordinates:t,url:s}}if(e instanceof Ce.MediaAreaWeather){const{emoji:s,temperatureC:n,color:a}=e;return{type:"weather",coordinates:t,emoji:s,temperatureC:n,color:a}}if(e instanceof Ce.MediaAreaStarGift){const{slug:s}=e;return{type:"uniqueGift",coordinates:t,slug:s}}}function yc(e){const{from:t,fromName:s,storyId:n,modified:a}=e;return{storyId:n,fromPeerId:t&&va(t),fromName:s,isModified:a}}function _c(e){const{albumId:t,title:s,iconPhoto:n,iconVideo:a}=e;return n&&ei(n),a&&ti(a),{albumId:t,title:s,iconPhoto:n&&n instanceof Ce.Photo?li(n):void 0,iconVideo:a?Tr(a):void 0}}const bc=new Set(["User","UserEmpty"]),Sc=new Set(["ChatEmpty","Chat","ChatForbidden","Channel","ChannelForbidden"]),wc=new Set(["Message","MessageEmpty","MessageService"]);function Ic(e){if(!e||"object"!=typeof e)return;if(!("users"in e||"chats"in e||"messages"in e))return;let t,s;const n=[],a=[],i=[];"users"in e&&Array.isArray(e.users)&&bc.has(e.users[0]?.className)&&(t=As(e.users.map(e=>(e instanceof Ce.User&&ii(e),Xi(e))).filter(Boolean),"id")),"chats"in e&&Array.isArray(e.chats)&&Sc.has(e.chats[0]?.className)&&(s=As(e.chats.map(e=>((e instanceof Ce.Chat||e instanceof Ce.Channel)&&function(e){const t=Ia(e.id,e instanceof Ce.Chat?"chat":"channel"),s=Qs.chats[t],n=s&&"min"in s&&s.min,a="min"in e&&e.min;s&&!n&&a||(Qs.chats[t]=e)}(e),wo(e))).filter(Boolean),"id")),"messages"in e&&Array.isArray(e.messages)&&wc.has(e.messages[0]?.className)&&e.messages.forEach(e=>{Qa(e);const t=oc(e);if(t&&n.push(t),"media"in e&&e.media){const t=Br(e.media);t&&a.push(t);const s=Vr(e.media);s&&i.push(s)}}),(t||s||n?.length)&&Oa({"@type":"updateEntities",users:t,chats:s,threadInfos:n?.length?n:void 0,polls:a?.length?a:void 0,webPages:i?.length?i:void 0})}function vc(e){Qa(e);const t=oc(e);t&&Oa({"@type":"updateThreadInfo",threadInfo:t})}class Pc{constructor(e){this.comparator=e,this.queue=[]}add(e){const t=this.binarySearch(e);this.queue.splice(t,0,e)}pop(){return this.queue.shift()}get size(){return this.queue.length}clear(){this.queue=[]}binarySearch(e){let t=0,s=this.queue.length;for(;t<s;){const n=Math.floor((t+s)/2),a=this.comparator(e,this.queue[n]);if(0===a)return n;a>0?t=n+1:s=n}return t}}function Cc(e){const{self:t,min:s,about:n,date:a,versioned:i,canSelfUnmute:o,justJoined:r,left:c,muted:d,mutedByYou:u,source:l,volume:f,volumeByAdmin:g,videoJoined:p,peer:h,video:m,presentation:y,raiseHandRating:_}=e;return{isSelf:t,isMin:s,canSelfUnmute:o,isLeft:c,isMuted:d,isMutedByMe:u,hasJustJoined:r,isVolumeByAdmin:g,isVersioned:i,isVideoJoined:p,about:n,source:l,raiseHandRating:_?.toString(),volume:f,date:new Date(a),isUser:Sa(h),id:va(h),video:m?Mc(m):void 0,presentation:y?Mc(y):void 0}}function Mc(e){const{audioSource:t,endpoint:s,paused:n,sourceGroups:a}=e;return{audioSource:t,endpoint:s,isPaused:n,sourceGroups:a.map(Ac)}}function Ac(e){return{semantics:e.semantics,sources:e.sources}}function Rc(e){const{id:t,accessHash:s}=e;if(e instanceof Ce.GroupCallDiscarded)return{connectionState:"discarded",id:t.toString(),accessHash:s.toString(),participantsCount:0,version:0,participants:{}};const{version:n,participantsCount:a,streamDcId:i,scheduleDate:o,canChangeJoinMuted:r,joinMuted:c,canStartVideo:d,scheduleStartSubscribed:u}=e;return{connectionState:"disconnected",isLoaded:!0,id:t.toString(),accessHash:s.toString(),version:n,participantsCount:a,streamDcId:i,scheduleDate:o,canChangeJoinMuted:r,joinMuted:c,canStartVideo:d,scheduleStartSubscribed:u,participants:{}}}function kc(e){const{id:t}=e;let s={id:t.toString()};if(e instanceof Ce.PhoneCallAccepted||e instanceof Ce.PhoneCallWaiting||e instanceof Ce.PhoneCall||e instanceof Ce.PhoneCallRequested){const{accessHash:t,adminId:n,date:a,video:i,participantId:o,protocol:r}=e;s={...s,accessHash:t.toString(),adminId:n.toString(),participantId:o.toString(),date:a,isVideo:i,protocol:Bc(r)}}if(e instanceof Ce.PhoneCall){const{p2pAllowed:t,gAOrB:n,keyFingerprint:a,connections:i,startDate:o}=e;s={...s,state:"active",gAOrB:Array.from(n),keyFingerprint:a.toString(),startDate:o,isP2pAllowed:Boolean(t),connections:i.map(Tc).filter(Boolean)}}return e instanceof Ce.PhoneCallDiscarded&&(s={...s,state:"discarded",duration:e.duration,reason:(n=e.reason,n instanceof Ce.PhoneCallDiscardReasonMissed?"missed":n instanceof Ce.PhoneCallDiscardReasonBusy?"busy":n instanceof Ce.PhoneCallDiscardReasonHangup?"hangup":"disconnect"),needRating:e.needRating,needDebug:e.needDebug}),e instanceof Ce.PhoneCallWaiting&&(s={...s,state:"waiting",receiveDate:e.receiveDate}),e instanceof Ce.PhoneCallAccepted&&(s={...s,state:"accepted",gB:Array.from(e.gB)}),e instanceof Ce.PhoneCallRequested&&(s={...s,state:"requested",gAHash:Array.from(e.gAHash)}),s;var n}function Tc(e){if(e instanceof Ce.PhoneConnectionWebrtc){const{username:t,password:s,turn:n,stun:a,ip:i,ipv6:o,port:r}=e;return{username:t,password:s,isTurn:n,isStun:a,ip:i,ipv6:o,port:r}}}function Bc(e){const{libraryVersions:t,minLayer:s,maxLayer:n,udpP2p:a,udpReflector:i}=e;return{libraryVersions:t,minLayer:s,maxLayer:n,isUdpP2p:a,isUdpReflector:i}}function Dc(){return new Ce.PhoneCallProtocol({libraryVersions:["4.0.0"],minLayer:92,maxLayer:92,udpReflector:!0,udpP2p:!0})}const Uc=new Map,Ec=[],xc=(e,t)=>{const s=e.topicId?`${e.chatId}-${e.topicId}`:e.chatId;if(Uc.has(s)&&(clearTimeout(Uc.get(s)),Uc.delete(s)),e.mutedUntil===d||e.mutedUntil<=vs())return;if(Ec.push(e),Ec.sort((e,t)=>t.mutedUntil-e.mutedUntil),!Ec.pop())return;const n=setTimeout(()=>{if(t(),Ec.length){const e=Ec.pop();e&&xc(e,t)}},1e3*(e.mutedUntil-vs()));Uc.set(s,n)};function Vc(e,t,s){xc({chatId:e,mutedUntil:t},()=>s({"@type":"updateChatNotifySettings",chatId:e,settings:{mutedUntil:void 0}}))}class Gc{constructor(e,t){this.pts=e,this.ptsCount=t}}class Fc{constructor(e,t,s){this.channelId=e,this.pts=t,this.ptsCount=s}}function Nc(e){if(e instanceof Ut)a=e.timeOffset,ws=a,La({"@type":"updateServerTimeOffset",serverTimeOffset:e.timeOffset});else if(e instanceof Dt){let t;switch(e.state){case Dt.disconnected:t="connectionStateConnecting";break;case Dt.broken:t="connectionStateBroken";break;default:t="connectionStateReady"}La({"@type":"updateConnectionState",connectionState:t})}else if(e instanceof Ce.UpdateNewMessage||e instanceof Ce.UpdateNewScheduledMessage||e instanceof Ce.UpdateNewChannelMessage||e instanceof Ce.UpdateShortChatMessage||e instanceof Ce.UpdateShortMessage){let t,s,a,i;if(e instanceof Ce.UpdateShortChatMessage)t=ec(Ia((n=e).chatId,"chat"),{...n,fromId:tn(Ia(n.fromId,"user")),peerId:tn(Ia(n.chatId,"chat"))});else if(e instanceof Ce.UpdateShortMessage)t=function(e){return ec(Ia(e.userId,"user"),{...e,peerId:tn(e.out?Ia(e.userId,"user"):Qr)})}(e);else{const n=e.message;if(n instanceof Ce.MessageEmpty)return;vc(n),t=Zr(n),n instanceof Ce.Message&&(s=n.media&&Br(n.media),a=n.media&&Vr(n.media)),i="replyMarkup"in e.message&&e.message?.replyMarkup instanceof Ce.ReplyKeyboardForceReply&&(!e.message.replyMarkup.selective||t.isMentioned)}if(e instanceof Ce.UpdateNewScheduledMessage?La({"@type":"updateScheduledMessage",id:t.id,chatId:t.chatId,message:t,poll:s,webPage:a,isFromNew:!0,isFull:!0}):La({"@type":"updateMessage",id:t.id,chatId:t.chatId,message:t,shouldForceReply:i,poll:s,webPage:a,isFromNew:!0,isFull:!0}),e.message instanceof Ce.MessageService){const{action:s}=e.message;if(s instanceof Ce.MessageActionChatEditTitle)La({"@type":"updateChat",id:t.chatId,chat:{title:s.title}});else if(s instanceof Ce.MessageActionChatEditPhoto){const n=s.photo instanceof Ce.Photo&&li(s.photo);if(!n)return;const a=function(e){if(e instanceof Ce.PhotoEmpty)return new Ce.ChatPhotoEmpty;const{dcId:t,id:s}=e;return new Ce.ChatPhoto({dcId:t,photoId:s})}(s.photo),i=Ea(e.message);Qs.chats[i]&&(Qs.chats[i].photo=a),ei(s.photo),La({"@type":"updateNewProfilePhoto",peerId:t.chatId,photo:n})}else if(s instanceof Ce.MessageActionChatDeletePhoto){const s=Ea(e.message);Qs.chats[s]&&(Qs.chats[s].photo=new Ce.ChatPhotoEmpty),La({"@type":"updateDeleteProfilePhoto",peerId:t.chatId})}else if(s instanceof Ce.MessageActionChatDeleteUser)e._entities&&e._entities.some(e=>e instanceof Ce.User&&Boolean(e.self)&&e.id===s.userId)&&La({"@type":"updateChat",id:t.chatId,chat:{isForbidden:!0,isNotJoined:!0}});else if(s instanceof Ce.MessageActionChatJoinedByLink){const{fromId:s}=e.message;s instanceof Ce.PeerUser&&e._entities?.some(e=>e instanceof Ce.User&&Boolean(e.self)&&e.id===s.userId)&&La({"@type":"updateChatJoin",id:t.chatId})}else if(s instanceof Ce.MessageActionChatAddUser)e._entities&&e._entities.some(e=>e instanceof Ce.User&&Boolean(e.self)&&s.users.includes(e.id))&&La({"@type":"updateChatJoin",id:t.chatId});else if(s instanceof Ce.MessageActionGroupCall){const e=s.call instanceof Ce.InputGroupCall?s.call:void 0;!s.duration&&e&&La({"@type":"updateGroupCallChatId",chatId:t.chatId,call:{id:e.id.toString(),accessHash:e.accessHash.toString()}})}else if(s instanceof Ce.MessageActionTopicEdit){const t=e.message.replyTo instanceof Ce.MessageReplyHeader?e.message.replyTo:void 0,{replyToMsgId:s,replyToTopId:n,forumTopic:a}=t||{},i=a&&(n||s)||1;La({"@type":"updateTopic",chatId:va(e.message.peerId),topicId:i})}else s instanceof Ce.MessageActionTopicCreate&&La({"@type":"updateTopics",chatId:va(e.message.peerId)})}}else if(e instanceof Ce.UpdateQuickReplyMessage){const t=Zr(e.message);if(!t)return;const s=e.message instanceof Ce.Message&&e.message.media?Br(e.message.media):void 0,n=e.message instanceof Ce.Message&&e.message.media?Vr(e.message.media):void 0;La({"@type":"updateQuickReplyMessage",id:t.id,message:t,poll:s,webPage:n})}else if(e instanceof Ce.UpdateDeleteQuickReplyMessages)La({"@type":"deleteQuickReplyMessages",quickReplyId:e.shortcutId,messageIds:e.messages});else if(e instanceof Ce.UpdateQuickReplies)La({"@type":"updateQuickReplies",quickReplies:e.quickReplies.map(cc)});else if(e instanceof Ce.UpdateNewQuickReply)La({"@type":"updateQuickReplies",quickReplies:[cc(e.quickReply)]});else if(e instanceof Ce.UpdateDeleteQuickReply)La({"@type":"deleteQuickReply",quickReplyId:e.shortcutId});else if(e instanceof Ce.UpdateEditMessage||e instanceof Ce.UpdateEditChannelMessage){const t=e.message;if(t instanceof Ce.MessageEmpty)return;vc(t);const s=Bs(Zr(t),["isOutgoing"]),n=t instanceof Ce.Message&&t.media?Br(t.media):void 0,a=t instanceof Ce.Message&&t.media?Vr(t.media):void 0;La({"@type":"updateMessage",id:s.id,chatId:s.chatId,message:s,poll:n,webPage:a,isFull:!0})}else if(e instanceof Ce.UpdateMessageReactions)La({"@type":"updateMessageReactions",id:e.msgId,threadId:e.topMsgId,chatId:va(e.peer),reactions:bi(e.reactions)});else if(e instanceof Ce.UpdateMessageExtendedMedia){const t=va(e.peer),s=e.extendedMedia[0]instanceof Ce.MessageExtendedMedia;if(s){const n=Hr(e.extendedMedia);if(!n?.length)return;return void La({"@type":"updateMessageExtendedMedia",id:e.msgId,chatId:t,isBought:s,extendedMedia:n})}const n=s?void 0:e.extendedMedia.filter(e=>e instanceof Ce.MessageExtendedMediaPreview).map(e=>Nr(e)).filter(Boolean);if(!n?.length)return;La({"@type":"updateMessageExtendedMedia",id:e.msgId,chatId:t,extendedMedia:n})}else if(e instanceof Ce.UpdateDeleteMessages)La({"@type":"deleteMessages",ids:e.messages});else if(e instanceof Ce.UpdateDeleteScheduledMessages)La({"@type":"deleteScheduledMessages",ids:e.messages,newIds:e.sentMessages,chatId:va(e.peer)});else if(e instanceof Ce.UpdateDeleteChannelMessages){const t=Ia(e.channelId,"channel");La({"@type":"deleteMessages",ids:e.messages,chatId:t})}else if(e instanceof Ce.UpdateServiceNotification)if(e.popup)La({"@type":"error",error:{message:e.message,entities:e.entities.map(_i)}});else{const t=function(e,t){const s=Yr(t),n=Pr(e);return{id:s,chatId:v,date:e.inboxDate||t,content:n,isInvertedMedia:e.invertMedia,isOutgoing:!1}}(e,Date.now()/1e3+Is());vc(hn(t.id,t.chatId,e)),La({"@type":"updateServiceNotification",message:t})}else if(e instanceof Ce.UpdateReadMessagesContents)La({"@type":"updateCommonBoxMessages",ids:e.messages,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}});else if(e instanceof Ce.UpdateChannelReadMessagesContents)La({"@type":"updateChannelMessages",channelId:Ia(e.channelId,"channel"),ids:e.messages,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}});else if(e instanceof Ce.UpdateMessagePoll){const{pollId:t,poll:s,results:n}=e;if(s){const e=Ur(s,n);La({"@type":"updateMessagePoll",pollId:String(t),pollUpdate:e})}else{const e=xr(n);La({"@type":"updateMessagePoll",pollId:String(t),pollUpdate:{results:e}})}}else if(e instanceof Ce.UpdateMessagePollVote)La({"@type":"updateMessagePollVote",pollId:String(e.pollId),peerId:va(e.peer),options:e.options.map(Va)});else if(e instanceof Ce.UpdateChannelMessageViews)La({"@type":"updateMessage",chatId:Ia(e.channelId,"channel"),id:e.id,message:{viewsCount:e.views}});else if(e instanceof Ce.UpdateChannelMessageForwards)La({"@type":"updateMessage",chatId:Ia(e.channelId,"channel"),id:e.id,message:{forwardsCount:e.forwards}});else if(e instanceof Ce.UpdateReadHistoryInbox)La({"@type":"updateThreadReadState",chatId:va(e.peer),threadId:e.topMsgId||Cs,readState:{lastReadInboxMessageId:e.maxId,unreadCount:e.stillUnreadCount}});else if(e instanceof Ce.UpdateReadHistoryOutbox)La({"@type":"updateThreadReadState",chatId:va(e.peer),threadId:Cs,readState:{lastReadOutboxMessageId:e.maxId}});else if(e instanceof Ce.UpdateReadChannelInbox)La({"@type":"updateThreadReadState",chatId:Ia(e.channelId,"channel"),threadId:Cs,readState:{lastReadInboxMessageId:e.maxId,unreadCount:e.stillUnreadCount}});else if(e instanceof Ce.UpdateReadChannelOutbox)La({"@type":"updateThreadReadState",chatId:Ia(e.channelId,"channel"),threadId:Cs,readState:{lastReadOutboxMessageId:e.maxId}});else if(e instanceof Ce.UpdateReadChannelDiscussionInbox)La({"@type":"updateThreadReadState",chatId:Ia(e.channelId,"channel"),threadId:e.topMsgId,readState:{lastReadInboxMessageId:e.readMaxId}});else if(e instanceof Ce.UpdateReadChannelDiscussionOutbox)La({"@type":"updateThreadReadState",chatId:Ia(e.channelId,"channel"),threadId:e.topMsgId,readState:{lastReadOutboxMessageId:e.readMaxId}});else if(e instanceof Ce.UpdateDialogPinned&&e.peer instanceof Ce.DialogPeer)La({"@type":"updateChatPinned",id:va(e.peer.peer),isPinned:e.pinned||!1});else if(e instanceof Ce.UpdatePinnedDialogs){const t=e.order?.filter(e=>e instanceof Ce.DialogPeer).map(e=>va(e.peer));La({"@type":"updatePinnedChatIds",ids:t,folderId:e.folderId||void 0})}else if(e instanceof Ce.UpdateSavedDialogPinned&&e.peer instanceof Ce.DialogPeer)La({"@type":"updateSavedDialogPinned",id:va(e.peer.peer),isPinned:e.pinned||!1});else if(e instanceof Ce.UpdatePinnedSavedDialogs)La({"@type":"updatePinnedSavedDialogIds",ids:e.order?e.order.filter(e=>e instanceof Ce.DialogPeer).map(e=>va(e.peer)):[]});else if(e instanceof Ce.UpdateFolderPeers)e.folderPeers.forEach(e=>{const{folderId:t,peer:s}=e;La({"@type":"updateChatListType",id:va(s),folderId:t})});else if(e instanceof Ce.UpdateDialogFilter){const{id:t,filter:s}=e;La({"@type":"updateChatFolder",id:t,folder:xa(s)?ko(s):void 0})}else if(e instanceof Ce.UpdateDialogFilterOrder)La({"@type":"updateChatFoldersOrder",orderedIds:e.order});else if(e instanceof Ce.UpdateChatParticipants){const t=Ao(e.participants);La({"@type":"updateChatMembers",id:Ia(e.participants.chatId,"chat"),replacedMembers:t})}else if(e instanceof Ce.UpdateChatParticipantAdd){const t=Mo(ks(e,["userId","inviterId","date"]));La({"@type":"updateChatMembers",id:Ia(e.chatId,"chat"),addedMember:t})}else if(e instanceof Ce.UpdateChatParticipantDelete)La({"@type":"updateChatMembers",id:Ia(e.chatId,"chat"),deletedMemberId:Ia(e.userId,"user")});else if(e instanceof Ce.UpdatePinnedMessages||e instanceof Ce.UpdatePinnedChannelMessages)La({"@type":"updatePinnedIds",chatId:e instanceof Ce.UpdatePinnedMessages?va(e.peer):Ia(e.channelId,"channel"),messageIds:e.messages,isPinned:e.pinned});else if(e instanceof Ce.UpdateUserTyping||e instanceof Ce.UpdateChatUserTyping){const t=e instanceof Ce.UpdateUserTyping?Ia(e.userId,"user"):Ia(e.chatId,"chat"),n=e instanceof Ce.UpdateUserTyping?e.topMsgId:void 0;e.action instanceof Ce.SendMessageEmojiInteraction?La({"@type":"updateStartEmojiInteraction",id:t,emoji:e.action.emoticon,messageId:e.action.msgId,interaction:(s=JSON.parse(e.action.interaction.data),{timestamps:s.a.map(({t:e})=>e)})}):e.action instanceof Ce.SendMessageTextDraftAction?La({"@type":"updateChatTypingDraft",chatId:t,id:e.action.randomId.toString(),threadId:n,text:yi(e.action.text)}):La({"@type":"updateChatTypingStatus",id:t,threadId:n,typingStatus:Ro(e)})}else if(e instanceof Ce.UpdateChannelUserTyping)La({"@type":"updateChatTypingStatus",id:Ia(e.channelId,"channel"),threadId:e.topMsgId,typingStatus:Ro(e)});else if(e instanceof Ce.UpdateChannel){const{_entities:t}=e;if(!t)return;const s=t.find(e=>e instanceof Ce.Channel||e instanceof Ce.ChannelForbidden);if(s instanceof Ce.Channel){const t=wo(s);t&&(La({"@type":"updateChat",id:t.id,chat:t}),La({"@type":t.isNotJoined?"updateChatLeave":"updateChatJoin",id:Ia(e.channelId,"channel")}))}else if(s instanceof Ce.ChannelForbidden){const t=Ia(e.channelId,"channel");La({"@type":"updateChat",id:t,chat:{isRestricted:!0}}),La({"@type":"updateChatLeave",id:t})}else 0===t.length&&La({"@type":"resetMessages",id:Ia(e.channelId,"channel")})}else if(e instanceof Ce.UpdateDialogUnreadMark&&e.peer instanceof Ce.DialogPeer)La({"@type":"updateThreadReadState",chatId:va(e.peer.peer),threadId:Cs,readState:{hasUnreadMark:e.unread}});else if(e instanceof Ce.UpdateChatDefaultBannedRights)La({"@type":"updateChat",id:va(e.peer),chat:{defaultBannedRights:Ls(e.defaultBannedRights)}});else if(e instanceof Ce.UpdateUserStatus)La({"@type":"updateUserStatus",userId:Ia(e.userId,"user"),status:Yi(e.status)});else if(e instanceof Ce.UpdateUser)La({"@type":"updateRequestUserUpdate",id:Ia(e.userId,"user")});else if(e instanceof Ce.UpdateUserEmojiStatus){const t=Aa(e.emojiStatus);La({"@type":"updateUserEmojiStatus",userId:Ia(e.userId,"user"),emojiStatus:t})}else if(e instanceof Ce.UpdateUserName){const t=Ia(e.userId,"user"),s=Qs.users[t];La({"@type":"updateUser",id:t,user:{...s?.mutualContact&&!s.self?ks(e,[]):ks(e,["firstName","lastName"]),usernames:hi(e)}})}else if(e instanceof Ce.UpdateUserPhone){const{userId:t,phone:s}=e;La({"@type":"updateUser",id:Ia(t,"user"),user:{phoneNumber:s}})}else if(e instanceof Ce.UpdatePeerSettings){const{peer:t,settings:s}=e;La({"@type":"updatePeerSettings",id:va(t),settings:Qi(s)})}else if(e instanceof Ce.UpdateNotifySettings){const{notifySettings:t,peer:s}=e,n=s.className,a=Ta(t);if(s instanceof Ce.NotifyPeer){const e=va(s.peer);return a.mutedUntil&&Vc(e,a.mutedUntil,La),void La({"@type":"updateChatNotifySettings",chatId:e,settings:a})}if(s instanceof Ce.NotifyForumTopic){const e=va(s.peer);return a.mutedUntil&&function(e,t,s,n){xc({chatId:e,topicId:t,mutedUntil:s},()=>n({"@type":"updateTopicNotifySettings",chatId:e,topicId:t,settings:{mutedUntil:void 0}}))}(e,s.topMsgId,a.mutedUntil,La),void La({"@type":"updateTopicNotifySettings",chatId:e,topicId:s.topMsgId,settings:a})}const i="NotifyUsers"===n?"users":"NotifyChats"===n?"groups":"NotifyBroadcasts"===n?"channels":void 0;if(!i)return;La({"@type":"updateDefaultNotifySettings",peerType:i,settings:a})}else if(e instanceof Ce.UpdatePeerBlocked)La({"@type":"updatePeerBlocked",id:va(e.peerId),isBlocked:e.blocked,isBlockedFromStories:e.blockedMyStoriesFrom});else if(e instanceof Ce.UpdatePrivacy){const t=function(e){switch(e.className){case"PrivacyKeyPhoneNumber":return"phoneNumber";case"PrivacyKeyAddedByPhone":return"addByPhone";case"PrivacyKeyStatusTimestamp":return"lastSeen";case"PrivacyKeyProfilePhoto":return"profilePhoto";case"PrivacyKeyPhoneCall":return"phoneCall";case"PrivacyKeyPhoneP2P":return"phoneP2P";case"PrivacyKeyForwards":return"forwards";case"PrivacyKeyVoiceMessages":return"voiceMessages";case"PrivacyKeyChatInvite":return"chatInvite";case"PrivacyKeyAbout":return"bio";case"PrivacyKeyBirthday":return"birthday";case"PrivacyKeyStarGiftsAutoSave":return"gifts";case"PrivacyKeyNoPaidMessages":return"noPaidMessages"}}(e.key);t&&La({"@type":"updatePrivacy",key:t,rules:mi(e.rules)})}else if(e instanceof Ce.UpdateDraftMessage)La({"@type":"draftMessage",chatId:va(e.peer),threadId:e.topMsgId,draft:tc(e.draft)});else if(e instanceof Ce.UpdateContactsReset)La({"@type":"updateResetContactList"});else if(e instanceof Ce.UpdateFavedStickers)La({"@type":"updateFavoriteStickers"});else if(e instanceof Ce.UpdateRecentStickers)La({"@type":"updateRecentStickers"});else if(e instanceof Ce.UpdateRecentReactions)La({"@type":"updateRecentReactions"});else if(e instanceof Ce.UpdateSavedReactionTags)La({"@type":"updateSavedReactionTags"});else if(e instanceof Ce.UpdateMoveStickerSetToTop)e.masks||La({"@type":"updateMoveStickerSetToTop",isCustomEmoji:e.emojis,id:e.stickerset.toString()});else if(e instanceof Ce.UpdateStickerSets)La({"@type":"updateStickerSets"});else if(e instanceof Ce.UpdateStickerSetsOrder)e.masks||La({"@type":"updateStickerSetsOrder",order:e.order.map(e=>e.toString()),isCustomEmoji:e.emojis});else if(e instanceof Ce.UpdateNewStickerSet){if(e.stickerset instanceof Ce.messages.StickerSet){const t=ki(e.stickerset.set);La({"@type":"updateStickerSet",id:t.id,stickerSet:t})}}else if(e instanceof Ce.UpdateSavedGifs)La({"@type":"updateSavedGifs"});else if(e instanceof Ce.UpdateGroupCall)La({"@type":"updateGroupCall",call:Rc(e.call)});else if(e instanceof Ce.UpdateGroupCallConnection)La({"@type":"updateGroupCallConnection",data:JSON.parse(e.params.data),presentation:Boolean(e.presentation)});else if(e instanceof Ce.UpdateGroupCallParticipants){const t=function(e){if(e instanceof Ce.InputGroupCall)return e.id.toString()}(e.call);t&&La({"@type":"updateGroupCallParticipants",groupCallId:t,participants:e.participants.map(Cc)})}else if(e instanceof Ce.UpdatePendingJoinRequests)La({"@type":"updatePendingJoinRequests",chatId:va(e.peer),recentRequesterIds:e.recentRequesters.map(e=>Ia(e,"user")),requestsPending:e.requestsPending});else if(e instanceof Ce.UpdatePhoneCall)La({"@type":"updatePhoneCall",call:kc(e.phoneCall)});else if(e instanceof Ce.UpdatePhoneCallSignalingData)La({"@type":"updatePhoneCallSignalingData",callId:e.phoneCallId.toString(),data:Array.from(e.data)});else if(e instanceof Ce.UpdateWebViewResultSent){const{queryId:t}=e;La({"@type":"updateWebViewResultSent",queryId:t.toString()})}else if(e instanceof Ce.UpdateWebPage||e instanceof Ce.UpdateChannelWebPage){const t=Gr(e.webpage);t&&La({"@type":"updateWebPage",webPage:t})}else if(e instanceof Ce.UpdateBotMenuButton){const{botId:t,button:s}=e;La({"@type":"updateBotMenuButton",botId:Ia(t,"user"),button:Oi(s)})}else if(e instanceof Ce.UpdateBotCommands){const{botId:t,commands:s}=e,n=Ia(t,"user"),a=s.map(e=>Li(n,e));La({"@type":"updateBotCommands",botId:n,commands:a.length?a:void 0})}else if(e instanceof Ce.UpdateTranscribedAudio)La({"@type":"updateTranscribedAudio",transcriptionId:e.transcriptionId.toString(),text:e.text,isPending:e.pending});else if(e instanceof Ce.UpdateConfig)La({"@type":"updateConfig"});else if(e instanceof Ce.UpdatePinnedForumTopic)La({"@type":"updatePinnedTopic",chatId:va(e.peer),topicId:e.topicId,isPinned:Boolean(e.pinned)});else if(e instanceof Ce.UpdatePinnedForumTopics)La({"@type":"updatePinnedTopicsOrder",chatId:va(e.peer),order:e.order||[]});else if(e instanceof Ce.UpdateRecentEmojiStatuses)La({"@type":"updateRecentEmojiStatuses"});else if(e instanceof Ce.UpdateStory){const{story:t}=e,s=va(e.peer),n=fc(s,t);Za(t,s),t instanceof Ce.StoryItemDeleted?La({"@type":"deleteStory",peerId:s,storyId:t.id}):La({"@type":"updateStory",peerId:s,story:n})}else if(e instanceof Ce.UpdateReadStories)La({"@type":"updateReadStories",peerId:va(e.peer),lastReadId:e.maxId});else if(e instanceof Ce.UpdateSentStoryReaction){const t=Pi(e.reaction);La({"@type":"updateSentStoryReaction",peerId:va(e.peer),storyId:e.storyId,reaction:t})}else if(e instanceof Ce.UpdateStoriesStealthMode)La({"@type":"updateStealthMode",stealthMode:hc(e.stealthMode)});else if(e instanceof Ce.UpdateAttachMenuBots)La({"@type":"updateAttachMenuBots"});else if(e instanceof Ce.UpdateNewAuthorization)La({"@type":"updateNewAuthorization",hash:e.hash.toString(),date:e.date,device:e.device,location:e.location,isUnconfirmed:e.unconfirmed});else if(e instanceof Ce.UpdateChannelViewForumAsMessages)La({"@type":"updateViewForumAsMessages",chatId:Ia(e.channelId,"channel"),isEnabled:!!e.enabled||void 0});else if(e instanceof Ce.UpdateStarsBalance){const t=or(e.balance);if(!t)return;La({"@type":"updateStarsBalance",balance:t})}else if(e instanceof Ce.UpdateStarGiftAuctionState){const t=Sr(e.state);if(!t)return;La({"@type":"updateStarGiftAuctionState",giftId:e.giftId.toString(),state:t})}else if(e instanceof Ce.UpdateStarGiftAuctionUserState)La({"@type":"updateStarGiftAuctionUserState",giftId:e.giftId.toString(),userState:wr(e.userState)});else if(e instanceof Ce.UpdatePaidReactionPrivacy)La({"@type":"updatePaidReactionPrivacy",private:(t=e.private,t instanceof Ce.PaidReactionPrivacyAnonymous?{type:"anonymous"}:t instanceof Ce.PaidReactionPrivacyPeer?{type:"peer",peerId:va(t.peer)}:{type:"default"})});else if(e instanceof Ce.UpdateLangPackTooLong)La({"@type":"updateLangPackTooLong",langCode:e.langCode});else if(e instanceof Ce.UpdateLangPack){const{strings:t,keysToRemove:s}=lo(e.difference.strings);La({"@type":"updateLangPack",version:e.difference.version,strings:t,keysToRemove:s})}else e instanceof na?La({"@type":"updatePremiumFloodWait",isUpload:e.isUpload}):e instanceof Gc||e instanceof Fc||e instanceof Ce.UpdateMessageID||Ce.UpdateShortSentMessage;var t,s,n,a}const qc="0";let Hc,Lc,Oc=!1;const jc=new Map,Wc=new Pc(function(e,t){return("seqStart"in e?e.seqStart:e.seq)-("seqStart"in t?t.seqStart:t.seq)}),zc=new Map;function Kc(e){Qs.commonBoxState.seq=e.seq,Qs.commonBoxState.date=e.date,Qs.commonBoxState.pts=e.pts,Qs.commonBoxState.qts=e.qts}function $c(e,t,s){if(e instanceof Dt)return e.state===Dt.connected&&Oc&&ed(),void Nc(e);if(e instanceof Ut)Nc(e);else if(void 0!==Qs.commonBoxState.seq)return e instanceof Ce.Updates||e instanceof Ce.UpdatesCombined?(t&&(e._isFromDifference=!0),void function(e,t){Wc.add(e),t||Xc()}(e,s)):"pts"in e?e instanceof Ce.UpdateChannelTooLong?void nd(td(e)):(t&&(e._isFromDifference=!0),void function(e,t){const s=td(e),n=zc.get(s)||new Pc(ud);n.add(e),zc.set(s,n),t||Yc(s)}(e,s)):void Nc(e)}function Jc(e,t){if(!(Qs.chats[e]instanceof Ce.Channel))return;const s=Qs.channelPtsById[e];s&&s<t?Zc(e):Qs.channelPtsById[e]=t}function Qc(e){if("seq"in e&&e.seq&&(Qs.commonBoxState.seq=e.seq,Qs.commonBoxState.date=e.date),"qts"in e&&(Qs.commonBoxState.qts=e.qts),"pts"in e){const t=td(e);t!==qc?Qs.channelPtsById[t]=e.pts:Qs.commonBoxState.pts=e.pts}if(e instanceof Ce.UpdatesCombined||e instanceof Ce.Updates){Ic(e);const t=e.users.concat(e.chats);e.updates.forEach(e=>{t&&(e._entities=t),$c(e)})}else Nc(e)}function Xc(){if(!Wc.size)return;const e=Wc.pop(),t=Qs.commonBoxState.seq,s="seqStart"in e?e.seqStart:e.seq;if(0===s||e._isFromDifference&&s>=t+1)Qc(e);else if(s===t+1)clearTimeout(Lc),Lc=void 0,Qc(e);else if(s>t+1)return Wc.add(e),void ed();Xc()}function Yc(e){const t=zc.get(e);if(!t?.size)return;const s=t.pop(),n=e===qc?Qs.commonBoxState.pts:Qs.channelPtsById[e],a=s.pts,i=dd(s);if(void 0!==n){if(s._isFromDifference&&a>=n+i)Qc(s);else if(a===n+i)clearTimeout(jc.get(e)),jc.delete(e),Qc(s);else if(a>n+i)return t.add(s),void(e===qc?ed():Zc(e));Yc(e)}}function Zc(e){if(jc.has(e))return;const t=setTimeout(async()=>{await nd(e),jc.delete(e)},500);jc.set(e,t)}function ed(){Lc||(Lc=setTimeout(async()=>{await sd(),Lc=void 0},500))}function td(e){return"channelId"in e&&"pts"in e?Ia(e.channelId,"channel"):e instanceof Ce.UpdateNewChannelMessage||e instanceof Ce.UpdateEditChannelMessage?Ia(e.message.peerId.channelId,"channel"):qc}async function sd(){if(!Oc)throw new Error("UpdatesManager not initialized");if(!Qs.commonBoxState?.date)return void ad();La({"@type":"updateFetchingDifference",isFetching:!0});const e=await Hc(new Ce.updates.GetDifference({pts:Qs.commonBoxState.pts,date:Qs.commonBoxState.date,qts:Qs.commonBoxState.qts}));if(!e||e instanceof Ce.updates.DifferenceTooLong)ad();else{if(e instanceof Ce.updates.DifferenceEmpty)return Qs.commonBoxState.seq=e.seq,Qs.commonBoxState.date=e.date,void La({"@type":"updateFetchingDifference",isFetching:!1});cd(e),Kc(e instanceof Ce.updates.DifferenceSlice?e.intermediateState:e.state),e instanceof Ce.updates.DifferenceSlice?sd():La({"@type":"updateFetchingDifference",isFetching:!1})}}async function nd(e){const t=Qs.chats[e];if(!(t&&t instanceof Ce.Channel&&t.accessHash&&Qs.channelPtsById[e]))return;const s=await Hc(new Ce.updates.GetChannelDifference({channel:an(e,t.accessHash.toString()),pts:Qs.channelPtsById[e],filter:new Ce.ChannelMessagesFilterEmpty,limit:1e3}));s&&(s instanceof Ce.updates.ChannelDifferenceTooLong?ad():(Qs.channelPtsById[e]=s.pts,s instanceof Ce.updates.ChannelDifferenceEmpty?Yc(e):(cd(s,e),s.final||nd(e))))}function ad(){id(),La({"@type":"requestSync"}),rd()}function id(){zc.clear(),Wc.clear(),clearTimeout(Lc),Lc=void 0,jc.forEach(e=>{clearTimeout(e)}),jc.clear(),Qs.commonBoxState={},Object.keys(Qs.channelPtsById).forEach(e=>{Qs.channelPtsById[e]=0}),Oc=!1}function od(e,t){const s="chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type?Cn(e.id,"channel"):void 0;var n,a,i;$c((n=t.pts,a=t.ptsCount,(i=s)?new Fc(i,n,a):new Gc(n,a)))}async function rd(){const e=await Hc(new Ce.updates.GetState);e&&(Kc(e),Oc=!0)}function cd(e,t){e.newMessages.forEach(e=>{Nc(new Ce.UpdateNewMessage({message:e,pts:0,ptsCount:0}))}),Ic(e);const s=new Set;e.otherUpdates.forEach(e=>{const t=td(e);e instanceof Ce.UpdateChannelTooLong&&s.add(td(e));const n=!s.has(t);$c(e,n,!n)}),t?Yc(t):Xc()}function dd(e){return"ptsCount"in e?e.ptsCount:0}function ud(e,t){const s=e.pts-t.pts;return 0!==s?s:dd(t)-dd(e)}const ld={};function fd(){La({"@type":"updateWebAuthTokenFailed"})}function gd(e){La({"@type":"updatePasskeyOption",option:e})}function pd(){return La(Sd("authorizationStateWaitPhoneNumber")),new Promise((e,t)=>{ld.resolve=e,ld.reject=t})}function hd(e=!1){return La({...Sd("authorizationStateWaitCode"),isCodeViaApp:e}),new Promise((e,t)=>{ld.resolve=e,ld.reject=t})}function md(e,t){return La({...Sd("authorizationStateWaitPassword"),hint:e,noReset:t}),new Promise(e=>{ld.resolve=e})}function yd(){return La(Sd("authorizationStateWaitRegistration")),new Promise(e=>{ld.resolve=e})}function _d(e){return La({...Sd("authorizationStateWaitQrCode"),qrCode:{token:btoa(String.fromCharCode(...e.token)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),expires:e.expires}}),new Promise((e,t)=>{ld.reject=t})}function bd(e){if(e instanceof Oe)return void La({"@type":"updateUserAlreadyAuthorized",userId:e.userId});const{messageKey:t,errorMessage:s}=Na(e);La({"@type":"updateAuthorizationError",errorKey:t,errorCode:s})}function Sd(e){return{"@type":"updateAuthorizationState",authorizationState:e}}function wd(e){ld.resolve&&ld.resolve(e)}function Id(e){ld.resolve&&ld.resolve(e)}function vd(e){ld.resolve&&ld.resolve(e)}function Pd(e){const{firstName:t,lastName:s}=e;ld.resolve&&ld.resolve([t,s])}function Cd(){ld.reject&&ld.reject(new Error("RESTART_AUTH"))}function Md(){ld.reject&&ld.reject(new Error("RESTART_AUTH_WITH_QR"))}function Ad(e){ld.reject&&ld.reject(new Le(e))}async function Rd(){const e=globalThis.scheduler;return e?.yield?e.yield():new Promise(e=>{setTimeout(e,0)})}const kd=self.caches,Td="X-Last-Access",Bd=[o,r,"tt-media-progressive"];let Dd;async function Ud(){return!!kd&&(Dd=Dd??await kd.has("test").then(()=>!0).catch(()=>!1),Dd)}qd(Bd),setInterval(()=>{qd(Bd)},36e5);let Ed=function(e){return e[e.Text=0]="Text",e[e.Blob=1]="Blob",e[e.Json=2]="Json",e[e.ArrayBuffer=3]="ArrayBuffer",e}({});function xd(e){return"tt-lang-packs-v51"===e?e:`${e}${Fs?`_${Fs}`:""}`}async function Vd(e,t,s,n=!1){if(kd)try{const a=new Request(t.replace(/:/g,"_")),i=await kd.open(xd(e)),o=await i.match(a);if(!o)return;const r=Number(o.headers.get(Td)),c=Date.now();(!r||c-r>864e5)&&async function(e,t,s){try{const n=new Headers(s.headers);n.set(Td,Date.now().toString());const a=new Response(s.clone().body,{status:s.status,statusText:s.statusText,headers:n});await e.put(t,a)}catch(e){console.warn(e)}}(i,a,o);const d=o.headers.get("Content-Type");switch(s){case Ed.Text:return await o.text();case Ed.Blob:{if(t.startsWith("avatar")&&d&&d.startsWith("text"))return;const e=await o.blob(),s=!e.type||!n&&e.type.includes("html");let a=e.type||d;return s&&a?(n||(a=a.replace(/html/gi,"")),new Blob([e],{type:a})):e}case Ed.Json:return await o.json();case Ed.ArrayBuffer:return await o.arrayBuffer();default:return}}catch(e){return void console.warn(e)}}async function Gd(e,t,s){if(!kd)return!1;try{const n="string"==typeof s||s instanceof Blob||s instanceof ArrayBuffer?s:JSON.stringify(s),a=new Request(t.replace(/:/g,"_")),i=new Response(n);i.headers.set(Td,Date.now().toString());const o=await kd.open(xd(e));return await o.put(a,i),!0}catch(e){return console.warn(e),!1}}async function Fd(e,t){try{if(!kd)return;const s=await kd.open(xd(e));return await s.delete(t)}catch(e){return void console.warn(e)}}async function Nd(e){try{if(!kd)return;return await kd.delete(xd(e))}catch(e){return void console.warn(e)}}async function qd(e){if(kd)try{for(const t of e){const e=await kd.open(xd(t)),s=await e.keys(),n=Date.now();for(const t of s){await Rd();const s=await e.match(t);if(!s)continue;const a=Number(s.headers.get(Td));a&&n-a>432e6&&await e.delete(t)}}}catch(e){console.warn(e)}}function Hd(){Bd.forEach(e=>Nd(e))}const Ld=new Set(["sticker","wallpaper","photo","webDocument","document"]),Od=new Set(["s","m","x","y","w","a","b","c","d"]),jd=new Set(["u","v"]);async function Wd({url:e,mediaFormat:t,start:s,end:a,isHtmlAllowed:i},c,d){const{data:u,mimeType:l,fullSize:f}=await async function(e,t,s,n,a,i){const o=Kd(e);if(!o)return;const{entityType:r,entityId:c,sizeType:d,params:u,mediaMatchType:l}=o;if("staticMap"===r){const e=BigInt(c),s=new URLSearchParams(u),n=Number(s.get("long")),a=Number(s.get("lat")),i=Number(s.get("w")),o=Number(s.get("h")),r=Number(s.get("zoom")),d=Number(s.get("scale")),l=s.get("accuracy_radius"),f=l?Number(l):void 0;return{mimeType:"image/png",data:await t.downloadStaticMap(e,n,a,i,o,r,d,f)}}let f;switch(r){case"channel":case"chat":f=Qs.chats[c];break;case"user":f=Qs.users[c];break;case"sticker":case"wallpaper":case"document":f=Qs.documents[c];break;case"photo":f=Qs.photos[c];break;case"stickerSet":f=Qs.stickerSets[c];break;case"webDocument":f=Qs.webDocuments[c]}if(f){if(Ld.has(r)){const e=f,o=await t.downloadMedia(e,{sizeType:d,start:n,end:a,progressCallback:s,workers:16});let r,c;return d&&Od.has(d)?r="image/jpeg":d&&jd.has(d)?r="video/mp4":f instanceof Ce.Photo?r="image/jpeg":f instanceof Ce.WebDocument?(r=f.mimeType,c=f.size):f instanceof Ce.Document&&(r=f.mimeType,c=rs(f.size)),!i&&r&&(r=r.replace(/html/gi,"")),{mimeType:r,data:o,fullSize:c}}if("stickerSet"===r){const e=await t.downloadStickerSetThumb(f);return{mimeType:e&&zd(e),data:e}}{const e=await t.downloadProfilePhoto(f,"profile"===l);return{mimeType:e&&zd(e),data:e}}}}(e,c,d,s,a,i)||{};if(!u)return;const g=function(e,t,s){if(e instanceof File)return e;switch(t){case Ms.BlobUrl:return new Blob([e],{type:s});case Ms.Text:return e.toString();case Ms.Progressive:case Ms.DownloadUrl:return e.buffer}}(u,t,l);if(!g)return;const p=t!==Ms.Progressive&&(t!==Ms.BlobUrl||g.size<=524288);return n&&p&&Gd(e.startsWith("avatar")?r:o,e,g),{dataBlob:t===Ms.Progressive?"":g,arrayBuffer:t===Ms.Progressive?g:void 0,mimeType:l,fullSize:f}}function zd(e,t="image/jpeg"){if(e.length<4)return t;let s=t;switch(e.subarray(0,4).reduce((e,t)=>e+t.toString(16),"")){case"89504e47":s="image/png";break;case"47494638":s="image/gif";break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":s="image/jpeg";break;case"52494646":s="image/webp"}return s}function Kd(e){const t=e.startsWith("staticMap")?e.match(/(staticMap):([0-9-]+)(\?.+)/):e.startsWith("webDocument")?e.match(/(webDocument):(.+)/):e.match(/(avatar|profile|photo|stickerSet|sticker|wallpaper|document)([-\d\w./]+)(?::\d+)?(\?size=\w+)?/);if(!t)return;const s=t[1],n=t[2];let a;const i=t[3],o=i?.replace("?size=","")||void 0;return a="avatar"===t[1]||"profile"===t[1]?en(n):t[1],{mediaMatchType:s,entityType:a,entityId:n,sizeType:o,params:i}}class $d extends AbortController{threads=new Map;getThreadSignal(e){let t=this.threads.get(e);return t||(t=new AbortController,this.threads.set(e,t)),t.signal}abortThread(e,t){this.threads.get(e)?.abort(t),this.threads.delete(e)}abort(e){super.abort(e),this.threads.forEach(t=>t.abort(e)),this.threads.clear()}}ft.setLevel("warn");const Jd={build:e=>e},Qd=new Map,Xd=new Map;let Yd,Zd;function eu({isPremium:e}){Yd.setIsPremium(e)}async function tu(e=!1,t=!1){!e&&Yd.isConnected()&&await Promise.race([iu(new Ce.auth.LogOut),new Promise(e=>{setTimeout(()=>e(),2500)})]),t||(Object.assign(Js,$s()),id()),Yd.destroy()}function su(){Yd.disconnect()}function nu(e){La({"@type":"updateSession",sessionData:e})}function au(e){$c(e),e instanceof Ce.UpdatesTooLong?async function(){try{await iu(new Ce.users.GetFullUser({id:new Ce.InputUserSelf}),{shouldThrow:!0})}catch(e){"AUTH_KEY_UNREGISTERED"!==e.errorMessage&&"SESSION_REVOKED"!==e.errorMessage&&"USER_DEACTIVATED"!==e.errorMessage||La({"@type":"updateConnectionState",connectionState:"connectionStateBroken"})}}():("updates"in e?e.updates:[e]).forEach(e=>{if(!(e instanceof Ce.UpdateConfig))return;const t=e._entities?.find(e=>e instanceof Ce.User&&Ia(e.id,"user")===Zd);t instanceof Ce.User&&eu({isPremium:Boolean(t.premium)})})}async function iu(e,t={}){const{shouldThrow:s,shouldIgnoreUpdates:n,dcId:a,shouldIgnoreErrors:i,abortControllerChatId:o,abortControllerThreadId:r,shouldRetryOnTimeout:c,abortControllerGroup:d}=t,u=Boolean(t.shouldReturnTrue);let l;if(o){let e=Qd.get(o);e||(e=new $d,Qd.set(o,e)),l=r?e.getThreadSignal(r):e.signal}if(d){let e=Xd.get(d);e||(e=new AbortController,Xd.set(d,e)),l=e.signal}try{const t=await Yd.invoke(e,a,l,c);return Ic(t),!n&&function(e){return e instanceof Ce.UpdatesTooLong||e instanceof Ce.UpdateShortMessage||e instanceof Ce.UpdateShortChatMessage||e instanceof Ce.UpdateShort||e instanceof Ce.UpdatesCombined||e instanceof Ce.Updates||e instanceof Ce.UpdateShortSentMessage}(t)&&$c(t),u?t&&!0:t}catch(t){if(i)return;if((t instanceof Me?t.errorMessage:t.message).includes("FROZEN_METHOD_INVALID")&&function(e,t){if(!(e instanceof Me))return;const s=e.errorMessage;t instanceof Ce.messages.GetPinnedDialogs||t instanceof Ce.phone.GetGroupParticipants||t instanceof Ce.channels.GetParticipant||t instanceof Ce.channels.GetParticipants||t instanceof Ce.messages.GetForumTopics||La({"@type":"notSupportedInFrozenAccount",error:{message:s}})}(t,e),s)throw t;return void function(e,t){const s=e instanceof Me?e.errorMessage:e.message;La({"@type":"error",error:{message:s,isSlowMode:"FLOOD"===s&&(t instanceof Ce.messages.SendMessage||t instanceof Ce.messages.SendMedia||t instanceof Ce.messages.SendMultiMedia),hasErrorKey:!0}})}(t,e)}}function ou(e,t){Yd.invokeBeacon(e,t)}async function ru(e,t){try{return await Wd(e,Yd,t)}catch(s){if(s instanceof Me){if(s.errorMessage.startsWith("FILE_REFERENCE")&&await gu({url:e.url}))return Wd(e,Yd,t);if("FILE_ID_INVALID"===s.errorMessage&&e.url.includes("avatar"))return}throw s}}function cu(e,t){return Yd.uploadFile({file:e,onProgress:t,workers:16})}function du(e){return Yd.updateTwoFaSettings(e)}function uu(e){const{chatId:t,threadId:s}=e,n=Qd.get(t);if(!s)return n?.abort("Chat change"),void Qd.delete(t);n?.abortThread(s,"Thread change")}function lu(e){Xd.get(e)?.abort(),Xd.delete(e)}async function fu(){const e=await iu(new Ce.users.GetFullUser({id:new Ce.InputUserSelf}));if(!(e&&e.users[0]instanceof Ce.User))return;const t=e.users[0];ii(t);const s=Ji(e),n=Xi(t);var a;a=n.id,Qr=a,function(e,t){La({"@type":"updateCurrentUser",currentUser:e,currentUserFullInfo:t})}(n,s),Zd=n.id,eu({isPremium:Boolean(n.isPremium)})}async function gu({url:e}){const t=Kd(e);if(!t)return;const{entityId:s,mediaMatchType:n}=t;if("document"===n||"photo"===n||"webDocument"===n){const e="document"===n?Qs.documents[s]:"webDocument"===n?Qs.webDocuments[s]:Qs.photos[s];if(!e)return!1;const t=e;if(!t.localRepairInfo)return!1;const{localRepairInfo:a}=t;if("story"===a.type)return await async function(e,t){const s=cn(e);if(!s)return!1;const n=await iu(new Ce.stories.GetStoriesByID({peer:s,id:[t]}),{shouldIgnoreErrors:!0});return!!n&&(n.stories.forEach(t=>{const s=fc(e,t);s&&!("isDeleted"in s)&&(Za(t,e),La({"@type":"updateStory",peerId:e,story:s}))}),!0)}(a.peerId,a.id);if("message"===a.type){const e=await async function(e,t){const s=en(e),n=function(e){const t=Qs.chats[e];if(t&&t instanceof Ce.Channel)return an(e,String(t.accessHash))}(e);let a;if(a="channel"===s&&n?await iu(new Ce.channels.GetMessages({channel:n,id:[new Ce.InputMessageID({id:t})]}),{shouldIgnoreErrors:!0}):await iu(new Ce.messages.GetMessages({id:[new Ce.InputMessageID({id:t})]}),{shouldIgnoreErrors:!0}),!a||a instanceof Ce.messages.MessagesNotModified)return!1;n&&"pts"in a&&Jc(e,a.pts);const i=a.messages[0];if(i instanceof Ce.MessageEmpty)return!1;vc(i);const o=Zr(i);return o&&La({"@type":"updateMessage",chatId:o.chatId,id:o.id,message:o}),!0}(a.peerId,a.id);return e}if("webPage"===a.type){const e=await async function(e){const t=await iu(new Ce.messages.GetWebPage({url:e,hash:0}),{shouldIgnoreErrors:!0});if(!t?.webpage)return!1;const s=Gr(t.webpage);return!!s&&(Xa(t.webpage),La({"@type":"updateWebPage",webPage:s}),"full"===s.webpageType)}(a.url);return e}}return!1}function pu(e){Yd.setForceHttpTransport(e)}function hu(e){Yd.setAllowHttpTransport(e)}function mu(e){Yd.setShouldDebugExportedSenders(e)}function yu(e){Zc(e)}async function _u({peer:e,reason:t,description:s=""}){return await iu(new Ce.account.ReportPeer({peer:sn(e.id,e.accessHash),reason:vn(t),message:s}))}async function bu({peer:e,photo:t,reason:s,description:n=""}){const a=yn(t);if(a)return await iu(new Ce.account.ReportProfilePhoto({peer:sn(e.id,e.accessHash),photoId:a,reason:vn(s),message:n}))}async function Su({hash:e,areCallsEnabled:t,areSecretChatsEnabled:s,isConfirmed:n}){return await iu(new Ce.account.ChangeAuthorizationSettings({hash:BigInt(e),...void 0!==t?{callRequestsDisabled:!t}:void 0,...void 0!==s?{encryptedRequestsDisabled:!s}:void 0,...n&&{confirmed:n}}))}async function wu({days:e}){return await iu(new Ce.account.SetAuthorizationTTL({authorizationTtlDays:e}))}async function Iu({slug:e}){const t=await iu(new Ce.account.ResolveBusinessChatLink({slug:e}),{shouldIgnoreErrors:!0});var s;if(t)return{chatLink:{chatId:va((s=t).peer),text:Cr(s.message,s.entities)}}}function vu({enabled:e}){return iu(new Ce.account.ToggleSponsoredMessages({enabled:e}),{shouldReturnTrue:!0})}function Pu(e){return{days:e.days}}function Cu(e){return new Ce.AccountDaysTTL({days:e})}async function Mu(){const e=await iu(new Ce.account.GetAccountTTL);if(e)return Pu(e)}function Au({days:e}){return iu(new Ce.account.SetAccountTTL({ttl:Cu(e)}),{shouldReturnTrue:!0})}function Ru({tab:e}){return iu(new Ce.account.SetMainProfileTab({tab:qn(e)}),{shouldReturnTrue:!0})}const ku={uploadMaxFileparts:[4e3,8e3],stickersFaved:[5,10],savedGifs:[200,400],dialogFiltersChats:[100,200],dialogFilters:[10,20],dialogFolderPinned:[5,10],captionLength:[1024,4096],channels:[500,1e3],channelsPublic:[10,20],aboutLength:[70,140],chatlistInvites:[3,100],chatlistJoined:[2,20],recommendedChannels:[10,100],savedDialogsPinned:[5,100],maxReactions:[1,3],moreAccounts:[3,6]},Tu={hash:0,limits:{uploadMaxFileparts:ku.uploadMaxFileparts,stickersFaved:ku.stickersFaved,savedGifs:ku.savedGifs,dialogFiltersChats:ku.dialogFiltersChats,dialogFilters:ku.dialogFilters,dialogFolderPinned:ku.dialogFolderPinned,captionLength:ku.captionLength,channels:ku.channels,channelsPublic:ku.channelsPublic,aboutLength:ku.aboutLength,chatlistInvites:ku.chatlistInvites,chatlistJoined:ku.chatlistJoined,recommendedChannels:ku.recommendedChannels,savedDialogsPinned:ku.savedDialogsPinned,moreAccounts:ku.moreAccounts,maxReactions:ku.maxReactions},autologinDomains:["instantview.telegram.org","translations.telegram.org","contest.dev","contest.com","bugs.telegram.org","suggestions.telegram.org","themes.telegram.org","promote.telegram.org","ads.telegram.org"],channelLevelMax:100,boostsPerSentGift:3,channelRestrictAdsLevelMin:50,seenByExpiresAt:604800,seenByMaxChatMembers:100,defaultEmojiStatusesStickerSetId:"773947703670341676",emojiSounds:{},giveawayAddPeersMax:10,giveawayBoostsPerPremium:4,giveawayCountriesMax:10,isGiveawayGiftsPurchaseAvailable:!1,groupTranscribeLevelMin:6,hiddenMembersMinCount:100,ignoreRestrictionReasons:[],canLimitNewMessagesWithoutPremium:!1,readDateExpiresAt:604800,premiumBotUsername:"PremiumBot",premiumPromoOrder:["stories","more_upload","double_limits","last_seen","voice_to_text","faster_download","translations","animated_emoji","emoji_status","saved_tags","profile_badge","message_privacy","advanced_chat_management","no_ads","infinite_reactions","animated_userpics","premium_stickers","effects"],isPremiumPurchaseBlocked:!1,maxUniqueReactions:11,starGiftMaxConvertPeriod:7776e3,starGiftMaxMessageLength:255,starRefStartPrefixes:["_tgr_"],isStarsGiftEnabled:!0,paidReactionMaxAmount:2500,starsUsdWithdrawRateX1000:1300,storyChangelogUserId:"777000",maxPinnedStoriesCount:3,starsSuggestedPostAmountMax:1e5,starsSuggestedPostAmountMin:5,starsSuggestedPostAgeMin:86400,starsSuggestedPostFutureMin:300,starsSuggestedPostFutureMax:2678400,starsSuggestedPostCommissionPermille:850,tonSuggestedPostCommissionPermille:850,todoItemLengthMax:64,todoItemsMax:30,todoTitleLengthMax:32,tonSuggestedPostAmountMax:1e13,tonSuggestedPostAmountMin:1e7,tonTopupUrl:"https://fragment.com/ads/topup",storyViewersExpirePeriod:86400,topicsPinnedLimit:5,bandwidthPremiumDownloadSpeedup:10,bandwidthPremiumNotifyPeriod:3600,bandwidthPremiumUploadSpeedup:10,urlAuthDomains:["web.telegram.org","web.t.me","k.t.me","z.t.me","a.t.me"],whitelistedDomains:["telegram.dog","telegram.me","telegram.org","t.me","telesco.pe","fragment.com","translations.telegram.org"],typingDraftTtl:10,arePasskeysAvailable:!0,passkeysMaxCount:5,diceEmojies:[],diceEmojiesSuccess:{}},Bu={};async function Du(){const e=await iu(new Ce.account.GetPassword);if(!e)return;const{hint:t,hasPassword:s}=e;return{hint:t,hasPassword:s}}function Uu(e){return La({"@type":"updateTwoFaStateWaitCode",length:e}),new Promise((e,t)=>{Bu.resolve=e,Bu.reject=t})}function Eu(e,t){try{return function(e,t){return Yd.getTmpPassword(e,t)}(e,t)}catch(e){if(!Fa(e))return;return Promise.resolve(Na(e))}}function xu(e){try{return t=e,Yd.getCurrentPassword(t)}catch(e){if(!Fa(e))return;return Promise.resolve(Na(e))}var t}async function Vu(e){try{return await du({isCheckPassword:!0,currentPassword:e}),!0}catch(e){return Hu(e),!1}}async function Gu(e){try{return await du({currentPassword:e}),!0}catch(e){return Hu(e),!1}}async function Fu(e,t,s,n){try{return await du({currentPassword:e,newPassword:t,hint:s,email:n,emailCodeCallback:Uu,onEmailCodeError:Hu}),!0}catch(e){return Hu(e),!1}}async function Nu(e,t){try{return await du({currentPassword:e,newPassword:e,email:t,emailCodeCallback:Uu,onEmailCodeError:Hu}),!0}catch(e){return Hu(e),!1}}function qu(e){Bu.resolve(e)}function Hu(e){La({"@type":"updateTwoFaError",messageKey:Na(e).messageKey})}async function Lu({limit:e,offsetDate:t,offsetPeer:s,offsetId:n,archived:a,withPinned:i,lastLocalServiceMessageId:o}){const r=s&&sn(s.id,s.accessHash)||new Ce.InputPeerEmpty,c=await iu(new Ce.messages.GetDialogs({hash:0n,offsetPeer:r,offsetId:n??0,limit:e,offsetDate:t??0,folderId:a?1:void 0,...i&&{excludePinned:!0}})),d=i?await iu(new Ce.messages.GetPinnedDialogs({folderId:a?1:0})):void 0;if(!c||c instanceof Ce.messages.DialogsNotModified)return;const u=(d?d.messages:[]).concat(c.messages).map(Zr).filter(Boolean),l=Hl(c);d&&Object.assign(l,Hl(d,l));const f=[],g={},p={},h={},m=[],y=(d?.dialogs||[]).concat(c.dialogs),_=[],b={};y.forEach(e=>{if(!(e instanceof Ce.Dialog)||!a&&1===e.folderId||a&&1!==e.folderId)return;const t=yo(e,l[vo(e.peer)]);b[t.id]=e.topMessage,e.pts&&Jc(t.id,e.pts),t.id===v&&o&&o>e.topMessage&&(b[t.id]=o),t.isListed=!0,f.push(t);const s=Ta(e.notifySettings);if(Object.values(Ds(s)).length&&(p[t.id]=s,s.mutedUntil&&Vc(t.id,s.mutedUntil,La)),i&&e.pinned&&_.push(t.id),e.draft){const s=tc(e.draft);s&&(g[t.id]=s)}const n=No(e);h[t.id]=n;const r=qo(t.id,e);m.push(r)});const S=f.map(e=>e.id),w=c.users.map(Xi).filter(Boolean),I=Zi((d?.users||[]).concat(c.users));let P;P=c instanceof Ce.messages.DialogsSlice?c.count:S.length;const C=f[f.length-1],M=b[C?.id],A=M,R=C?.id,k=u.reverse().find(e=>e.chatId===C?.id&&e.id===M)?.date;return{chatIds:S,chats:f,users:w,userStatusesById:I,draftsById:g,orderedPinnedIds:i?_:void 0,totalChatCount:P,lastMessageByChatId:b,messages:u,notifyExceptionById:p,nextOffsetId:A,nextOffsetPeerId:R,nextOffsetDate:k,threadReadStatesById:h,threadInfos:m}}async function Ou({parentPeer:e,limit:t,offsetDate:s,offsetPeer:n,offsetId:a,withPinned:i}){const o="title"in e?sn(e.id,e.accessHash):void 0,r=n&&sn(n.id,n.accessHash)||new Ce.InputPeerEmpty,c=await iu(new Ce.messages.GetSavedDialogs({offsetPeer:r,offsetId:a??0,parentPeer:o,limit:t,offsetDate:s??0,hash:0n,...i&&{excludePinned:!0}})),d=i?await iu(new Ce.messages.GetPinnedSavedDialogs):void 0;if(!c||c instanceof Ce.messages.SavedDialogsNotModified)return;const u=d&&!(d instanceof Ce.messages.SavedDialogsNotModified),l=(u?d.messages:[]).concat(c.messages).map(Zr).filter(Boolean),f=Hl(c);u&&Object.assign(f,Hl(d,f));const g=(u?d.dialogs:[]).concat(c.dialogs),p=[],h=[],m={},y=[],_=[];g.forEach(t=>{if(t instanceof Ce.MonoForumDialog)return;const s=function(e,t){const{peer:s}=e;return{id:va(s),type:Io(t),title:Po(s,t),...mo(t)}}(t,f[vo(t.peer)]),n=va(t.peer);p.push(n),i&&t.pinned&&h.push(n),m[n]=t.topMessage,_.push(s);const a=qo(e.id,t);y.push(a)});const b=c.users.map(Xi).filter(Boolean),S=Zi((u?d.users:[]).concat(c.users));let w;w=c instanceof Ce.messages.SavedDialogsSlice?c.count:p.length;const I=_[_.length-1],v=m[I?.id],P=v,C=I?.id,M=l.reverse().find(e=>e.chatId===I?.id&&e.id===v)?.date;return{chatIds:p,chats:_,users:b,userStatusesById:S,orderedPinnedIds:i?h:void 0,totalChatCount:w,lastMessageByChatId:m,messages:l,draftsById:{},notifyExceptionById:{},nextOffsetId:P,nextOffsetPeerId:C,nextOffsetDate:M,threadInfos:y}}const ju=new Map;async function Wu(e){const{id:t}=e;if(ju.has(t))return ju.get(t);const s="channel"===en(e.id)?async function(e){const{id:t,adminRights:s,isMonoforum:n}=e,a=e.accessHash,i=await iu(new Ce.channels.GetFullChannel({channel:an(t,a)}));if(!(i&&i.fullChat instanceof Ce.ChannelFull))return;const{about:o,onlineCount:r,exportedInvite:c,slowmodeSeconds:d,slowmodeNextSendDate:u,migratedFromChatId:l,migratedFromMaxId:f,canViewParticipants:g,canViewStats:p,linkedChatId:h,hiddenPrehistory:m,call:y,botInfo:_,availableReactions:b,reactionsLimit:S,defaultSendAs:w,requestsPending:I,recentRequesters:v,statsDc:P,participantsCount:C,stickerset:M,chatPhoto:A,participantsHidden:R,translationsDisabled:k,storiesPinnedAvailable:T,viewForumAsMessages:B,emojiset:D,boostsApplied:U,boostsUnrestrict:E,botVerification:x,canViewRevenue:V,paidReactionsAvailable:G,hasScheduled:F,stargiftsCount:N,stargiftsAvailable:q,paidMessagesAvailable:H,mainTab:L}=i.fullChat;A&&ei(A);const O=c instanceof Ce.ChatInviteExported?c.link:void 0,j=g&&!n,{members:W,userStatusesById:z}=j&&await Bl({chat:e})||{},{members:K,userStatusesById:$}=j&&s&&await Bl({chat:e,memberFilter:"kicked"})||{},{members:J,userStatusesById:Q}=j&&await Bl({chat:e,memberFilter:"admin"})||{},X=_?Bo(_):void 0,Y=e.isNotJoined||"chatTypeChannel"!==e.type?void 0:await Dl({chat:e}),Z=Y?.member,ee=Z?.joinedDate?{joinedDate:Z.joinedDate,inviterId:Z.inviterId,isViaRequest:Z.isViaRequest}:void 0,te=i.chats.map(e=>wo(e)).filter(Boolean);if(i?.chats?.length>1){const[,e]=i.chats,t=wo(e);t&&La({"@type":"updateChat",id:t.id,chat:t})}i.fullChat.pts&&Jc(e.id,i.fullChat.pts);const se={...z,...$,...Q},ne=y instanceof Ce.InputGroupCall?y:void 0;return{fullInfo:{...A instanceof Ce.Photo&&{profilePhoto:li(A)},about:o,onlineCount:r,inviteLink:O,slowMode:d?{seconds:d,nextSendDate:u}:void 0,migratedFrom:l?{chatId:Ia(l,"chat"),maxMessageId:f}:void 0,canViewMembers:j,canViewStatistics:p,canViewMonetization:V,isPreHistoryHidden:m,joinInfo:ee,members:W,kickedMembers:K,adminMembersById:J?As(J,"userId"):void 0,groupCallId:ne?String(ne.id):void 0,linkedChatId:h?Ia(h,"channel"):void 0,botCommands:X,enabledReactions:Uo(b),reactionsLimit:S,sendAsId:w?va(w):void 0,requestsPending:I,recentRequesterIds:v?.map(e=>Ia(e,"user")),statisticsDcId:P,stickerSet:M?ki(M):void 0,emojiSet:D?ki(D):void 0,areParticipantsHidden:R,isTranslationDisabled:k,hasPinnedStories:Boolean(T),boostsApplied:U,boostsToUnrestrict:E,botVerification:x&&ka(x),isPaidReactionAvailable:G,hasScheduledMessages:F,starGiftCount:N,areStarGiftsAvailable:Boolean(q),arePaidMessagesAvailable:H,mainTab:L&&Ba(L)},chats:te,userStatusesById:se,groupCall:ne?{chatId:t,isLoaded:!1,id:ne.id.toString(),accessHash:ne?.accessHash.toString(),participants:{},version:0,participantsCount:0,connectionState:"disconnected"}:void 0,membersCount:C,...B&&{isForumAsMessages:!0}}}(e):async function(e){const t=await iu(new Ce.messages.GetFullChat({chatId:on(e)}));if(!(t&&t.fullChat instanceof Ce.ChatFull))return;const{about:s,participants:n,exportedInvite:a,botInfo:i,call:o,availableReactions:r,recentRequesters:c,requestsPending:d,chatPhoto:u,translationsDisabled:l,reactionsLimit:f,hasScheduled:g}=t.fullChat;u&&ei(u);const p=Ao(n),h=p?p.filter(({isAdmin:e,isOwner:t})=>e||t):void 0,m=i?Bo(i):void 0,y=a instanceof Ce.ChatInviteExported?a.link:void 0,_=Zi(t.users),b=t.chats.map(e=>wo(e)).filter(Boolean),S=o instanceof Ce.InputGroupCall?o:void 0;return{fullInfo:{...u instanceof Ce.Photo&&{profilePhoto:li(u)},about:s,members:p,adminMembersById:h?As(h,"userId"):void 0,canViewMembers:!0,botCommands:m,inviteLink:y,groupCallId:S?.id.toString(),enabledReactions:Uo(r),reactionsLimit:f,requestsPending:d,recentRequesterIds:c?.map(e=>Ia(e,"user")),isTranslationDisabled:l,isPreHistoryHidden:!0,hasScheduledMessages:g},chats:b,userStatusesById:_,groupCall:S?{chatId:e,isLoaded:!1,id:S.id.toString(),accessHash:S.accessHash.toString(),connectionState:"disconnected",participantsCount:0,version:0,participants:{}}:void 0,membersCount:p?.length}}(t);return ju.set(t,s),s.finally(()=>{ju.delete(t)}),s}async function zu(e){const{id:t,accessHash:s}=e,n=await iu(new Ce.messages.GetPeerSettings({peer:sn(t,s)}),{abortControllerChatId:t});if(n)return{settings:Qi(n.settings)}}async function Ku({query:e}){const t=await iu(new Ce.contacts.Search({q:e,limit:20}));if(!t)return;const s=t.myResults.map(va),n=t.results.map(va).filter(e=>!s.includes(e));return{accountResultIds:s,globalResultIds:n}}async function $u({type:e,user:t}){let s;if("self"===e||"user"===e){const n=await iu(new Ce.users.GetUsers({id:["user"===e&&t?nn(t.id,t.accessHash):new Ce.InputUserSelf]}));if(!n||!n.length)return;[s]=n}else if("support"===e){const e=await iu(new Ce.help.GetSupport);if(!e||!e.user)return;s=e.user}const n=wo(s,"support"===e);if(n)return La({"@type":"updateChat",id:n.id,chat:n}),{chatId:n.id}}async function Ju({chat:e,lastLocalMessage:t,noLastMessage:s}){const{id:n,accessHash:a}=e,i=await iu(new Ce.messages.GetPeerDialogs({peers:[new Ce.InputDialogPeer({peer:sn(n,a)})]}));if(!i)return;const o=i.dialogs[0];if(!(o&&o instanceof Ce.Dialog))return;const r=Hl(i)[vo(o.peer)];if(!r)return;const c=Zr(i.messages[0]),d=t&&(!c||t.date>c.date)?t:c,u=yo(o,r),l=No(o),f=qo(e.id,o);La({"@type":"updateThreadReadState",chatId:n,threadId:Cs,readState:l}),La({"@type":"updateThreadInfo",threadInfo:f}),La({"@type":"updateChat",id:n,chat:u}),!s&&d&&La({"@type":"updateChatLastMessage",id:n,lastMessage:d}),Kc(i.state);const g=Ta(o.notifySettings);g.mutedUntil&&Vc(u.id,g.mutedUntil,La)}function Qu({chat:e,draft:t}){return iu(new Ce.messages.SaveDraft({peer:sn(e.id,e.accessHash),message:t?.text?.text||Zs,entities:t?.text?.entities?.map(mn),replyTo:t?.replyInfo&&xn(t.replyInfo),suggestedPost:t?.suggestedPostInfo&&Gn(t.suggestedPostInfo)}))}function Xu({chat:e,settings:t}){iu(new Ce.account.UpdateNotifySettings({peer:new Ce.InputNotifyPeer({peer:sn(e.id,e.accessHash)}),settings:new Ce.InputPeerNotifySettings({muteUntil:t.mutedUntil,showPreviews:t.shouldShowPreviews,silent:t.isSilentPosting})})),La({"@type":"updateChatNotifySettings",chatId:e.id,settings:t}),Ju({chat:e,noLastMessage:!0})}function Yu({chat:e,topicId:t,mutedUntil:s}){iu(new Ce.account.UpdateNotifySettings({peer:new Ce.InputNotifyForumTopic({peer:sn(e.id,e.accessHash),topMsgId:t}),settings:new Ce.InputPeerNotifySettings({muteUntil:s})})),La({"@type":"updateTopicNotifySettings",chatId:e.id,topicId:t,settings:{mutedUntil:s}})}async function Zu({title:e,about:t="",users:s,isBroadcast:n,isMegagroup:a}){const i=await iu(new Ce.channels.CreateChannel({broadcast:n,title:e,about:t,megagroup:a}),{shouldThrow:!0});if(!(i instanceof Ce.Updates))return;const o=i.chats[0];if(!(o&&o instanceof Ce.Channel))return;const r=wo(o);let c;if(s?.length){const e=await iu(new Ce.channels.InviteToChannel({channel:an(r.id,r.accessHash),users:s.map(({id:e,accessHash:t})=>nn(e,t))}));if(!e)return;au(e.updates),c=e.missingInvitees.map(Vo)}return{channel:r,missingUsers:c}}function el({channelId:e,accessHash:t}){return iu(new Ce.channels.JoinChannel({channel:an(e,t)}),{shouldReturnTrue:!0,shouldThrow:!0})}function tl({chat:e,user:t,shouldRevokeHistory:s}){if("chatTypeBasicGroup"===e.type)return iu(new Ce.messages.DeleteChatUser({chatId:on(e.id),userId:nn(t.id,t.accessHash),revokeHistory:s||void 0}),{shouldReturnTrue:!0})}function sl({chatId:e}){return iu(new Ce.messages.DeleteChat({chatId:on(e)}),{shouldReturnTrue:!0})}function nl({chat:e}){return iu(new Ce.channels.LeaveChannel({channel:an(e.id,e.accessHash)}),{shouldReturnTrue:!0})}async function al({chat:e}){const t=await iu(new Ce.channels.GetFutureCreatorAfterLeave({channel:an(e.id,e.accessHash)}));if(t)return Xi(t)}async function il({chat:e,user:t}){try{return await iu(new Ce.channels.EditCreator({channel:an(e.id,e.accessHash),userId:nn(t.id,t.accessHash),password:new Ce.InputCheckPasswordEmpty}),{shouldReturnTrue:!0,shouldThrow:!0}),{canTransfer:!0}}catch(e){if(!Fa(e))return;return e instanceof Me&&"PASSWORD_HASH_INVALID"===e.errorMessage?{canTransfer:!0}:e instanceof qe?{errorMessage:"PASSWORD_TOO_FRESH"}:e instanceof He?{errorMessage:"SESSION_TOO_FRESH"}:e instanceof Me&&"PASSWORD_MISSING"===e.errorMessage?{errorMessage:"PASSWORD_MISSING"}:Na(e)}}async function ol({chat:e,user:t,password:s}){try{const n=await xu(s);if(!n)return;return"error"in n?n:iu(new Ce.channels.EditCreator({channel:an(e.id,e.accessHash),userId:nn(t.id,t.accessHash),password:n}),{shouldReturnTrue:!0,shouldThrow:!0})}catch(e){if(!Fa(e))return;return Na(e)}}function rl({channelId:e,accessHash:t}){return iu(new Ce.channels.DeleteChannel({channel:an(e,t)}),{shouldReturnTrue:!0})}async function cl({title:e,users:t}){const s=await iu(new Ce.messages.CreateChat({title:e,users:t.map(({id:e,accessHash:t})=>nn(e,t))}));if(!s)return;au(s.updates);const n=s.missingInvitees.map(Vo),a=s.updates.chats[0];return a&&a instanceof Ce.Chat?{chat:wo(a),missingUsers:n}:void 0}async function dl({chatId:e,accessHash:t,photo:s}){const n=en(e);let a;if(s instanceof File){const e=await cu(s);a=new Ce.InputChatUploadedPhoto({file:e})}else if(s){const e=yn(s);if(!e)return!1;a=new Ce.InputChatPhoto({id:e})}else a=new Ce.InputChatPhotoEmpty;return iu("channel"===n?new Ce.channels.EditPhoto({channel:an(e,t),photo:a}):new Ce.messages.EditChatPhoto({chatId:on(e),photo:a}),{shouldReturnTrue:!0})}async function ul({chat:e,shouldBePinned:t}){const{id:s,accessHash:n}=e;await iu(new Ce.messages.ToggleDialogPin({peer:new Ce.InputDialogPeer({peer:sn(s,n)}),pinned:t||void 0}))&&La({"@type":"updateChatPinned",id:e.id,isPinned:t})}async function ll({chat:e,shouldBePinned:t}){const{id:s,accessHash:n}=e;await iu(new Ce.messages.ToggleSavedDialogPin({peer:new Ce.InputDialogPeer({peer:sn(s,n)}),pinned:t||void 0}))&&La({"@type":"updateSavedDialogPinned",id:e.id,isPinned:t})}function fl({chat:e,folderId:t}){const{id:s,accessHash:n}=e;return iu(new Ce.folders.EditPeerFolders({folderPeers:[new Ce.InputFolderPeer({peer:sn(s,n),folderId:t})]}),{shouldReturnTrue:!0})}async function gl(){const e=await iu(new Ce.messages.GetDialogFilters);if(!e)return;const{filters:t,tagsEnabled:s}=e,n=t.findIndex(e=>e instanceof Ce.DialogFilterDefault),a=t.filter(xa),i=a.map(({id:e})=>e);return-1!==n&&i.splice(n,0,0),{byId:As(a.map(ko),"id"),orderedIds:i,areTagsEnabled:s}}async function pl({listType:e}){const t=await iu(new Ce.messages.GetPinnedDialogs({folderId:"archived"===e?1:0}));if(!t)return;const{dialogs:s,messages:n,chats:a,users:i}=t;return{dialogIds:s.map(e=>va(e.peer)),messages:n.map(e=>Zr(e)).filter(Boolean),chats:a.map(e=>wo(e)).filter(Boolean),users:i.map(e=>Xi(e)).filter(Boolean)}}async function hl(){const e=await iu(new Ce.messages.GetSuggestedDialogFilters);if(e)return e.map(To).filter(Boolean)}async function ml({id:e,folderUpdate:t}){t.excludedChatIds=t.excludedChatIds.filter(e=>!t.includedChatIds.includes(e));const s=function(e){const{emoticon:t,contacts:s,nonContacts:n,groups:a,channels:i,bots:o,color:r,excludeArchived:c,excludeMuted:d,excludeRead:u,pinnedChatIds:l,includedChatIds:f,excludedChatIds:g,noTitleAnimations:p}=e,h=l?l.map(cn).filter(Boolean):[],m=f?f.map(cn).filter(Boolean):[],y=g?g.map(cn).filter(Boolean):[];return e.isChatList?new Ce.DialogFilterChatlist({id:e.id,title:Un(e.title),color:r,emoticon:t||void 0,pinnedPeers:h,includePeers:m,hasMyInvites:e.hasMyInvites,titleNoanimate:p}):new Ce.DialogFilter({id:e.id,title:Un(e.title),emoticon:t||void 0,contacts:s||void 0,nonContacts:n||void 0,groups:a||void 0,bots:o||void 0,color:r,excludeArchived:c||void 0,excludeMuted:d||void 0,excludeRead:u||void 0,broadcasts:i||void 0,pinnedPeers:h,includePeers:m,excludePeers:y,titleNoanimate:p})}(t);await iu(new Ce.messages.UpdateDialogFilter({id:e,filter:s}))&&La({"@type":"updateChatFolder",id:e,folder:t})}async function yl(e){const t=await iu(new Ce.messages.UpdateDialogFilter({id:e,filter:void 0})),s=await hl();t&&La({"@type":"updateChatFolder",id:e,folder:void 0}),s&&La({"@type":"updateRecommendedChatFolders",folders:s})}function _l(e){return iu(new Ce.messages.UpdateDialogFiltersOrder({order:e}))}function bl(e){return iu(new Ce.messages.ToggleDialogFilterTags({enabled:e}))}async function Sl({chat:e,hasUnreadMark:t}){const{id:s,accessHash:n}=e;await iu(new Ce.messages.MarkDialogUnread({peer:new Ce.InputDialogPeer({peer:sn(s,n)}),unread:t}))&&La({"@type":"updateThreadReadState",chatId:e.id,threadId:Cs,readState:{hasUnreadMark:t}})}async function wl(e){return vl(await iu(new Ce.contacts.ResolvePhone({phone:e})))}async function Il(e,t){return vl(await iu(new Ce.contacts.ResolveUsername({username:e,referer:t})))}function vl(e){if(!e)return;const{users:t,chats:s}=e,n=s.length?wo(s[0]):wo(t[0]);return n?{chat:n,user:Xi(t[0])}:void 0}function Pl({chat:e,isEnabled:t}){const{id:s,accessHash:n}=e,a=an(s,n);return iu(new Ce.channels.TogglePreHistoryHidden({channel:a,enabled:t}),{shouldReturnTrue:!0})}function Cl({chat:e,bannedRights:t}){const{id:s,accessHash:n}=e,a=sn(s,n);return iu(new Ce.messages.EditChatDefaultBannedRights({peer:a,bannedRights:bn(t)}),{shouldReturnTrue:!0})}function Ml({chat:e,user:t,bannedRights:s,untilDate:n}){const a=an(e.id,e.accessHash),i=sn(t.id,t.accessHash);return iu(new Ce.channels.EditBanned({channel:a,participant:i,bannedRights:bn(s,n)}),{shouldReturnTrue:!0})}function Al({chat:e,user:t,adminRights:s,customTitle:n=""}){const a=an(e.id,e.accessHash),i=nn(t.id,t.accessHash);return iu(new Ce.channels.EditAdmin({channel:a,userId:i,adminRights:Sn(s),rank:n}),{shouldReturnTrue:!0})}async function Rl(e,t){const s=en(e.id);await iu("channel"===s?new Ce.channels.EditTitle({channel:an(e.id,e.accessHash),title:t}):new Ce.messages.EditChatTitle({chatId:on(e.id),title:t}),{shouldReturnTrue:!0})}async function kl(e,t){await iu(new Ce.messages.EditChatAbout({peer:sn(e.id,e.accessHash),about:t}))&&La({"@type":"updateChatFullInfo",id:e.id,fullInfo:{about:t}})}function Tl({chat:e,areSignaturesEnabled:t,areProfilesEnabled:s}){const{id:n,accessHash:a}=e,i=an(n,a);return iu(new Ce.channels.ToggleSignatures({channel:i,signaturesEnabled:t||void 0,profilesEnabled:s||void 0}),{shouldReturnTrue:!0})}async function Bl({chat:e,memberFilter:t="recent",offset:s,query:n=""}){let a;switch(t){case"kicked":a=new Ce.ChannelParticipantsKicked({q:n});break;case"admin":a=new Ce.ChannelParticipantsAdmins;break;case"search":a=new Ce.ChannelParticipantsSearch({q:n});break;default:a=new Ce.ChannelParticipantsRecent}const i=await iu(new Ce.channels.GetParticipants({channel:an(e.id,e.accessHash),filter:a,offset:s??0,hash:0n,limit:200}),{abortControllerChatId:e.id});if(!i||i instanceof Ce.channels.ChannelParticipantsNotModified)return;const o=Zi(i.users);return{members:Ao(i),userStatusesById:o}}async function Dl({chat:e,peer:t}){const s=t?sn(t.id,t.accessHash):new Ce.InputPeerSelf,n=await iu(new Ce.channels.GetParticipant({channel:an(e.id,e.accessHash),participant:s}),{abortControllerChatId:e.id});if(!n)return;const a=Zi(n.users),i=Mo(n.participant);return i?{member:i,userStatusesById:a}:void 0}async function Ul(){const e=await iu(new Ce.channels.GetGroupsForDiscussion);if(e)return e.chats.map(e=>wo(e))}function El({channel:e,chat:t}){return iu(new Ce.channels.SetDiscussionGroup({broadcast:an(e.id,e.accessHash),group:t?an(t.id,t.accessHash):new Ce.InputChannelEmpty}),{shouldReturnTrue:!0})}async function xl(e){const t=await iu(new Ce.messages.MigrateChat({chatId:on(e.id)}),{shouldThrow:!0});if(!(t&&t instanceof Ce.Updates))return;const s=t.updates.find(e=>e instanceof Ce.UpdateChannel).channelId;return wo(t.chats.find(e=>e instanceof Ce.Channel&&e.id.toString()===s.toString()))}async function Vl(e){const t=await iu(new Ce.messages.CheckChatInvite({hash:e}));if(!t)return;if(t instanceof Ce.ChatInvite)return{chat:void 0,invite:Go(t),users:t.participants?.map(Xi).filter(Boolean)};const s=wo(t.chat);return s?{chat:s,invite:void 0,users:void 0}:void 0}async function Gl(e,t){try{if("chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type){const s=await iu(new Ce.channels.InviteToChannel({channel:an(e.id,e.accessHash),users:t.map(e=>nn(e.id,e.accessHash))}));if(!s)return;return au(s.updates),s.missingInvitees.map(Vo)}const s=await Promise.all(t.map(async t=>{const s=await iu(new Ce.messages.AddChatUser({chatId:on(e.id),userId:nn(t.id,t.accessHash),fwdLimit:0}));if(s)return au(s.updates),s.missingInvitees.map(Vo)}));if(s)return s.flat().filter(Boolean)}catch(e){La({"@type":"error",error:{message:e instanceof Me?e.errorMessage:e.message}})}}function Fl(e,t){return iu(new Ce.messages.DeleteChatUser({chatId:on(e.id),userId:nn(t.id,t.accessHash)}),{shouldReturnTrue:!0})}function Nl(e,t){return iu(new Ce.channels.ToggleJoinToSend({channel:an(e.id,e.accessHash),enabled:t}),{shouldReturnTrue:!0})}function ql(e,t){return iu(new Ce.channels.ToggleJoinRequest({channel:an(e.id,e.accessHash),enabled:t}),{shouldReturnTrue:!0})}function Hl(e,t){const s={};return e.chats?.forEach(e=>{const n=`chat${e.id.toString()}`;t?.[n]&&"min"in e&&e.min||(s[n]=e)}),e.users?.forEach(e=>{const n=`user${e.id.toString()}`;t?.[n]&&"min"in e&&e.min||(s[n]=e)}),s}async function Ll({hash:e}){const t=await iu(new Ce.messages.ImportChatInvite({hash:e}));if(t instanceof Ce.Updates&&t.chats.length)return wo(t.chats[0])}function Ol({chat:e,enabledReactions:t,reactionsLimit:s}){return iu(new Ce.messages.SetChatAvailableReactions({peer:sn(e.id,e.accessHash),availableReactions:(n=t,"all"===n?.type?new Ce.ChatReactionsAll({allowCustom:n.areCustomAllowed}):"some"===n?.type?new Ce.ChatReactionsSome({reactions:n.allowed.map(Bn)}):new Ce.ChatReactionsNone),reactionsLimit:s}),{shouldReturnTrue:!0});var n}function jl({chat:e,isProtected:t}){const{id:s,accessHash:n}=e;return iu(new Ce.messages.ToggleNoForwards({peer:sn(s,n),enabled:t}),{shouldReturnTrue:!0})}function Wl({chat:e,isEnabled:t}){const{id:s,accessHash:n}=e;return iu(new Ce.channels.ToggleParticipantsHidden({channel:an(s,n),enabled:t}),{shouldReturnTrue:!0})}function zl({chat:e,isEnabled:t}){const{id:s,accessHash:n}=e;return iu(new Ce.channels.ToggleForum({channel:an(s,n),enabled:t,tabs:Boolean(e.withForumTabs)}),{shouldReturnTrue:!0,shouldThrow:!0})}async function Kl({slug:e}){const t=await iu(new Ce.chatlists.CheckChatlistInvite({slug:e})),s=function(e,t){return e instanceof Ce.chatlists.ChatlistInvite?{slug:t,title:yi(e.title),noTitleAnimations:e.titleNoanimate,emoticon:e.emoticon,peerIds:e.peers.map(va).filter(Boolean)}:e instanceof Ce.chatlists.ChatlistInviteAlready?{slug:t,folderId:e.filterId,missingPeerIds:e.missingPeers.map(va).filter(Boolean),alreadyPeerIds:e.alreadyPeers.map(va).filter(Boolean)}:void 0}(t,e);if(t&&s)return{invite:s}}function $l({slug:e,peers:t}){return iu(new Ce.chatlists.JoinChatlistInvite({slug:e,peers:t.map(e=>sn(e.id,e.accessHash))}),{shouldReturnTrue:!0,shouldThrow:!0})}async function Jl({folderId:e}){const t=await iu(new Ce.chatlists.GetLeaveChatlistSuggestions({chatlist:new Ce.InputChatlistDialogFilter({filterId:e})}));if(t)return t.map(va)}function Ql({folderId:e,peers:t}){return iu(new Ce.chatlists.LeaveChatlist({chatlist:new Ce.InputChatlistDialogFilter({filterId:e}),peers:t.map(e=>sn(e.id,e.accessHash))}),{shouldReturnTrue:!0})}async function Xl({folderId:e,title:t="",peers:s}){const n=await iu(new Ce.chatlists.ExportChatlistInvite({chatlist:new Ce.InputChatlistDialogFilter({filterId:e}),title:t,peers:s.map(e=>sn(e.id,e.accessHash))}),{shouldThrow:!0});if(n&&!(n.filter instanceof Ce.DialogFilterDefault))return{filter:ko(n.filter),invite:xo(n.invite)}}function Yl({folderId:e,slug:t}){return iu(new Ce.chatlists.DeleteExportedInvite({chatlist:new Ce.InputChatlistDialogFilter({filterId:e}),slug:t}))}async function Zl({folderId:e,slug:t,title:s,peers:n}){const a=await iu(new Ce.chatlists.EditExportedInvite({chatlist:new Ce.InputChatlistDialogFilter({filterId:e}),slug:t,title:s,peers:n.map(e=>sn(e.id,e.accessHash))}),{shouldThrow:!0});if(a)return xo(a)}async function ef({folderId:e}){const t=await iu(new Ce.chatlists.GetExportedInvites({chatlist:new Ce.InputChatlistDialogFilter({filterId:e})}));if(t)return{invites:t.invites.map(xo).filter(Boolean)}}function tf({chat:e,isEnabled:t}){return iu(new Ce.messages.TogglePeerTranslations({disabled:!t||void 0,peer:sn(e.id,e.accessHash)}))}function sf({chat:e,isEnabled:t}){const{id:s,accessHash:n}=e,a=an(s,n);return iu(new Ce.channels.ToggleViewForumAsMessages({channel:a,enabled:Boolean(t)}),{shouldReturnTrue:!0})}async function nf({chat:e}){const t=await iu(new Ce.channels.GetChannelRecommendations({channel:e&&an(e.id,e.accessHash)}));if(!t)return;const s=t?.chats.map(e=>wo(e)).filter(Boolean);return{similarChannels:s,count:t instanceof Ce.messages.ChatsSlice?t.count:s.length}}function af({chat:e,paidMessagesStars:t}){return iu(new Ce.channels.UpdatePaidMessagesPrice({channel:e?an(e.id,e.accessHash):new Ce.InputChannelEmpty,sendPaidMessagesStars:BigInt(t)}),{shouldReturnTrue:!0})}async function of({query:e}){const t=await iu(new Ce.contacts.GetSponsoredPeers({q:e}));if(t&&!(t instanceof Ce.contacts.SponsoredPeersEmpty))return function(e){const{peer:t,randomId:s,additionalInfo:n,sponsorInfo:a}=e;return{peerId:va(t),randomId:Va(s),additionalInfo:n,sponsorInfo:a}}(t.peers[0])}function rf({chat:e,isEnabled:t}){return iu(new Ce.channels.ToggleAutotranslation({channel:an(e.id,e.accessHash),enabled:t}),{shouldReturnTrue:!0})}function cf({chat:e,tab:t}){return iu(new Ce.channels.SetMainProfileTab({channel:an(e.id,e.accessHash),tab:qn(t)}),{shouldReturnTrue:!0})}function df(e){if(e instanceof Ce.ForumTopicDeleted)return;const t=function(e){if(e instanceof Ce.ForumTopicDeleted)return;const{id:t,my:s,closed:n,pinned:a,hidden:i,short:o,date:r,title:c,iconColor:d,iconEmojiId:u,fromId:l,notifySettings:f,titleMissing:g}=e;return{id:t,isClosed:n,isPinned:a,isHidden:i,isOwner:s,isMin:o,date:r,title:c,iconColor:d,iconEmojiId:u?.toString(),fromId:va(l),notifySettings:Ta(f),isTitleMissing:g}}(e);if(!t)return;const s=t.isMin;return{topic:t,readState:s?void 0:No(e),lastMessageId:s?void 0:e.topMessage}}var uf=s(48287).hp;async function lf({chat:e,threadId:t,offsetId:s,isSavedDialog:n,addOffset:a,limit:i}){const o=t===Cs?Ce.messages.GetHistory:n?Ce.messages.GetSavedHistory:Ce.messages.GetReplies;let r;try{r=await iu(new o({hash:0n,maxId:0,minId:0,offsetDate:0,peer:sn(e.id,e.accessHash),...t!==Cs&&!n&&{msgId:Number(t)},offsetId:s?Math.min(s,c):0,addOffset:a??0,limit:i}),{shouldThrow:!0,abortControllerChatId:e.id,abortControllerThreadId:t})}catch(t){"CHANNEL_PRIVATE"===t.errorMessage&&La({"@type":"updateChat",id:e.id,chat:{isRestricted:!0}})}if(r&&!(r instanceof Ce.messages.MessagesNotModified)&&r.messages)return{messages:r.messages.map(Zr).filter(Boolean),users:r.users.map(Xi).filter(Boolean),chats:r.chats.map(e=>wo(e)).filter(Boolean),count:r instanceof Ce.messages.Messages?void 0:r.count,topics:r.topics.map(df).filter(Boolean)}}async function ff({chat:e,messageId:t}){const s="channel"===en(e.id);let n;try{n=await iu(s?new Ce.channels.GetMessages({channel:an(e.id,e.accessHash),id:[new Ce.InputMessageID({id:t})]}):new Ce.messages.GetMessages({id:[new Ce.InputMessageID({id:t})]}),{shouldThrow:!0,abortControllerChatId:e.id})}catch(e){const{message:t}=e;"CHANNEL_PRIVATE"!==t&&La({"@type":"error",error:{message:t,isSlowMode:!1,hasErrorKey:!0}})}if(!n||n instanceof Ce.messages.MessagesNotModified)return;"pts"in n&&Jc(e.id,n.pts);const a=n.messages[0];if(!a)return;if(a instanceof Ce.MessageEmpty)return"MESSAGE_DELETED";vc(a);const i=Zr(a);return i?{message:i}:void 0}async function gf({chat:e,messageIds:t}){const s="channel"===en(e.id),n=await iu(s?new Ce.channels.GetMessages({channel:an(e.id,e.accessHash),id:t.map(e=>new Ce.InputMessageID({id:e}))}):new Ce.messages.GetMessages({id:t.map(e=>new Ce.InputMessageID({id:e}))}),{shouldThrow:!0});if(n&&!(n instanceof Ce.messages.MessagesNotModified))return n.messages.map(Zr).filter(Boolean)}let pf=Promise.resolve();function hf(e){const{chat:t,lastMessageId:s,text:n,entities:a,replyInfo:i,suggestedPostInfo:o,attachment:r,sticker:c,story:d,gif:u,poll:l,todo:f,contact:g,scheduledAt:p,scheduleRepeatPeriod:h,groupedId:m,sendAs:y,wasDrafted:_,isInvertedMedia:b,effectId:S,isPending:w,messagePriceInStars:I,dice:v}=e;if(!t)return;const{message:P,poll:C}=function({chat:e,lastMessageId:t,text:s,entities:n,replyInfo:a,suggestedPostInfo:i,attachment:o,sticker:r,gif:c,poll:d,todo:u,contact:l,groupedId:f,scheduledAt:g,scheduleRepeatPeriod:p,sendAs:h,story:m,isInvertedMedia:y,effectId:_,isPending:b,messagePriceInStars:S,dice:w}){const I=Yr(t),v=o&&ic(o),P="chatTypeChannel"===e.type,C=a&&(D=a,U=e.isForum,"story"===D.type?{type:"story",peerId:D.peerId,storyId:D.storyId}:{type:"message",replyToMsgId:D.replyToMsgId,replyToTopId:D.replyToTopId,replyToPeerId:D.replyToPeerId,quoteText:D.quoteText,quoteOffset:D.quoteOffset,isForumTopic:!(!U||!D.replyToTopId)||void 0,...Boolean(D.quoteText)&&{isQuote:!0}}),M=d&&function(e,t){return{mediaType:"poll",id:String(t),summary:ks(e.summary,["question","answers"]),results:{}}}(d,I),A=u&&function(e){return{mediaType:"todo",todo:e.todo}}(u),R=w?{mediaType:"dice",value:-1,emoticon:w}:void 0,k=s&&!w?Ja({text:s,entities:n,emojiOnlyCount:void 0}):void 0,T={id:I,chatId:e.id,content:Ds({text:k,...v,sticker:r,video:c||v?.video,contact:l,storyData:m&&{mediaType:"storyData",...m},pollId:M?.id,todo:A,dice:R}),date:g||vs(),isOutgoing:!P,senderId:"chatTypePrivate"!==e.type?h?.id||Qr:void 0,replyInfo:C,suggestedPostInfo:i,...f&&{groupedId:f,...v&&(v.photo||v.video)&&{isInAlbum:!0}},...g&&{isScheduled:!0},scheduleRepeatPeriod:p,isForwardingAllowed:!0,isInvertedMedia:y,effectId:_,...b&&{sendingState:"messageSendingStatePending"},...S&&{paidMessageStars:S}},B=Wr(T.content,T.groupedId);var D,U;return B&&T.content.text&&(T.content.text.emojiOnlyCount=B),{message:T,poll:M}}({chat:t,lastMessageId:s,text:n,entities:a,replyInfo:i,suggestedPostInfo:o,attachment:r,sticker:c,gif:u,poll:l,todo:f,contact:g,groupedId:m,scheduledAt:p,scheduleRepeatPeriod:h,sendAs:y,story:d,isInvertedMedia:b,effectId:S,isPending:w,messagePriceInStars:I,dice:v});return La({"@type":P.isScheduled?"newScheduledMessage":"newMessage",id:P.id,chatId:t.id,message:P,poll:C,wasDrafted:_}),Promise.resolve(P)}function mf(e,t,s){const{chat:n,text:a,entities:i,replyInfo:o,suggestedPostInfo:r,suggestedMedia:c,attachment:d,sticker:u,story:l,gif:f,poll:g,todo:p,contact:h,dice:m,isSilent:y,scheduledAt:_,scheduleRepeatPeriod:b,groupedId:S,noWebPage:w,sendAs:I,shouldUpdateStickerSetOrder:v,isInvertedMedia:P,effectId:C,webPageMediaSize:M,webPageUrl:A,messagePriceInStars:R}=e;if(!n)return;const k=setTimeout(()=>{La({"@type":t.isScheduled?"updateScheduledMessage":"updateMessage",id:t.id,chatId:n.id,message:{sendingState:"messageSendingStatePending"},isFull:!1})},1e3),T=W();if(S)return function({chat:e,text:t="",entities:s,replyInfo:n,suggestedPostInfo:a,attachment:i,groupedId:o,isSilent:r,scheduledAt:c,scheduleRepeatPeriod:d,sendAs:u,messagePriceInStars:l},f,g,p){let h=-1;_f[o]||(_f[o]={counter:0,singleMediaByIndex:{},localMessages:{}}),h=_f[o].counter++;const m=pf;return pf=(async()=>{let y;try{y=await vf(g,i,p)}catch(e){return _f[o].counter--,void await m}const _=await async function(e,t){const s=await iu(new Ce.messages.UploadMedia({peer:e,media:t})),n=t.spoiler;if(s instanceof Ce.MessageMediaPhoto&&s.photo&&s.photo instanceof Ce.Photo){const{photo:{id:e,accessHash:t,fileReference:a}}=s;return new Ce.InputMediaPhoto({id:new Ce.InputPhoto({id:e,accessHash:t,fileReference:a}),spoiler:n})}if(s instanceof Ce.MessageMediaDocument&&s.document&&s.document instanceof Ce.Document){const{document:{id:e,accessHash:t,fileReference:a}}=s;return new Ce.InputMediaDocument({id:new Ce.InputDocument({id:e,accessHash:t,fileReference:a}),spoiler:n})}}(sn(e.id,e.accessHash),y);if(await m,!_)return void _f[o].counter--;if(_f[o].singleMediaByIndex[h]=new Ce.InputSingleMedia({media:_,randomId:f,message:t,entities:s?s.map(mn):void 0}),_f[o].localMessages[f.toString()]=g,Object.keys(_f[o].singleMediaByIndex).length<_f[o].counter)return;const{singleMediaByIndex:b,localMessages:S}=_f[o];delete _f[o];const w=Object.values(b).length,I=await iu(new Ce.messages.SendMultiMedia({clearDraft:!0,peer:sn(e.id,e.accessHash),multiMedia:Object.values(b),replyTo:n&&xn(n),...r&&{silent:r},...c&&{scheduleDate:c},...d&&{scheduleRepeatPeriod:d},...u&&{sendAs:sn(u.id,u.accessHash)},...l&&{allowPaidStars:BigInt(l*w)},...a&&{suggestedPost:Gn(a)}}),{shouldIgnoreUpdates:!0});I&&bg(S,I)})(),pf}({chat:n,text:a,entities:i,replyInfo:o,suggestedPostInfo:r,attachment:d,groupedId:S,isSilent:y,scheduledAt:_,scheduleRepeatPeriod:b,messagePriceInStars:R},T,t,s);const B=(async()=>{let e;if(r&&c&&!d)if(c.photo){const t=yn(c.photo);t&&(e=new Ce.InputMediaPhoto({id:t,spoiler:c.photo.isSpoiler||void 0}))}else if(c.video){const t=un(c.video);t&&(e=new Ce.InputMediaDocument({id:t,spoiler:c.video.isSpoiler||void 0}))}else if(c.document){const t=c.document;if(t.id){const s=Qs.documents[t.id];if(s){const t=new Ce.InputDocument({id:s.id,accessHash:s.accessHash,fileReference:s.fileReference});e=new Ce.InputMediaDocument({id:t})}}}if(!e&&d)try{e=await vf(t,d,s)}catch(e){return void await pf}else u?e=ln(u):f?e=ln(f):g?e=function(e,t){const{summary:s,quiz:n}=e,a=new Ce.Poll({id:t,publicVoters:s.isPublic,question:Un(s.question),answers:s.answers.map(({text:e,option:t})=>new Ce.PollAnswer({text:Un(e),option:Ga(t)})),quiz:s.quiz,multipleChoice:s.multipleChoice});if(!n)return new Ce.InputMediaPoll({poll:a});const i=n.correctAnswers.map(Ga),{solution:o}=n,r=n.solutionEntities?n.solutionEntities.map(mn):[];return new Ce.InputMediaPoll({poll:a,correctAnswers:i,...o&&{solution:o,solutionEntities:r}})}(g,T):p?e=gn(p):l?e=function(e){const t=cn(e.peerId);return new Ce.InputMediaStory({peer:t,id:e.id})}(l):A&&M?e=new Ce.InputMediaWebPage({url:A,forceLargeMedia:"large"===M||void 0,forceSmallMedia:"small"===M||void 0}):h?e=new Ce.InputMediaContact({phoneNumber:h.phoneNumber,firstName:h.firstName,lastName:h.lastName,vcard:Zs}):m&&(e=new Ce.InputMediaDice({emoticon:m}));const S={clearDraft:!0,message:a||Zs,entities:i?i.map(mn):void 0,peer:sn(n.id,n.accessHash),randomId:T,replyTo:o&&xn(o),silent:y||void 0,scheduleDate:_,scheduleRepeatPeriod:b,sendAs:I&&sn(I.id,I.accessHash),updateStickersetsOrder:v||void 0,invertMedia:P||void 0,effect:C?BigInt(C):void 0,allowPaidStars:R?BigInt(R):void 0,suggestedPost:r&&Gn(r)};try{let s;s=e?await iu(new Ce.messages.SendMedia({...S,media:e}),{shouldThrow:!0,shouldIgnoreUpdates:!0}):await iu(new Ce.messages.SendMessage({...S,noWebpage:w||void 0}),{shouldThrow:!0,shouldIgnoreUpdates:!0}),s&&Sg(t,s)}catch(e){"PRIVACY_PREMIUM_REQUIRED"===e.errorMessage&&La({"@type":"updateRequestUserUpdate",id:n.id}),La({"@type":t.isScheduled?"updateScheduledMessageSendFailed":"updateMessageSendFailed",chatId:n.id,localId:t.id,error:e.errorMessage}),clearTimeout(k)}})();return B}async function yf(e,t){const s=e.localMessage||await hf(e);return s?mf(e,s,t):void 0}const _f={};async function bf({chat:e,message:t,text:s,entities:n,attachment:a,noWebPage:i},o){const r=1e3*t.date>1e3*vs(),c=a&&ic(a),d=s&&!a?.shouldSendAsFile?t.isInvertedMedia:void 0,u={...c||t.content,...s&&{text:{text:s,entities:n}}},l={...t,content:u,isInvertedMedia:d};La({"@type":r?"updateScheduledMessage":"updateMessage",id:t.id,chatId:e.id,message:l,isFull:!0});try{let c;a&&(c=await vf(t,a,o));const u=n&&n.map(mn);await iu(new Ce.messages.EditMessage({message:s,entities:u,media:c,peer:sn(e.id,e.accessHash),id:t.id,...r&&{scheduleDate:t.date},...t.scheduleRepeatPeriod&&{scheduleRepeatPeriod:t.scheduleRepeatPeriod},...i&&{noWebpage:i},...d&&{invertMedia:d}}),{shouldThrow:!0})}catch(s){const{message:n}=s;La({"@type":"error",error:{message:n,hasErrorKey:!0}}),La({"@type":r?"updateScheduledMessage":"updateMessage",id:t.id,chatId:e.id,message:t,isFull:!0})}}async function Sf({chat:e,message:t,todo:s}){const n=gn(s),a=1e3*t.date>1e3*vs(),i={...t.content,todo:{mediaType:"todo",todo:s.todo}},o={...t,content:i};La({"@type":a?"updateScheduledMessage":"updateMessage",id:t.id,chatId:e.id,message:o,isFull:!0});try{await iu(new Ce.messages.EditMessage({media:n,peer:sn(e.id,e.accessHash),id:t.id}),{shouldThrow:!0})}catch(s){const{message:n}=s;La({"@type":"error",error:{message:n,hasErrorKey:!0}}),La({"@type":"updateMessage",id:t.id,chatId:e.id,message:t,isFull:!0})}}async function wf({chat:e,message:t,items:s}){const n=s.map(e=>new Ce.TodoItem({id:e.id,title:Un(e.title)}));try{await iu(new Ce.messages.AppendTodoList({peer:sn(e.id,e.accessHash),msgId:t.id,list:n}),{shouldThrow:!0})}catch(e){const{message:t}=e;La({"@type":"error",error:{message:t,hasErrorKey:!0}})}}async function If({chat:e,message:t,scheduledAt:s,scheduleRepeatPeriod:n}){await iu(new Ce.messages.EditMessage({peer:sn(e.id,e.accessHash),id:t.id,scheduleDate:s,scheduleRepeatPeriod:n}))}async function vf(e,t,s){const{filename:n,blobUrl:a,mimeType:i,quick:o,voice:r,audio:c,previewBlobUrl:d,shouldSendAsFile:u,shouldSendAsSpoiler:l,ttlSeconds:f}=t,p=t=>{s.isCanceled?p.isCanceled=!0:s(t,function(e){const{chatId:t}=e;return function(e,t){return`msg${e}-${t}`}(t,"randomId"in e?Number(e.randomId):e.previousLocalId||e.id)}(e))},y=async(e,t)=>cu(await async function(e,t){const s=await async function(e){return(await fetch(e)).blob()}(e);return function(e,t){return new File([e],t,{lastModified:Date.now(),type:e.type})}(s,t)}(e,n),t),_=m.has(i),b=c||_||u,[S,w]=await Promise.all(Us([y(a,p),b&&d&&y(d)])),I=[new Ce.DocumentAttributeFilename({fileName:n})];if(!u){if(o){if(h.has(i)&&i!==g)return new Ce.InputMediaUploadedPhoto({file:S,spoiler:l});if(_){const{width:e,height:t,duration:s}=o;void 0!==s&&I.push(new Ce.DocumentAttributeVideo({duration:s,w:e,h:t,supportsStreaming:!0}))}}if(c){const{duration:e,title:t,performer:s}=c;I.push(new Ce.DocumentAttributeAudio({duration:e,title:t,performer:s}))}if(r){const{duration:e,waveform:t}=r,{data:s}=zr(t,63);I.push(new Ce.DocumentAttributeAudio({voice:!0,duration:e,waveform:uf.from(s)}))}}return new Ce.InputMediaUploadedDocument({file:S,mimeType:i,attributes:I,thumb:w,forceFile:u,spoiler:l,ttlSeconds:f})}async function Pf({chat:e,messageId:t,isUnpin:s,isOneSide:n,isSilent:a}){await iu(new Ce.messages.UpdatePinnedMessage({peer:sn(e.id,e.accessHash),id:t,...s&&{unpin:!0},...n&&{pmOneside:!0},...a&&{silent:!0}}))}async function Cf({chat:e,threadId:t}){const s=await iu(new Ce.messages.UnpinAllMessages({peer:sn(e.id,e.accessHash),...t&&{topMsgId:Number(t)}}));s&&(od(e,s),s.offset&&await Cf({chat:e,threadId:t}))}async function Mf({chat:e,messageIds:t,shouldDeleteForAll:s}){const n="channel"===en(e.id),a=await iu(n?new Ce.channels.DeleteMessages({channel:an(e.id,e.accessHash),id:t}):new Ce.messages.DeleteMessages({id:t,...s&&{revoke:!0}}));a&&(od(e,a),La({"@type":"deleteMessages",ids:t,...n&&{chatId:e.id}}))}async function Af({chat:e,peer:t,isRepeat:s=!1}){const n=await iu(new Ce.channels.DeleteParticipantHistory({channel:an(e.id,e.accessHash),participant:sn(t.id,t.accessHash)}));n&&(od(e,n),s||La({"@type":"deleteParticipantHistory",chatId:e.id,peerId:t.id}),n.offset&&await Af({chat:e,peer:t,isRepeat:!0}))}function Rf({chat:e,messageIds:t}){iu(new Ce.messages.DeleteScheduledMessages({peer:sn(e.id,e.accessHash),id:t}))}async function kf({chat:e,shouldDeleteForAll:t,maxId:s}){const n="channel"===en(e.id),a=await iu(n?new Ce.channels.DeleteHistory({channel:an(e.id,e.accessHash),maxId:s??0}):new Ce.messages.DeleteHistory({peer:sn(e.id,e.accessHash),maxId:s??0,...t&&{revoke:!0},...!t&&{just_clear:!0}}));a&&("offset"in a&&(od(e,a),a.offset)?await kf({chat:e,shouldDeleteForAll:t}):La({"@type":"deleteHistory",chatId:e.id}))}async function Tf({chat:e}){const t=await iu(new Ce.messages.DeleteSavedHistory({peer:sn(e.id,e.accessHash),maxId:0}));t&&(od(e,t),t.offset?await Tf({chat:e}):La({"@type":"deleteSavedHistory",chatId:e.id}))}async function Bf({chat:e,messageId:t,reject:s,scheduleDate:n,rejectComment:a}){return await iu(new Ce.messages.ToggleSuggestedPostApproval({peer:sn(e.id,e.accessHash),msgId:t,reject:s||void 0,scheduleDate:n,rejectComment:a}))}async function Df({peer:e,messageIds:t,description:s,option:n}){try{const a=await iu(new Ce.messages.Report({peer:sn(e.id,e.accessHash),id:t,option:Ga(n),message:s}),{shouldThrow:!0});if(!a)return;return{result:dc(a),error:void 0}}catch(e){const t=e.message;if(t===b)return{result:void 0,error:t};throw e}}function Uf({peer:e,chat:t,messageIds:s}){return iu(new Ce.channels.ReportSpam({participant:sn(e.id,e.accessHash),channel:an(t.id,t.accessHash),id:s}))}async function Ef({peer:e,threadId:t,action:s}){const n=function(e){switch(e.type){case"cancel":return new Ce.SendMessageCancelAction;case"typing":return new Ce.SendMessageTypingAction;case"recordAudio":return new Ce.SendMessageRecordAudioAction;case"chooseSticker":return new Ce.SendMessageChooseStickerAction;case"playingGame":return new Ce.SendMessageGamePlayAction}}(s);if(n)try{return await iu(new Ce.messages.SetTyping({peer:sn(e.id,e.accessHash),topMsgId:Number(t),action:n}),{shouldThrow:!0,abortControllerChatId:e.id,abortControllerThreadId:t})}catch(e){}}async function xf({chat:e,threadId:t,maxId:s=0}){if("channel"===en(e.id)&&t===Cs)await iu(new Ce.channels.ReadHistory({channel:an(e.id,e.accessHash),maxId:s}));else if(t!==Cs)await iu(new Ce.messages.ReadDiscussion({peer:sn(e.id,e.accessHash),msgId:Number(t),readMaxId:s}));else{const t=await iu(new Ce.messages.ReadHistory({peer:sn(e.id,e.accessHash),maxId:s}));t&&od(e,t)}t===Cs?Ju({chat:e,noLastMessage:!0}):e.isForum&&La({"@type":"updateTopic",chatId:e.id,topicId:Number(t)})}async function Vf({chat:e,messageIds:t}){const s="channel"===en(e.id),n=await iu(s?new Ce.channels.ReadMessageContents({channel:an(e.id,e.accessHash),id:t}):new Ce.messages.ReadMessageContents({id:t}));n&&(!0!==n&&od(e,n),La({...s?{"@type":"updateChannelMessages",channelId:e.id}:{"@type":"updateCommonBoxMessages"},ids:t,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}}))}async function Gf({chat:e,ids:t,shouldIncrement:s}){const n=Es(t,100),a=await Promise.all(n.map(t=>iu(new Ce.messages.GetMessagesViews({peer:sn(e.id,e.accessHash),id:t,increment:Boolean(s)}))));if(!a||a.some(e=>!e))return;const i=a.flatMap(e=>e.views);return{viewsInfo:t.map((t,s)=>{const{views:n,forwards:a,replies:o}=i[s];return{id:t,views:n,forwards:a,threadInfo:o?rc(e.id,t,o):void 0}})}}async function Ff({chat:e,ids:t}){const s=Es(t,100),n=await Promise.all(s.map(t=>iu(new Ce.messages.GetFactCheck({peer:sn(e.id,e.accessHash),msgId:t}))));if(n&&!n.some(e=>!e))return n.flatMap(e=>e).map(ac)}function Nf(){return iu(new Ce.messages.GetPaidReactionPrivacy,{shouldReturnTrue:!0})}function qf({chat:e,messageIds:t}){return iu(new Ce.messages.ReportMessagesDelivery({peer:sn(e.id,e.accessHash),id:t}))}async function Hf({chat:e,messageId:t}){const[s,n]=await Promise.all([iu(new Ce.messages.GetDiscussionMessage({peer:sn(e.id,e.accessHash),msgId:t}),{abortControllerChatId:e.id,abortControllerThreadId:t}),lf({chat:e,threadId:t,offsetId:1,addOffset:-1,limit:1})]);if(!s||!n)return;const a=s.messages.map(Zr).filter(Boolean),i=a.concat(n.messages),o=s.messages[s.messages.length-1]?.id,r=a[0]?.chatId;if(!r||!o)return;const{maxId:c}=s;return{messages:i,topMessages:a,threadId:o,threadReadState:No(s),threadInfo:oc(s.messages.find(e=>e instanceof Ce.Message&&Boolean(e.replies))),lastMessageId:c,chatId:a[0]?.chatId,firstMessageId:n.messages[0]?.id}}async function Lf({peer:e,isSavedDialog:t,savedTag:s,type:n,query:a="",threadId:i,minDate:o,maxDate:r,offsetId:c,addOffset:d,limit:u,fromPeer:l}){let f;switch(n){case"media":f=new Ce.InputMessagesFilterPhotoVideo;break;case"documents":f=new Ce.InputMessagesFilterDocument;break;case"links":f=new Ce.InputMessagesFilterUrl;break;case"audio":f=new Ce.InputMessagesFilterMusic;break;case"voice":f=new Ce.InputMessagesFilterRoundVoice;break;case"profilePhoto":f=new Ce.InputMessagesFilterChatPhotos;break;case"gif":f=new Ce.InputMessagesFilterGif;break;default:f=new Ce.InputMessagesFilterEmpty}const g=sn(e.id,e.accessHash),p=l?sn(l.id,l.accessHash):void 0,h=await iu(new Ce.messages.Search({peer:t?new Ce.InputPeerSelf:g,savedPeerId:t?g:void 0,savedReaction:s&&[Bn(s)],topMsgId:i===Cs||t?void 0:Number(i),filter:f,q:a,fromId:p,minDate:o??0,maxDate:r??0,maxId:0,minId:0,hash:0n,offsetId:c??0,addOffset:d??0,limit:u}),{abortControllerChatId:e.id,abortControllerThreadId:i});if(!h||h instanceof Ce.messages.MessagesNotModified||!h.messages)return;const m=Zi(h.users),y=h.messages.map(Zr).filter(Boolean),_=h.topics.map(df).filter(Boolean);let b,S=y.length;return(h instanceof Ce.messages.MessagesSlice||h instanceof Ce.messages.ChannelMessages)&&(S=h.count,y.length&&(b=y[y.length-1].id)),{userStatusesById:m,messages:y,topics:_,totalCount:S,nextOffsetId:b}}async function Of({query:e,offsetRate:t=0,offsetPeer:s,offsetId:n,limit:a,type:i="text",minDate:o,maxDate:r,context:c="all"}){if("publicPosts"===i)return jf({query:e,offsetRate:t,offsetPeer:s,offsetId:n,limit:a});let d;switch(i){case"media":d=new Ce.InputMessagesFilterPhotoVideo;break;case"documents":d=new Ce.InputMessagesFilterDocument;break;case"links":d=new Ce.InputMessagesFilterUrl;break;case"audio":d=new Ce.InputMessagesFilterMusic;break;case"voice":d=new Ce.InputMessagesFilterRoundVoice;break;default:if(!(e||r&&o))return;d=new Ce.InputMessagesFilterEmpty}const u=s&&sn(s.id,s.accessHash)||new Ce.InputPeerEmpty,l=await iu(new Ce.messages.SearchGlobal({q:e,offsetRate:t,offsetPeer:u,offsetId:n??0,broadcastsOnly:"channels"===i||"channels"===c||void 0,groupsOnly:"groups"===c||void 0,usersOnly:"users"===c||void 0,limit:a,filter:d,minDate:o??0,maxDate:r??0}));if(!l||l instanceof Ce.messages.MessagesNotModified||!l.messages)return;const f=Zi(l.users),g=l.messages.map(Zr).filter(Boolean),p=l.topics.map(df).filter(Boolean);let h=g.length;h=l instanceof Ce.messages.MessagesSlice||l instanceof Ce.messages.ChannelMessages?l.count:l.messages.length;const m=l.messages[l.messages.length-1],y=Ea(m),_="nextRate"in l&&l.nextRate?l.nextRate:void 0,b=m?.id;return{messages:g,topics:p,userStatusesById:f,totalCount:h,nextOffsetRate:_,nextOffsetPeerId:y,nextOffsetId:b}}async function jf({hashtag:e,query:t,offsetRate:s,offsetPeer:n,offsetId:a,limit:i}){const o=n&&sn(n.id,n.accessHash)||new Ce.InputPeerEmpty,r=await Wf(t);if(!r)return;const c=await iu(new Ce.channels.SearchPosts({hashtag:e,query:t,offsetRate:s??0,offsetId:a??0,offsetPeer:o,limit:i??0,allowPaidStars:BigInt(r.starsAmount)}));if(!c||c instanceof Ce.messages.MessagesNotModified)return;const d=Zi(c.users),u=c.messages.map(Zr).filter(Boolean),l=c.topics.map(df).filter(Boolean);let f=u.length;f=c instanceof Ce.messages.MessagesSlice||c instanceof Ce.messages.ChannelMessages?c.count:c.messages.length;const g=c.messages[c.messages.length-1],p=Ea(g),h="nextRate"in c&&c.nextRate?c.nextRate:void 0,m=g?.id;return{messages:u,topics:l,userStatusesById:d,totalCount:f,nextOffsetRate:h,nextOffsetPeerId:p,nextOffsetId:m,searchFlood:c instanceof Ce.messages.MessagesSlice&&c.searchFlood?lc(c.searchFlood,t):void 0}}async function Wf(e){const t=await iu(new Ce.channels.CheckSearchPostsFlood({query:e}));if(t)return lc(t,e)}async function zf({text:e}){const t=Un(e),s=await iu(new Ce.messages.GetWebPagePreview({message:t.text,entities:t.entities}));if(s)return Vr(s.media)}async function Kf({chat:e,messageId:t,options:s}){const{id:n,accessHash:a}=e;await iu(new Ce.messages.SendVote({peer:sn(n,a),msgId:t,options:s.map(Ga)}))}async function $f({chat:e,messageId:t,completedIds:s,incompletedIds:n}){const{id:a,accessHash:i}=e;await iu(new Ce.messages.ToggleTodoCompleted({peer:sn(a,i),msgId:t,completed:s,incompleted:n}))}async function Jf({chat:e,messageId:t,poll:s}){const{id:n,accessHash:a}=e;await iu(new Ce.messages.EditMessage({peer:sn(n,a),id:t,media:fn(s,!0)}))}async function Qf({chat:e,messageId:t,option:s,offset:n,limit:a,shouldResetVoters:i}){const{id:o,accessHash:r}=e,c=await iu(new Ce.messages.GetPollVotes({peer:sn(o,r),id:t,limit:a??0,option:s?Ga(s):void 0,offset:n}));if(!c)return;const d=c.votes.map(e=>({peerId:va(e.peer),date:e.date}));return{count:c.count,votes:d,nextOffset:c.nextOffset,shouldResetVoters:i}}async function Xf({chat:e,ids:t}){await iu(new Ce.messages.GetExtendedMedia({peer:sn(e.id,e.accessHash),id:t}))}function Yf(e){const{toChat:t,toThreadId:s,messages:n,scheduledAt:a,scheduleRepeatPeriod:i,sendAs:o,noAuthors:r,noCaptions:c,isCurrentUserPremium:d,wasDrafted:u,lastMessageId:l,effectId:f}=e,g=n.map(({id:e})=>e),p=[];return n.forEach((e,n)=>{const g=function({toChat:e,toThreadId:t,message:s,scheduledAt:n,scheduleRepeatPeriod:a,noAuthors:i,noCaptions:o,isCurrentUserPremium:r,lastMessageId:c,sendAs:d,effectId:u}){const l=Yr(c),{content:f,chatId:g,id:p,senderId:h,groupedId:m,isInAlbum:y,isInvertedMedia:_}=s,b=f.audio,S=e.id===Qr&&(g!==e.id||s.forwardInfo)&&!b,w=Object.keys(f).length>1&&f.text&&o,I=!r,v=f.text?.entities&&I?{text:f.text.text,entities:f.text.entities.filter(e=>e.type!==Ps.CustomEmoji)}:f.text,P=v&&Ja(v),C=Wr(f,m);C&&P&&(P.emojiOnlyCount=C);const M={...f,text:w?void 0:P},A=t&&t!==Cs?{type:"message",replyToMsgId:t,replyToTopId:t,isForumTopic:e.isForum||void 0}:void 0;return{id:l,chatId:e.id,content:M,date:n||vs(),scheduleRepeatPeriod:a,isOutgoing:!S&&"chatTypeChannel"!==e.type,senderId:"chatTypePrivate"!==e.type?d?.id||Qr:void 0,sendingState:"messageSendingStatePending",groupedId:m,isInAlbum:y,isForwardingAllowed:!0,replyInfo:A,isInvertedMedia:_,effectId:u,...t&&e?.isForum&&{isTopicReply:!0},...s.chatId!==Qr&&!b&&!i&&{forwardInfo:{date:s.forwardInfo?.date||s.date,savedDate:s.date,isChannelPost:!1,fromChatId:g,fromMessageId:p,fromId:h,savedFromPeerId:s.chatId}},...s.chatId===Qr&&!i&&{forwardInfo:s.forwardInfo},...n&&{isScheduled:!0}}}({toChat:t,toThreadId:Number(s),message:e,scheduledAt:a,scheduleRepeatPeriod:i,noAuthors:r,noCaptions:c,isCurrentUserPremium:d,lastMessageId:l,sendAs:o,effectId:0===n?f:void 0});p.push(g),La({"@type":g.isScheduled?"newScheduledMessage":"newMessage",id:g.id,chatId:t.id,message:g,wasDrafted:u})}),Promise.resolve({messageIds:g,localMessages:p})}async function Zf(e){const{fromChat:t,toChat:s,toThreadId:n,isSilent:a,scheduledAt:i,scheduleRepeatPeriod:o,sendAs:r,withMyScore:c,noAuthors:d,noCaptions:u,forwardedLocalMessagesSlice:l,messagePriceInStars:f,effectId:g}=e;if(!l)return;const{messageIds:p,localMessages:h}=l,m=f?f*p.length:void 0,y=p.map(()=>W());try{const e=await iu(new Ce.messages.ForwardMessages({fromPeer:sn(t.id,t.accessHash),toPeer:sn(s.id,s.accessHash),randomId:y,id:p,withMyScore:c||void 0,silent:a||void 0,dropAuthor:d||void 0,dropMediaCaptions:u||void 0,...n&&{topMsgId:Number(n)},...i&&{scheduleDate:i},...o&&{scheduleRepeatPeriod:o},...r&&{sendAs:sn(r.id,r.accessHash)},...m&&{allowPaidStars:BigInt(m)},effect:g?BigInt(g):void 0}),{shouldThrow:!0,shouldIgnoreUpdates:!0}),l={};h.forEach((e,t)=>{l[y[t].toString()]=e}),e&&bg(l,e)}catch(e){Object.values(h).forEach(t=>{La({"@type":t.isScheduled?"updateScheduledMessageSendFailed":"updateMessageSendFailed",chatId:s.id,localId:t.id,error:e.errorMessage})})}}async function eg(e){if(e.forwardedLocalMessagesSlice)await Zf(e);else{const t={...e,forwardedLocalMessagesSlice:await Yf(e)};await Zf(t)}}async function tg({chat:e,timestamp:t}){const s=await iu(new Ce.messages.GetHistory({peer:sn(e.id,e.accessHash),offsetDate:t,addOffset:-1,limit:1,offsetId:0,maxId:0,minId:0,hash:0n}));if(s&&!(s instanceof Ce.messages.MessagesNotModified)&&s.messages&&s.messages.length)return s.messages[0].id}async function sg({chat:e}){const{id:t,accessHash:s}=e,n=await iu(new Ce.messages.GetScheduledHistory({peer:sn(t,s),hash:0n}),{abortControllerChatId:t});if(n&&!(n instanceof Ce.messages.MessagesNotModified)&&n.messages)return{messages:n.messages.map(Zr).filter(Boolean)}}async function ng({chat:e,ids:t}){const{id:s,accessHash:n}=e;await iu(new Ce.messages.SendScheduledMessages({peer:sn(s,n),id:t}))}async function ag({chat:e,threadId:t}){const s=await iu(new Ce.messages.Search({peer:sn(e.id,e.accessHash),filter:new Ce.InputMessagesFilterPinned,q:Zs,limit:50,topMsgId:Number(t),minDate:0,maxDate:0,offsetId:0,addOffset:0,maxId:0,minId:0,hash:0n}),{abortControllerChatId:e.id,abortControllerThreadId:t});if(s&&!(s instanceof Ce.messages.MessagesNotModified)&&s.messages)return{messages:s.messages.map(Zr).filter(Boolean)}}async function ig({chat:e,messageId:t}){const s=await iu(new Ce.messages.GetMessageReadParticipants({peer:sn(e.id,e.accessHash),msgId:t}));return s?s.reduce((e,t)=>(e[t.userId.toString()]=t.date,e),{}):void 0}async function og({chat:e,isForPaidReactions:t}){const s=await iu(new Ce.channels.GetSendAs({forPaidReactions:t,peer:sn(e.id,e.accessHash)}),{shouldIgnoreErrors:!0,abortControllerChatId:e.id});if(s)return s.peers.map(Eo)}function rg({sendAs:e,chat:t}){return iu(new Ce.messages.SaveDefaultSendAs({peer:sn(t.id,t.accessHash),sendAs:sn(e.id,e.accessHash)}))}async function cg({peer:e}){const t=await iu(new Ce.messages.GetSponsoredMessages({peer:sn(e.id,e.accessHash)}));if(t&&!(t instanceof Ce.messages.SponsoredMessagesEmpty)&&t.messages.length)return{messages:t.messages.map(t=>function(e,t){const{message:s,entities:n,randomId:a,recommended:i,sponsorInfo:o,additionalInfo:r,buttonText:c,canReport:d,title:u,url:l,color:f}=e;let g,p;return e.photo instanceof Ce.Photo&&(ei(e.photo),g=li(e.photo)),e.media&&(p=Mr(e.media)),{chatId:t,randomId:Va(a),expiresAt:Math.round(Date.now()/1e3)+3e5,isRecommended:i,sponsorInfo:o,additionalInfo:r,buttonText:c,canReport:d,title:u,url:l,peerColor:f&&Pa(f),photo:g,content:{...p,text:Cr(s,n)}}}(t,e.id)).filter(Boolean)}}async function dg({random:e}){await iu(new Ce.messages.ViewSponsoredMessage({randomId:Ga(e)}))}function ug({random:e,isMedia:t,isFullscreen:s}){return iu(new Ce.messages.ClickSponsoredMessage({media:t||void 0,fullscreen:s||void 0,randomId:Ga(e)}))}async function lg({randomId:e,option:t}){try{const s=await iu(new Ce.messages.ReportSponsoredMessage({randomId:Ga(e),option:Ga(t)}),{shouldThrow:!0});if(!s)return;return function(e){return e instanceof Ce.channels.SponsoredMessageReportResultReported?{type:"reported"}:e instanceof Ce.channels.SponsoredMessageReportResultAdsHidden?{type:"hidden"}:{type:"selectOption",title:e.title,options:e.options.map(e=>({text:e.text,option:Va(e.option)}))}}(s)}catch(e){return e instanceof Me&&"PREMIUM_ACCOUNT_REQUIRED"===e.errorMessage?{type:"premiumRequired"}:void 0}}async function fg({chat:e,threadId:t}){const s=await iu(new Ce.messages.ReadMentions({peer:sn(e.id,e.accessHash),topMsgId:t?Number(t):void 0}));s&&(od(e,s),s.offset&&await fg({chat:e,threadId:t}))}async function gg({chat:e,threadId:t}){const s=await iu(new Ce.messages.ReadReactions({peer:sn(e.id,e.accessHash),topMsgId:t?Number(t):void 0}));s&&(od(e,s),s.offset&&await gg({chat:e,threadId:t}))}async function pg({chat:e,threadId:t,offsetId:s,addOffset:n,maxId:a,minId:i}){const o=await iu(new Ce.messages.GetUnreadMentions({peer:sn(e.id,e.accessHash),topMsgId:t?Number(t):void 0,limit:100,offsetId:s??0,addOffset:n??0,maxId:a??0,minId:i??0}));if(o&&!(o instanceof Ce.messages.MessagesNotModified)&&o.messages)return{totalCount:"count"in o?o.count:o.messages.length,messages:o.messages.map(Zr).filter(Boolean),topics:o.topics.map(df).filter(Boolean)}}async function hg({chat:e,threadId:t,offsetId:s,addOffset:n,maxId:a,minId:i}){const o=await iu(new Ce.messages.GetUnreadReactions({peer:sn(e.id,e.accessHash),topMsgId:t?Number(t):void 0,limit:100,offsetId:s??0,addOffset:n??0,maxId:a??0,minId:i??0}));if(o&&!(o instanceof Ce.messages.MessagesNotModified)&&o.messages)return{totalCount:"count"in o?o.count:o.messages.length,messages:o.messages.map(Zr).filter(Boolean),topics:o.topics.map(df).filter(Boolean)}}async function mg({chat:e,messageId:t}){const s=await iu(new Ce.messages.TranscribeAudio({msgId:t,peer:sn(e.id,e.accessHash)}));if(s)return La({"@type":"updateTranscribedAudio",isPending:s.pending,transcriptionId:s.transcriptionId.toString(),text:s.text}),s.transcriptionId.toString()}async function yg(e){let t;const s="chat"in e;if(s){const{chat:s,messageIds:n,toLanguageCode:a}=e;t=await iu(new Ce.messages.TranslateText({peer:sn(s.id,s.accessHash),id:n,toLang:a}))}else{const{text:s,toLanguageCode:n}=e;t=await iu(new Ce.messages.TranslateText({text:s.map(e=>Un(e)),toLang:n}))}if(!t)return void(s&&La({"@type":"failedMessageTranslations",chatId:e.chat.id,messageIds:e.messageIds,toLanguageCode:e.toLanguageCode}));const n=t.result.map(e=>yi(e));return s&&La({"@type":"updateMessageTranslations",chatId:e.chat.id,messageIds:e.messageIds,translations:n,toLanguageCode:e.toLanguageCode}),n}async function _g({chat:e,id:t,toLanguageCode:s}){const n=await iu(new Ce.messages.SummarizeText({peer:sn(e.id,e.accessHash),id:t,toLang:s}));if(n)return yi(n)}function bg(e,t){if(!("updates"in t))return void au(t);t.updates.filter(e=>e instanceof Ce.UpdateMessageID).forEach(s=>{const n=t.updates.find(e=>e instanceof Ce.UpdateNewScheduledMessage&&e.message.id===s.id);Sg(e[s.randomId.toString()],s,n)});const s=t.updates.filter(e=>!(e instanceof Ce.UpdateMessageID||e instanceof Ce.UpdateNewScheduledMessage));t.updates=s,au(t)}function Sg(e,t,s){let n,a,i,o;if(t instanceof Ce.UpdateShortSentMessage||t instanceof Ce.UpdateMessageID?n=t:"updates"in t&&(n=t.updates.find(e=>e instanceof Ce.UpdateMessageID),s=t.updates.find(e=>e instanceof Ce.UpdateNewScheduledMessage)),!n)return void au(t);n instanceof Ce.UpdateShortSentMessage&&(e.content.text&&n.entities&&(a={text:Cr(e.content.text.text,n.entities)}),n.media&&(a={...a,...Mr(n.media,{peerId:tn(e.chatId),id:n.id})},i=Br(n.media),o=Vr(n.media)),vc(hn(n.id,e.chatId,n)));const r=s?.message&&Zr(s.message),c="date"in n&&n.date<vs();if(r?.isVideoProcessingPending)La({"@type":"updateVideoProcessingPending",chatId:e.chatId,localId:e.id,newScheduledMessageId:r?.id});else{const t={...e,...a&&{content:{...e.content,...a}},id:n.id,sendingState:void 0,..."date"in n&&{date:n.date}};La({"@type":e.isScheduled&&!c?"updateScheduledMessageSendSucceeded":"updateMessageSendSucceeded",chatId:e.chatId,localId:e.id,message:t,poll:i,webPage:o})}au(t)}async function wg({chat:e,messageId:t}){const{id:s,accessHash:n}=e,a=sn(s,n),i=await iu(new Ce.messages.GetOutboxReadDate({peer:a,msgId:t}),{shouldThrow:!0});if(i)return{date:i.date}}async function Ig(){const e=await iu(new Ce.messages.GetQuickReplies({hash:0n}));if(e&&!(e instanceof Ce.messages.QuickRepliesNotModified))return{messages:e.messages.map(Zr).filter(Boolean),quickReplies:e.quickReplies.map(cc)}}async function vg({chat:e,shortcutId:t}){const s=await iu(new Ce.messages.GetQuickReplyMessages({shortcutId:t,hash:0n}));if(!s||s instanceof Ce.messages.MessagesNotModified)return;const n=s.messages.map(e=>e.id),a=n.map(()=>W()),i=await iu(new Ce.messages.SendQuickReplyMessages({peer:sn(e.id,e.accessHash),shortcutId:t,id:n,randomId:a}),{shouldIgnoreUpdates:!0});if(i){if("updates"in i){const e=i.updates.filter(e=>!(e instanceof Ce.UpdateMessageID));i.updates=e}au(i)}}async function Pg({id:e,chat:t,shouldIncludeThread:s,shouldIncludeGrouped:n}){const a=await iu(new Ce.channels.ExportMessageLink({channel:an(t.id,t.accessHash),id:e,thread:s||void 0,grouped:n||void 0}));return a?.link}async function Cg({bot:e,id:t}){const s=await iu(new Ce.messages.GetPreparedInlineMessage({bot:nn(e.id,e.accessHash),id:t}));if(s)return function(e){const t=e.queryId.toString();return{queryId:t,result:uc(t,e.result),peerTypes:e.peerTypes?.map(Wi),cacheTime:e.cacheTime}}(s)}function Mg(){Xr++}async function Ag({id:e,accessHash:t}){const s=nn(e,t);if(!(s instanceof Ce.InputUser))return;const n=await iu(new Ce.users.GetFullUser({id:s}));if(!n)return;n.fullUser.profilePhoto&&ei(n.fullUser.profilePhoto),n.fullUser.personalPhoto&&ei(n.fullUser.personalPhoto),n.fullUser.fallbackPhoto&&ei(n.fullUser.fallbackPhoto);const a=n.fullUser.botInfo;a?.descriptionPhoto&&ei(a.descriptionPhoto),a?.descriptionDocument instanceof Ce.Document&&(Qs.documents[a.descriptionDocument.id.toString()]=a.descriptionDocument),n.fullUser.businessIntro?.sticker instanceof Ce.Document&&(Qs.documents[n.fullUser.businessIntro.sticker.id.toString()]=n.fullUser.businessIntro.sticker);const i=Ji(n),o=n.users.map(Xi).filter(Boolean),r=Zi(n.users),c=n.chats.map(e=>wo(e)).filter(Boolean),d=o.find(({id:t})=>t===e);return La({"@type":"updateUser",id:e,user:d,fullInfo:i}),{user:d,fullInfo:i,users:o,chats:c,userStatusesById:r}}async function Rg({user:e,maxId:t}){const s=await iu(new Ce.messages.GetCommonChats({userId:nn(e.id,e.accessHash),maxId:t?Cn(t,en(t)):0n,limit:0}));if(!s)return;const n=s.chats.map(e=>wo(e)).filter(Boolean).map(({id:e})=>e);return{chatIds:n,count:"count"in s?s.count:n.length}}async function kg(e){const t=await iu(new Ce.users.GetRequirementsToContact({id:[nn(e.id,e.accessHash)]}));if(!t?.[0])return;const s=t[0];return s instanceof Ce.RequirementToContactPaidMessages?rs(s.starsAmount):void 0}async function Tg(){const e=await iu(new Ce.help.GetNearestDc);return e?.country}async function Bg(){const e=await iu(new Ce.contacts.GetTopPeers({correspondents:!0,offset:0,limit:0,hash:0n}));if(e instanceof Ce.contacts.TopPeers)return{ids:e.users.map(Xi).filter(e=>Boolean(e)&&!e.isSelf).map(({id:e})=>e)}}async function Dg(){const e=await iu(new Ce.contacts.GetContacts({hash:0n}));if(e&&!(e instanceof Ce.contacts.ContactsNotModified))return{users:e.users.map(Xi).filter(Boolean),userStatusesById:Zi(e.users)}}async function Ug({users:e}){const t=await iu(new Ce.users.GetUsers({id:e.map(({id:e,accessHash:t})=>nn(e,t))}));if(t&&t.length)return{users:t.map(Xi).filter(Boolean),userStatusesById:Zi(t)}}async function Eg({phone:e="",firstName:t="",lastName:s=""}){const n=await iu(new Ce.contacts.ImportContacts({contacts:[_n({phone:e,firstName:t,lastName:s})]}));return n instanceof Ce.contacts.ImportedContacts&&n.users.length&&ii(n.users[0]),n?.imported.length?Ia(n.imported[0].userId,"user"):void 0}function xg({id:e,accessHash:t,phoneNumber:s="",firstName:n="",lastName:a="",shouldSharePhoneNumber:i=!1,note:o}){return iu(new Ce.contacts.AddContact({id:nn(e,t),firstName:n,lastName:a,phone:s,addPhonePrivacyException:i||void 0,note:o?Un(o):void 0}),{shouldReturnTrue:!0})}async function Vg({id:e,accessHash:t}){const s=nn(e,t);s instanceof Ce.InputUser&&await iu(new Ce.contacts.DeleteContacts({id:[s]}))&&La({"@type":"deleteContact",id:e})}async function Gg({user:e,shouldRefundCharged:t}){return await iu(new Ce.account.ToggleNoPaidMessagesException({refundCharged:!!t||void 0,userId:nn(e.id,e.accessHash)}))}async function Fg({user:e}){const t=await iu(new Ce.account.GetPaidMessagesRevenue({userId:nn(e.id,e.accessHash)}));if(t)return rs(t.starsAmount)}async function Ng({peer:e,offset:t=0,limit:s=0}){const n=("title"in e?e:void 0)?void 0:e;if(n){const{id:e,accessHash:a}=n,i=await iu(new Ce.photos.GetUserPhotos({userId:nn(e,a),limit:s,offset:t,maxId:0n}));if(!i)return;i.photos.forEach(ei);const o=i instanceof Ce.photos.PhotosSlice?i.count:i.photos.length,r=t+i.photos.length,c=r<o?r:void 0;return{count:o,photos:i.photos.filter(e=>e instanceof Ce.Photo).map(e=>li(e)),nextOffsetId:c}}const a=await Lf({peer:e,type:"profilePhoto",limit:s});if(!a)return;const{messages:i,totalCount:o,nextOffsetId:r}=a;return{count:o,photos:i.map(e=>"chatEditPhoto"===e.content.action?.type&&e.content.action.photo).filter(Boolean),nextOffsetId:r}}function qg(e){const{id:t,accessHash:s}=e;return iu(new Ce.messages.ReportSpam({peer:sn(t,s)}),{shouldReturnTrue:!0})}function Hg(e){return iu(new Ce.account.UpdateEmojiStatus({emojiStatus:Dn(e)}),{shouldReturnTrue:!0})}function Lg(e){const t=e.map(e=>Cn(e,"user"));return iu(new Ce.contacts.EditCloseFriends({id:t}),{shouldReturnTrue:!0})}function Og(e,t){const{id:s,accessHash:n}=e;return iu(new Ce.contacts.UpdateContactNote({id:nn(s,n),note:Un(t)}),{shouldReturnTrue:!0})}async function jg({hash:e}){const t=await iu(new Ce.messages.GetEmojiStickers({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.AllStickersNotModified))return t.sets.forEach(e=>{(e.thumbs?.length||e.thumbDocumentId)&&(Qs.stickerSets[String(e.id)]=e)}),{hash:String(t.hash),sets:t.sets.map(ki)}}async function Wg({hash:e}){const t=await iu(new Ce.messages.GetAllStickers({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.AllStickersNotModified))return t.sets.forEach(e=>{e.thumbs?.length&&(Qs.stickerSets[String(e.id)]=e)}),{hash:String(t.hash),sets:t.sets.map(ki)}}async function zg({hash:e}){const t=await iu(new Ce.messages.GetRecentStickers({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.RecentStickersNotModified))return{hash:String(t.hash),stickers:Di(t.stickers.slice(0,20))}}async function Kg({hash:e}){const t=await iu(new Ce.messages.GetFavedStickers({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.FavedStickersNotModified))return{hash:String(t.hash),stickers:Di(t.stickers)}}async function $g({hash:e}){const t=await iu(new Ce.messages.GetFeaturedStickers({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.FeaturedStickersNotModified))return{hash:String(t.hash),isPremium:Boolean(t.premium),sets:t.sets.map(Ti)}}async function Jg({hash:e}){const t=await iu(new Ce.messages.GetFeaturedEmojiStickers({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.FeaturedStickersNotModified))return t.sets.forEach(({set:e})=>{e.thumbDocumentId&&(Qs.stickerSets[String(e.id)]=e)}),{isPremium:Boolean(t.premium),sets:t.sets.map(Ti)}}async function Qg({sticker:e,unfave:t}){const s=un(e);if(!s)return;const n=new Ce.messages.FaveSticker({id:s,unfave:Boolean(t)});await iu(n)&&La({"@type":"updateFavoriteStickers"})}function Xg({sticker:e}){const t=un(e);if(t)return iu(new Ce.messages.SaveRecentSticker({id:t,unsave:!0}))}function Yg(){return iu(new Ce.messages.ClearRecentStickers)}async function Zg({stickerSetInfo:e}){if("isMissing"in e)return;const t="id"in e?dn(e.id,e.accessHash):(s=e.shortName,new Ce.InputStickerSetShortName({shortName:s}));var s;const n=await iu(new Ce.messages.GetStickerSet({stickerset:t,hash:0}),{shouldThrow:!0});return n instanceof Ce.messages.StickerSet?(Qs.stickerSets[String(n.set.id)]=n.set,{set:ki(n.set),stickers:Di(n.documents),packs:Bi(n.packs)}):void 0}async function ep({documentId:e}){if(!e.length)return;const t=await iu(new Ce.messages.GetCustomEmojiDocuments({documentId:e.map(e=>BigInt(e))}));return t?Di(t):void 0}async function tp(){const e=await iu(new Ce.messages.GetStickerSet({stickerset:new Ce.InputStickerSetAnimatedEmoji,hash:0}));if(e instanceof Ce.messages.StickerSet)return{set:ki(e.set),stickers:Di(e.documents)}}async function sp(){const e=await iu(new Ce.messages.GetStickerSet({stickerset:new Ce.InputStickerSetAnimatedEmojiAnimations,hash:0}));if(e instanceof Ce.messages.StickerSet)return{set:ki(e.set),stickers:Di(e.documents)}}async function np(){const e=await iu(new Ce.messages.GetStickerSet({stickerset:new Ce.InputStickerSetEmojiGenericAnimations,hash:0}));if(e instanceof Ce.messages.StickerSet)return{set:ki(e.set),stickers:Di(e.documents)}}async function ap(){const e=await iu(new Ce.messages.GetStickerSet({stickerset:new Ce.InputStickerSetPremiumGifts,hash:0}));if(e instanceof Ce.messages.StickerSet)return{set:ki(e.set),stickers:Di(e.documents)}}async function ip({emoji:e}){const t=await iu(new Ce.messages.GetStickerSet({stickerset:new Ce.InputStickerSetDice({emoticon:e}),hash:0}));if(t instanceof Ce.messages.StickerSet)return Qs.stickerSets[String(t.set.id)]=t.set,{set:ki(t.set),stickers:Di(t.documents),packs:Bi(t.packs)}}async function op(){const e=await iu(new Ce.messages.GetStickerSet({stickerset:new Ce.InputStickerSetTonGifts,hash:0}));if(e instanceof Ce.messages.StickerSet)return{set:ki(e.set),stickers:Di(e.documents)}}async function rp(){const e=await iu(new Ce.messages.GetStickerSet({stickerset:new Ce.InputStickerSetEmojiDefaultTopicIcons,hash:0}));if(e instanceof Ce.messages.StickerSet)return{set:ki(e.set),stickers:Di(e.documents)}}async function cp(){const e=await iu(new Ce.messages.GetStickerSet({stickerset:new Ce.InputStickerSetEmojiDefaultStatuses,hash:0}));if(e instanceof Ce.messages.StickerSet)return{set:ki(e.set),stickers:Di(e.documents)}}async function dp({hash:e}){const t=await iu(new Ce.account.GetCollectibleEmojiStatuses({hash:e?BigInt(e):0n}));if(t instanceof Ce.account.EmojiStatuses)return{statuses:t.statuses.map(Aa).filter(Boolean),hash:String(t.hash)}}async function up({query:e,hash:t}){const s=await iu(new Ce.messages.SearchStickerSets({q:e,hash:t?BigInt(t):0n}));if(s&&!(s instanceof Ce.messages.FoundStickerSetsNotModified))return{hash:String(s.hash),sets:s.sets.map(Ti)}}async function lp({hash:e}){const t=await iu(new Ce.messages.GetSavedGifs({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.SavedGifsNotModified))return{hash:String(t.hash),gifs:Sp(t.gifs)}}function fp({gif:e,shouldUnsave:t}){const s=un(e);if(s)return iu(new Ce.messages.SaveGif({id:s,unsave:Boolean(t)}),{shouldReturnTrue:!0})}async function gp({stickerSetId:e,accessHash:t}){await iu(new Ce.messages.InstallStickerSet({stickerset:dn(e,t),archived:!1}))&&La({"@type":"updateStickerSet",id:e,stickerSet:{installedDate:Date.now()}})}async function pp({stickerSetId:e,accessHash:t}){await iu(new Ce.messages.UninstallStickerSet({stickerset:dn(e,t)}))&&La({"@type":"updateStickerSet",id:e,stickerSet:{installedDate:void 0}})}let hp;async function mp({query:e,offset:t="",username:s="gif"}){if(!hp){const e=await iu(new Ce.contacts.ResolveUsername({username:s}));if(!(e&&e.users[0]instanceof Ce.User))return;hp=new Ce.InputUser({userId:e.peer.userId,accessHash:e.users[0].accessHash})}const n=await iu(new Ce.messages.GetInlineBotResults({bot:hp,peer:new Ce.InputPeerEmpty,query:e,offset:t}));if(!n)return;const a=n.results.map(e=>{if(e instanceof Ce.BotInlineMediaResult)return e.document}).filter(Boolean);return{nextOffset:n.nextOffset,gifs:Sp(a)}}async function yp({emoji:e,hash:t}){const s=await iu(new Ce.messages.GetStickers({emoticon:e,hash:t?BigInt(t):0n}));if(s&&!(s instanceof Ce.messages.StickersNotModified))return{stickers:Di(s.stickers),hash:String(s.hash)}}async function _p({language:e,fromVersion:t=0}){const s=await iu(new Ce.messages.GetEmojiKeywordsDifference({langCode:e,fromVersion:t}));if(s)return{language:s.langCode,version:s.version,keywords:s.keywords.reduce((e,t)=>(e[t.keyword]=t.emoticons,e),{})}}async function bp(e){const t=await iu(new Ce.account.GetRecentEmojiStatuses({hash:e?BigInt(e):0n}));if(!t||t instanceof Ce.account.EmojiStatusesNotModified)return;const s=t.statuses.slice(0,20).map(Aa).filter(Boolean).map(({documentId:e})=>e),n=await ep({documentId:s});return{hash:String(t.hash),emojiStatuses:n}}function Sp(e){return e.map(e=>{if(e instanceof Ce.Document){const t=Ar(e);if(t)return Qs.documents[String(e.id)]=e,t}}).filter(Boolean)}async function wp({username:e}){try{return{result:await iu(new Ce.channels.CheckUsername({channel:new Ce.InputChannelEmpty,username:e}),{shouldThrow:!0}),error:void 0}}catch(e){const t=e.message;if(S.has(t))return{result:!1,error:t};throw e}}async function Ip({chat:e,username:t}){const s=await iu(new Ce.channels.UpdateUsername({channel:an(e.id,e.accessHash),username:t}));let n=t?[{username:t,isEditable:!0,isActive:!0}]:[];return e.usernames&&(n=n.concat(e.usernames.filter(e=>e.username&&!e.isEditable))),s&&La({"@type":"updateChat",id:e.id,chat:{usernames:n.length?n:void 0}}),s}async function vp({chat:e}){const t=await iu(new Ce.channels.DeactivateAllUsernames({channel:an(e.id,e.accessHash)}));if(t){const t=e.usernames?e.usernames.map(e=>({...e,isActive:!1})).filter(e=>e.username):void 0;La({"@type":"updateChat",id:e.id,chat:{usernames:t}})}return t}async function Pp({chat:e,usageLimit:t,expireDate:s}){const n=await iu(new Ce.messages.ExportChatInvite({peer:sn(e.id,e.accessHash),usageLimit:t,expireDate:s}));if(n instanceof Ce.ChatInviteExported)return La({"@type":"updateChatFullInfo",id:e.id,fullInfo:{inviteLink:n.link}}),n.link}async function Cp({peer:e,admin:t,limit:s=0,isRevoked:n}){const a=await iu(new Ce.messages.GetExportedChatInvites({peer:sn(e.id,e.accessHash),adminId:nn(t.id,t.accessHash),limit:s,revoked:n||void 0}),{abortControllerChatId:e.id});if(a)return{invites:a.invites.filter(e=>e instanceof Ce.ChatInviteExported).map(Do)}}async function Mp({peer:e,isRevoked:t,link:s,expireDate:n,usageLimit:a,isRequestNeeded:i,title:o}){const r=await iu(new Ce.messages.EditExportedChatInvite({link:s,peer:sn(e.id,e.accessHash),expireDate:n,usageLimit:i?void 0:a,requestNeeded:i,title:o,revoked:t||void 0}));if(r){if(r instanceof Ce.messages.ExportedChatInvite&&r.invite instanceof Ce.ChatInviteExported){const e=Do(r.invite);return{oldInvite:e,newInvite:e}}if(r instanceof Ce.messages.ExportedChatInviteReplaced&&r.invite instanceof Ce.ChatInviteExported&&r.newInvite instanceof Ce.ChatInviteExported)return{oldInvite:Do(r.invite),newInvite:Do(r.newInvite)}}}async function Ap({peer:e,expireDate:t,usageLimit:s,isRequestNeeded:n,title:a}){const i=await iu(new Ce.messages.ExportChatInvite({peer:sn(e.id,e.accessHash),expireDate:t,usageLimit:n?void 0:s,requestNeeded:n||void 0,title:a}));if(i instanceof Ce.ChatInviteExported)return Do(i)}async function Rp({peer:e,link:t}){return await iu(new Ce.messages.DeleteExportedChatInvite({peer:sn(e.id,e.accessHash),link:t}))}async function kp({peer:e,admin:t}){return await iu(new Ce.messages.DeleteRevokedExportedChatInvites({peer:sn(e.id,e.accessHash),adminId:nn(t.id,t.accessHash)}))}async function Tp({peer:e,link:t,offsetDate:s=0,offsetUser:n,limit:a=0,isRequested:i}){const o=await iu(new Ce.messages.GetChatInviteImporters({peer:sn(e.id,e.accessHash),link:t,offsetDate:s,offsetUser:n?nn(n.id,n.accessHash):new Ce.InputUserEmpty,limit:a,requested:i||void 0}),{abortControllerChatId:e.id});if(o)return{importers:o.importers.map(e=>function(e){const{userId:t,date:s,about:n,requested:a,viaChatlist:i}=e;return{userId:Ia(t,"user"),date:s,about:n,isRequested:a,isFromChatList:i}}(e))}}function Bp({peer:e,user:t,isApproved:s}){return iu(new Ce.messages.HideChatJoinRequest({peer:sn(e.id,e.accessHash),userId:nn(t.id,t.accessHash),approved:s||void 0}),{shouldReturnTrue:!0})}function Dp({peer:e,isApproved:t,link:s}){return iu(new Ce.messages.HideAllChatJoinRequests({peer:sn(e.id,e.accessHash),approved:t||void 0,link:s}),{shouldReturnTrue:!0})}function Up(e){const{id:t,accessHash:s}=e;return iu(new Ce.messages.HidePeerSettingsBar({peer:sn(t,s)}))}const Ep=["ar","fa","id","ko","uz","en"];function xp({firstName:e,lastName:t,about:s}){return iu(new Ce.account.UpdateProfile({firstName:e,lastName:t,about:s}),{shouldReturnTrue:!0})}async function Vp(e){try{return{result:await iu(new Ce.account.CheckUsername({username:e}),{shouldThrow:!0}),error:void 0}}catch(e){if(e instanceof Me&&S.has(e.errorMessage))return{result:!1,error:e.errorMessage};throw e}}function Gp(e){return iu(new Ce.account.UpdateUsername({username:e}),{shouldReturnTrue:!0})}function Fp(e){return iu(new Ce.account.UpdateBirthday({birthday:e?new Ce.Birthday({day:e.day,month:e.month,year:e.year}):void 0}),{shouldReturnTrue:!0})}async function Np(e,t){const s=e&&yn(e),n=await iu(new Ce.photos.UpdateProfilePhoto({id:s||new Ce.InputPhotoEmpty,...t?{fallback:!0}:void 0}));if(n)return n.photo instanceof Ce.Photo?(ei(n.photo),{photo:li(n.photo)}):void 0}async function qp(e,t,s=!1,n=0,a){const i=await cu(e),o=await iu(new Ce.photos.UploadProfilePhoto({...a?{bot:nn(a.id,a.accessHash)}:void 0,...s?{video:i,videoStartTs:n}:{file:i},...t?{fallback:!0}:void 0}));if(o)return o.photo instanceof Ce.Photo?(ei(o.photo),{photo:li(o.photo)}):void 0}async function Hp({file:e,isSuggest:t,user:s}){const n=e?await cu(e):void 0,a=await iu(new Ce.photos.UploadContactProfilePhoto({userId:nn(s.id,s.accessHash),file:n,...t?{suggest:!0}:{save:!0}}));if(a)return a.photo instanceof Ce.Photo?(ei(a.photo),{photo:li(a.photo)}):{photo:void 0}}async function Lp(e){const t=e.map(yn).filter(Boolean),s=await iu(new Ce.photos.DeletePhotos({id:t}),{shouldReturnTrue:!0});return s&&e.forEach(e=>{delete Qs.photos[e.id]}),s}async function Op(){const e=await iu(new Ce.account.GetWallPapers({hash:BigInt("0")}));if(!e||e instanceof Ce.account.WallPapersNotModified)return;const t=e.wallpapers.filter(e=>e instanceof Ce.WallPaper&&e.document instanceof Ce.Document&&!e.pattern&&"application/x-tgwallpattern"!==e.document.mimeType);return t.forEach(e=>{Qs.documents[String(e.document.id)]=e.document}),{wallpapers:t.map(so).filter(Boolean)}}async function jp(e){const t=await cu(e),s=await iu(new Ce.account.UploadWallPaper({file:t,mimeType:e.type,settings:new Ce.WallPaperSettings}));if(!(s&&s instanceof Ce.WallPaper))return;const n=so(s);return n?(Qs.documents[String(s.document.id)]=s.document,{wallpaper:n}):void 0}async function Wp({isOnlyStories:e}){const t=await iu(new Ce.contacts.GetBlocked({myStoriesFrom:e,offset:0,limit:100}));if(t)return{blockedIds:t.blocked.map(e=>va(e.peerId)),totalCount:t instanceof Ce.contacts.BlockedSlice?t.count:t.blocked.length}}function zp({user:e,isOnlyStories:t}){return iu(new Ce.contacts.Block({id:sn(e.id,e.accessHash),myStoriesFrom:t}))}function Kp({user:e,isOnlyStories:t}){return iu(new Ce.contacts.Unblock({id:sn(e.id,e.accessHash),myStoriesFrom:t}))}async function $p(){const e=await iu(new Ce.account.GetAuthorizations);if(e)return{authorizations:As(e.authorizations.map(no),"hash"),ttlDays:e.authorizationTtlDays}}function Jp(e){return iu(new Ce.account.ResetAuthorization({hash:BigInt(e)}))}function Qp(){return iu(new Ce.auth.ResetAuthorizations)}async function Xp(){const e=await iu(new Ce.account.GetWebAuthorizations);if(e)return{webAuthorizations:As(e.authorizations.map(ao),"hash")}}function Yp(e){return iu(new Ce.account.ResetWebAuthorization({hash:BigInt(e)}))}function Zp(){return iu(new Ce.account.ResetWebAuthorizations)}async function eh(){const e=await iu(new Ce.account.GetNotifyExceptions({compareSound:!0}),{shouldIgnoreUpdates:!0});if(e instanceof Ce.Updates||e instanceof Ce.UpdatesCombined)return e.updates.reduce((e,t)=>t instanceof Ce.UpdateNotifySettings&&t.peer instanceof Ce.NotifyPeer?(e[va(t.peer.peer)]=Ta(t.notifySettings),e):e,{})}async function th(){return await iu(new Ce.account.GetContactSignUpNotification)}async function sh(){const[e,t,s]=await Promise.all([iu(new Ce.account.GetNotifySettings({peer:new Ce.InputNotifyUsers})),iu(new Ce.account.GetNotifySettings({peer:new Ce.InputNotifyChats})),iu(new Ce.account.GetNotifySettings({peer:new Ce.InputNotifyBroadcasts}))]);if(e&&t&&s)return{users:Ta(e),groups:Ta(t),channels:Ta(s)}}function nh(e){return iu(new Ce.account.SetContactSignUpNotification({silent:e}))}function ah(e,{isMuted:t,shouldShowPreviews:s}){let n;n="users"===e?new Ce.InputNotifyUsers:"groups"===e?new Ce.InputNotifyChats:new Ce.InputNotifyBroadcasts;const a={showPreviews:s,muteUntil:t?d:0};return iu(new Ce.account.UpdateNotifySettings({peer:n,settings:new Ce.InputPeerNotifySettings(a)}))}async function ih({langPack:e,langCode:t}){const s=await iu(new Ce.langpack.GetLangPack({langPack:e,langCode:t}));if(!s)return;const{strings:n,keysToRemove:a}=lo(s.strings);return{version:s.version,strings:n,keysToRemove:a}}async function oh({langPack:e,langCode:t,fromVersion:s}){const n=await iu(new Ce.langpack.GetDifference({langPack:e,langCode:t,fromVersion:s}));if(!n)return;const{strings:a,keysToRemove:i}=lo(n.strings);return{version:n.version,strings:a,keysToRemove:i}}async function rh(){const e=await iu(new Ce.langpack.GetLanguages({langPack:I}));if(e)return e.map(fo)}async function ch({langPack:e,langCode:t}){const s=await iu(new Ce.langpack.GetLanguage({langPack:e,langCode:t}));if(s)return fo(s)}async function dh({langPack:e,langCode:t,keys:s}){const n=await iu(new Ce.langpack.GetStrings({langPack:e,langCode:t,keys:s}));if(n)return lo(n)}async function uh({sourceLangPacks:e,langCode:t}){const s=(await Promise.all(e.map(e=>iu(new Ce.langpack.GetLangPack({langPack:e,langCode:Ep.includes(t)?`${t}-raw`:t}))))).filter(Boolean).map(uo);if(s.length)return{langPack:Object.assign({},...s.reverse())}}async function lh(e){const t=In(e);if(!t)return;const s=await iu(new Ce.account.GetPrivacy({key:t}));return s?{rules:mi(s.rules)}:void 0}function fh(e){const t=Yd.session.getAuthKey().getKey();return iu(new Ce.account.RegisterDevice({tokenType:10,secret:t,appSandbox:!1,otherUids:[],token:e}))}function gh(e){return iu(new Ce.account.UnregisterDevice({tokenType:10,otherUids:[],token:e}))}async function ph(e,t){const s=In(e),n=Fn(t);if(!s)return;const a=await iu(new Ce.account.SetPrivacy({key:s,rules:n}));return a?{rules:mi(a.rules)}:void 0}async function hh(e){await iu(new Ce.account.UpdateStatus({offline:!e}))}async function mh(){const e=await iu(new Ce.account.GetContentSettings);if(e)return{isSensitiveEnabled:Boolean(e.sensitiveEnabled),canChangeSensitive:Boolean(e.sensitiveCanChange)}}function yh(e){return iu(new Ce.account.SetContentSettings({sensitiveEnabled:e||void 0}))}async function _h(e){const t=await iu(new Ce.help.GetPeerColors({hash:e??0}));if(!t)return;const s=function(e){if(e instanceof Ce.help.PeerColors)return Rs(e.colors,e=>[e.colorId,{isHidden:e.hidden,colors:e.colors instanceof Ce.help.PeerColorSet?Ca(e.colors):void 0,darkColors:e.darkColors instanceof Ce.help.PeerColorSet?Ca(e.darkColors):void 0}])}(t);return s?{colors:s,hash:t instanceof Ce.help.PeerColors?t.hash:void 0}:void 0}async function bh(e){const t=await iu(new Ce.help.GetPeerProfileColors({hash:e??0}));if(!t)return;const s=function(e){if(e instanceof Ce.help.PeerColors)return Rs(e.colors,e=>[e.colorId,{isHidden:e.hidden,colors:e.colors instanceof Ce.help.PeerColorProfileSet?Ma(e.colors):void 0,darkColors:e.darkColors instanceof Ce.help.PeerColorProfileSet?Ma(e.darkColors):void 0}])}(t);return s?{colors:s,hash:t instanceof Ce.help.PeerColors?t.hash:void 0}:void 0}async function Sh(e){const t=await iu(new Ce.help.GetTimezonesList({hash:e??0}));if(t&&!(t instanceof Ce.help.TimezonesListNotModified))return{timezones:t.timezones.map(go),hash:t.hash}}async function wh({langCode:e="en"}){const t=await iu(new Ce.help.GetCountriesList({langCode:e,hash:0}));if(t instanceof Ce.help.CountriesList)return function(e){const t=e.filter(({hidden:e})=>!e);return{phoneCodes:t.map(e=>e.countryCodes.map(t=>io(e,t))).flat().sort((e,t)=>e.name?e.name.localeCompare(t.name):e.defaultName.localeCompare(t.defaultName)),general:t.map(e=>io(e,e.countryCodes[0])).sort((e,t)=>e.name?e.name.localeCompare(t.name):e.defaultName.localeCompare(t.defaultName))}}(t.countries)}async function Ih(){const e=await iu(new Ce.account.GetGlobalPrivacySettings);if(e)return{shouldArchiveAndMuteNewNonContact:Boolean(e.archiveAndMuteNewNoncontactPeers),shouldHideReadMarks:Boolean(e.hideReadMarks),shouldNewNonContactPeersRequirePremium:Boolean(e.newNoncontactPeersRequirePremium),nonContactPeersPaidStars:rs(e.noncontactPeersPaidStars),shouldDisplayGiftsButton:Boolean(e.displayGiftsButton),disallowedGifts:e.disallowedGifts&&hr(e.disallowedGifts)}}async function vh({shouldArchiveAndMuteNewNonContact:e,shouldHideReadMarks:t,shouldNewNonContactPeersRequirePremium:s,nonContactPeersPaidStars:n,shouldDisplayGiftsButton:a,disallowedGifts:i}){const o=await iu(new Ce.account.SetGlobalPrivacySettings({settings:new Ce.GlobalPrivacySettings({...e&&{archiveAndMuteNewNoncontactPeers:!0},...t&&{hideReadMarks:!0},...s&&{newNoncontactPeersRequirePremium:!0},displayGiftsButton:a||void 0,noncontactPeersPaidStars:BigInt(n||0),disallowedGifts:i&&kn(i)})}));if(o)return{shouldArchiveAndMuteNewNonContact:Boolean(o.archiveAndMuteNewNoncontactPeers),shouldHideReadMarks:Boolean(o.hideReadMarks),shouldNewNonContactPeersRequirePremium:Boolean(o.newNoncontactPeersRequirePremium),nonContactPeersPaidStars:rs(o.noncontactPeersPaidStars),shouldDisplayGiftsButton:a,disallowedGifts:i}}function Ph({chatId:e,accessHash:t,username:s,isActive:n}){return iu(e?new Ce.channels.ToggleUsername({channel:an(e,t),username:s,active:n}):new Ce.account.ToggleUsername({username:s,active:n}))}function Ch({chatId:e,accessHash:t,usernames:s}){return iu(e?new Ce.channels.ReorderUsernames({channel:an(e,t),order:s}):new Ce.account.ReorderUsernames({order:s}))}async function Mh(){const e=await iu(new Ce.account.GetPasskeys);if(e)return{passkeys:e.passkeys.map(ho)}}async function Ah(){const e=await iu(new Ce.account.InitPasskeyRegistration);if(e)try{return JSON.parse(e.options.data)}catch(e){}}async function Rh(e){const t=await iu(new Ce.account.RegisterPasskey({credential:Hn(e)}));if(t)return ho(t)}function kh({id:e}){return iu(new Ce.account.DeletePasskey({id:e}),{shouldReturnTrue:!0})}async function Th({chatId:e,accessHash:t,messageId:s,data:n,isGame:a}){const i=await iu(new Ce.messages.GetBotCallbackAnswer({peer:sn(e,t),msgId:s,data:n?Ga(n):void 0,game:a||void 0}));return i?Ls(i):void 0}async function Bh(){const e=await iu(new Ce.contacts.GetTopPeers({botsInline:!0,limit:0,offset:0,hash:0n}));if(e instanceof Ce.contacts.TopPeers)return{ids:e.users.map(Xi).filter(Boolean).map(({id:e})=>e)}}async function Dh(){const e=await iu(new Ce.contacts.GetTopPeers({botsApp:!0,limit:0,offset:0,hash:0n}));if(e instanceof Ce.contacts.TopPeers)return{ids:e.users.map(Xi).filter(Boolean).map(({id:e})=>e)}}async function Uh({username:e}){const t=await iu(new Ce.contacts.ResolveUsername({username:e}));if(t&&t.users[0]instanceof Ce.User&&t.users[0].bot&&t.users[0].botInlinePlaceholder)return ii(t.users[0]),{user:Xi(t.users[0]),chat:wo(t.users[0])}}async function Eh({bot:e,chat:t,query:s,offset:n=""}){const a=await iu(new Ce.messages.GetInlineBotResults({bot:nn(e.id,e.accessHash),peer:sn(t.id,t.accessHash),query:s,offset:n}));var i,o,r,c,d,u;if(a)return{isGallery:Boolean(a.gallery),help:e.botPlaceholder,nextOffset:(d=e.usernames[0].username,u=a.nextOffset,"gif"===d&&"0"===u?"":u),switchPm:(c=a.switchPm,c?ks(c,["text","startParam"]):void 0),switchWebview:(r=a.switchWebview,r?ks(r,["text","url"]):void 0),results:(i=String(a.queryId),o=a.results,o.map(e=>e instanceof Ce.BotInlineMediaResult?(e.document instanceof Ce.Document&&ti(e.document),e.photo instanceof Ce.Photo&&ei(e.photo),Gi(e,i)):(e.thumb&&oi(e.thumb),Vi(e,i)))),cacheTime:a.cacheTime}}async function xh({chat:e,replyInfo:t,resultId:s,queryId:n,sendAs:a,isSilent:i,scheduleDate:o,allowPaidStars:r}){const c=W();await iu(new Ce.messages.SendInlineBotResult({clearDraft:!0,randomId:c,queryId:BigInt(n),peer:sn(e.id,e.accessHash),id:s,scheduleDate:o,replyTo:t&&xn(t),...i&&{silent:!0},...a&&{sendAs:sn(a.id,a.accessHash)},...r&&{allowPaidStars:BigInt(r)}}))}async function Vh({bot:e,startParam:t}){const s=W();await iu(new Ce.messages.StartBot({bot:nn(e.id,e.accessHash),peer:sn(e.id,e.accessHash),randomId:s,startParam:t??Zs}))}async function Gh({isSilent:e,peer:t,bot:s,url:n,startParam:a,replyInfo:i,theme:o,sendAs:r,isFromBotMenu:c,isFullscreen:d}){const u=await iu(new Ce.messages.RequestWebView({silent:e||void 0,peer:sn(t.id,t.accessHash),bot:nn(s.id,s.accessHash),url:n,startParam:a,themeParams:o?Pn(o):void 0,fromBotMenu:c||void 0,platform:w,replyTo:i&&xn(i),fullscreen:!!d||void 0,...r&&{sendAs:sn(r.id,r.accessHash)}}));if(u instanceof Ce.WebViewResultUrl)return{url:u.url,queryId:u.queryId?.toString(),isFullScreen:Boolean(u.fullscreen)}}async function Fh({peer:e,bot:t,startParam:s,mode:n,theme:a}){const i=await iu(new Ce.messages.RequestMainWebView({peer:sn(e.id,e.accessHash),bot:nn(t.id,t.accessHash),startParam:s,fullscreen:"fullscreen"===n||void 0,themeParams:a?Pn(a):void 0,platform:w}));if(i instanceof Ce.WebViewResultUrl)return{url:i.url,queryId:i.queryId?.toString(),isFullscreen:Boolean(i.fullscreen)}}async function Nh({bot:e,url:t,theme:s,startParam:n,isFromSwitchWebView:a,isFromSideMenu:i}){const o=await iu(new Ce.messages.RequestSimpleWebView({url:t,bot:nn(e.id,e.accessHash),themeParams:s?Pn(s):void 0,platform:w,startParam:n,fromSwitchWebview:a||void 0,fromSideMenu:i||void 0}));return o?.url}async function qh({bot:e,appName:t}){const s=await iu(new Ce.messages.GetBotApp({app:new Ce.InputBotAppShortName({botId:nn(e.id,e.accessHash),shortName:t}),hash:0n}));if(s&&!(s instanceof Ce.BotAppNotModified))return function(e){const{app:t,inactive:s,requestWriteAccess:n}=e,a=ji(t);if(a)return{...a,isInactive:s,shouldRequestWriteAccess:n}}(s)}async function Hh({peer:e,app:t,startParam:s,mode:n,theme:a,isWriteAllowed:i}){const o=await iu(new Ce.messages.RequestAppWebView({peer:sn(e.id,e.accessHash),app:En(t),startParam:s,themeParams:a?Pn(a):void 0,platform:w,writeAllowed:i||void 0,fullscreen:"fullscreen"===n||void 0}));return{url:o?.url,isFullscreen:Boolean(o?.fullscreen)}}function Lh({isSilent:e,peer:t,bot:s,queryId:n,replyInfo:a,sendAs:i}){return iu(new Ce.messages.ProlongWebView({silent:e||void 0,peer:sn(t.id,t.accessHash),bot:nn(s.id,s.accessHash),queryId:BigInt(n),replyTo:a&&xn(a),...i&&{sendAs:sn(i.id,i.accessHash)}}))}async function Oh({bot:e,buttonText:t,data:s}){const n=W();await iu(new Ce.messages.SendWebViewData({bot:nn(e.id,e.accessHash),buttonText:t,data:s,randomId:n}))}async function jh({hash:e}){const t=await iu(new Ce.messages.GetAttachMenuBots({hash:e?BigInt(e):0n}));if(t instanceof Ce.AttachMenuBots)return{hash:t.hash.toString(),bots:As(t.bots.map(Fi),"id")}}async function Wh({bot:e}){const t=await iu(new Ce.messages.GetAttachMenuBot({bot:nn(e.id,e.accessHash)}));if(t instanceof Ce.AttachMenuBotsBot)return{bot:Fi(t.bot)}}function zh({bot:e,isWriteAllowed:t,isEnabled:s}){return iu(new Ce.messages.ToggleBotInAttachMenu({bot:nn(e.id,e.accessHash),writeAllowed:t||void 0,enabled:s}))}async function Kh({chat:e,buttonId:t,messageId:s}){const n=await iu(new Ce.messages.RequestUrlAuth({peer:sn(e.id,e.accessHash),buttonId:t,msgId:s}));if(!n)return;const a=ro(n);return"request"===a?.type&&La({"@type":"updateUser",id:a.bot.id,user:a.bot}),a}async function $h({chat:e,messageId:t,buttonId:s,isWriteAllowed:n}){const a=await iu(new Ce.messages.AcceptUrlAuth({peer:sn(e.id,e.accessHash),msgId:t,buttonId:s,writeAllowed:n||void 0}));if(!a)return;const i=ro(a);return"request"===i?.type&&La({"@type":"updateUser",id:i.bot.id,user:i.bot}),i}async function Jh({url:e}){const t=await iu(new Ce.messages.RequestUrlAuth({url:e}));if(!t)return;const s=ro(t);return"request"===s?.type&&La({"@type":"updateUser",id:s.bot.id,user:s.bot}),s}async function Qh({url:e,isWriteAllowed:t}){const s=await iu(new Ce.messages.AcceptUrlAuth({url:e,writeAllowed:t||void 0}));if(!s)return;const n=ro(s);return"request"===n?.type&&La({"@type":"updateUser",id:n.bot.id,user:n.bot}),n}function Xh({bot:e}){return iu(new Ce.bots.CanSendMessage({bot:nn(e.id,e.accessHash)}))}function Yh({bot:e}){return iu(new Ce.bots.AllowSendMessage({bot:nn(e.id,e.accessHash)}),{shouldReturnTrue:!0})}async function Zh({bot:e,customMethod:t,parameters:s}){try{const n=await iu(new Ce.bots.InvokeWebViewCustomMethod({bot:nn(e.id,e.accessHash),params:new Ce.DataJSON({data:s}),customMethod:t}),{shouldThrow:!0});return{result:JSON.parse(n.data)}}catch(e){return{error:e.message}}}async function em({bot:e}){const t=await iu(new Ce.bots.GetPreviewMedias({bot:nn(e.id,e.accessHash)}));if(t)return t.map(e=>({content:Mr(e.media),date:e.date}))}function tm({bot:e,fileName:t,url:s}){return iu(new Ce.bots.CheckDownloadFileParams({bot:nn(e.id,e.accessHash),fileName:t,url:s}),{shouldReturnTrue:!0})}function sm({bot:e,isEnabled:t}){return iu(new Ce.bots.ToggleUserEmojiStatusPermission({bot:nn(e.id,e.accessHash),enabled:t}),{shouldReturnTrue:!0})}function nm({bot:e,langCode:t,name:s,about:n,description:a}){return iu(new Ce.bots.SetBotInfo({bot:nn(e.id,e.accessHash),langCode:t,name:s,about:n,description:a}),{shouldReturnTrue:!0})}async function am({offset:e="",limit:t}){const s=await iu(new Ce.bots.GetPopularAppBots({offset:e,limit:t??0}));if(s)return{peerIds:s.users.map(Xi).filter(Boolean).map(({id:e})=>e),nextOffset:s.nextOffset}}async function im({user:e}){if(!e)return;const t=nn(e.id,e.accessHash),s=await iu(new Ce.bots.GetBotRecommendations({bot:t}));if(!s)return;const n=s?.users.map(Xi).filter(Boolean);return{similarBots:n,count:s instanceof Ce.users.UsersSlice?s.count:n.length}}var om=s(48287).hp;async function rm({call:e}){const t=await iu(new Ce.phone.GetGroupCall({call:Mn(e),limit:0}));if(t)return{groupCall:Rc(t.call)}}function cm({call:e}){return iu(new Ce.phone.DiscardGroupCall({call:Mn(e)}),{shouldReturnTrue:!0})}function dm({call:e,participant:t,muted:s,presentationPaused:n,videoStopped:a,videoPaused:i,volume:o,raiseHand:r}){return iu(new Ce.phone.EditGroupCallParticipant({call:Mn(e),participant:sn(t.id,t.accessHash),...void 0!==a&&{videoStopped:a},...void 0!==i&&{videoPaused:i},...void 0!==s&&{muted:s},...void 0!==n&&{presentationPaused:n},...void 0!==r&&{raiseHand:r},...void 0!==o&&{volume:o}}),{shouldReturnTrue:!0})}function um({groupCall:e,title:t}){return iu(new Ce.phone.EditGroupCallTitle({title:t,call:Mn(e)}),{shouldReturnTrue:!0})}async function lm({call:e,canSelfUnmute:t}){const s=await iu(new Ce.phone.ExportGroupCallInvite({canSelfUnmute:t||void 0,call:Mn(e)}));if(s)return s.link}async function fm({call:e,offset:t=""}){const s=await iu(new Ce.phone.GetGroupParticipants({call:Mn(e),ids:[],sources:[],offset:t,limit:100}));s&&La({"@type":"updateGroupCallParticipants",groupCallId:e.id,participants:s.participants.map(Cc),nextOffset:s.nextOffset})}function gm({call:e,isPageUnload:t}){const s=new Ce.phone.LeaveGroupCall({call:Mn(e),source:0});t?ou(s):iu(s,{shouldReturnTrue:!0})}async function pm({call:e,inviteHash:t,params:s}){const n=await iu(new Ce.phone.JoinGroupCall({call:Mn(e),joinAs:new Ce.InputPeerSelf,muted:!0,videoStopped:!0,params:new Ce.DataJSON({data:JSON.stringify(s)}),inviteHash:t}),{shouldRetryOnTimeout:!0,abortControllerGroup:"call"});if(n&&n instanceof Ce.Updates){const e=n.updates.find(e=>e instanceof Ce.UpdateGroupCall);if(!(e instanceof Ce.UpdateGroupCall))return;return Rc(e.call)}}async function hm({peer:e}){const t=z(),s=await iu(new Ce.phone.CreateGroupCall({peer:sn(e.id,e.accessHash),randomId:t}));if(s&&s instanceof Ce.Updates){const e=s.updates[0];if(e instanceof Ce.UpdateGroupCall)return Rc(e.call)}}function mm({call:e,params:t}){return iu(new Ce.phone.JoinGroupCallPresentation({call:Mn(e),params:new Ce.DataJSON({data:JSON.stringify(t)})}),{shouldReturnTrue:!0})}function ym({call:e,subscribed:t}){return iu(new Ce.phone.ToggleGroupCallStartSubscription({call:Mn(e),subscribed:t}),{shouldReturnTrue:!0,shouldIgnoreErrors:!0})}function _m({call:e}){return iu(new Ce.phone.LeaveGroupCallPresentation({call:Mn(e)}),{shouldReturnTrue:!0})}async function bm(){const e=await iu(new Ce.messages.GetDhConfig({version:0,randomLength:0}));if(e&&!(e instanceof Ce.messages.DhConfigNotModified))return{g:e.g,p:Array.from(e.p),random:Array.from(e.random)}}function Sm({call:e,isBusy:t,isPageUnload:s}){const n=new Ce.phone.DiscardCall({peer:An(e),reason:t?new Ce.PhoneCallDiscardReasonBusy:new Ce.PhoneCallDiscardReasonHangup,duration:0,connectionId:0n});s?ou(n):iu(n,{shouldReturnTrue:!0})}async function wm({user:e,gAHash:t,isVideo:s}){const n=await iu(new Ce.phone.RequestCall({randomId:z(),userId:nn(e.id,e.accessHash),gAHash:om.from(t),...s&&{video:!0},protocol:Dc()}));if(n)return La({"@type":"updatePhoneCall",call:kc(n.phoneCall)}),!0}function Im({call:e,rating:t,comment:s}){return iu(new Ce.phone.SetCallRating({rating:t,peer:An(e),comment:s}),{shouldReturnTrue:!0})}function vm({call:e}){return iu(new Ce.phone.ReceivedCall({peer:An(e)}))}async function Pm({call:e,gB:t}){const s=await iu(new Ce.phone.AcceptCall({peer:An(e),gB:om.from(t),protocol:Dc()}));if(s)return La({"@type":"updatePhoneCall",call:e=kc(s.phoneCall)}),!0}async function Cm({call:e,gA:t,keyFingerprint:s}){const n=await iu(new Ce.phone.ConfirmCall({peer:An(e),gA:om.from(t),keyFingerprint:BigInt(s),protocol:Dc()}));if(n)return La({"@type":"updatePhoneCall",call:e=kc(n.phoneCall)}),!0}function Mm({data:e,call:t}){return iu(new Ce.phone.SendSignalingData({data:om.from(e),peer:An(t)}))}function Am({chat:e,emoticon:t}){return iu(new Ce.messages.SetTyping({peer:sn(e.id,e.accessHash),action:new Ce.SendMessageEmojiInteractionSeen({emoticon:t})}),{abortControllerChatId:e.id})}function Rm({chat:e,emoticon:t,messageId:s,timestamps:n}){return iu(new Ce.messages.SetTyping({peer:sn(e.id,e.accessHash),action:new Ce.SendMessageEmojiInteraction({emoticon:t,msgId:s,interaction:new Ce.DataJSON({data:JSON.stringify({v:1,a:n.map(e=>({t:e,i:1}))})})})}),{abortControllerChatId:e.id})}async function km(){const e=await iu(new Ce.messages.GetAvailableReactions({hash:0}));if(e&&!(e instanceof Ce.messages.AvailableReactionsNotModified))return e.reactions.forEach(e=>{e.staticIcon instanceof Ce.Document&&(Qs.documents[String(e.staticIcon.id)]=e.staticIcon),e.selectAnimation instanceof Ce.Document&&(Qs.documents[String(e.selectAnimation.id)]=e.selectAnimation),e.aroundAnimation instanceof Ce.Document&&(Qs.documents[String(e.aroundAnimation.id)]=e.aroundAnimation),e.appearAnimation instanceof Ce.Document&&(Qs.documents[String(e.appearAnimation.id)]=e.appearAnimation),e.centerIcon instanceof Ce.Document&&(Qs.documents[String(e.centerIcon.id)]=e.centerIcon)}),e.reactions.map(Mi)}async function Tm(){const e=await iu(new Ce.messages.GetAvailableEffects({hash:0}));if(!e||e instanceof Ce.messages.AvailableEffectsNotModified)return;const t=new Map(e.documents.map(e=>[String(e.id),e]));e.documents.forEach(e=>{e instanceof Ce.Document&&(Qs.documents[String(e.id)]=e)});const s=e.effects.map(Ai),n=[],a=[];for(const e of s)if(e.effectAnimationId){const s=t.get(e.effectStickerId),n=s&&Ri(s,!1,e.isPremium);n&&a.push(n)}else{const t=Ri(Qs.documents[e.effectStickerId]);t&&n.push(t)}return{effects:s,emojis:a,stickers:n}}function Bm({chat:e,messageId:t,reactions:s,shouldAddToRecent:n}){return iu(new Ce.messages.SendReaction({reaction:s?.map(e=>Bn(e)),peer:sn(e.id,e.accessHash),msgId:t,...n&&{addToRecent:!0}}),{shouldReturnTrue:!0,shouldThrow:!0})}function Dm({chat:e,messageId:t,count:s,isPrivate:n,peerId:a}){return iu(new Ce.messages.SendPaidReaction({peer:sn(e.id,e.accessHash),msgId:t,randomId:pn(),count:s,private:rn(n,a)}),{shouldReturnTrue:!0,shouldThrow:!0})}function Um({ids:e,chat:t}){Es(e,100).forEach(e=>{iu(new Ce.messages.GetMessagesReactions({id:e,peer:sn(t.id,t.accessHash)}),{shouldReturnTrue:!0,abortControllerChatId:t.id})})}async function Em({chat:e,messageId:t,reaction:s,offset:n}){const a=await iu(new Ce.messages.GetMessageReactionsList({peer:sn(e.id,e.accessHash),id:t,...s&&{reaction:Bn(s)},limit:100,...n&&{offset:n}}));if(!a)return;const{nextOffset:i,reactions:o,count:r}=a;return{nextOffset:i,reactions:o.map(vi).filter(Boolean),count:r}}function xm({reaction:e}){return iu(new Ce.messages.SetDefaultReaction({reaction:Bn(e)}))}async function Vm({hash:e}){const t=await iu(new Ce.messages.GetTopReactions({limit:100,hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.ReactionsNotModified))return{hash:String(t.hash),reactions:t.reactions.map(e=>Pi(e)).filter(Boolean)}}async function Gm({hash:e}){const t=await iu(new Ce.messages.GetRecentReactions({limit:50,hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.ReactionsNotModified))return{hash:String(t.hash),reactions:t.reactions.map(e=>Pi(e)).filter(Boolean)}}function Fm(){return iu(new Ce.messages.ClearRecentReactions)}async function Nm({hash:e}){const t=await iu(new Ce.messages.GetDefaultTagReactions({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.ReactionsNotModified))return{hash:String(t.hash),reactions:t.reactions.map(e=>Pi(e)).filter(Boolean)}}async function qm({hash:e}){const t=await iu(new Ce.messages.GetSavedReactionTags({hash:e?BigInt(e):0n}));if(t&&!(t instanceof Ce.messages.SavedReactionTagsNotModified))return{hash:String(t.hash),tags:t.tags.map(Ci).filter(Boolean)}}function Hm({reaction:e,title:t}){return iu(new Ce.messages.UpdateSavedReactionTag({reaction:Bn(e),title:t}),{shouldReturnTrue:!0})}async function Lm({chat:e,dcId:t}){const s=await iu(new Ce.stats.GetBroadcastStats({channel:an(e.id,e.accessHash)}),{dcId:t});var n;if(s)return{stats:(n=s,{type:"channel",growthGraph:Wo(n.growthGraph),followersGraph:Wo(n.followersGraph),muteGraph:Wo(n.muteGraph),topHoursGraph:Wo(n.topHoursGraph),languagesGraph:Wo(n.languagesGraph),viewsBySourceGraph:Wo(n.viewsBySourceGraph),newFollowersBySourceGraph:Wo(n.newFollowersBySourceGraph),interactionsGraph:Wo(n.interactionsGraph),reactionsByEmotionGraph:Wo(n.reactionsByEmotionGraph),storyInteractionsGraph:Wo(n.storyInteractionsGraph),storyReactionsByEmotionGraph:Wo(n.storyReactionsByEmotionGraph),followers:Ko(n.followers),viewsPerPost:Ko(n.viewsPerPost),sharesPerPost:Ko(n.sharesPerPost),enabledNotifications:$o(n.enabledNotifications),reactionsPerPost:Ko(n.reactionsPerPost),viewsPerStory:Ko(n.viewsPerStory),sharesPerStory:Ko(n.sharesPerStory),reactionsPerStory:Ko(n.reactionsPerStory),recentPosts:n.recentPostsInteractions.map(Ho).filter(Boolean)}),users:[]}}async function Om({peer:e,dcId:t}){const s=await iu(new Ce.payments.GetStarsRevenueStats({peer:sn(e.id,e.accessHash)}),{dcId:t});var n,a;if(s)return{topHoursGraph:(n=s).topHoursGraph?Wo(n.topHoursGraph):void 0,revenueGraph:Wo(n.revenueGraph,void 0,{label:"USD ",multiplier:n.usdRate,prefix:"$"}),balances:(a=n.status,{currentBalance:or(a.currentBalance),availableBalance:or(a.availableBalance),overallRevenue:or(a.overallRevenue),isWithdrawalEnabled:a.withdrawalEnabled}),usdRate:n.usdRate}}async function jm({chat:e,dcId:t}){const s=await iu(new Ce.stats.GetMegagroupStats({channel:an(e.id,e.accessHash)}),{dcId:t});var n,a;if(s)return{stats:(n=s,{type:"group",growthGraph:Wo(n.growthGraph),membersGraph:Wo(n.membersGraph),topHoursGraph:Wo(n.topHoursGraph),languagesGraph:Wo(n.languagesGraph),messagesGraph:Wo(n.messagesGraph),actionsGraph:Wo(n.actionsGraph),period:(a=n.period,{maxDate:a.maxDate,minDate:a.minDate}),members:Ko(n.members),viewers:Ko(n.viewers),messages:Ko(n.messages),posters:Ko(n.posters)})}}async function Wm({chat:e,messageId:t,dcId:s}){const n=await iu(new Ce.stats.GetMessageStats({channel:an(e.id,e.accessHash),msgId:t}),{dcId:s});if(n)return Lo(n)}async function zm({chat:e,messageId:t,dcId:s,offset:n="",limit:a=0}){const i=await iu(new Ce.stats.GetMessagePublicForwards({channel:an(e.id,e.accessHash),msgId:t,offset:n,limit:a}),{dcId:s});if(i)return{forwards:Oo(i),count:i.count,nextOffset:i.nextOffset}}async function Km({token:e,x:t,isPercentage:s,dcId:n}){const a=await iu(new Ce.stats.LoadAsyncGraph({token:e,...t&&{x:BigInt(t)}}),{dcId:n});if(!a)return;const i=Wo(a,s);return"graph"===i.graphType?i:void 0}async function $m({chat:e,storyId:t,dcId:s}){const n=await iu(new Ce.stats.GetStoryStats({peer:sn(e.id,e.accessHash),id:t}),{dcId:s});if(n)return Lo(n)}async function Jm({chat:e,storyId:t,dcId:s,offset:n="",limit:a=0}){const i=await iu(new Ce.stats.GetStoryPublicForwards({peer:sn(e.id,e.accessHash),id:t,offset:n,limit:a}),{dcId:s});if(i)return{publicForwards:jo(i),count:i.count,nextOffset:i.nextOffset}}async function Qm({peer:e,currentPassword:t}){try{const s=await xu(t);if(!s)return;if("error"in s)return s;const n=await iu(new Ce.payments.GetStarsRevenueWithdrawalUrl({peer:sn(e.id,e.accessHash),password:s}),{shouldThrow:!0});if(!n)return;return{url:n.url}}catch(e){if(!Fa(e))return;return Na(e)}}var Xm=s(48287).hp;let Ym;class Zm{seq=0;constructor(e){this.isOutgoing=e,this.waitForState=new Promise(e=>{this.resolveState=e})}async requestCall({p:e,g:t,random:s}){const n=q(Xm.from(e),!1),a=q(Xm.from(s),!1),i=Q(BigInt(t),a,n);this.gA=i,this.p=n,this.random=a;const o=await J(X(i));return Array.from(o)}acceptCall({p:e,g:t,random:s}){const n=q(Xm.from(e),!1),a=q(Xm.from(s),!1),i=Q(BigInt(t),a,n);return this.gB=i,this.p=n,this.random=a,Array.from(X(i))}async confirmCall(e,t,s){if(!this.random||!this.p)throw new Error("Values not set");this.isOutgoing?this.gB=q(Xm.from(e),!1):this.gA=q(Xm.from(e),!1);const n=Q(this.isOutgoing?this.gB:this.gA,this.random,this.p),a=q((await $(X(n))).slice(-8).reverse(),!1),i=await async function(e,t,s,n){const a=await J(Xm.concat([new Uint8Array(e),new Uint8Array(t)])),i=[],o=n.length-1;for(let e=0;e!==a.byteLength;e+=8){const t=ey(a.subarray(e,e+8)),r=Number(t%BigInt(o)),c=n[r],d=n[r+1]-c;i.push(String.fromCharCode(...s.subarray(c,c+d)))}return i.join("")}(X(n),X(this.gA),t,s),o=new Ht;return await o.setKey(X(n)),this.state=new Gt(o,new ft,!0,this.isOutgoing),this.resolveState(),{gA:Array.from(X(this.gA)),keyFingerprint:a.toString(),emojis:i}}async encode(e){if(!this.state)return;const t=new Uint32Array(1);t[0]=this.seq++;const s=await this.state.encryptMessageData(Xm.concat([K(t),Xm.from(e)]));return Array.from(s)}async decode(e){if(!this.state)return this.waitForState.then(()=>this.decode(e));const t=await this.state.decryptMessageData(Xm.from(e));return JSON.parse(t.toString())}}function ey(e){return(0x7Fn&BigInt(e[0]))<<56n|BigInt(e[1])<<48n|BigInt(e[2])<<40n|BigInt(e[3])<<32n|BigInt(e[4])<<24n|BigInt(e[5])<<16n|BigInt(e[6])<<8n|BigInt(e[7])}function ty(e){Ym=new Zm(...e)}function sy(){Ym=void 0}function ny(e){return Ym.encode(...e)}async function ay(e){if(Ym)return await Ym.decode(...e)}function iy(e){return Ym.confirmCall(...e)}function oy(e){return Ym.acceptCall(...e)}function ry(e){return Ym.requestCall(...e)}async function cy({stateHash:e,isFirstRequest:t=!1,isHidden:s=!1}){const n=t?s?{hidden:!0}:{}:{state:e,next:!0,...s&&{hidden:!0}},a=await iu(new Ce.stories.GetAllStories(n));if(!a)return;if(a instanceof Ce.stories.AllStoriesNotModified)return{state:a.state,stealthMode:hc(a.stealthMode)};const i=a.peerStories.reduce((e,t)=>{const s=va(t.peer),n=function(e){const t=va(e.peer);return Rs(e.stories,e=>[e.id,fc(t,e)])}(t),{profileIds:a,orderedIds:i,lastUpdatedAt:o}=Object.values(n).reduce((e,t)=>("isInProfile"in t&&t.isInProfile&&e.profileIds.push(t.id),"isDeleted"in t||(e.orderedIds.push(t.id),e.lastUpdatedAt=Math.max(t.date,e.lastUpdatedAt||0)),e),{profileIds:[],orderedIds:[],lastUpdatedAt:void 0});return 0===i.length||(e[s]={byId:n,orderedIds:i,profileIds:a,lastUpdatedAt:o,lastReadId:t.maxReadId}),e},{});return a.peerStories.forEach(e=>e.stories.forEach(t=>Za(t,va(e.peer)))),{peerStories:i,hasMore:a.hasMore,state:a.state,stealthMode:hc(a.stealthMode)}}async function dy({peer:e}){const t=await iu(new Ce.stories.GetPeerStories({peer:sn(e.id,e.accessHash)}));if(!t)return;const s=Rs(t.stories.stories,t=>[t.id,fc(e.id,t)]);return t.stories.stories.forEach(t=>Za(t,e.id)),{stories:s,lastReadStoryId:t.stories.maxReadId}}function uy({peer:e,offsetId:t=0}){return Cy({method:new Ce.stories.GetPinnedStories({peer:sn(e.id,e.accessHash),offsetId:t,limit:100}),peerId:e.id})}function ly({peer:e,offsetId:t=0}){return Cy({method:new Ce.stories.GetStoriesArchive({peer:e&&sn(e.id,e.accessHash),offsetId:t,limit:100}),peerId:e.id})}async function fy({peer:e,ids:t}){const s=await iu(new Ce.stories.GetStoriesByID({peer:sn(e.id,e.accessHash),id:t}));if(!s)return;const n=t.reduce((t,n)=>{const a=s.stories.find(({id:e})=>e===n);return t[n]=a?fc(e.id,a):{id:n,peerId:e.id,isDeleted:!0},t},{});return s.stories.forEach(t=>Za(t,e.id)),{pinnedIds:s.pinnedToTop,stories:n}}function gy({peer:e,storyId:t}){return iu(new Ce.stories.IncrementStoryViews({peer:sn(e.id,e.accessHash),id:[t]}))}function py({peer:e,storyId:t}){return iu(new Ce.stories.ReadStories({peer:sn(e.id,e.accessHash),maxId:t}))}function hy({peer:e,storyId:t}){return iu(new Ce.stories.DeleteStories({peer:sn(e.id,e.accessHash),id:[t]}))}function my({peer:e,storyId:t,isInProfile:s}){return iu(new Ce.stories.TogglePinned({peer:sn(e.id,e.accessHash),id:[t],pinned:Boolean(s)}))}function yy({peer:e,storyIds:t}){return iu(new Ce.stories.TogglePinnedToTop({peer:sn(e.id,e.accessHash),id:t}))}async function _y({peer:e,storyId:t,areJustContacts:s,query:n,areReactionsFirst:a,limit:i=100,offset:o=""}){const r=await iu(new Ce.stories.GetStoryViewsList({peer:sn(e.id,e.accessHash),id:t,justContacts:s,q:n,reactionsFirst:a,limit:i,offset:o}));if(r)return{views:r.views.map(pc).filter(Boolean),nextOffset:r.nextOffset,reactionsCount:r.reactionsCount,viewsCount:r.count}}async function by({peer:e,storyIds:t}){const s=await iu(new Ce.stories.GetStoriesViews({peer:sn(e.id,e.accessHash),id:t}));if(s?.views[0])return{views:gc(s.views[0])}}async function Sy({peer:e,storyId:t}){const s=await iu(new Ce.stories.ExportStoryLink({peer:sn(e.id,e.accessHash),id:t}));if(s)return s.link}async function wy({peer:e,storyId:t,description:s,option:n}){try{const a=await iu(new Ce.stories.Report({peer:sn(e.id,e.accessHash),id:[t],option:Ga(n),message:s}),{shouldThrow:!0});if(!a)return;return{result:dc(a),error:void 0}}catch(e){const t=e.message;if(t===b)return{result:void 0,error:t};throw e}}function Iy({peer:e,id:t,privacy:s}){return iu(new Ce.stories.EditStory({peer:sn(e.id,e.accessHash),id:t,privacyRules:Fn(s)}),{shouldReturnTrue:!0})}function vy({peer:e,isHidden:t}){return iu(new Ce.stories.TogglePeerStoriesHidden({peer:sn(e.id,e.accessHash),hidden:t}))}function Py({peers:e}){return iu(new Ce.stories.GetPeerMaxIDs({id:e.map(e=>sn(e.id,e.accessHash))}),{shouldIgnoreErrors:!0})}async function Cy({method:e,peerId:t}){const s=await iu(e);if(!s)return;const n=Rs(s.stories,e=>[e.id,fc(t,e)]);return s.stories.forEach(e=>Za(e,t)),{count:s.count,stories:n,pinnedIds:s.pinnedToTop}}function My({peer:e,storyId:t,reaction:s,shouldAddToRecent:n}){return iu(new Ce.stories.SendReaction({reaction:s?Bn(s):new Ce.ReactionEmpty,peer:sn(e.id,e.accessHash),storyId:t,...n&&{addToRecent:!0}}),{shouldReturnTrue:!0})}function Ay({isForPast:e,isForFuture:t}){return iu(new Ce.stories.ActivateStealthMode({past:e,future:t}),{shouldReturnTrue:!0})}async function Ry({peer:e}){const t=await iu(new Ce.stories.GetAlbums({peer:sn(e.id,e.accessHash),hash:0n}));if(t&&!(t instanceof Ce.stories.AlbumsNotModified))return t.albums.map(_c)}async function ky({peer:e,albumId:t,offset:s=0,limit:n=100}){const a=await iu(new Ce.stories.GetAlbumStories({peer:sn(e.id,e.accessHash),albumId:t,offset:s,limit:n}));if(!a)return;const i=Rs(a.stories,t=>[t.id,fc(e.id,t)]);return a.stories.forEach(t=>{t&&t instanceof Ce.StoryItem&&Za(t,e.id)}),{stories:i,pinnedIds:a.pinnedToTop,count:a.count}}async function Ty({inputInvoice:e,requestInfo:t,shouldSave:s}){const n=await iu(new Ce.payments.ValidateRequestedInfo({invoice:Tn(e),save:s||void 0,info:wn(t)}));if(!n)return;const{id:a,shippingOptions:i}=n;return a?{id:a,shippingOptions:Qo(i)}:void 0}async function By({inputInvoice:e,formId:t,requestedInfoId:s,shippingOptionId:n,credentials:a,savedCredentialId:i,temporaryPassword:o,tipAmount:r}){const c=o&&i?new Ce.InputPaymentCredentialsSaved({id:i,tmpPassword:Ga(o)}):new Ce.InputPaymentCredentials({save:a.save,data:new Ce.DataJSON({data:JSON.stringify(a.data)})}),d=await iu(new Ce.payments.SendPaymentForm({formId:BigInt(t),invoice:Tn(e),requestedInfoId:s,shippingOptionId:n,credentials:c,...r&&{tipAmount:BigInt(r)}}));return!!d&&(d instanceof Ce.payments.PaymentVerificationNeeded?void La({"@type":"updatePaymentVerificationNeeded",url:d.url}):(au(d.updates),Boolean(d)))}async function Dy({formId:e,inputInvoice:t}){const s=await iu(new Ce.payments.SendStarsForm({formId:BigInt(e),invoice:Tn(t)}));if(s&&!(s instanceof Ce.payments.PaymentVerificationNeeded)){if(au(s.updates),"chatInviteSubscription"===t.type){const e="updates"in s.updates?s.updates.updates:void 0,t=e?.find(e=>e instanceof Ce.UpdateChannel)?.channelId;if(!t)return;return{channelId:Ia(t,"channel")}}return{completed:!0}}}async function Uy(e,t){try{const s=await iu(new Ce.payments.GetPaymentForm({invoice:Tn(e),themeParams:t?Pn(t):void 0}),{shouldThrow:!0});if(!s)return;return function(e){if(e instanceof Ce.payments.PaymentFormStarGift){const{formId:t}=e;return{type:"stargift",formId:String(t),invoice:Yo(e.invoice)}}if(e instanceof Ce.payments.PaymentFormStars){const{botId:t,formId:s,title:n,description:a,photo:i}=e;return i&&oi(i),{type:"stars",botId:Ia(t,"user"),formId:String(s),title:n,description:a,photo:qr(i),invoice:Yo(e.invoice)}}const{formId:t,canSaveCredentials:s,passwordMissing:n,providerId:a,nativeProvider:i,nativeParams:o,savedInfo:r,invoice:c,savedCredentials:d,url:u,botId:l,description:f,title:g,photo:p}=e;p&&oi(p);const{shippingAddress:h}=r||{},m=r?Ls(r):void 0;m&&h&&(m.shippingAddress=Ls(h));const y=o?JSON.parse(o.data):{};return{type:"regular",title:g,description:f,photo:qr(p),url:u,botId:Ia(l,"user"),canSaveCredentials:s,isPasswordMissing:n,formId:String(t),providerId:String(a),nativeProvider:i,savedInfo:m,invoice:Yo(c),nativeParams:{needCardholderName:Boolean(y?.need_cardholder_name),needCountry:Boolean(y?.need_country),needZip:Boolean(y?.need_zip),publishableKey:y?.publishable_key,publicToken:y?.public_token,tokenizeUrl:y?.tokenize_url},savedCredentials:d&&(_=d,_.map(({id:e,title:t})=>({id:e,title:t})))};var _}(s)}catch(e){if(e instanceof Me)return{error:e.errorMessage};throw e}}async function Ey(e,t){const s=await iu(new Ce.payments.GetPaymentReceipt({peer:sn(e.id,e.accessHash),msgId:t}));if(s)return{receipt:Xo(s)}}async function xy(){const e=await iu(new Ce.help.GetPremiumPromo);if(e)return e.videos.forEach(e=>{e instanceof Ce.Document&&(Qs.documents[e.id.toString()]=e)}),{promo:Zo(e)}}async function Vy(e){const t=await Eu(e);if(t)return"error"in t?t:{value:Va(t.tmpPassword),validUntil:t.validUntil}}async function Gy(){const e=await iu(new Ce.premium.GetMyBoosts);if(e)return{boosts:e.myBoosts.map(sr)}}async function Fy({chat:e,slots:t}){const s=await iu(new Ce.premium.ApplyBoost({peer:sn(e.id,e.accessHash),slots:t}));if(s)return{boosts:s.myBoosts.map(sr)}}async function Ny({chat:e}){const t=await iu(new Ce.premium.GetBoostsStatus({peer:sn(e.id,e.accessHash)}));if(t)return function(e){const{level:t,boostUrl:s,boosts:n,giftBoosts:a,myBoost:i,currentLevelBoosts:o,nextLevelBoosts:r,premiumAudience:c,prepaidGiveaways:d}=e;return{level:t,currentLevelBoosts:o,boosts:n,hasMyBoost:Boolean(i),boostUrl:s,giftBoosts:a,nextLevelBoosts:r,premiumSubscribers:c&&$o(c),prepaidGiveaways:d?.map(e=>{return(t=e)instanceof Ce.PrepaidGiveaway?{type:"giveaway",id:t.id.toString(),date:t.date,months:t.months,quantity:t.quantity}:{type:"starsGiveaway",id:t.id.toString(),stars:rs(t.stars),quantity:t.quantity,boosts:t.boosts,date:t.date};var t})}}(t)}async function qy({chat:e,isGifts:t,offset:s="",limit:n=0}){const a=await iu(new Ce.premium.GetBoostsList({peer:sn(e.id,e.accessHash),gifts:t||void 0,offset:s,limit:n}));if(!a)return;const i=a.boosts.map(tr);return{count:a.count,boostList:i,nextOffset:a.nextOffset}}async function Hy({peer:e,messageId:t}){const s=await iu(new Ce.payments.GetGiveawayInfo({peer:sn(e.id,e.accessHash),msgId:t}));if(s)return function(e){if(e instanceof Ce.payments.GiveawayInfo){const{startDate:t,adminDisallowedChatId:s,disallowedCountry:n,joinedTooEarlyDate:a,participating:i,preparingResults:o}=e;return{type:"active",startDate:t,isParticipating:i,adminDisallowedChatId:void 0!==s?Ia(s,"channel"):void 0,disallowedCountry:n,joinedTooEarlyDate:a,isPreparingResults:o}}{const{activatedCount:t,finishDate:s,giftCodeSlug:n,winner:a,refunded:i,startDate:o,winnersCount:r,starsPrize:c}=e;return{type:"results",startDate:o,activatedCount:t,finishDate:s,winnersCount:r,giftCodeSlug:n,isRefunded:i,isWinner:a,starsPrize:rs(c)}}}(s)}async function Ly({slug:e}){const t=await iu(new Ce.payments.CheckGiftCode({slug:e}));if(t)return{code:nr(t)}}function Oy({slug:e}){return iu(new Ce.payments.ApplyGiftCode({slug:e}),{shouldReturnTrue:!0})}async function jy({chat:e}){const t=await iu(new Ce.payments.GetPremiumGiftCodeOptions({boostPeer:e&&sn(e.id,e.accessHash)}));if(t)return t.map(ar)}function Wy({chat:e,giveawayId:t,paymentPurpose:s}){return iu(new Ce.payments.LaunchPrepaidGiveaway({peer:sn(e.id,e.accessHash),giveawayId:BigInt(t),purpose:Rn(s)}),{shouldReturnTrue:!0})}async function zy(e){const t="username"in e?new Ce.InputCollectibleUsername({username:e.username}):new Ce.InputCollectiblePhone({phone:e.phone}),s=await iu(new Ce.fragment.GetCollectibleInfo({collectible:t}));if(s)return function(e){const{amount:t,currency:s,cryptoAmount:n,cryptoCurrency:a,purchaseDate:i,url:o}=e;return{amount:rs(t),currency:s,cryptoAmount:rs(n),cryptoCurrency:a,purchaseDate:i,url:o}}(s)}async function Ky({giftId:e}){const t=await iu(new Ce.payments.CheckCanSendGift({giftId:BigInt(e)}));if(t)return t instanceof Ce.payments.CheckCanSendGiftResultOk?{canSend:!0}:t instanceof Ce.payments.CheckCanSendGiftResultFail?{canSend:!1,reason:yi(t.reason)}:void 0}async function $y(){const e=await iu(new Ce.payments.GetStarsGiveawayOptions);if(e)return e.map(rr)}async function Jy(){const e=await iu(new Ce.payments.GetStarGifts({hash:0}));if(!e||e instanceof Ce.payments.StarGiftsNotModified)return;const t=e.chats?.map(e=>wo(e)).filter(Boolean),s=e.users?.map(Xi).filter(Boolean);return{gifts:e.gifts.map(fr).filter(e=>"starGift"===e.type),chats:t,users:s}}async function Qy({giftId:e,offset:t="",limit:s=0,attributesHash:n,filter:a}){const i=[...a?.backdropAttributes??[],...a?.modelAttributes??[],...a?.patternAttributes??[]],o={giftId:BigInt(e),offset:t,limit:s,attributesHash:n?BigInt(n):0n,attributes:mr(i),...a&&{sortByPrice:"byPrice"===a.sortType||void 0,sortByNum:"byNumber"===a.sortType||void 0}},r=await iu(new Ce.payments.GetResaleStarGifts(o));if(r)return function(e){const{count:t,nextOffset:s,attributesHash:n}=e,a=e.gifts.map(e=>fr(e)),i=e.attributes?.map(e=>pr(e)).filter(Boolean),o=e.users.map(e=>Xi(e)).filter(Boolean),r=e.chats.map(e=>wo(e)).filter(Boolean),c=e.counters?.map(e=>function(e){const{count:t}=e,s=function(e){return e instanceof Ce.StarGiftAttributeIdModel?{type:"model",documentId:e.documentId.toString()}:e instanceof Ce.StarGiftAttributeIdPattern?{type:"pattern",documentId:e.documentId.toString()}:e instanceof Ce.StarGiftAttributeIdBackdrop?{type:"backdrop",backdropId:e.backdropId}:void 0}(e.attribute);if(s)return{count:t,attribute:s}}(e)).filter(Boolean);return{count:t,gifts:a,nextOffset:s,attributes:i,attributesHash:n?.toString(),chats:r,counters:c,users:o}}(r)}async function Xy({peer:e,offset:t="",limit:s=0,filter:n,collectionId:a}){const i={peer:sn(e.id,e.accessHash),offset:t,limit:s,collectionId:a,...n&&{sortByValue:"byValue"===n.sortType||void 0,excludeUnlimited:!n.shouldIncludeUnlimited||void 0,excludeUpgradable:!n.shouldIncludeUpgradable||void 0,excludeUnupgradable:!n.shouldIncludeLimited||void 0,excludeUnique:!n.shouldIncludeUnique||void 0,excludeSaved:!n.shouldIncludeDisplayed||void 0,excludeUnsaved:!n.shouldIncludeHidden||void 0}},o=await iu(new Ce.payments.GetSavedStarGifts(i));if(o)return{gifts:o.gifts.map(t=>function(e,t){const{gift:s,date:n,convertStars:a,fromId:i,message:o,msgId:r,nameHidden:c,unsaved:d,refunded:u,upgradeStars:l,transferStars:f,canUpgrade:g,savedId:p,canExportAt:h,pinnedToTop:m,canResellAt:y,canTransferAt:_,prepaidUpgradeHash:b,dropOriginalDetailsStars:S}=e,w=p&&t?{type:"chat",chatId:t,savedId:p.toString()}:r?{type:"user",messageId:r}:void 0;return{gift:fr(s),date:n,starsToConvert:rs(a),fromId:i&&va(i),message:o&&yi(o),messageId:r,isNameHidden:c,isUnsaved:d,isRefunded:u,canUpgrade:g,alreadyPaidUpgradeStars:rs(l),transferStars:rs(f),inputGift:w,savedId:p?.toString(),canExportAt:h,canResellAt:y,canTransferAt:_,isPinned:m,dropOriginalDetailsStars:void 0!==S?rs(S):void 0,prepaidUpgradeHash:b}}(t,e.id)),nextOffset:o.nextOffset}}function Yy({inputGift:e,shouldUnsave:t}){return iu(new Ce.payments.SaveStarGift({stargift:Nn(e),unsave:t||void 0}))}function Zy({inputSavedGift:e}){return iu(new Ce.payments.ConvertStarGift({stargift:Nn(e)}))}async function e_({chat:e}){const t=await iu(new Ce.payments.GetStarsGiftOptions({userId:e&&nn(e.id,e.accessHash)}));if(t)return t.map(ir)}async function t_({isTon:e}={}){const t=await iu(new Ce.payments.GetStarsStatus({peer:new Ce.InputPeerSelf,ton:e||void 0}));if(!t)return;const s=or(t.balance);return s?{nextHistoryOffset:t.nextOffset,history:t.history?.map(dr).filter(Boolean),nextSubscriptionOffset:t.subscriptionsNextOffset,subscriptions:t.subscriptions?.map(ur),balance:s}:void 0}async function s_({peer:e,offset:t="",limit:s=0,isInbound:n,isOutbound:a,isTon:i}){const o=e?sn(e.id,e.accessHash):new Ce.InputPeerSelf,r=await iu(new Ce.payments.GetStarsTransactions({peer:o,offset:t,limit:s,inbound:n||void 0,outbound:a||void 0,ton:i||void 0}));if(!r)return;const c=or(r.balance);return c?{nextOffset:r.nextOffset,history:r.history?.map(dr).filter(Boolean),balance:c}:void 0}async function n_({id:e,peer:t,ton:s}){const n=t?sn(t.id,t.accessHash):new Ce.InputPeerSelf,a=await iu(new Ce.payments.GetStarsTransactionsByID({peer:n,ton:s,id:[new Ce.InputStarsTransaction({id:e})]}));if(a?.history?.[0])return{transaction:dr(a?.history[0])}}async function a_({offset:e="",peer:t}){const s=t?sn(t.id,t.accessHash):new Ce.InputPeerSelf,n=await iu(new Ce.payments.GetStarsSubscriptions({peer:s,offset:e}));if(!n?.subscriptions)return;const a=or(n.balance);return a?{nextOffset:n.subscriptionsNextOffset,subscriptions:n.subscriptions.map(ur),balance:a}:void 0}async function i_({peer:e,subscriptionId:t,isCancelled:s}){return await iu(new Ce.payments.ChangeStarsSubscription({peer:e?sn(e.id,e.accessHash):new Ce.InputPeerSelf,subscriptionId:t,canceled:s}))}async function o_({peer:e,subscriptionId:t}){return await iu(new Ce.payments.FulfillStarsSubscription({peer:e?sn(e.id,e.accessHash):new Ce.InputPeerSelf,subscriptionId:t}))}async function r_(){const e=await iu(new Ce.payments.GetStarsTopupOptions);if(e)return e.map(lr)}async function c_({slug:e}){try{const t=await iu(new Ce.payments.GetUniqueStarGift({slug:e}),{shouldThrow:!0});if(!t)return;const s=fr(t.gift);if("starGiftUnique"!==s.type)return;return s}catch(e){return e instanceof Me?Na(e):void 0}}async function d_({giftId:e}){const t=await iu(new Ce.payments.GetStarGiftUpgradePreview({giftId:BigInt(e)}));if(t)return function(e){return{sampleAttributes:e.sampleAttributes.map(pr).filter(Boolean),prices:e.prices?.map(_r)||[],nextPrices:e.nextPrices?.map(_r)||[]}}(t)}async function u_({giftId:e,slug:t,version:s=0}){if(!e&&!t)return;const n=t?new Ce.InputStarGiftAuctionSlug({slug:t}):new Ce.InputStarGiftAuction({giftId:BigInt(e)}),a=await iu(new Ce.payments.GetStarGiftAuctionState({auction:n,version:s}));return a?Ir(a):void 0}async function l_({giftId:e}){const t=await iu(new Ce.payments.GetStarGiftAuctionAcquiredGifts({giftId:BigInt(e)}));if(t)return{gifts:t.gifts.map(vr)}}async function f_(){const e=await iu(new Ce.payments.GetStarGiftActiveAuctions({hash:0n}));if(e&&!(e instanceof Ce.payments.StarGiftActiveAuctionsNotModified))return{auctions:e.auctions.map(Ir).filter(Boolean)}}function g_({inputSavedGift:e,shouldKeepOriginalDetails:t}){return iu(new Ce.payments.UpgradeStarGift({stargift:Nn(e),keepOriginalDetails:t}),{shouldReturnTrue:!0})}function p_({inputSavedGift:e,toPeer:t}){return iu(new Ce.payments.TransferStarGift({stargift:Nn(e),toId:sn(t.id,t.accessHash)}),{shouldReturnTrue:!0})}function h_({inputSavedGifts:e,peer:t}){return iu(new Ce.payments.ToggleStarGiftsPinnedToTop({stargift:e.map(Nn),peer:sn(t.id,t.accessHash)}),{shouldReturnTrue:!0})}function m_({inputSavedGift:e,price:t}){return iu(new Ce.payments.UpdateStarGiftPrice({stargift:Nn(e),resellAmount:Vn(t)}),{shouldReturnTrue:!0})}async function y_({slug:e}){const t=await iu(new Ce.payments.GetUniqueStarGiftValueInfo({slug:e}));if(t)return function(e){const{lastSaleOnFragment:t,currency:s,value:n,initialSaleDate:a,initialSaleStars:i,initialSalePrice:o,lastSaleDate:r,lastSalePrice:c,floorPrice:d,averagePrice:u,listedCount:l,fragmentListedCount:f,fragmentListedUrl:g,valueIsAverage:p}=e;return{isLastSaleOnFragment:t,isValueAverage:p,currency:s,value:rs(n),initialSaleDate:a,initialSaleStars:rs(i),initialSalePrice:rs(o),lastSaleDate:r,lastSalePrice:rs(c),floorPrice:rs(d),averagePrice:rs(u),listedCount:l,fragmentListedCount:f,fragmentListedUrl:g}}(t)}async function __({inputGift:e,password:t}){try{const s=await xu(t);if(!s)return;if("error"in s)return s;const n=await iu(new Ce.payments.GetStarGiftWithdrawalUrl({stargift:Nn(e),password:s}),{shouldThrow:!0});if(!n)return;return{url:n.url}}catch(e){if(!Fa(e))return;return Na(e)}}async function b_({peer:e,hash:t}){const s=await iu(new Ce.payments.GetStarGiftCollections({peer:sn(e.id,e.accessHash),hash:t?BigInt(t):0n}));if(s&&!(s instanceof Ce.payments.StarGiftCollectionsNotModified))return{collections:s.collections.map(yr).filter(Boolean)}}function S_({offerMsgId:e,shouldDecline:t}){return iu(new Ce.payments.ResolveStarGiftOffer({offerMsgId:e,decline:t||void 0}),{shouldReturnTrue:!0})}async function w_({chat:e,title:t,iconColor:s,iconEmojiId:n,sendAs:a,isTitleMissing:i}){const{id:o,accessHash:r}=e,c=await iu(new Ce.messages.CreateForumTopic({peer:sn(o,r),title:t,iconColor:s,iconEmojiId:n?BigInt(n):void 0,sendAs:a?sn(a.id,a.accessHash):void 0,randomId:W(),titleMissing:i}));if(c instanceof Ce.Updates&&c.updates.length)return c.updates?.find(e=>e instanceof Ce.UpdateMessageID)?.id}async function I_({chat:e,query:t,offsetTopicId:s,offsetId:n,offsetDate:a,limit:i=20}){const{id:o,accessHash:r}=e,c=await iu(new Ce.messages.GetForumTopics({peer:sn(o,r),limit:i,q:t,offsetTopic:s??0,offsetId:n??0,offsetDate:a??0}));if(!c)return;const{orderByCreateDate:d}=c,u=c.topics.map(df).filter(Boolean),l=0===c.count?u.length:c.count;return{topics:u,messages:c.messages.map(Zr).filter(Boolean),count:l+1,shouldOrderByCreateDate:d,draftsById:c.topics.reduce((e,t)=>(t instanceof Ce.ForumTopic&&t.draft&&(e[t.id]=tc(t.draft)),e),{})}}async function v_({chat:e,topicId:t}){const{id:s,accessHash:n}=e,a=await iu(new Ce.messages.GetForumTopicsByID({peer:sn(s,n),topics:[t]}));if(!(a?.topics.length&&a.topics[0]instanceof Ce.ForumTopic))return;const i=a.messages.map(Zr).filter(Boolean);return{topic:df(a.topics[0]),messages:i}}async function P_({chat:e,topicId:t}){const{id:s,accessHash:n}=e,a=await iu(new Ce.messages.DeleteTopicHistory({peer:sn(s,n),topMsgId:t}));a&&(od(e,a),a.offset&&await P_({chat:e,topicId:t}))}function C_({chat:e,topicId:t,isPinned:s}){const{id:n,accessHash:a}=e;return iu(new Ce.messages.UpdatePinnedForumTopic({peer:sn(n,a),topicId:t,pinned:s}),{shouldReturnTrue:!0})}function M_({chat:e,topicId:t,title:s,iconEmojiId:n,isClosed:a,isHidden:i}){const{id:o,accessHash:r}=e;return iu(new Ce.messages.EditForumTopic({peer:sn(o,r),topicId:t,title:s,iconEmojiId:1!==t&&n?BigInt(n):void 0,closed:a,hidden:i}),{shouldReturnTrue:!0})}var A_=s(48287).hp;function R_(e){const{emojies_sounds:t}=e;return t?Object.keys(t).reduce((e,s)=>{const n=t[s];return Qs.documents[n.id]=new Ce.Document({id:BigInt(n.id),accessHash:BigInt(n.access_hash),dcId:1,mimeType:"audio/ogg",fileReference:A_.alloc(0),size:0n}),e[s]=n.id,e},{}):{}}function k_(e){const{emojies_send_dice_success:t}=e;return t?Object.entries(t).reduce((e,[t,s])=>(e[t]={value:s.value,frameStart:s.frame_start},e),{}):{}}function T_(e,t,s){return[e[`${t}_default`]||ku[s][0],e[`${t}_premium`]||ku[s][1]]}async function B_({hash:e}){const t=await iu(new Ce.help.GetAppConfig({hash:e??0}));if(!t||t instanceof Ce.help.AppConfigNotModified)return;const{config:s,hash:n}=t;return function(e,t){const s=oo(e),n={emojiSounds:R_(s),seenByMaxChatMembers:s.chat_read_mark_size_threshold,seenByExpiresAt:s.chat_read_mark_expire_period,readDateExpiresAt:s.pm_read_date_expire_period,autologinDomains:s.autologin_domains||[],urlAuthDomains:s.url_auth_domains||[],whitelistedDomains:s.whitelisted_domains||[],maxUniqueReactions:s.reactions_uniq_max,premiumBotUsername:s.premium_bot_username,premiumInvoiceSlug:s.premium_invoice_slug,premiumPromoOrder:s.premium_promo_order,isPremiumPurchaseBlocked:s.premium_purchase_blocked,isGiveawayGiftsPurchaseAvailable:s.giveaway_gifts_purchase_available,defaultEmojiStatusesStickerSetId:s.default_emoji_statuses_stickerset_id,topicsPinnedLimit:s.topics_pinned_limit,hiddenMembersMinCount:s.hidden_members_group_size_min,giveawayAddPeersMax:s.giveaway_add_peers_max,giveawayBoostsPerPremium:s.giveaway_boosts_per_premium,giveawayCountriesMax:s.giveaway_countries_max,boostsPerSentGift:s.boosts_per_sent_gift,canDisplayAutoarchiveSetting:s.autoarchive_setting_available,limits:{uploadMaxFileparts:T_(s,"upload_max_fileparts","uploadMaxFileparts"),stickersFaved:T_(s,"stickers_faved_limit","stickersFaved"),savedGifs:T_(s,"saved_gifs_limit","savedGifs"),dialogFiltersChats:T_(s,"dialog_filters_chats_limit","dialogFiltersChats"),dialogFilters:T_(s,"dialog_filters_limit","dialogFilters"),dialogFolderPinned:T_(s,"dialogs_pinned_limit","dialogFolderPinned"),captionLength:T_(s,"caption_length_limit","captionLength"),channels:T_(s,"channels_limit","channels"),channelsPublic:T_(s,"channels_public_limit","channelsPublic"),aboutLength:T_(s,"about_length_limit","aboutLength"),chatlistInvites:T_(s,"chatlist_invites_limit","chatlistInvites"),chatlistJoined:T_(s,"chatlist_joined_limit","chatlistJoined"),recommendedChannels:T_(s,"recommended_channels_limit","recommendedChannels"),savedDialogsPinned:T_(s,"saved_dialogs_pinned_limit","savedDialogsPinned"),maxReactions:T_(s,"reactions_user_max","maxReactions"),moreAccounts:ku.moreAccounts},contactNoteLimit:s.contact_note_length_limit,hash:t,storyViewersExpirePeriod:s.story_viewers_expire_period,storyChangelogUserId:s.stories_changelog_user_id?.toString(),maxPinnedStoriesCount:s.stories_pinned_to_top_count_max,groupTranscribeLevelMin:s.group_transcribe_level_min,canLimitNewMessagesWithoutPremium:s.new_noncontact_peers_require_premium_without_ownpremium,starsPaidMessagesAvailable:s.stars_paid_messages_available,starsPaidMessageCommissionPermille:s.stars_paid_message_commission_permille,starsPaidMessageAmountMax:s.stars_paid_message_amount_max,starsUsdWithdrawRateX1000:s.stars_usd_withdraw_rate_x1000,starsUsdSellRateX1000:s.stars_usd_sell_rate_x1000,bandwidthPremiumNotifyPeriod:s.upload_premium_speedup_notify_period,bandwidthPremiumUploadSpeedup:s.upload_premium_speedup_upload,bandwidthPremiumDownloadSpeedup:s.upload_premium_speedup_download,channelRestrictAdsLevelMin:s.channel_restrict_sponsored_level_min,channelAutoTranslationLevelMin:s.channel_autotranslation_level_min,paidReactionMaxAmount:s.stars_paid_reaction_amount_max,isChannelRevenueWithdrawalEnabled:s.channel_revenue_withdrawal_enabled,isStarsGiftEnabled:s.stars_gifts_enabled,starGiftMaxMessageLength:s.stargifts_message_length_max,starGiftMaxConvertPeriod:s.stargifts_convert_period_max,starRefStartPrefixes:s.starref_start_param_prefixes,tonExplorerUrl:s.ton_blockchain_explorer_url,savedGiftPinLimit:s.stargifts_pinned_to_top_limit,freezeSinceDate:s.freeze_since_date,freezeUntilDate:s.freeze_until_date,freezeAppealUrl:s.freeze_appeal_url,starsStargiftResaleAmountMin:s.stars_stargift_resale_amount_min,starsStargiftResaleAmountMax:s.stars_stargift_resale_amount_max,starsStargiftResaleCommissionPermille:s.stars_stargift_resale_commission_permille,tonStargiftResaleAmountMin:s.ton_stargift_resale_amount_min,tonStargiftResaleAmountMax:s.ton_stargift_resale_amount_max,tonStargiftResaleCommissionPermille:s.ton_stargift_resale_commission_permille,starsSuggestedPostAmountMax:s.stars_suggested_post_amount_max,starsSuggestedPostAmountMin:s.stars_suggested_post_amount_min,starsSuggestedPostCommissionPermille:s.stars_suggested_post_commission_permille,starsSuggestedPostAgeMin:s.stars_suggested_post_age_min,starsSuggestedPostFutureMax:s.stars_suggested_post_future_max,starsSuggestedPostFutureMin:s.stars_suggested_post_future_min,tonSuggestedPostCommissionPermille:s.ton_suggested_post_commission_permille,tonSuggestedPostAmountMax:s.ton_suggested_post_amount_max,tonSuggestedPostAmountMin:s.ton_suggested_post_amount_min,tonUsdRate:s.ton_usd_rate,tonTopupUrl:s.ton_topup_url,pollMaxAnswers:s.poll_answers_max,todoItemsMax:s.todo_items_max,todoTitleLengthMax:s.todo_title_length_max,todoItemLengthMax:s.todo_item_length_max,ignoreRestrictionReasons:s.ignore_restriction_reasons,needAgeVideoVerification:s.need_age_video_verification,verifyAgeBotUsername:s.verify_age_bot_username,verifyAgeCountry:s.verify_age_country,verifyAgeMin:s.verify_age_min,typingDraftTtl:s.message_typing_draft_ttl,whitelistedBotIds:s.whitelisted_bots,arePasskeysAvailable:s.settings_display_passkeys,passkeysMaxCount:s.passkeys_account_passkeys_max,diceEmojies:s.emojies_send_dice,diceEmojiesSuccess:k_(s)};return{...Tu,...Ds(n)}}(s,n)}async function D_(){const e=await iu(new Ce.help.GetConfig);if(e)return function(e){const{testMode:t,expires:s,gifSearchUsername:n,chatSizeMax:a,autologinToken:i,reactionsDefault:o,messageLengthMax:r,editTimeLimit:c,forwardedCountMax:d}=e;return{isTestServer:t,expiresAt:s,gifSearchUsername:n,defaultReaction:o&&Pi(o),maxGroupSize:a,autologinToken:i,maxMessageLength:r,editTimeLimit:c,maxForwardedCount:d}}(e)}async function U_(){const e=await iu(new Ce.help.GetPromoData);if(e&&!(e instanceof Ce.help.PromoDataEmpty))return function(e){const{expires:t,pendingSuggestions:s,dismissedSuggestions:n,customPendingSuggestion:a}=e;return{expires:t,pendingSuggestions:s,dismissedSuggestions:n,customPendingSuggestion:a?co(a):void 0}}(e)}async function E_(e){await iu(new Ce.help.DismissSuggestion({peer:new Ce.InputPeerEmpty,suggestion:e}))}function x_(e,t,s){var n;!function(e){Ha=e}(e),s&&(n=s,Object.assign(Js,$s(n)));const a=new zt;return async function(e,t){const{userAgent:s,platform:n,sessionData:a,isWebmSupported:i,maxBufferSize:o,webAuthToken:r,dcId:c,mockScenario:d,shouldForceHttpTransport:u,shouldAllowHttpTransport:l,shouldDebugExportedSenders:f,langCode:g,isTestServerRequested:p,accountIds:h,hasPasskeySupport:m}=e,y=new is(a,nu);self.isWebmSupported=i,self.maxBufferSize=o,Yd=new ma(y,Number("2496"),"8da85b0d5bfe62527e5b244c209159c3",{deviceModel:navigator.userAgent||s||"Unknown UserAgent",systemVersion:n||"Unknown platform",appVersion:"12.0.18 A",useWSS:!0,additionalDcsDisabled:!1,shouldDebugExportedSenders:f,shouldForceHttpTransport:u,shouldAllowHttpTransport:l,dcId:c,langPack:I,langCode:g,systemLangCode:navigator.language,isTestServerRequested:p}),Yd.addEventHandler(au,Jd);try{try{Yd.setPingCallback(sd),await Yd.start({phoneNumber:pd,phoneCode:hd,password:md,firstAndLastNames:yd,onPasskeyOption:gd,qrCode:_d,onError:bd,initialMethod:"iOS"===n||"Android"===n?"phoneNumber":"qrCode",shouldThrowIfUnauthorized:Object.values(a?.keys||{}).length>0,webAuthToken:r,webAuthTokenFailed:fd,mockScenario:d,accountIds:h,hasPasskeySupport:m},t)}catch(e){if(console.error(e),"Disconnect"!==e.message&&"Cannot send requests while disconnected"!==e.message)return void La({"@type":"updateConnectionState",connectionState:"connectionStateBroken"})}La(Sd("authorizationStateReady")),nu(y.getSessionData()),La({"@type":"updateApiReady"}),async function(e){Hc=e,await rd(),Oc=!0,ed()}(iu),fu()}catch(e){throw e}}(t,()=>a.resolve()),a.promise}const V_=M.reduce((e,t)=>(e[t]=console[t],e),{});self.onerror=e=>{console.error(e),L_({type:"unhandledError",error:{message:e.error.message||"Uncaught exception in worker"}})},self.addEventListener("unhandledrejection",e=>{console.error(e),L_({type:"unhandledError",error:{message:e.reason.message||"Uncaught rejection in worker"}})});let G_=[],F_=[],N_=[];const q_=new Map;onmessage=({data:e})=>{e.payloads.forEach(async e=>{switch(e.type){case"initApi":{const{messageId:t,args:s}=e;x_(O_,s[0],s[1]).then(()=>{t&&L_({type:"methodResponse",messageId:t,response:!0})});break}case"callMethod":{const{messageId:t,name:s,args:n,withCallback:i}=e;try{if(t&&i){const e=(...e)=>{const s=e[e.length-1];L_({type:"methodCallback",messageId:t,callbackArgs:e},s instanceof ArrayBuffer?s:void 0)};q_.set(t,e),n.push(e)}const e=await function(e,...t){return a[e](...t)}(s,...n),{arrayBuffer:o}="object"==typeof e&&"arrayBuffer"in e&&e||{};t&&L_({type:"methodResponse",messageId:t,response:e},o)}catch(e){t&&L_({type:"methodResponse",messageId:t,error:{message:e.message}})}t&&q_.delete(t);break}case"cancelProgress":{const t=q_.get(e.messageId);t&&(t.isCanceled=!0);break}case"ping":L_({type:"methodResponse",messageId:e.messageId});break;case"toggleDebugMode":e.isEnabled?M.forEach(e=>{console[e]=(...t)=>{postMessage({type:"debugLog",level:e,args:JSON.parse(JSON.stringify(t,(e,t)=>"bigint"==typeof t?t.toString():t))})}}):M.forEach(e=>{console[e]=V_[e]})}})};const H_=R(()=>{N_.length&&G_.unshift({type:"updates",updates:N_});const e={payloads:G_},t=F_;N_=[],G_=[],F_=[],t.length?postMessage(e,t):postMessage(e)});function L_(e,t){G_.push(e),t&&F_.push(t),H_()}function O_(e){N_.push(e),H_()}}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return s[e](i,i.exports,a),i.exports}a.m=s,a.x=()=>{var e=a.O(void 0,[8287,2066],()=>a(80081));return a.O(e)},e=[],a.O=(t,s,n,i)=>{if(!s){var o=1/0;for(u=0;u<e.length;u++){for(var[s,n,i]=e[u],r=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every(e=>a.O[e](s[c]))?s.splice(c--,1):(r=!1,i<o&&(o=i));if(r){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,n,i]},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,s)=>(a.f[s](e,t),t),[])),a.u=e=>e+"."+{2066:"d9bbb1ff023b41207d3e",8287:"badb7eb9813a04dc8356"}[e]+".js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=s[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={81:1};a.f.i=(t,s)=>{e[t]||importScripts(a.p+a.u(t))};var t=self.webpackChunktelegram_t=self.webpackChunktelegram_t||[],s=t.push.bind(t);t.push=t=>{var[n,i,o]=t;for(var r in i)a.o(i,r)&&(a.m[r]=i[r]);for(o&&o(a);n.length;)e[n.pop()]=1;s(t)}})(),t=a.x,a.x=()=>Promise.all([a.e(8287),a.e(2066)]).then(t),a.x()})();
//# sourceMappingURL=81.e3cf1145c866db9d6368.js.map